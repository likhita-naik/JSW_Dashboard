var fabric=fabric||{version:"5.2.1"};if(typeof exports<"u"?exports.fabric=fabric:"function"==typeof define&&define.amd&&define([],function(){return fabric}),typeof document<"u"&&typeof window<"u")fabric.document=document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?document:document.implementation.createHTMLDocument(""),fabric.window=window;else{var jsdom=require("jsdom"),virtualWindow=new jsdom.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;fabric.document=virtualWindow.document,fabric.jsdomImplForWrapper=require("jsdom/lib/jsdom/living/generated/utils").implForWrapper,fabric.nodeCanvas=require("jsdom/lib/jsdom/utils").Canvas,fabric.window=virtualWindow,DOMParser=fabric.window.DOMParser}function resizeCanvasIfNeeded(h){var n=h.targetCanvas,t=h.destinationWidth,e=h.destinationHeight;n.width===t&&n.height===e||(n.width=t,n.height=e)}function copyGLTo2DDrawImage(h,n){var a=h.canvas,l=n.targetCanvas,t=l.getContext("2d");t.translate(0,l.height),t.scale(1,-1),t.drawImage(a,0,a.height-l.height,l.width,l.height,0,0,l.width,l.height)}function copyGLTo2DPutImageData(h,n){var a=n.targetCanvas.getContext("2d"),l=n.destinationWidth,t=n.destinationHeight,e=l*t*4,i=new Uint8Array(this.imageBuffer,0,e),s=new Uint8ClampedArray(this.imageBuffer,0,e);h.readPixels(0,0,l,t,h.RGBA,h.UNSIGNED_BYTE,i);var r=new ImageData(s,l,t);a.putImageData(r,0,0)}fabric.isTouchSupported="ontouchstart"in fabric.window||"ontouchstart"in fabric.document||fabric.window&&fabric.window.navigator&&0<fabric.window.navigator.maxTouchPoints,fabric.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",fabric.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",fabric.commaWsp="(?:\\s+,?\\s*|,\\s*)",fabric.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,fabric.reNonWord=/[ \n\.,;!\?\-]/,fabric.fontPaths={},fabric.iMatrix=[1,0,0,1,0,0],fabric.svgNS="http://www.w3.org/2000/svg",fabric.perfLimitSizeTotal=2097152,fabric.maxCacheSideLimit=4096,fabric.minCacheSideLimit=256,fabric.charWidthsCache={},fabric.textureSize=2048,fabric.disableStyleCopyPaste=!1,fabric.enableGLFiltering=!0,fabric.devicePixelRatio=fabric.window.devicePixelRatio||fabric.window.webkitDevicePixelRatio||fabric.window.mozDevicePixelRatio||1,fabric.browserShadowBlurConstant=1,fabric.arcToSegmentsCache={},fabric.boundsOfCurveCache={},fabric.cachesBoundsOfCurve=!0,fabric.forceGLPutImageData=!1,fabric.initFilterBackend=function(){return fabric.enableGLFiltering&&fabric.isWebglSupported&&fabric.isWebglSupported(fabric.textureSize)?(console.log("max texture size: "+fabric.maxTextureSize),new fabric.WebglFilterBackend({tileSize:fabric.textureSize})):fabric.Canvas2dFilterBackend?new fabric.Canvas2dFilterBackend:void 0},typeof document<"u"&&typeof window<"u"&&(window.fabric=fabric),function(){function h(a,l){if(this.__eventListeners[a]){var t=this.__eventListeners[a];l?t[t.indexOf(l)]=!1:fabric.util.array.fill(t,!1)}}function n(a,l){var t=function(){l.apply(this,arguments),this.off(a,t)}.bind(this);this.on(a,t)}fabric.Observable={fire:function(a,l){if(!this.__eventListeners)return this;var t=this.__eventListeners[a];if(!t)return this;for(var e=0,i=t.length;e<i;e++)t[e]&&t[e].call(this,l||{});return this.__eventListeners[a]=t.filter(function(s){return!1!==s}),this},on:function(a,l){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var t in a)this.on(t,a[t]);else this.__eventListeners[a]||(this.__eventListeners[a]=[]),this.__eventListeners[a].push(l);return this},once:function(a,l){if(1===arguments.length)for(var t in a)n.call(this,t,a[t]);else n.call(this,a,l);return this},off:function(a,l){if(!this.__eventListeners)return this;if(0===arguments.length)for(a in this.__eventListeners)h.call(this,a);else if(1===arguments.length&&"object"==typeof a)for(var t in a)h.call(this,t,a[t]);else h.call(this,a,l);return this}}}(),fabric.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var h=0,n=arguments.length;h<n;h++)this._onObjectAdded(arguments[h]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(h,n,a){var l=this._objects;return a?l[n]=h:l.splice(n,0,h),this._onObjectAdded&&this._onObjectAdded(h),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var h,n=this._objects,a=!1,l=0,t=arguments.length;l<t;l++)-1!==(h=n.indexOf(arguments[l]))&&(a=!0,n.splice(h,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[l]));return this.renderOnAddRemove&&a&&this.requestRenderAll(),this},forEachObject:function(h,n){for(var a=this.getObjects(),l=0,t=a.length;l<t;l++)h.call(n,a[l],l,a);return this},getObjects:function(h){return void 0===h?this._objects.concat():this._objects.filter(function(n){return n.type===h})},item:function(h){return this._objects[h]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(h,n){return-1<this._objects.indexOf(h)||!!n&&this._objects.some(function(a){return"function"==typeof a.contains&&a.contains(h,!0)})},complexity:function(){return this._objects.reduce(function(h,n){return h+(n.complexity?n.complexity():0)},0)}},fabric.CommonMethods={_setOptions:function(h){for(var n in h)this.set(n,h[n])},_initGradient:function(h,n){!h||!h.colorStops||h instanceof fabric.Gradient||this.set(n,new fabric.Gradient(h))},_initPattern:function(h,n,a){!h||!h.source||h instanceof fabric.Pattern?a&&a():this.set(n,new fabric.Pattern(h,a))},_setObject:function(h){for(var n in h)this._set(n,h[n])},set:function(h,n){return"object"==typeof h?this._setObject(h):this._set(h,n),this},_set:function(h,n){this[h]=n},toggle:function(h){var n=this.get(h);return"boolean"==typeof n&&this.set(h,!n),this},get:function(h){return this[h]}},function(h){var n=Math.sqrt,a=Math.atan2,l=Math.pow,t=Math.PI/180,e=Math.PI/2;fabric.util={cos:function(i){if(0===i)return 1;switch(i<0&&(i=-i),i/e){case 1:case 3:return 0;case 2:return-1}return Math.cos(i)},sin:function(i){if(0===i)return 0;var s=1;switch(i<0&&(s=-1),i/e){case 1:return s;case 2:return 0;case 3:return-s}return Math.sin(i)},removeFromArray:function(i,s){var r=i.indexOf(s);return-1!==r&&i.splice(r,1),i},getRandomInt:function(i,s){return Math.floor(Math.random()*(s-i+1))+i},degreesToRadians:function(i){return i*t},radiansToDegrees:function(i){return i/t},rotatePoint:function(i,s,r){var o=new fabric.Point(i.x-s.x,i.y-s.y),f=fabric.util.rotateVector(o,r);return new fabric.Point(f.x,f.y).addEquals(s)},rotateVector:function(i,s){var r=fabric.util.sin(s),o=fabric.util.cos(s);return{x:i.x*o-i.y*r,y:i.x*r+i.y*o}},createVector:function(i,s){return new fabric.Point(s.x-i.x,s.y-i.y)},calcAngleBetweenVectors:function(i,s){return Math.acos((i.x*s.x+i.y*s.y)/(Math.hypot(i.x,i.y)*Math.hypot(s.x,s.y)))},getHatVector:function(i){return new fabric.Point(i.x,i.y).multiply(1/Math.hypot(i.x,i.y))},getBisector:function(i,s,r){var o=fabric.util.createVector(i,s),f=fabric.util.createVector(i,r),m=fabric.util.calcAngleBetweenVectors(o,f),y=m*(0===fabric.util.calcAngleBetweenVectors(fabric.util.rotateVector(o,m),f)?1:-1)/2;return{vector:fabric.util.getHatVector(fabric.util.rotateVector(o,y)),angle:m}},projectStrokeOnPoints:function(i,s,r){var o=[],f=s.strokeWidth/2,m=s.strokeUniform?new fabric.Point(1/s.scaleX,1/s.scaleY):new fabric.Point(1,1),y=function(C){var w=f/Math.hypot(C.x,C.y);return new fabric.Point(C.x*w*m.x,C.y*w*m.y)};return i.length<=1||i.forEach(function(C,w){var E,M,N=new fabric.Point(C.x,C.y);0===w?(M=i[w+1],E=r?y(fabric.util.createVector(M,N)).addEquals(N):i[i.length-1]):w===i.length-1?(E=i[w-1],M=r?y(fabric.util.createVector(E,N)).addEquals(N):i[0]):(E=i[w-1],M=i[w+1]);var H,nt,rt=fabric.util.getBisector(N,E,M),g=rt.vector;if("miter"===s.strokeLineJoin&&(H=-f/Math.sin(rt.angle/2),nt=new fabric.Point(g.x*H*m.x,g.y*H*m.y),Math.hypot(nt.x,nt.y)/f<=s.strokeMiterLimit))return o.push(N.add(nt)),void o.push(N.subtract(nt));H=-f*Math.SQRT2,nt=new fabric.Point(g.x*H*m.x,g.y*H*m.y),o.push(N.add(nt)),o.push(N.subtract(nt))}),o},transformPoint:function(i,s,r){return r?new fabric.Point(s[0]*i.x+s[2]*i.y,s[1]*i.x+s[3]*i.y):new fabric.Point(s[0]*i.x+s[2]*i.y+s[4],s[1]*i.x+s[3]*i.y+s[5])},makeBoundingBoxFromPoints:function(i,s){if(s)for(var r=0;r<i.length;r++)i[r]=fabric.util.transformPoint(i[r],s);var o=[i[0].x,i[1].x,i[2].x,i[3].x],f=fabric.util.array.min(o),m=fabric.util.array.max(o)-f,y=[i[0].y,i[1].y,i[2].y,i[3].y],C=fabric.util.array.min(y);return{left:f,top:C,width:m,height:fabric.util.array.max(y)-C}},invertTransform:function(i){var s=1/(i[0]*i[3]-i[1]*i[2]),r=[s*i[3],-s*i[1],-s*i[2],s*i[0]],o=fabric.util.transformPoint({x:i[4],y:i[5]},r,!0);return r[4]=-o.x,r[5]=-o.y,r},toFixed:function(i,s){return parseFloat(Number(i).toFixed(s))},parseUnit:function(i,s){var r=/\D{0,2}$/.exec(i),o=parseFloat(i);switch(s||(s=fabric.Text.DEFAULT_SVG_FONT_SIZE),r[0]){case"mm":return o*fabric.DPI/25.4;case"cm":return o*fabric.DPI/2.54;case"in":return o*fabric.DPI;case"pt":return o*fabric.DPI/72;case"pc":return o*fabric.DPI/72*12;case"em":return o*s;default:return o}},falseFunction:function(){return!1},getKlass:function(i,s){return i=fabric.util.string.camelize(i.charAt(0).toUpperCase()+i.slice(1)),fabric.util.resolveNamespace(s)[i]},getSvgAttributes:function(i){var s=["instantiated_by_use","style","id","class"];switch(i){case"linearGradient":s=s.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":s=s.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":s=s.concat(["offset","stop-color","stop-opacity"])}return s},resolveNamespace:function(i){if(!i)return fabric;var s,r=i.split("."),o=r.length,f=h||fabric.window;for(s=0;s<o;++s)f=f[r[s]];return f},loadImage:function(i,s,r,o){if(i){var f=fabric.util.createImage(),m=function(){s&&s.call(r,f,!1),f=f.onload=f.onerror=null};f.onload=m,f.onerror=function(){fabric.log("Error loading "+f.src),s&&s.call(r,null,!0),f=f.onload=f.onerror=null},0!==i.indexOf("data")&&null!=o&&(f.crossOrigin=o),"data:image/svg"===i.substring(0,14)&&(f.onload=null,fabric.util.loadImageInDom(f,m)),f.src=i}else s&&s.call(r,i)},loadImageInDom:function(i,s){var r=fabric.document.createElement("div");r.style.width=r.style.height="1px",r.style.left=r.style.top="-100%",r.style.position="absolute",r.appendChild(i),fabric.document.querySelector("body").appendChild(r),i.onload=function(){s(),r.parentNode.removeChild(r),r=null}},enlivenObjects:function(i,s,r,o){var f=[],m=0,y=(i=i||[]).length;function C(){++m===y&&s&&s(f.filter(function(w){return w}))}y?i.forEach(function(w,E){w&&w.type?fabric.util.getKlass(w.type,r).fromObject(w,function(M,N){N||(f[E]=M),o&&o(w,M,N),C()}):C()}):s&&s(f)},enlivenObjectEnlivables:function(i,s,r){var o=fabric.Object.ENLIVEN_PROPS.filter(function(f){return!!i[f]});fabric.util.enlivenObjects(o.map(function(f){return i[f]}),function(f){var m={};o.forEach(function(y,C){m[y]=f[C],s&&(s[y]=f[C])}),r&&r(m)})},enlivenPatterns:function(i,s){function r(){++f===m&&s&&s(o)}var o=[],f=0,m=(i=i||[]).length;m?i.forEach(function(y,C){y&&y.source?new fabric.Pattern(y,function(w){o[C]=w,r()}):(o[C]=y,r())}):s&&s(o)},groupSVGElements:function(i,s,r){var o;return i&&1===i.length?i[0]:(s&&(s.width&&s.height?s.centerPoint={x:s.width/2,y:s.height/2}:(delete s.width,delete s.height)),o=new fabric.Group(i,s),void 0!==r&&(o.sourcePath=r),o)},populateWithProperties:function(i,s,r){if(r&&Array.isArray(r))for(var o=0,f=r.length;o<f;o++)r[o]in i&&(s[r[o]]=i[r[o]])},createCanvasElement:function(){return fabric.document.createElement("canvas")},copyCanvasElement:function(i){var s=fabric.util.createCanvasElement();return s.width=i.width,s.height=i.height,s.getContext("2d").drawImage(i,0,0),s},toDataURL:function(i,s,r){return i.toDataURL("image/"+s,r)},createImage:function(){return fabric.document.createElement("img")},multiplyTransformMatrices:function(i,s,r){return[i[0]*s[0]+i[2]*s[1],i[1]*s[0]+i[3]*s[1],i[0]*s[2]+i[2]*s[3],i[1]*s[2]+i[3]*s[3],r?0:i[0]*s[4]+i[2]*s[5]+i[4],r?0:i[1]*s[4]+i[3]*s[5]+i[5]]},qrDecompose:function(i){var s=a(i[1],i[0]),r=l(i[0],2)+l(i[1],2),o=n(r),f=(i[0]*i[3]-i[2]*i[1])/o,m=a(i[0]*i[2]+i[1]*i[3],r);return{angle:s/t,scaleX:o,scaleY:f,skewX:m/t,skewY:0,translateX:i[4],translateY:i[5]}},calcRotateMatrix:function(i){if(!i.angle)return fabric.iMatrix.concat();var s=fabric.util.degreesToRadians(i.angle),r=fabric.util.cos(s),o=fabric.util.sin(s);return[r,o,-o,r,0,0]},calcDimensionsMatrix:function(i){var s=void 0===i.scaleX?1:i.scaleX,r=void 0===i.scaleY?1:i.scaleY,o=[i.flipX?-s:s,0,0,i.flipY?-r:r,0,0],f=fabric.util.multiplyTransformMatrices,m=fabric.util.degreesToRadians;return i.skewX&&(o=f(o,[1,0,Math.tan(m(i.skewX)),1],!0)),i.skewY&&(o=f(o,[1,Math.tan(m(i.skewY)),0,1],!0)),o},composeMatrix:function(i){var s=[1,0,0,1,i.translateX||0,i.translateY||0],r=fabric.util.multiplyTransformMatrices;return i.angle&&(s=r(s,fabric.util.calcRotateMatrix(i))),(1!==i.scaleX||1!==i.scaleY||i.skewX||i.skewY||i.flipX||i.flipY)&&(s=r(s,fabric.util.calcDimensionsMatrix(i))),s},resetObjectTransform:function(i){i.scaleX=1,i.scaleY=1,i.skewX=0,i.skewY=0,i.flipX=!1,i.flipY=!1,i.rotate(0)},saveObjectTransform:function(i){return{scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,angle:i.angle,left:i.left,flipX:i.flipX,flipY:i.flipY,top:i.top}},isTransparent:function(i,s,r,o){0<o&&(o<s?s-=o:s=0,o<r?r-=o:r=0);var f,m=!0,y=i.getImageData(s,r,2*o||1,2*o||1),C=y.data.length;for(f=3;f<C&&(m=y.data[f]<=0);f+=4);return y=null,m},parsePreserveAspectRatioAttribute:function(i){var s,r="meet",o=i.split(" ");return o&&o.length&&("meet"!==(r=o.pop())&&"slice"!==r?(s=r,r="meet"):o.length&&(s=o.pop())),{meetOrSlice:r,alignX:"none"!==s?s.slice(1,4):"none",alignY:"none"!==s?s.slice(5,8):"none"}},clearFabricFontCache:function(i){(i=(i||"").toLowerCase())?fabric.charWidthsCache[i]&&delete fabric.charWidthsCache[i]:fabric.charWidthsCache={}},limitDimsByArea:function(i,s){var r=Math.sqrt(s*i),o=Math.floor(s/r);return{x:Math.floor(r),y:o}},capValue:function(i,s,r){return Math.max(i,Math.min(s,r))},findScaleToFit:function(i,s){return Math.min(s.width/i.width,s.height/i.height)},findScaleToCover:function(i,s){return Math.max(s.width/i.width,s.height/i.height)},matrixToSVG:function(i){return"matrix("+i.map(function(s){return fabric.util.toFixed(s,fabric.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(i,s){var r=fabric.util.invertTransform(s),o=fabric.util.multiplyTransformMatrices(r,i.calcOwnMatrix());fabric.util.applyTransformToObject(i,o)},addTransformToObject:function(i,s){fabric.util.applyTransformToObject(i,fabric.util.multiplyTransformMatrices(s,i.calcOwnMatrix()))},applyTransformToObject:function(i,s){var r=fabric.util.qrDecompose(s),o=new fabric.Point(r.translateX,r.translateY);i.flipX=!1,i.flipY=!1,i.set("scaleX",r.scaleX),i.set("scaleY",r.scaleY),i.skewX=r.skewX,i.skewY=r.skewY,i.angle=r.angle,i.setPositionByOrigin(o,"center","center")},sizeAfterTransform:function(i,s,r){var o=i/2,f=s/2,m=[{x:-o,y:-f},{x:o,y:-f},{x:-o,y:f},{x:o,y:f}],y=fabric.util.calcDimensionsMatrix(r),C=fabric.util.makeBoundingBoxFromPoints(m,y);return{x:C.width,y:C.height}},mergeClipPaths:function(i,s){var r=i,o=s;r.inverted&&!o.inverted&&(r=s,o=i),fabric.util.applyTransformToObject(o,fabric.util.multiplyTransformMatrices(fabric.util.invertTransform(r.calcTransformMatrix()),o.calcTransformMatrix()));var f=r.inverted&&o.inverted;return f&&(r.inverted=o.inverted=!1),new fabric.Group([r],{clipPath:o,inverted:f})}}}(typeof exports<"u"?exports:this),function(){var h=Array.prototype.join,n={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},a={m:"l",M:"L"};function l(C,w,E,M){var N=Math.atan2(w,C),H=Math.atan2(M,E);return N<=H?H-N:2*Math.PI-(N-H)}function t(C,w,E){for(var g=function(et,st,ct,W,z,tt,ft){var ot=Math.PI,vt=ft*ot/180,_t=fabric.util.sin(vt),G=fabric.util.cos(vt),bt=0,Ct=0,J=-G*et*.5-_t*st*.5,Ot=-G*st*.5+_t*et*.5,Tt=(ct=Math.abs(ct))*ct,Lt=(W=Math.abs(W))*W,zt=Ot*Ot,Xt=J*J,xe=Tt*Lt-Tt*zt-Lt*Xt,_e=0;if(xe<0){var re=Math.sqrt(1-xe/(Tt*Lt));ct*=re,W*=re}else _e=(z===tt?-1:1)*Math.sqrt(xe/(Tt*zt+Lt*Xt));var se=_e*ct*Ot/W,Dt=-_e*W*J/ct,Ne=G*se-_t*Dt+.5*et,It=_t*se+G*Dt+.5*st,Nt=l(1,0,(J-se)/ct,(Ot-Dt)/W),qe=l((J-se)/ct,(Ot-Dt)/W,(-J-se)/ct,(-Ot-Dt)/W);0===tt&&0<qe?qe-=2*ot:1===tt&&qe<0&&(qe+=2*ot);for(var Je,Re,me,ye,we,Ee,ni,Mi,ze,li,Si,Me,fe,Xe,Be,ci,Ye,ce=Math.ceil(Math.abs(qe/ot*2)),O=[],I=qe/ce,X=8/3*Math.sin(I/4)*Math.sin(I/4)/Math.sin(I/2),Z=Nt+I,gt=0;gt<ce;gt++)O[gt]=(Re=Z,me=G,ye=_t,we=ct,Ee=W,ni=Ne,Mi=It,ze=X,li=bt,Si=Ct,Me=fabric.util.cos(Je=Nt),["C",li+ze*(-me*we*(fe=fabric.util.sin(Je))-ye*Ee*Me),Si+ze*(-ye*we*fe+me*Ee*Me),(ci=me*we*(Xe=fabric.util.cos(Re))-ye*Ee*(Be=fabric.util.sin(Re))+ni)+ze*(me*we*Be+ye*Ee*Xe),(Ye=ye*we*Xe+me*Ee*Be+Mi)+ze*(ye*we*Be-me*Ee*Xe),ci,Ye]),bt=O[gt][5],Ct=O[gt][6],Nt=Z,Z+=I;return O}(E[6]-C,E[7]-w,E[1],E[2],E[4],E[5],E[3]),F=0,U=g.length;F<U;F++)g[F][1]+=C,g[F][2]+=w,g[F][3]+=C,g[F][4]+=w,g[F][5]+=C,g[F][6]+=w;return g}function e(C,w,E,M){return Math.sqrt((E-C)*(E-C)+(M-w)*(M-w))}function i(C,w,E,M,N,H,nt,rt){return function(g){var F,U,et,st,ct=(st=g)*st*st,W=3*(et=g)*et*(1-et),z=3*(U=g)*(1-U)*(1-U),tt=(1-(F=g))*(1-F)*(1-F);return{x:nt*ct+N*W+E*z+C*tt,y:rt*ct+H*W+M*z+w*tt}}}function s(C,w,E,M,N,H,nt,rt){return function(g){var F=1-g;return Math.atan2(3*F*F*(M-w)+6*F*g*(H-M)+3*g*g*(rt-H),3*F*F*(E-C)+6*F*g*(N-E)+3*g*g*(nt-N))}}function r(C,w,E,M,N,H){return function(nt){var rt,g,F,U=(F=nt)*F,et=2*(g=nt)*(1-g),st=(1-(rt=nt))*(1-rt);return{x:N*U+E*et+C*st,y:H*U+M*et+w*st}}}function o(C,w,E,M,N,H){return function(nt){var rt=1-nt;return Math.atan2(2*rt*(M-w)+2*nt*(H-M),2*rt*(E-C)+2*nt*(N-E))}}function f(C,w,E){var M,N,H={x:w,y:E},nt=0;for(N=1;N<=100;N+=1)M=C(N/100),nt+=e(H.x,H.y,M.x,M.y),H=M;return nt}function y(C){for(var w,E,M,N,H=0,nt=C.length,rt=0,g=0,F=0,U=0,et=[],st=0;st<nt;st++){switch(M={x:rt,y:g,command:(w=C[st])[0]},w[0]){case"M":M.length=0,F=rt=w[1],U=g=w[2];break;case"L":M.length=e(rt,g,w[1],w[2]),rt=w[1],g=w[2];break;case"C":E=i(rt,g,w[1],w[2],w[3],w[4],w[5],w[6]),N=s(rt,g,w[1],w[2],w[3],w[4],w[5],w[6]),M.iterator=E,M.angleFinder=N,M.length=f(E,rt,g),rt=w[5],g=w[6];break;case"Q":E=r(rt,g,w[1],w[2],w[3],w[4]),N=o(rt,g,w[1],w[2],w[3],w[4]),M.iterator=E,M.angleFinder=N,M.length=f(E,rt,g),rt=w[3],g=w[4];break;case"Z":case"z":M.destX=F,M.destY=U,M.length=e(rt,g,F,U),rt=F,g=U}H+=M.length,et.push(M)}return et.push({length:H,x:rt,y:g}),et}fabric.util.joinPath=function(C){return C.map(function(w){return w.join(" ")}).join(" ")},fabric.util.parsePath=function(C){var w,E,M,N,H,nt=[],rt=[],g=fabric.rePathCommand,F="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",U="("+F+")"+fabric.commaWsp,et="([01])"+fabric.commaWsp+"?",st=new RegExp(U+"?"+U+"?"+U+et+et+U+"?("+F+")","g");if(!C||!C.match)return nt;for(var ct,W=0,z=(H=C.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;W<z;W++){N=(w=H[W]).slice(1).trim(),rt.length=0;var tt=w.charAt(0);if(ct=[tt],"a"===tt.toLowerCase())for(var ft;ft=st.exec(N);)for(var ot=1;ot<ft.length;ot++)rt.push(ft[ot]);else for(;M=g.exec(N);)rt.push(M[0]);ot=0;for(var vt=rt.length;ot<vt;ot++)E=parseFloat(rt[ot]),isNaN(E)||ct.push(E);var _t=n[tt.toLowerCase()],G=a[tt]||tt;if(ct.length-1>_t)for(var bt=1,Ct=ct.length;bt<Ct;bt+=_t)nt.push([tt].concat(ct.slice(bt,bt+_t))),tt=G;else nt.push(ct)}return nt},fabric.util.makePathSimpler=function(C){var w,E,M,N,H,nt,rt=0,g=0,F=C.length,U=0,et=0,st=[];for(E=0;E<F;++E){switch(M=!1,(w=C[E].slice(0))[0]){case"l":w[0]="L",w[1]+=rt,w[2]+=g;case"L":rt=w[1],g=w[2];break;case"h":w[1]+=rt;case"H":w[0]="L",w[2]=g,rt=w[1];break;case"v":w[1]+=g;case"V":w[0]="L",g=w[1],w[1]=rt,w[2]=g;break;case"m":w[0]="M",w[1]+=rt,w[2]+=g;case"M":rt=w[1],g=w[2],U=w[1],et=w[2];break;case"c":w[0]="C",w[1]+=rt,w[2]+=g,w[3]+=rt,w[4]+=g,w[5]+=rt,w[6]+=g;case"C":H=w[3],nt=w[4],rt=w[5],g=w[6];break;case"s":w[0]="S",w[1]+=rt,w[2]+=g,w[3]+=rt,w[4]+=g;case"S":"C"===N?(H=2*rt-H,nt=2*g-nt):(H=rt,nt=g),rt=w[3],g=w[4],w[0]="C",w[5]=w[3],w[6]=w[4],w[3]=w[1],w[4]=w[2],w[1]=H,w[2]=nt,H=w[3],nt=w[4];break;case"q":w[0]="Q",w[1]+=rt,w[2]+=g,w[3]+=rt,w[4]+=g;case"Q":H=w[1],nt=w[2],rt=w[3],g=w[4];break;case"t":w[0]="T",w[1]+=rt,w[2]+=g;case"T":"Q"===N?(H=2*rt-H,nt=2*g-nt):(H=rt,nt=g),w[0]="Q",rt=w[1],g=w[2],w[1]=H,w[2]=nt,w[3]=rt,w[4]=g;break;case"a":w[0]="A",w[6]+=rt,w[7]+=g;case"A":M=!0,st=st.concat(t(rt,g,w)),rt=w[6],g=w[7];break;case"z":case"Z":rt=U,g=et}M||st.push(w),N=w[0]}return st},fabric.util.getSmoothPathFromPoints=function(C,w){var E,M=[],N=new fabric.Point(C[0].x,C[0].y),H=new fabric.Point(C[1].x,C[1].y),nt=C.length,rt=1,g=0,F=2<nt;for(F&&(rt=C[2].x<H.x?-1:C[2].x===H.x?0:1,g=C[2].y<H.y?-1:C[2].y===H.y?0:1),M.push(["M",N.x-rt*(w=w||0),N.y-g*w]),E=1;E<nt;E++){if(!N.eq(H)){var U=N.midPointFrom(H);M.push(["Q",N.x,N.y,U.x,U.y])}N=C[E],E+1<C.length&&(H=C[E+1])}return F&&(rt=N.x>C[E-2].x?1:N.x===C[E-2].x?0:-1,g=N.y>C[E-2].y?1:N.y===C[E-2].y?0:-1),M.push(["L",N.x+rt*w,N.y+g*w]),M},fabric.util.getPathSegmentsInfo=y,fabric.util.getBoundsOfCurve=function(C,w,E,M,N,H,nt,rt){var g;if(fabric.cachesBoundsOfCurve&&(g=h.call(arguments),fabric.boundsOfCurveCache[g]))return fabric.boundsOfCurveCache[g];var F,U,et,st,ct,W,z,tt,ft=Math.sqrt,ot=Math.min,vt=Math.max,_t=Math.abs,G=[],bt=[[],[]];U=6*C-12*E+6*N,F=-3*C+9*E-9*N+3*nt,et=3*E-3*C;for(var Ct=0;Ct<2;++Ct)if(0<Ct&&(U=6*w-12*M+6*H,F=-3*w+9*M-9*H+3*rt,et=3*M-3*w),_t(F)<1e-12){if(_t(U)<1e-12)continue;0<(st=-et/U)&&st<1&&G.push(st)}else(z=U*U-4*et*F)<0||(0<(ct=(-U+(tt=ft(z)))/(2*F))&&ct<1&&G.push(ct),0<(W=(-U-tt)/(2*F))&&W<1&&G.push(W));for(var J,Tt,Lt=G.length,zt=Lt;Lt--;)J=(Tt=1-(st=G[Lt]))*Tt*Tt*C+3*Tt*Tt*st*E+3*Tt*st*st*N+st*st*st*nt,bt[0][Lt]=J,bt[1][Lt]=Tt*Tt*Tt*w+3*Tt*Tt*st*M+3*Tt*st*st*H+st*st*st*rt;bt[0][zt]=C,bt[1][zt]=w,bt[0][zt+1]=nt,bt[1][zt+1]=rt;var Xt=[{x:ot.apply(null,bt[0]),y:ot.apply(null,bt[1])},{x:vt.apply(null,bt[0]),y:vt.apply(null,bt[1])}];return fabric.cachesBoundsOfCurve&&(fabric.boundsOfCurveCache[g]=Xt),Xt},fabric.util.getPointOnPath=function(C,w,E){E||(E=y(C));for(var M=0;0<w-E[M].length&&M<E.length-2;)w-=E[M].length,M++;var N,H=E[M],nt=w/H.length,g=C[M];switch(H.command){case"M":return{x:H.x,y:H.y,angle:0};case"Z":case"z":return(N=new fabric.Point(H.x,H.y).lerp(new fabric.Point(H.destX,H.destY),nt)).angle=Math.atan2(H.destY-H.y,H.destX-H.x),N;case"L":return(N=new fabric.Point(H.x,H.y).lerp(new fabric.Point(g[1],g[2]),nt)).angle=Math.atan2(g[2]-H.y,g[1]-H.x),N;case"C":case"Q":return function m(C,w){for(var E,M,N,H=0,nt=0,rt=C.iterator,g={x:C.x,y:C.y},F=.01,U=C.angleFinder;nt<w&&1e-4<F;)E=rt(H),N=H,w<(M=e(g.x,g.y,E.x,E.y))+nt?(H-=F,F/=2):(g=E,H+=F,nt+=M);return E.angle=U(N),E}(H,w)}},fabric.util.transformPath=function(C,w,E){return E&&(w=fabric.util.multiplyTransformMatrices(w,[1,0,0,1,-E.x,-E.y])),C.map(function(M){for(var N=M.slice(0),H={},nt=1;nt<M.length-1;nt+=2)H.x=M[nt],H.y=M[nt+1],H=fabric.util.transformPoint(H,w),N[nt]=H.x,N[nt+1]=H.y;return N})}}(),function(){var h=Array.prototype.slice;function n(a,l,t){if(a&&0!==a.length){var e=a.length-1,i=l?a[e][l]:a[e];if(l)for(;e--;)t(a[e][l],i)&&(i=a[e][l]);else for(;e--;)t(a[e],i)&&(i=a[e]);return i}}fabric.util.array={fill:function(a,l){for(var t=a.length;t--;)a[t]=l;return a},invoke:function(a,l){for(var t=h.call(arguments,2),e=[],i=0,s=a.length;i<s;i++)e[i]=t.length?a[i][l].apply(a[i],t):a[i][l].call(a[i]);return e},min:function(a,l){return n(a,l,function(t,e){return t<e})},max:function(a,l){return n(a,l,function(t,e){return e<=t})}}}(),function(){function h(n,a,l){if(l)if(!fabric.isLikelyNode&&a instanceof Element)n=a;else if(a instanceof Array){n=[];for(var t=0,e=a.length;t<e;t++)n[t]=h({},a[t],l)}else if(a&&"object"==typeof a)for(var i in a)"canvas"===i||"group"===i?n[i]=null:a.hasOwnProperty(i)&&(n[i]=h({},a[i],l));else n=a;else for(var i in a)n[i]=a[i];return n}fabric.util.object={extend:h,clone:function(n,a){return h({},n,a)}},fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){function h(n,a){var l=n.charCodeAt(a);if(isNaN(l))return"";if(l<55296||57343<l)return n.charAt(a);if(55296<=l&&l<=56319){if(n.length<=a+1)throw"High surrogate without following low surrogate";var t=n.charCodeAt(a+1);if(t<56320||57343<t)throw"High surrogate without following low surrogate";return n.charAt(a)+n.charAt(a+1)}if(0===a)throw"Low surrogate without preceding high surrogate";var e=n.charCodeAt(a-1);if(e<55296||56319<e)throw"Low surrogate without preceding high surrogate";return!1}fabric.util.string={camelize:function(n){return n.replace(/-+(.)?/g,function(a,l){return l?l.toUpperCase():""})},capitalize:function(n,a){return n.charAt(0).toUpperCase()+(a?n.slice(1):n.slice(1).toLowerCase())},escapeXml:function(n){return n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(n){var a,l=0,t=[];for(l=0;l<n.length;l++)!1!==(a=h(n,l))&&t.push(a);return t}}}(),function(){var h=Array.prototype.slice,n=function(){},a=function(){for(var i in{toString:1})if("toString"===i)return!1;return!0}(),l=function(i,s,r){for(var o in s)i.prototype[o]=o in i.prototype&&"function"==typeof i.prototype[o]&&-1<(s[o]+"").indexOf("callSuper")?function(f){return function(){var m=this.constructor.superclass;this.constructor.superclass=r;var y=s[f].apply(this,arguments);if(this.constructor.superclass=m,"initialize"!==f)return y}}(o):s[o],a&&(s.toString!==Object.prototype.toString&&(i.prototype.toString=s.toString),s.valueOf!==Object.prototype.valueOf&&(i.prototype.valueOf=s.valueOf))};function t(){}function e(i){for(var s=null,r=this;r.constructor.superclass;){var o=r.constructor.superclass.prototype[i];if(r[i]!==o){s=o;break}r=r.constructor.superclass.prototype}return s?1<arguments.length?s.apply(this,h.call(arguments,1)):s.call(this):console.log("tried to callSuper "+i+", method not found in prototype chain",this)}fabric.util.createClass=function(){var i=null,s=h.call(arguments,0);function r(){this.initialize.apply(this,arguments)}"function"==typeof s[0]&&(i=s.shift()),r.superclass=i,r.subclasses=[],i&&(t.prototype=i.prototype,r.prototype=new t,i.subclasses.push(r));for(var o=0,f=s.length;o<f;o++)l(r,s[o],i);return r.prototype.initialize||(r.prototype.initialize=n),(r.prototype.constructor=r).prototype.callSuper=e,r}}(),function(){var h=!!fabric.document.createElement("div").attachEvent,n=["touchstart","touchmove","touchend"];fabric.util.addListener=function(a,l,t,e){a&&a.addEventListener(l,t,!h&&e)},fabric.util.removeListener=function(a,l,t,e){a&&a.removeEventListener(l,t,!h&&e)},fabric.util.getPointer=function(a){var l,t,i=fabric.util.getScrollLeftTop(a.target),s=(t=(l=a).changedTouches)&&t[0]?t[0]:l;return{x:s.clientX+i.left,y:s.clientY+i.top}},fabric.util.isTouchEvent=function(a){return-1<n.indexOf(a.type)||"touch"===a.pointerType}}(),function(){var h=fabric.document.createElement("div"),l=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,t=function(e){return e};"string"==typeof h.style.opacity?t=function(e,i){return e.style.opacity=i,e}:"string"==typeof h.style.filter&&(t=function(e,i){var s=e.style;return e.currentStyle&&!e.currentStyle.hasLayout&&(s.zoom=1),l.test(s.filter)?s.filter=s.filter.replace(l,i=.9999<=i?"":"alpha(opacity="+100*i+")"):s.filter+=" alpha(opacity="+100*i+")",e}),fabric.util.setStyle=function(e,i){var s=e.style;if(!s)return e;if("string"==typeof i)return e.style.cssText+=";"+i,-1<i.indexOf("opacity")?t(e,i.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var r in i)"opacity"===r?t(e,i[r]):s["float"===r||"cssFloat"===r?void 0===s.styleFloat?"cssFloat":"styleFloat":r]=i[r];return e}}(),function(){var n,a,l,t,h=Array.prototype.slice,e=function(r){return h.call(r,0)};try{n=e(fabric.document.childNodes)instanceof Array}catch{}function i(r,o){var f=fabric.document.createElement(r);for(var m in o)"class"===m?f.className=o[m]:"for"===m?f.htmlFor=o[m]:f.setAttribute(m,o[m]);return f}function s(r){for(var o=0,f=0,m=fabric.document.documentElement,y=fabric.document.body||{scrollLeft:0,scrollTop:0};r&&(r.parentNode||r.host)&&((r=r.parentNode||r.host)===fabric.document?(o=y.scrollLeft||m.scrollLeft||0,f=y.scrollTop||m.scrollTop||0):(o+=r.scrollLeft||0,f+=r.scrollTop||0),1!==r.nodeType||"fixed"!==r.style.position););return{left:o,top:f}}n||(e=function(r){for(var o=new Array(r.length),f=r.length;f--;)o[f]=r[f];return o}),a=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(r,o){var f=fabric.document.defaultView.getComputedStyle(r,null);return f?f[o]:void 0}:function(r,o){var f=r.style[o];return!f&&r.currentStyle&&(f=r.currentStyle[o]),f},t="userSelect"in(l=fabric.document.documentElement.style)?"userSelect":"MozUserSelect"in l?"MozUserSelect":"WebkitUserSelect"in l?"WebkitUserSelect":"KhtmlUserSelect"in l?"KhtmlUserSelect":"",fabric.util.makeElementUnselectable=function(r){return void 0!==r.onselectstart&&(r.onselectstart=fabric.util.falseFunction),t?r.style[t]="none":"string"==typeof r.unselectable&&(r.unselectable="on"),r},fabric.util.makeElementSelectable=function(r){return void 0!==r.onselectstart&&(r.onselectstart=null),t?r.style[t]="":"string"==typeof r.unselectable&&(r.unselectable=""),r},fabric.util.setImageSmoothing=function(r,o){r.imageSmoothingEnabled=r.imageSmoothingEnabled||r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled||r.oImageSmoothingEnabled,r.imageSmoothingEnabled=o},fabric.util.getById=function(r){return"string"==typeof r?fabric.document.getElementById(r):r},fabric.util.toArray=e,fabric.util.addClass=function(r,o){r&&-1===(" "+r.className+" ").indexOf(" "+o+" ")&&(r.className+=(r.className?" ":"")+o)},fabric.util.makeElement=i,fabric.util.wrapElement=function(r,o,f){return"string"==typeof o&&(o=i(o,f)),r.parentNode&&r.parentNode.replaceChild(o,r),o.appendChild(r),o},fabric.util.getScrollLeftTop=s,fabric.util.getElementOffset=function(r){var o,f,m=r&&r.ownerDocument,y={left:0,top:0},C={left:0,top:0},w={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!m)return C;for(var E in w)C[w[E]]+=parseInt(a(r,E),10)||0;return o=m.documentElement,void 0!==r.getBoundingClientRect&&(y=r.getBoundingClientRect()),f=s(r),{left:y.left+f.left-(o.clientLeft||0)+C.left,top:y.top+f.top-(o.clientTop||0)+C.top}},fabric.util.getNodeCanvas=function(r){var o=fabric.jsdomImplForWrapper(r);return o._canvas||o._image},fabric.util.cleanUpJsdomNode=function(r){if(fabric.isLikelyNode){var o=fabric.jsdomImplForWrapper(r);o&&(o._image=null,o._canvas=null,o._currentSrc=null,o._attributes=null,o._classList=null)}}}(),function(){function h(){}fabric.util.request=function(n,a){a||(a={});var l,t,e=a.method?a.method.toUpperCase():"GET",i=a.onComplete||function(){},s=new fabric.window.XMLHttpRequest,r=a.body||a.parameters;return s.onreadystatechange=function(){4===s.readyState&&(i(s),s.onreadystatechange=h)},"GET"===e&&(r=null,"string"==typeof a.parameters&&(t=a.parameters,n=(l=n)+(/\?/.test(l)?"&":"?")+t)),s.open(e,n,!0),"POST"!==e&&"PUT"!==e||s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(r),s}}(),fabric.log=console.log,fabric.warn=console.warn,function(){var h=fabric.util.object.extend,n=fabric.util.object.clone,a=[];function l(){return!1}function t(r,o,f,m){return-f*Math.cos(r/m*(Math.PI/2))+f+o}fabric.util.object.extend(a,{cancelAll:function(){var r=this.splice(0);return r.forEach(function(o){o.cancel()}),r},cancelByCanvas:function(r){if(!r)return[];var o=this.filter(function(f){return"object"==typeof f.target&&f.target.canvas===r});return o.forEach(function(f){f.cancel()}),o},cancelByTarget:function(r){var o=this.findAnimationsByTarget(r);return o.forEach(function(f){f.cancel()}),o},findAnimationIndex:function(r){return this.indexOf(this.findAnimation(r))},findAnimation:function(r){return this.find(function(o){return o.cancel===r})},findAnimationsByTarget:function(r){return r?this.filter(function(o){return o.target===r}):[]}});var e=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(r){return fabric.window.setTimeout(r,1e3/60)},i=fabric.window.cancelAnimationFrame||fabric.window.clearTimeout;function s(){return e.apply(fabric.window,arguments)}fabric.util.animate=function(r){r||(r={});var o,f=!1,m=function(){var y=fabric.runningAnimations.indexOf(o);return-1<y&&fabric.runningAnimations.splice(y,1)[0]};return o=h(n(r),{cancel:function(){return f=!0,m()},currentValue:"startValue"in r?r.startValue:0,completionRate:0,durationRate:0}),fabric.runningAnimations.push(o),s(function(y){var C,w=y||+new Date,E=r.duration||500,M=w+E,N=r.onChange||l,H=r.abort||l,nt=r.onComplete||l,rt=r.easing||t,g="startValue"in r&&0<r.startValue.length,F="startValue"in r?r.startValue:0,U="endValue"in r?r.endValue:100,et=r.byValue||(g?F.map(function(st,ct){return U[ct]-F[ct]}):U-F);r.onStart&&r.onStart(),function st(ct){var W=M<(C=ct||+new Date)?E:C-w,z=W/E,tt=g?F.map(function(ot,vt){return rt(W,F[vt],et[vt],E)}):rt(W,F,et,E),ft=Math.abs(g?(tt[0]-F[0])/et[0]:(tt-F)/et);if(o.currentValue=g?tt.slice():tt,o.completionRate=ft,o.durationRate=z,!f){if(!H(tt,ft,z))return M<C?(o.currentValue=g?U.slice():U,o.completionRate=1,o.durationRate=1,N(g?U.slice():U,1,1),nt(U,1,1),void m()):(N(tt,ft,z),void s(st));m()}}(w)}),o.cancel},fabric.util.requestAnimFrame=s,fabric.util.cancelAnimFrame=function(){return i.apply(fabric.window,arguments)},fabric.runningAnimations=a}(),function(){function h(n,a,l){var t="rgba("+parseInt(n[0]+l*(a[0]-n[0]),10)+","+parseInt(n[1]+l*(a[1]-n[1]),10)+","+parseInt(n[2]+l*(a[2]-n[2]),10);return(t+=","+(n&&a?parseFloat(n[3]+l*(a[3]-n[3])):1))+")"}fabric.util.animateColor=function(n,a,l,t){var e=new fabric.Color(n).getSource(),i=new fabric.Color(a).getSource(),s=t.onComplete,r=t.onChange;return fabric.util.animate(fabric.util.object.extend(t=t||{},{duration:l||500,startValue:e,endValue:i,byValue:i,easing:function(o,f,m,y){return h(f,m,t.colorEasing?t.colorEasing(o,y):1-Math.cos(o/y*(Math.PI/2)))},onComplete:function(o,f,m){if(s)return s(h(i,i,0),f,m)},onChange:function(o,f,m){if(r){if(Array.isArray(o))return r(h(o,o,0),f,m);r(o,f,m)}}}))}}(),function(){function h(t,e,i,s){return t<Math.abs(e)?(t=e,s=i/4):s=0===e&&0===t?i/(2*Math.PI)*Math.asin(1):i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s}}function n(t,e,i){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*i-t.s)*(2*Math.PI)/t.p)}function a(t,e,i,s){return i-l(s-t,0,i,s)+e}function l(t,e,i,s){return(t/=s)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}fabric.util.ease={easeInQuad:function(t,e,i,s){return i*(t/=s)*t+e},easeOutQuad:function(t,e,i,s){return-i*(t/=s)*(t-2)+e},easeInOutQuad:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,s){return i*(t/=s)*t*t+e},easeOutCubic:function(t,e,i,s){return i*((t=t/s-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,s){return i*(t/=s)*t*t*t+e},easeOutQuart:function(t,e,i,s){return-i*((t=t/s-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,s){return i*(t/=s)*t*t*t*t+e},easeOutQuint:function(t,e,i,s){return i*((t=t/s-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,s){return-i*Math.cos(t/s*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,s){return i*Math.sin(t/s*(Math.PI/2))+e},easeInOutSine:function(t,e,i,s){return-i/2*(Math.cos(Math.PI*t/s)-1)+e},easeInExpo:function(t,e,i,s){return 0===t?e:i*Math.pow(2,10*(t/s-1))+e},easeOutExpo:function(t,e,i,s){return t===s?e+i:i*(1-Math.pow(2,-10*t/s))+e},easeInOutExpo:function(t,e,i,s){return 0===t?e:t===s?e+i:(t/=s/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,s){return-i*(Math.sqrt(1-(t/=s)*t)-1)+e},easeOutCirc:function(t,e,i,s){return i*Math.sqrt(1-(t=t/s-1)*t)+e},easeInOutCirc:function(t,e,i,s){return(t/=s/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,s){var r=0;return 0===t?e:1==(t/=s)?e+i:(r||(r=.3*s),-n(h(i,i,r,1.70158),t,s)+e)},easeOutElastic:function(t,e,i,s){var r=0;if(0===t)return e;if(1==(t/=s))return e+i;r||(r=.3*s);var o=h(i,i,r,1.70158);return o.a*Math.pow(2,-10*t)*Math.sin((t*s-o.s)*(2*Math.PI)/o.p)+o.c+e},easeInOutElastic:function(t,e,i,s){var r=0;if(0===t)return e;if(2==(t/=s/2))return e+i;r||(r=s*(.3*1.5));var o=h(i,i,r,1.70158);return t<1?-.5*n(o,t,s)+e:o.a*Math.pow(2,-10*(t-=1))*Math.sin((t*s-o.s)*(2*Math.PI)/o.p)*.5+o.c+e},easeInBack:function(t,e,i,s,r){return void 0===r&&(r=1.70158),i*(t/=s)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,i,s,r){return void 0===r&&(r=1.70158),i*((t=t/s-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,i,s,r){return void 0===r&&(r=1.70158),(t/=s/2)<1?i/2*(t*t*((1+(r*=1.525))*t-r))+e:i/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:a,easeOutBounce:l,easeInOutBounce:function(t,e,i,s){return t<s/2?.5*a(2*t,0,i,s)+e:.5*l(2*t-s,0,i,s)+.5*i+e}}}(),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.util.object.clone,t=n.util.toFixed,e=n.util.parseUnit,i=n.util.multiplyTransformMatrices,s={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},r={stroke:"strokeOpacity",fill:"fillOpacity"},o="font-size",f="clip-path";function m(g,F,U,et){var st,ct=Array.isArray(F);if("fill"!==g&&"stroke"!==g||"none"!==F){if("strokeUniform"===g)return"non-scaling-stroke"===F;if("strokeDashArray"===g)F="none"===F?null:F.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===g)F=U&&U.transformMatrix?i(U.transformMatrix,n.parseTransformAttribute(F)):n.parseTransformAttribute(F);else if("visible"===g)F="none"!==F&&"hidden"!==F,U&&!1===U.visible&&(F=!1);else if("opacity"===g)F=parseFloat(F),U&&void 0!==U.opacity&&(F*=U.opacity);else if("textAnchor"===g)F="start"===F?"left":"end"===F?"right":"center";else if("charSpacing"===g)st=e(F,et)/et*1e3;else if("paintFirst"===g){var W=F.indexOf("fill"),z=F.indexOf("stroke");F="fill",(-1<W&&-1<z&&z<W||-1===W&&-1<z)&&(F="stroke")}else{if("href"===g||"xlink:href"===g||"font"===g)return F;if("imageSmoothing"===g)return"optimizeQuality"===F;st=ct?F.map(e):e(F,et)}}else F="";return!ct&&isNaN(st)?F:st}function y(g){return new RegExp("^("+g.join("|")+")\\b","i")}function C(g,F){var et,st,ct,W=[];for(st=0,ct=F.length;st<ct;st++)et=g.getElementsByTagName(F[st]),W=W.concat(Array.prototype.slice.call(et));return W}function w(g,F){var U,et=!0;return(U=E(g,F.pop()))&&F.length&&(et=function(st,ct){for(var W,z=!0;st.parentNode&&1===st.parentNode.nodeType&&ct.length;)z&&(W=ct.pop()),z=E(st=st.parentNode,W);return 0===ct.length}(g,F)),U&&et&&0===F.length}function E(g,F){var U,et,st=g.nodeName,ct=g.getAttribute("class"),W=g.getAttribute("id");if(U=new RegExp("^"+st,"i"),F=F.replace(U,""),W&&F.length&&(U=new RegExp("#"+W+"(?![a-zA-Z\\-]+)","i"),F=F.replace(U,"")),ct&&F.length)for(et=(ct=ct.split(" ")).length;et--;)U=new RegExp("\\."+ct[et]+"(?![a-zA-Z\\-]+)","i"),F=F.replace(U,"");return 0===F.length}function M(g,F){var U;if(g.getElementById&&(U=g.getElementById(F)),U)return U;var et,st,ct,W=g.getElementsByTagName("*");for(st=0,ct=W.length;st<ct;st++)if(F===(et=W[st]).getAttribute("id"))return et}n.svgValidTagNamesRegEx=y(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),n.svgViewBoxElementsRegEx=y(["symbol","image","marker","pattern","view","svg"]),n.svgInvalidAncestorsRegEx=y(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),n.svgValidParentsRegEx=y(["symbol","g","a","svg","clipPath","defs"]),n.cssRules={},n.gradientDefs={},n.clipPaths={},n.parseTransformAttribute=function(){function g(z,tt,ft){z[ft]=Math.tan(n.util.degreesToRadians(tt[0]))}var F=n.iMatrix,U=n.reNum,et=n.commaWsp,st="(?:(?:(matrix)\\s*\\(\\s*("+U+")"+et+"("+U+")"+et+"("+U+")"+et+"("+U+")"+et+"("+U+")"+et+"("+U+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+U+")(?:"+et+"("+U+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+U+")(?:"+et+"("+U+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+U+")(?:"+et+"("+U+")"+et+"("+U+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+U+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+U+")\\s*\\)))",ct=new RegExp("^\\s*(?:(?:"+st+"(?:"+et+"*"+st+")*)?)\\s*$"),W=new RegExp(st,"g");return function(z){var tt=F.concat(),ft=[];if(!z||z&&!ct.test(z))return tt;z.replace(W,function(vt){var _t,G,bt,Ct,J,Ot,Tt,Lt,zt,Xt,xe,_e,re=new RegExp(st).exec(vt).filter(function(Ne){return!!Ne}),se=re[1],Dt=re.slice(2).map(parseFloat);switch(se){case"translate":(xe=tt)[4]=(_e=Dt)[0],2===_e.length&&(xe[5]=_e[1]);break;case"rotate":Dt[0]=n.util.degreesToRadians(Dt[0]),J=tt,Tt=n.util.cos((Ot=Dt)[0]),Lt=n.util.sin(Ot[0]),Xt=zt=0,3===Ot.length&&(zt=Ot[1],Xt=Ot[2]),J[0]=Tt,J[1]=Lt,J[2]=-Lt,J[3]=Tt,J[4]=zt-(Tt*zt-Lt*Xt),J[5]=Xt-(Lt*zt+Tt*Xt);break;case"scale":bt=(G=Dt)[0],Ct=2===G.length?G[1]:G[0],(_t=tt)[0]=bt,_t[3]=Ct;break;case"skewX":g(tt,Dt,2);break;case"skewY":g(tt,Dt,1);break;case"matrix":tt=Dt}ft.push(tt.concat()),tt=F.concat()});for(var ot=ft[0];1<ft.length;)ft.shift(),ot=n.util.multiplyTransformMatrices(ot,ft[0]);return ot}}();var N=new RegExp("^\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*$");function H(g){if(!n.svgViewBoxElementsRegEx.test(g.nodeName))return{};var F,U,et,st,ct,W,z=g.getAttribute("viewBox"),tt=1,ft=1,ot=g.getAttribute("width"),vt=g.getAttribute("height"),_t=g.getAttribute("x")||0,G=g.getAttribute("y")||0,bt=g.getAttribute("preserveAspectRatio")||"",Ct=!z||!(z=z.match(N)),J=!ot||!vt||"100%"===ot||"100%"===vt,Ot=Ct&&J,Tt={},Lt="",zt=0,Xt=0;if(Tt.width=0,Tt.height=0,Tt.toBeParsed=Ot,Ct&&(_t||G)&&g.parentNode&&"#document"!==g.parentNode.nodeName&&(Lt=" translate("+e(_t)+" "+e(G)+") ",ct=(g.getAttribute("transform")||"")+Lt,g.setAttribute("transform",ct),g.removeAttribute("x"),g.removeAttribute("y")),Ot)return Tt;if(Ct)return Tt.width=e(ot),Tt.height=e(vt),Tt;if(F=-parseFloat(z[1]),U=-parseFloat(z[2]),et=parseFloat(z[3]),st=parseFloat(z[4]),Tt.minX=F,Tt.minY=U,Tt.viewBoxWidth=et,Tt.viewBoxHeight=st,J?(Tt.width=et,Tt.height=st):(Tt.width=e(ot),Tt.height=e(vt),tt=Tt.width/et,ft=Tt.height/st),"none"!==(bt=n.util.parsePreserveAspectRatioAttribute(bt)).alignX&&("meet"===bt.meetOrSlice&&(ft=tt=ft<tt?ft:tt),"slice"===bt.meetOrSlice&&(ft=tt=ft<tt?tt:ft),zt=Tt.width-et*tt,Xt=Tt.height-st*tt,"Mid"===bt.alignX&&(zt/=2),"Mid"===bt.alignY&&(Xt/=2),"Min"===bt.alignX&&(zt=0),"Min"===bt.alignY&&(Xt=0)),1===tt&&1===ft&&0===F&&0===U&&0===_t&&0===G)return Tt;if((_t||G)&&"#document"!==g.parentNode.nodeName&&(Lt=" translate("+e(_t)+" "+e(G)+") "),ct=Lt+" matrix("+tt+" 0 0 "+ft+" "+(F*tt+zt)+" "+(U*ft+Xt)+") ","svg"===g.nodeName){for(W=g.ownerDocument.createElementNS(n.svgNS,"g");g.firstChild;)W.appendChild(g.firstChild);g.appendChild(W)}else(W=g).removeAttribute("x"),W.removeAttribute("y"),ct=W.getAttribute("transform")+ct;return W.setAttribute("transform",ct),Tt}function nt(g,F){var U="xlink:href",et=M(g,F.getAttribute(U).slice(1));if(et&&et.getAttribute(U)&&nt(g,et),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach(function(ct){et&&!F.hasAttribute(ct)&&et.hasAttribute(ct)&&F.setAttribute(ct,et.getAttribute(ct))}),!F.children.length)for(var st=et.cloneNode(!0);st.firstChild;)F.appendChild(st.firstChild);F.removeAttribute(U)}n.parseSVGDocument=function(g,F,U,et){if(g){!function(_t){for(var G=C(_t,["use","svg:use"]),bt=0;G.length&&bt<G.length;){var Ct=G[bt],J=Ct.getAttribute("xlink:href")||Ct.getAttribute("href");if(null===J)return;var Ot,Tt,Lt,zt,Xt=J.slice(1),xe=Ct.getAttribute("x")||0,_e=Ct.getAttribute("y")||0,re=M(_t,Xt).cloneNode(!0),se=(re.getAttribute("transform")||"")+" translate("+xe+", "+_e+")",Dt=G.length,Ne=n.svgNS;if(H(re),/^svg$/i.test(re.nodeName)){var It=re.ownerDocument.createElementNS(Ne,"g");for(Tt=0,zt=(Lt=re.attributes).length;Tt<zt;Tt++)Ot=Lt.item(Tt),It.setAttributeNS(Ne,Ot.nodeName,Ot.nodeValue);for(;re.firstChild;)It.appendChild(re.firstChild);re=It}for(Tt=0,zt=(Lt=Ct.attributes).length;Tt<zt;Tt++)"x"!==(Ot=Lt.item(Tt)).nodeName&&"y"!==Ot.nodeName&&"xlink:href"!==Ot.nodeName&&"href"!==Ot.nodeName&&("transform"===Ot.nodeName?se=Ot.nodeValue+" "+se:re.setAttribute(Ot.nodeName,Ot.nodeValue));re.setAttribute("transform",se),re.setAttribute("instantiated_by_use","1"),re.removeAttribute("id"),Ct.parentNode.replaceChild(re,Ct),G.length===Dt&&bt++}}(g);var st,ct,W=n.Object.__uid++,z=H(g),tt=n.util.toArray(g.getElementsByTagName("*"));if(z.crossOrigin=et&&et.crossOrigin,z.svgUid=W,0===tt.length&&n.isLikelyNode){var ft=[];for(st=0,ct=(tt=g.selectNodes('//*[name(.)!="svg"]')).length;st<ct;st++)ft[st]=tt[st];tt=ft}var ot=tt.filter(function(_t){return H(_t),n.svgValidTagNamesRegEx.test(_t.nodeName.replace("svg:",""))&&!function(G,bt){for(;G&&(G=G.parentNode);)if(G.nodeName&&bt.test(G.nodeName.replace("svg:",""))&&!G.getAttribute("instantiated_by_use"))return!0;return!1}(_t,n.svgInvalidAncestorsRegEx)});if(!ot||ot&&!ot.length)F&&F([],{});else{var vt={};tt.filter(function(_t){return"clipPath"===_t.nodeName.replace("svg:","")}).forEach(function(_t){var G=_t.getAttribute("id");vt[G]=n.util.toArray(_t.getElementsByTagName("*")).filter(function(bt){return n.svgValidTagNamesRegEx.test(bt.nodeName.replace("svg:",""))})}),n.gradientDefs[W]=n.getGradientDefs(g),n.cssRules[W]=n.getCSSRules(g),n.clipPaths[W]=vt,n.parseElements(ot,function(_t,G){F&&(F(_t,z,G,tt),delete n.gradientDefs[W],delete n.cssRules[W],delete n.clipPaths[W])},l(z),U,et)}}};var rt=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+n.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+n.reNum+"))?\\s+(.*)");a(n,{parseFontDeclaration:function(g,F){var U=g.match(rt);if(U){var et=U[1],st=U[3],ct=U[4],W=U[5],z=U[6];et&&(F.fontStyle=et),st&&(F.fontWeight=isNaN(parseFloat(st))?st:parseFloat(st)),ct&&(F.fontSize=e(ct)),z&&(F.fontFamily=z),W&&(F.lineHeight="normal"===W?1:W)}},getGradientDefs:function(g){var F,U=C(g,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),et=0,st={};for(et=U.length;et--;)(F=U[et]).getAttribute("xlink:href")&&nt(g,F),st[F.getAttribute("id")]=F;return st},parseAttributes:function(g,F,U){if(g){var et,st,ct,W={};void 0===U&&(U=g.getAttribute("svgUid")),g.parentNode&&n.svgValidParentsRegEx.test(g.parentNode.nodeName)&&(W=n.parseAttributes(g.parentNode,F,U));var z=F.reduce(function(Ct,J){return(et=g.getAttribute(J))&&(Ct[J]=et),Ct},{}),tt=a(function(Ct,J){var Ot={};for(var Tt in n.cssRules[J])if(w(Ct,Tt.split(" ")))for(var Lt in n.cssRules[J][Tt])Ot[Lt]=n.cssRules[J][Tt][Lt];return Ot}(g,U),n.parseStyleAttribute(g));z=a(z,tt),tt[f]&&g.setAttribute(f,tt[f]),st=ct=W.fontSize||n.Text.DEFAULT_SVG_FONT_SIZE,z[o]&&(z[o]=st=e(z[o],ct));var ft,ot,vt,_t={};for(var G in z)ot=m(ft=(vt=G)in s?s[vt]:vt,z[G],W,st),_t[ft]=ot;_t&&_t.font&&n.parseFontDeclaration(_t.font,_t);var bt=a(W,_t);return n.svgValidParentsRegEx.test(g.nodeName)?bt:function(Ct){for(var J in r)if(void 0!==Ct[r[J]]&&""!==Ct[J]){if(void 0===Ct[J]){if(!n.Object.prototype[J])continue;Ct[J]=n.Object.prototype[J]}if(0!==Ct[J].indexOf("url(")){var Ot=new n.Color(Ct[J]);Ct[J]=Ot.setAlpha(t(Ot.getAlpha()*Ct[r[J]],2)).toRgba()}}return Ct}(bt)}},parseElements:function(g,F,U,et,st){new n.ElementsParser(g,F,U,et,st).parse()},parseStyleAttribute:function(g){var F,U,et,st={},ct=g.getAttribute("style");return ct&&("string"==typeof ct?(F=st,ct.replace(/;\s*$/,"").split(";").forEach(function(W){var z=W.split(":");U=z[0].trim().toLowerCase(),et=z[1].trim(),F[U]=et})):function(W,z){for(var ot in W)void 0!==W[ot]&&(z[ot.toLowerCase()]=W[ot])}(ct,st)),st},parsePointsAttribute:function(g){if(!g)return null;var F,U,et=[];for(F=0,U=(g=(g=g.replace(/,/g," ").trim()).split(/\s+/)).length;F<U;F+=2)et.push({x:parseFloat(g[F]),y:parseFloat(g[F+1])});return et},getCSSRules:function(g){var F,U,et=g.getElementsByTagName("style"),st={};for(F=0,U=et.length;F<U;F++){var ct=et[F].textContent;""!==(ct=ct.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&ct.split("}").filter(function(W){return W.trim()}).forEach(function(W){var z=W.split("{"),tt={},ft=z[1].trim().split(";").filter(function(G){return G.trim()});for(F=0,U=ft.length;F<U;F++){var ot=ft[F].split(":"),vt=ot[0].trim(),_t=ot[1].trim();tt[vt]=_t}(W=z[0].trim()).split(",").forEach(function(G){""!==(G=G.replace(/^svg/i,"").trim())&&(st[G]?n.util.object.extend(st[G],tt):st[G]=n.util.object.clone(tt))})})}return st},loadSVGFromURL:function(g,F,U,et){g=g.replace(/^\n\s*/,"").trim(),new n.util.request(g,{method:"get",onComplete:function(st){var ct=st.responseXML;if(!ct||!ct.documentElement)return F&&F(null),!1;n.parseSVGDocument(ct.documentElement,function(W,z,tt,ft){F&&F(W,z,tt,ft)},U,et)}})},loadSVGFromString:function(g,F,U,et){var st=(new n.window.DOMParser).parseFromString(g.trim(),"text/xml");n.parseSVGDocument(st.documentElement,function(ct,W,z,tt){F(ct,W,z,tt)},U,et)}})}(typeof exports<"u"?exports:this),fabric.ElementsParser=function(h,n,a,l,t,e){this.elements=h,this.callback=n,this.options=a,this.reviver=l,this.svgUid=a&&a.svgUid||0,this.parsingOptions=t,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=e},function(h){h.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},h.createObjects=function(){var n=this;this.elements.forEach(function(a,l){a.setAttribute("svgUid",n.svgUid),n.createObject(a,l)})},h.findTag=function(n){return fabric[fabric.util.string.capitalize(n.tagName.replace("svg:",""))]},h.createObject=function(n,a){var l=this.findTag(n);if(l&&l.fromElement)try{l.fromElement(n,this.createCallback(a,n),this.options)}catch(t){fabric.log(t)}else this.checkIfDone()},h.createCallback=function(n,a){var l=this;return function(t){var e;l.resolveGradient(t,a,"fill"),l.resolveGradient(t,a,"stroke"),t instanceof fabric.Image&&t._originalElement&&(e=t.parsePreserveAspectRatioAttribute(a)),t._removeTransformMatrix(e),l.resolveClipPath(t,a),l.reviver&&l.reviver(a,t),l.instances[n]=t,l.checkIfDone()}},h.extractPropertyDefinition=function(n,a,l){var t=n[a],e=this.regexUrl;if(e.test(t)){e.lastIndex=0;var i=e.exec(t)[1];return e.lastIndex=0,fabric[l][this.svgUid][i]}},h.resolveGradient=function(n,a,l){var t=this.extractPropertyDefinition(n,l,"gradientDefs");if(t){var e=a.getAttribute(l+"-opacity"),i=fabric.Gradient.fromElement(t,n,e,this.options);n.set(l,i)}},h.createClipPathCallback=function(n,a){return function(l){l._removeTransformMatrix(),l.fillRule=l.clipRule,a.push(l)}},h.resolveClipPath=function(n,a){var l,t,e,i,s=this.extractPropertyDefinition(n,"clipPath","clipPaths");if(s){e=[],t=fabric.util.invertTransform(n.calcTransformMatrix());for(var r=s[0].parentNode,o=a;o.parentNode&&o.getAttribute("clip-path")!==n.clipPath;)o=o.parentNode;o.parentNode.appendChild(r);for(var f=0;f<s.length;f++)this.findTag(l=s[f]).fromElement(l,this.createClipPathCallback(n,e),this.options);s=1===e.length?e[0]:new fabric.Group(e),i=fabric.util.multiplyTransformMatrices(t,s.calcTransformMatrix()),s.clipPath&&this.resolveClipPath(s,o);var m=fabric.util.qrDecompose(i);s.flipX=!1,s.flipY=!1,s.set("scaleX",m.scaleX),s.set("scaleY",m.scaleY),s.angle=m.angle,s.skewX=m.skewX,s.skewY=0,s.setPositionByOrigin({x:m.translateX,y:m.translateY},"center","center"),n.clipPath=s}else delete n.clipPath},h.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(n){return null!=n}),this.callback(this.instances,this.elements))}}(fabric.ElementsParser.prototype),function(h){"use strict";var n=h.fabric||(h.fabric={});function a(l,t){this.x=l,this.y=t}n.Point?n.warn("fabric.Point is already defined"):(n.Point=a).prototype={type:"point",constructor:a,add:function(l){return new a(this.x+l.x,this.y+l.y)},addEquals:function(l){return this.x+=l.x,this.y+=l.y,this},scalarAdd:function(l){return new a(this.x+l,this.y+l)},scalarAddEquals:function(l){return this.x+=l,this.y+=l,this},subtract:function(l){return new a(this.x-l.x,this.y-l.y)},subtractEquals:function(l){return this.x-=l.x,this.y-=l.y,this},scalarSubtract:function(l){return new a(this.x-l,this.y-l)},scalarSubtractEquals:function(l){return this.x-=l,this.y-=l,this},multiply:function(l){return new a(this.x*l,this.y*l)},multiplyEquals:function(l){return this.x*=l,this.y*=l,this},divide:function(l){return new a(this.x/l,this.y/l)},divideEquals:function(l){return this.x/=l,this.y/=l,this},eq:function(l){return this.x===l.x&&this.y===l.y},lt:function(l){return this.x<l.x&&this.y<l.y},lte:function(l){return this.x<=l.x&&this.y<=l.y},gt:function(l){return this.x>l.x&&this.y>l.y},gte:function(l){return this.x>=l.x&&this.y>=l.y},lerp:function(l,t){return void 0===t&&(t=.5),t=Math.max(Math.min(1,t),0),new a(this.x+(l.x-this.x)*t,this.y+(l.y-this.y)*t)},distanceFrom:function(l){var t=this.x-l.x,e=this.y-l.y;return Math.sqrt(t*t+e*e)},midPointFrom:function(l){return this.lerp(l)},min:function(l){return new a(Math.min(this.x,l.x),Math.min(this.y,l.y))},max:function(l){return new a(Math.max(this.x,l.x),Math.max(this.y,l.y))},toString:function(){return this.x+","+this.y},setXY:function(l,t){return this.x=l,this.y=t,this},setX:function(l){return this.x=l,this},setY:function(l){return this.y=l,this},setFromPoint:function(l){return this.x=l.x,this.y=l.y,this},swap:function(l){var t=this.x,e=this.y;this.x=l.x,this.y=l.y,l.x=t,l.y=e},clone:function(){return new a(this.x,this.y)}}}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={});function a(l){this.status=l,this.points=[]}n.Intersection?n.warn("fabric.Intersection is already defined"):(n.Intersection=a,n.Intersection.prototype={constructor:a,appendPoint:function(l){return this.points.push(l),this},appendPoints:function(l){return this.points=this.points.concat(l),this}},n.Intersection.intersectLineLine=function(l,t,e,i){var s,r=(i.x-e.x)*(l.y-e.y)-(i.y-e.y)*(l.x-e.x),o=(t.x-l.x)*(l.y-e.y)-(t.y-l.y)*(l.x-e.x),f=(i.y-e.y)*(t.x-l.x)-(i.x-e.x)*(t.y-l.y);if(0!==f){var m=r/f,y=o/f;0<=m&&m<=1&&0<=y&&y<=1?(s=new a("Intersection")).appendPoint(new n.Point(l.x+m*(t.x-l.x),l.y+m*(t.y-l.y))):s=new a}else s=new a(0===r||0===o?"Coincident":"Parallel");return s},n.Intersection.intersectLinePolygon=function(l,t,e){var r,o,f=new a,m=e.length;for(o=0;o<m;o++)r=a.intersectLineLine(l,t,e[o],e[(o+1)%m]),f.appendPoints(r.points);return 0<f.points.length&&(f.status="Intersection"),f},n.Intersection.intersectPolygonPolygon=function(l,t){var e,i=new a,s=l.length;for(e=0;e<s;e++){var f=a.intersectLinePolygon(l[e],l[(e+1)%s],t);i.appendPoints(f.points)}return 0<i.points.length&&(i.status="Intersection"),i},n.Intersection.intersectPolygonRectangle=function(l,t,e){var i=t.min(e),s=t.max(e),r=new n.Point(s.x,i.y),o=new n.Point(i.x,s.y),f=a.intersectLinePolygon(i,r,l),m=a.intersectLinePolygon(r,s,l),y=a.intersectLinePolygon(s,o,l),C=a.intersectLinePolygon(o,i,l),w=new a;return w.appendPoints(f.points),w.appendPoints(m.points),w.appendPoints(y.points),w.appendPoints(C.points),0<w.points.length&&(w.status="Intersection"),w})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={});function a(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function l(t,e,i){return i<0&&(i+=1),1<i&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}n.Color?n.warn("fabric.Color is already defined."):(n.Color=a,n.Color.prototype={_tryParsingColor:function(t){var e;t in a.colorNameMap&&(t=a.colorNameMap[t]),"transparent"===t&&(e=[255,255,255,0]),e||(e=a.sourceFromHex(t)),e||(e=a.sourceFromRgb(t)),e||(e=a.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,e,i){var s,r,o,f=n.util.array.max([t/=255,e/=255,i/=255]),m=n.util.array.min([t,e,i]);if(o=(f+m)/2,f===m)s=r=0;else{var y=f-m;switch(r=.5<o?y/(2-f-m):y/(f+m),f){case t:s=(e-i)/y+(e<i?6:0);break;case e:s=(i-t)/y+2;break;case i:s=(t-e)/y+4}s/=6}return[Math.round(360*s),Math.round(100*r),Math.round(100*o)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,i,s=this.getSource();return t=1===(t=s[0].toString(16)).length?"0"+t:t,e=1===(e=s[1].toString(16)).length?"0"+e:e,i=1===(i=s[2].toString(16)).length?"0"+i:i,t.toUpperCase()+e.toUpperCase()+i.toUpperCase()},toHexa:function(){var t,e=this.getSource();return t=1===(t=(t=Math.round(255*e[3])).toString(16)).length?"0"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10);return this.setSource([e,e,e,t[3]]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),s=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,s]),this},overlayWith:function(t){t instanceof a||(t=new a(t));var e,i=[],s=this.getAlpha(),r=this.getSource(),o=t.getSource();for(e=0;e<3;e++)i.push(Math.round(.5*r[e]+.5*o[e]));return i[3]=s,this.setSource(i),this}},n.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,n.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,n.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,n.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},n.Color.fromRgb=function(t){return a.fromSource(a.sourceFromRgb(t))},n.Color.sourceFromRgb=function(t){var e=t.match(a.reRGBa);if(e){var i=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),s=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),r=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(i,10),parseInt(s,10),parseInt(r,10),e[4]?parseFloat(e[4]):1]}},n.Color.fromRgba=a.fromRgb,n.Color.fromHsl=function(t){return a.fromSource(a.sourceFromHsl(t))},n.Color.sourceFromHsl=function(t){var e=t.match(a.reHSLa);if(e){var i,s,r,o=(parseFloat(e[1])%360+360)%360/360,f=parseFloat(e[2])/(/%$/.test(e[2])?100:1),m=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===f)i=s=r=m;else{var y=m<=.5?m*(f+1):m+f-m*f,C=2*m-y;i=l(C,y,o+1/3),s=l(C,y,o),r=l(C,y,o-1/3)}return[Math.round(255*i),Math.round(255*s),Math.round(255*r),e[4]?parseFloat(e[4]):1]}},n.Color.fromHsla=a.fromHsl,n.Color.fromHex=function(t){return a.fromSource(a.sourceFromHex(t))},n.Color.sourceFromHex=function(t){if(t.match(a.reHex)){var e=t.slice(t.indexOf("#")+1),i=3===e.length||4===e.length,s=8===e.length||4===e.length,r=i?e.charAt(0)+e.charAt(0):e.substring(0,2),o=i?e.charAt(1)+e.charAt(1):e.substring(2,4),f=i?e.charAt(2)+e.charAt(2):e.substring(4,6),m=s?i?e.charAt(3)+e.charAt(3):e.substring(6,8):"FF";return[parseInt(r,16),parseInt(o,16),parseInt(f,16),parseFloat((parseInt(m,16)/255).toFixed(2))]}},n.Color.fromSource=function(t){var e=new a;return e.setSource(t),e})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=["e","se","s","sw","w","nw","n","ne","e"],l=["ns","nesw","ew","nwse"],t={},e="left",i="top",s="right",r="bottom",o="center",f={top:r,bottom:i,left:s,right:e,center:o},m=n.util.radiansToDegrees,y=Math.sign||function(W){return(0<W)-(W<0)||+W};function C(W,z){var tt=W.angle+m(Math.atan2(z.y,z.x))+360;return Math.round(tt%360/45)}function w(W,z){var tt=z.transform.target,ft=tt.canvas,ot=n.util.object.clone(z);ot.target=tt,ft&&ft.fire("object:"+W,ot),tt.fire(W,z)}function E(W,z){var tt=z.canvas,ft=W[tt.uniScaleKey];return tt.uniformScaling&&!ft||!tt.uniformScaling&&ft}function M(W){return W.originX===o&&W.originY===o}function N(W,z,tt){var ft=W.lockScalingX,ot=W.lockScalingY;return!((!ft||!ot)&&(z||!ft&&!ot||!tt)&&(!ft||"x"!==z)&&(!ot||"y"!==z))}function H(W,z,tt,ft){return{e:W,transform:z,pointer:{x:tt,y:ft}}}function nt(W){return function(z,tt,ft,ot){var vt=tt.target,_t=vt.getCenterPoint(),G=vt.translateToOriginPoint(_t,tt.originX,tt.originY),bt=W(z,tt,ft,ot);return vt.setPositionByOrigin(G,tt.originX,tt.originY),bt}}function rt(W,z){return function(tt,ft,ot,vt){var _t=z(tt,ft,ot,vt);return _t&&w(W,H(tt,ft,ot,vt)),_t}}function g(W,z,tt,ft,ot){var vt=W.target,_t=vt.controls[W.corner],G=vt.canvas.getZoom(),bt=vt.padding/G,Ct=vt.toLocalPoint(new n.Point(ft,ot),z,tt);return Ct.x>=bt&&(Ct.x-=bt),Ct.x<=-bt&&(Ct.x+=bt),Ct.y>=bt&&(Ct.y-=bt),Ct.y<=bt&&(Ct.y+=bt),Ct.x-=_t.offsetX,Ct.y-=_t.offsetY,Ct}function F(W){return W.flipX!==W.flipY}function U(W,z,tt,ft,ot){if(0!==W[z]){var vt=ot/W._getTransformedDimensions()[ft]*W[tt];W.set(tt,vt)}}function et(W,z,tt,ft){var ot,vt=z.target,_t=vt._getTransformedDimensions(0,vt.skewY),G=g(z,z.originX,z.originY,tt,ft),bt=Math.abs(2*G.x)-_t.x,Ct=vt.skewX;bt<2?ot=0:(ot=m(Math.atan2(bt/vt.scaleX,_t.y/vt.scaleY)),z.originX===e&&z.originY===r&&(ot=-ot),z.originX===s&&z.originY===i&&(ot=-ot),F(vt)&&(ot=-ot));var J=Ct!==ot;if(J){var Ot=vt._getTransformedDimensions().y;vt.set("skewX",ot),U(vt,"skewY","scaleY","y",Ot)}return J}function st(W,z,tt,ft){var ot,vt=z.target,_t=vt._getTransformedDimensions(vt.skewX,0),G=g(z,z.originX,z.originY,tt,ft),bt=Math.abs(2*G.y)-_t.y,Ct=vt.skewY;bt<2?ot=0:(ot=m(Math.atan2(bt/vt.scaleY,_t.x/vt.scaleX)),z.originX===e&&z.originY===r&&(ot=-ot),z.originX===s&&z.originY===i&&(ot=-ot),F(vt)&&(ot=-ot));var J=Ct!==ot;if(J){var Ot=vt._getTransformedDimensions().x;vt.set("skewY",ot),U(vt,"skewX","scaleX","x",Ot)}return J}function ct(W,z,tt,ft,ot){var vt,_t,G,bt,Ct,J,Ot=z.target,Tt=Ot.lockScalingX,Lt=Ot.lockScalingY,zt=(ot=ot||{}).by,Xt=E(W,Ot),xe=N(Ot,zt,Xt),_e=z.gestureScale;if(xe)return!1;if(_e)_t=z.scaleX*_e,G=z.scaleY*_e;else{if(vt=g(z,z.originX,z.originY,tt,ft),Ct="y"!==zt?y(vt.x):1,J="x"!==zt?y(vt.y):1,z.signX||(z.signX=Ct),z.signY||(z.signY=J),Ot.lockScalingFlip&&(z.signX!==Ct||z.signY!==J))return!1;if(bt=Ot._getTransformedDimensions(),Xt&&!zt){var re=Math.abs(vt.x)+Math.abs(vt.y),se=z.original,Dt=re/(Math.abs(bt.x*se.scaleX/Ot.scaleX)+Math.abs(bt.y*se.scaleY/Ot.scaleY));_t=se.scaleX*Dt,G=se.scaleY*Dt}else _t=Math.abs(vt.x*Ot.scaleX/bt.x),G=Math.abs(vt.y*Ot.scaleY/bt.y);M(z)&&(_t*=2,G*=2),z.signX!==Ct&&"y"!==zt&&(z.originX=f[z.originX],_t*=-1,z.signX=Ct),z.signY!==J&&"x"!==zt&&(z.originY=f[z.originY],G*=-1,z.signY=J)}var Ne=Ot.scaleX,It=Ot.scaleY;return zt?("x"===zt&&Ot.set("scaleX",_t),"y"===zt&&Ot.set("scaleY",G)):(!Tt&&Ot.set("scaleX",_t),!Lt&&Ot.set("scaleY",G)),Ne!==Ot.scaleX||It!==Ot.scaleY}t.scaleCursorStyleHandler=function(W,z,tt){var ft=E(W,tt),ot="";if(0!==z.x&&0===z.y?ot="x":0===z.x&&0!==z.y&&(ot="y"),N(tt,ot,ft))return"not-allowed";var vt=C(tt,z);return a[vt]+"-resize"},t.skewCursorStyleHandler=function(W,z,tt){if(0!==z.x&&tt.lockSkewingY||0!==z.y&&tt.lockSkewingX)return"not-allowed";var ot=C(tt,z)%4;return l[ot]+"-resize"},t.scaleSkewCursorStyleHandler=function(W,z,tt){return W[tt.canvas.altActionKey]?t.skewCursorStyleHandler(W,z,tt):t.scaleCursorStyleHandler(W,z,tt)},t.rotationWithSnapping=rt("rotating",nt(function(W,z,tt,ft){var ot=z,vt=ot.target,_t=vt.translateToOriginPoint(vt.getCenterPoint(),ot.originX,ot.originY);if(vt.lockRotation)return!1;var G,bt=Math.atan2(ot.ey-_t.y,ot.ex-_t.x),Ct=Math.atan2(ft-_t.y,tt-_t.x),J=m(Ct-bt+ot.theta);if(0<vt.snapAngle){var Ot=vt.snapAngle,Tt=vt.snapThreshold||Ot,Lt=Math.ceil(J/Ot)*Ot,zt=Math.floor(J/Ot)*Ot;Math.abs(J-zt)<Tt?J=zt:Math.abs(J-Lt)<Tt&&(J=Lt)}return J<0&&(J=360+J),G=vt.angle!==(J%=360),vt.angle=J,G})),t.scalingEqually=rt("scaling",nt(function(W,z,tt,ft){return ct(W,z,tt,ft)})),t.scalingX=rt("scaling",nt(function(W,z,tt,ft){return ct(W,z,tt,ft,{by:"x"})})),t.scalingY=rt("scaling",nt(function(W,z,tt,ft){return ct(W,z,tt,ft,{by:"y"})})),t.scalingYOrSkewingX=function(W,z,tt,ft){return W[z.target.canvas.altActionKey]?t.skewHandlerX(W,z,tt,ft):t.scalingY(W,z,tt,ft)},t.scalingXOrSkewingY=function(W,z,tt,ft){return W[z.target.canvas.altActionKey]?t.skewHandlerY(W,z,tt,ft):t.scalingX(W,z,tt,ft)},t.changeWidth=rt("resizing",nt(function(W,z,tt,ft){var ot=z.target,vt=g(z,z.originX,z.originY,tt,ft),_t=ot.strokeWidth/(ot.strokeUniform?ot.scaleX:1),G=M(z)?2:1,bt=ot.width,Ct=Math.abs(vt.x*G/ot.scaleX)-_t;return ot.set("width",Math.max(Ct,0)),bt!==Ct})),t.skewHandlerX=function(W,z,tt,ft){var ot,vt=z.target,_t=vt.skewX,G=z.originY;return!vt.lockSkewingX&&(0===_t?ot=0<g(z,o,o,tt,ft).x?e:s:(0<_t&&(ot=G===i?e:s),_t<0&&(ot=G===i?s:e),F(vt)&&(ot=ot===e?s:e)),z.originX=ot,rt("skewing",nt(et))(W,z,tt,ft))},t.skewHandlerY=function(W,z,tt,ft){var ot,vt=z.target,_t=vt.skewY,G=z.originX;return!vt.lockSkewingY&&(0===_t?ot=0<g(z,o,o,tt,ft).y?i:r:(0<_t&&(ot=G===e?i:r),_t<0&&(ot=G===e?r:i),F(vt)&&(ot=ot===i?r:i)),z.originY=ot,rt("skewing",nt(st))(W,z,tt,ft))},t.dragHandler=function(W,z,tt,ft){var ot=z.target,vt=tt-z.offsetX,_t=ft-z.offsetY,G=!ot.get("lockMovementX")&&ot.left!==vt,bt=!ot.get("lockMovementY")&&ot.top!==_t;return G&&ot.set("left",vt),bt&&ot.set("top",_t),(G||bt)&&w("moving",H(W,z,tt,ft)),G||bt},t.scaleOrSkewActionName=function(W,z,tt){var ft=W[tt.canvas.altActionKey];return 0===z.x?ft?"skewX":"scaleY":0===z.y?ft?"skewY":"scaleX":void 0},t.rotationStyleHandler=function(W,z,tt){return tt.lockRotation?"not-allowed":z.cursorStyle},t.fireEvent=w,t.wrapWithFixedAnchor=nt,t.wrapWithFireEvent=rt,t.getLocalPoint=g,n.controlsUtils=t}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.degreesToRadians,l=n.controlsUtils;l.renderCircleControl=function(t,e,i,s,r){s=s||{};var o,f=this.sizeX||s.cornerSize||r.cornerSize,m=this.sizeY||s.cornerSize||r.cornerSize,y=void 0!==s.transparentCorners?s.transparentCorners:r.transparentCorners,C=y?"stroke":"fill",w=!y&&(s.cornerStrokeColor||r.cornerStrokeColor),E=e,M=i;t.save(),t.fillStyle=s.cornerColor||r.cornerColor,t.strokeStyle=s.cornerStrokeColor||r.cornerStrokeColor,m<f?(o=f,t.scale(1,m/f),M=i*f/m):f<m?(o=m,t.scale(f/m,1),E=e*m/f):o=f,t.lineWidth=1,t.beginPath(),t.arc(E,M,o/2,0,2*Math.PI,!1),t[C](),w&&t.stroke(),t.restore()},l.renderSquareControl=function(t,e,i,s,r){s=s||{};var o=this.sizeX||s.cornerSize||r.cornerSize,f=this.sizeY||s.cornerSize||r.cornerSize,m=void 0!==s.transparentCorners?s.transparentCorners:r.transparentCorners,y=m?"stroke":"fill",C=!m&&(s.cornerStrokeColor||r.cornerStrokeColor),w=o/2,E=f/2;t.save(),t.fillStyle=s.cornerColor||r.cornerColor,t.strokeStyle=s.cornerStrokeColor||r.cornerStrokeColor,t.lineWidth=1,t.translate(e,i),t.rotate(a(r.angle)),t[y+"Rect"](-w,-E,o,f),C&&t.strokeRect(-w,-E,o,f),t.restore()}}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={});n.Control=function(a){for(var l in a)this[l]=a[l]},n.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(a,l){return l.cursorStyle},getActionName:function(a,l){return l.actionName},getVisibility:function(a,l){var t=a._controlsVisibility;return t&&void 0!==t[l]?t[l]:this.visible},setVisibility:function(a){this.visible=a},positionHandler:function(a,l){return n.util.transformPoint({x:this.x*a.x+this.offsetX,y:this.y*a.y+this.offsetY},l)},calcCornerCoords:function(a,l,t,e,i){var s,r,o,f,m=i?this.touchSizeX:this.sizeX,y=i?this.touchSizeY:this.sizeY;if(m&&y&&m!==y){var C=Math.atan2(y,m),w=Math.sqrt(m*m+y*y)/2,E=C-n.util.degreesToRadians(a),M=Math.PI/2-C-n.util.degreesToRadians(a);s=w*n.util.cos(E),r=w*n.util.sin(E),o=w*n.util.cos(M),f=w*n.util.sin(M)}else w=.7071067812*(m&&y?m:l),E=n.util.degreesToRadians(45-a),s=o=w*n.util.cos(E),r=f=w*n.util.sin(E);return{tl:{x:t-f,y:e-o},tr:{x:t+s,y:e-r},bl:{x:t-s,y:e+r},br:{x:t+f,y:e+o}}},render:function(a,l,t,e,i){"circle"===((e=e||{}).cornerStyle||i.cornerStyle)?n.controlsUtils.renderCircleControl.call(this,a,l,t,e,i):n.controlsUtils.renderSquareControl.call(this,a,l,t,e,i)}}}(typeof exports<"u"?exports:this),function(){function h(a,l){var t,e,i,s,r=a.getAttribute("style"),o=a.getAttribute("offset")||0;if(o=(o=parseFloat(o)/(/%$/.test(o)?100:1))<0?0:1<o?1:o,r){var f=r.split(/\s*;\s*/);for(""===f[f.length-1]&&f.pop(),s=f.length;s--;){var m=f[s].split(/\s*:\s*/),y=m[0].trim(),C=m[1].trim();"stop-color"===y?t=C:"stop-opacity"===y&&(i=C)}}return t||(t=a.getAttribute("stop-color")||"rgb(0,0,0)"),i||(i=a.getAttribute("stop-opacity")),e=(t=new fabric.Color(t)).getAlpha(),i=isNaN(parseFloat(i))?1:parseFloat(i),i*=e*l,{offset:o,color:t.toRgb(),opacity:i}}var n=fabric.util.object.clone;fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(a){a||(a={}),a.coords||(a.coords={});var l,t=this;Object.keys(a).forEach(function(e){t[e]=a[e]}),this.id?this.id+="_"+fabric.Object.__uid++:this.id=fabric.Object.__uid++,l={x1:a.coords.x1||0,y1:a.coords.y1||0,x2:a.coords.x2||0,y2:a.coords.y2||0},"radial"===this.type&&(l.r1=a.coords.r1||0,l.r2=a.coords.r2||0),this.coords=l,this.colorStops=a.colorStops.slice()},addColorStop:function(a){for(var l in a){var t=new fabric.Color(a[l]);this.colorStops.push({offset:parseFloat(l),color:t.toRgb(),opacity:t.getAlpha()})}return this},toObject:function(a){var l={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return fabric.util.populateWithProperties(this,l,a),l},toSVG:function(a,l){var t,e,i,s,r=n(this.coords,!0),o=(l=l||{},n(this.colorStops,!0)),f=r.r1>r.r2,m=this.gradientTransform?this.gradientTransform.concat():fabric.iMatrix.concat(),y=-this.offsetX,C=-this.offsetY,w=!!l.additionalTransform,E="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(o.sort(function(nt,rt){return nt.offset-rt.offset}),"objectBoundingBox"===E?(y/=a.width,C/=a.height):(y+=a.width/2,C+=a.height/2),"path"===a.type&&"percentage"!==this.gradientUnits&&(y-=a.pathOffset.x,C-=a.pathOffset.y),m[4]-=y,m[5]-=C,s='id="SVGID_'+this.id+'" gradientUnits="'+E+'"',s+=' gradientTransform="'+(w?l.additionalTransform+" ":"")+fabric.util.matrixToSVG(m)+'" ',"linear"===this.type?i=["<linearGradient ",s,' x1="',r.x1,'" y1="',r.y1,'" x2="',r.x2,'" y2="',r.y2,'">\n']:"radial"===this.type&&(i=["<radialGradient ",s,' cx="',f?r.x1:r.x2,'" cy="',f?r.y1:r.y2,'" r="',f?r.r1:r.r2,'" fx="',f?r.x2:r.x1,'" fy="',f?r.y2:r.y1,'">\n']),"radial"===this.type){if(f)for((o=o.concat()).reverse(),t=0,e=o.length;t<e;t++)o[t].offset=1-o[t].offset;var M=Math.min(r.r1,r.r2);if(0<M){var N=M/Math.max(r.r1,r.r2);for(t=0,e=o.length;t<e;t++)o[t].offset+=N*(1-o[t].offset)}}for(t=0,e=o.length;t<e;t++){var H=o[t];i.push("<stop ",'offset="',100*H.offset+"%",'" style="stop-color:',H.color,void 0!==H.opacity?";stop-opacity: "+H.opacity:";",'"/>\n')}return i.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),i.join("")},toLive:function(a){var l,t,e,i=fabric.util.object.clone(this.coords);if(this.type){for("linear"===this.type?l=a.createLinearGradient(i.x1,i.y1,i.x2,i.y2):"radial"===this.type&&(l=a.createRadialGradient(i.x1,i.y1,i.r1,i.x2,i.y2,i.r2)),t=0,e=this.colorStops.length;t<e;t++){var s=this.colorStops[t].color,r=this.colorStops[t].opacity,o=this.colorStops[t].offset;void 0!==r&&(s=new fabric.Color(s).setAlpha(r).toRgba()),l.addColorStop(o,s)}return l}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(a,l,t,e){var i=parseFloat(t)/(/%$/.test(t)?100:1);i=i<0?0:1<i?1:i,isNaN(i)&&(i=1);var s,r,o,f,m,y,C,w,E,M,N,H=a.getElementsByTagName("stop"),nt="userSpaceOnUse"===a.getAttribute("gradientUnits")?"pixels":"percentage",rt=a.getAttribute("gradientTransform")||"",g=[],F=0,U=0;for("linearGradient"===a.nodeName||"LINEARGRADIENT"===a.nodeName?(s="linear",r={x1:(y=a).getAttribute("x1")||0,y1:y.getAttribute("y1")||0,x2:y.getAttribute("x2")||"100%",y2:y.getAttribute("y2")||0}):(s="radial",r={x1:(m=a).getAttribute("fx")||m.getAttribute("cx")||"50%",y1:m.getAttribute("fy")||m.getAttribute("cy")||"50%",r1:0,x2:m.getAttribute("cx")||"50%",y2:m.getAttribute("cy")||"50%",r2:m.getAttribute("r")||"50%"}),o=H.length;o--;)g.push(h(H[o],i));return f=fabric.parseTransformAttribute(rt),C=r,w=e,E=nt,Object.keys(C).forEach(function(et){"Infinity"===(M=C[et])?N=1:"-Infinity"===M?N=0:(N=parseFloat(C[et],10),"string"==typeof M&&/^(\d+\.\d+)%|(\d+)%$/.test(M)&&(N*=.01,"pixels"===E&&("x1"!==et&&"x2"!==et&&"r2"!==et||(N*=w.viewBoxWidth||w.width),"y1"!==et&&"y2"!==et||(N*=w.viewBoxHeight||w.height)))),C[et]=N}),"pixels"===nt&&(F=-l.left,U=-l.top),new fabric.Gradient({id:a.getAttribute("id"),type:s,coords:r,colorStops:g,gradientUnits:nt,gradientTransform:f,offsetX:F,offsetY:U})}})}(),function(){"use strict";var h=fabric.util.toFixed;fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(n,a){if(n||(n={}),this.id=fabric.Object.__uid++,this.setOptions(n),!n.source||n.source&&"string"!=typeof n.source)a&&a(this);else{var l=this;this.source=fabric.util.createImage(),fabric.util.loadImage(n.source,function(t,e){l.source=t,a&&a(l,e)},null,this.crossOrigin)}},toObject:function(n){var a,l,t=fabric.Object.NUM_FRACTION_DIGITS;return"string"==typeof this.source.src?a=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(a=this.source.toDataURL()),l={type:"pattern",source:a,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:h(this.offsetX,t),offsetY:h(this.offsetY,t),patternTransform:this.patternTransform?this.patternTransform.concat():null},fabric.util.populateWithProperties(this,l,n),l},toSVG:function(n){var a="function"==typeof this.source?this.source():this.source,l=a.width/n.width,t=a.height/n.height,e=this.offsetX/n.width,i=this.offsetY/n.height,s="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(t=1,i&&(t+=Math.abs(i))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(l=1,e&&(l+=Math.abs(e))),a.src?s=a.src:a.toDataURL&&(s=a.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+e+'" y="'+i+'" width="'+l+'" height="'+t+'">\n<image x="0" y="0" width="'+a.width+'" height="'+a.height+'" xlink:href="'+s+'"></image>\n</pattern>\n'},setOptions:function(n){for(var a in n)this[a]=n[a]},toLive:function(n){var a=this.source;return a&&(void 0===a.src||a.complete&&0!==a.naturalWidth&&0!==a.naturalHeight)?n.createPattern(a,this.repeat):""}})}(),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.toFixed;n.Shadow?n.warn("fabric.Shadow is already defined."):(n.Shadow=n.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(l){for(var t in"string"==typeof l&&(l=this._parseShadow(l)),l)this[t]=l[t];this.id=n.Object.__uid++},_parseShadow:function(l){var t=l.trim(),e=n.Shadow.reOffsetsAndBlur.exec(t)||[];return{color:(t.replace(n.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(e[1],10)||0,offsetY:parseFloat(e[2],10)||0,blur:parseFloat(e[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(l){var t=40,e=40,i=n.Object.NUM_FRACTION_DIGITS,s=n.util.rotateVector({x:this.offsetX,y:this.offsetY},n.util.degreesToRadians(-l.angle)),r=new n.Color(this.color);return l.width&&l.height&&(t=100*a((Math.abs(s.x)+this.blur)/l.width,i)+20,e=100*a((Math.abs(s.y)+this.blur)/l.height,i)+20),l.flipX&&(s.x*=-1),l.flipY&&(s.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+e+'%" height="'+(100+2*e)+'%" x="-'+t+'%" width="'+(100+2*t)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+a(this.blur?this.blur/2:0,i)+'"></feGaussianBlur>\n\t<feOffset dx="'+a(s.x,i)+'" dy="'+a(s.y,i)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+r.toRgb()+'" flood-opacity="'+r.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var l={},t=n.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(e){this[e]!==t[e]&&(l[e]=this[e])},this),l}}),n.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(typeof exports<"u"?exports:this),function(){"use strict";if(fabric.StaticCanvas)fabric.warn("fabric.StaticCanvas is already defined.");else{var h=fabric.util.object.extend,n=fabric.util.getElementOffset,a=fabric.util.removeFromArray,l=fabric.util.toFixed,t=fabric.util.transformPoint,e=fabric.util.invertTransform,i=fabric.util.getNodeCanvas,s=fabric.util.createCanvasElement,r=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass(fabric.CommonMethods,{initialize:function(o,f){f||(f={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(o,f)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:fabric.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(o,f){var m=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(o),this._initOptions(f),this.interactive||this._initRetinaScaling(),f.overlayImage&&this.setOverlayImage(f.overlayImage,m),f.backgroundImage&&this.setBackgroundImage(f.backgroundImage,m),f.backgroundColor&&this.setBackgroundColor(f.backgroundColor,m),f.overlayColor&&this.setOverlayColor(f.overlayColor,m),this.calcOffset()},_isRetinaScaling:function(){return 1<fabric.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,fabric.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var o=fabric.devicePixelRatio;this.__initRetinaScaling(o,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(o,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(o,f,m){f.setAttribute("width",this.width*o),f.setAttribute("height",this.height*o),m.scale(o,o)},calcOffset:function(){return this._offset=n(this.lowerCanvasEl),this},setOverlayImage:function(o,f,m){return this.__setBgOverlayImage("overlayImage",o,f,m)},setBackgroundImage:function(o,f,m){return this.__setBgOverlayImage("backgroundImage",o,f,m)},setOverlayColor:function(o,f){return this.__setBgOverlayColor("overlayColor",o,f)},setBackgroundColor:function(o,f){return this.__setBgOverlayColor("backgroundColor",o,f)},__setBgOverlayImage:function(o,f,m,y){return"string"==typeof f?fabric.util.loadImage(f,function(C,w){if(C){var E=new fabric.Image(C,y);(this[o]=E).canvas=this}m&&m(C,w)},this,y&&y.crossOrigin):(y&&f.setOptions(y),(this[o]=f)&&(f.canvas=this),m&&m(f,!1)),this},__setBgOverlayColor:function(o,f,m){return this[o]=f,this._initGradient(f,o),this._initPattern(f,o,m),this},_createCanvasElement:function(){var o=s();if(!o||(o.style||(o.style={}),void 0===o.getContext))throw r;return o},_initOptions:function(o){var f=this.lowerCanvasEl;this._setOptions(o),this.width=this.width||parseInt(f.width,10)||0,this.height=this.height||parseInt(f.height,10)||0,this.lowerCanvasEl.style&&(f.width=this.width,f.height=this.height,f.style.width=this.width+"px",f.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(o){this.lowerCanvasEl=o&&o.getContext?o:fabric.util.getById(o)||this._createCanvasElement(),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(o,f){return this.setDimensions({width:o},f)},setHeight:function(o,f){return this.setDimensions({height:o},f)},setDimensions:function(o,f){var m;for(var y in f=f||{},o)m=o[y],f.cssOnly||(this._setBackstoreDimension(y,o[y]),m+="px",this.hasLostContext=!0),f.backstoreOnly||this._setCssDimension(y,m);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),f.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(o,f){return this.lowerCanvasEl[o]=f,this.upperCanvasEl&&(this.upperCanvasEl[o]=f),this.cacheCanvasEl&&(this.cacheCanvasEl[o]=f),this[o]=f,this},_setCssDimension:function(o,f){return this.lowerCanvasEl.style[o]=f,this.upperCanvasEl&&(this.upperCanvasEl.style[o]=f),this.wrapperEl&&(this.wrapperEl.style[o]=f),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(o){var f,m,y,C=this._activeObject,w=this.backgroundImage,E=this.overlayImage;for(this.viewportTransform=o,m=0,y=this._objects.length;m<y;m++)(f=this._objects[m]).group||f.setCoords(!0);return C&&C.setCoords(),w&&w.setCoords(!0),E&&E.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(o,f){var m=o,y=this.viewportTransform.slice(0);o=t(o,e(this.viewportTransform)),y[0]=f,y[3]=f;var C=t(o,y);return y[4]+=m.x-C.x,y[5]+=m.y-C.y,this.setViewportTransform(y)},setZoom:function(o){return this.zoomToPoint(new fabric.Point(0,0),o),this},absolutePan:function(o){var f=this.viewportTransform.slice(0);return f[4]=-o.x,f[5]=-o.y,this.setViewportTransform(f)},relativePan:function(o){return this.absolutePan(new fabric.Point(-o.x-this.viewportTransform[4],-o.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(o){this.stateful&&o.setupState(),o._set("canvas",this),o.setCoords(),this.fire("object:added",{target:o}),o.fire("added")},_onObjectRemoved:function(o){this.fire("object:removed",{target:o}),o.fire("removed"),delete o.canvas},clearContext:function(o){return o.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){return this.renderCanvas(this.contextContainer,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=fabric.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var o={},f=this.width,m=this.height,y=e(this.viewportTransform);return o.tl=t({x:0,y:0},y),o.br=t({x:f,y:m},y),o.tr=new fabric.Point(o.br.x,o.tl.y),o.bl=new fabric.Point(o.tl.x,o.br.y),this.vptCoords=o},cancelRequestedRender:function(){this.isRendering&&(fabric.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(o,f){var m=this.viewportTransform,y=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(o),fabric.util.setImageSmoothing(o,this.imageSmoothingEnabled),this.fire("before:render",{ctx:o}),this._renderBackground(o),o.save(),o.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._renderObjects(o,f),o.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(o),y&&(y.canvas=this,y.shouldCache(),y._transformDone=!0,y.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(o)),this._renderOverlay(o),this.controlsAboveOverlay&&this.interactive&&this.drawControls(o),this.fire("after:render",{ctx:o})},drawClipPathOnCanvas:function(o){var f=this.viewportTransform,m=this.clipPath;o.save(),o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),o.globalCompositeOperation="destination-in",m.transform(o),o.scale(1/m.zoomX,1/m.zoomY),o.drawImage(m._cacheCanvas,-m.cacheTranslationX,-m.cacheTranslationY),o.restore()},_renderObjects:function(o,f){var m,y;for(m=0,y=f.length;m<y;++m)f[m]&&f[m].render(o)},_renderBackgroundOrOverlay:function(o,f){var m=this[f+"Color"],y=this[f+"Image"],C=this.viewportTransform,w=this[f+"Vpt"];if(m||y){if(m){o.save(),o.beginPath(),o.moveTo(0,0),o.lineTo(this.width,0),o.lineTo(this.width,this.height),o.lineTo(0,this.height),o.closePath(),o.fillStyle=m.toLive?m.toLive(o,this):m,w&&o.transform(C[0],C[1],C[2],C[3],C[4],C[5]),o.transform(1,0,0,1,m.offsetX||0,m.offsetY||0);var E=m.gradientTransform||m.patternTransform;E&&o.transform(E[0],E[1],E[2],E[3],E[4],E[5]),o.fill(),o.restore()}y&&(o.save(),w&&o.transform(C[0],C[1],C[2],C[3],C[4],C[5]),y.render(o),o.restore())}},_renderBackground:function(o){this._renderBackgroundOrOverlay(o,"background")},_renderOverlay:function(o){this._renderBackgroundOrOverlay(o,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new fabric.Point(this.width/2,this.height/2)},centerObjectH:function(o){return this._centerObject(o,new fabric.Point(this.getCenterPoint().x,o.getCenterPoint().y))},centerObjectV:function(o){return this._centerObject(o,new fabric.Point(o.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(o){var f=this.getCenterPoint();return this._centerObject(o,f)},viewportCenterObject:function(o){var f=this.getVpCenter();return this._centerObject(o,f)},viewportCenterObjectH:function(o){var f=this.getVpCenter();return this._centerObject(o,new fabric.Point(f.x,o.getCenterPoint().y)),this},viewportCenterObjectV:function(o){var f=this.getVpCenter();return this._centerObject(o,new fabric.Point(o.getCenterPoint().x,f.y))},getVpCenter:function(){var o=this.getCenterPoint(),f=e(this.viewportTransform);return t(o,f)},_centerObject:function(o,f){return o.setPositionByOrigin(f,"center","center"),o.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(o){return this.toDatalessObject(o)},toObject:function(o){return this._toObjectMethod("toObject",o)},toDatalessObject:function(o){return this._toObjectMethod("toDatalessObject",o)},_toObjectMethod:function(o,f){var m=this.clipPath,y={version:fabric.version,objects:this._toObjects(o,f)};return m&&!m.excludeFromExport&&(y.clipPath=this._toObject(this.clipPath,o,f)),h(y,this.__serializeBgOverlay(o,f)),fabric.util.populateWithProperties(this,y,f),y},_toObjects:function(o,f){return this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){return this._toObject(m,o,f)},this)},_toObject:function(o,f,m){var y;this.includeDefaultValues||(y=o.includeDefaultValues,o.includeDefaultValues=!1);var C=o[f](m);return this.includeDefaultValues||(o.includeDefaultValues=y),C},__serializeBgOverlay:function(o,f){var m={},y=this.backgroundImage,C=this.overlayImage,w=this.backgroundColor,E=this.overlayColor;return w&&w.toObject?w.excludeFromExport||(m.background=w.toObject(f)):w&&(m.background=w),E&&E.toObject?E.excludeFromExport||(m.overlay=E.toObject(f)):E&&(m.overlay=E),y&&!y.excludeFromExport&&(m.backgroundImage=this._toObject(y,o,f)),C&&!C.excludeFromExport&&(m.overlayImage=this._toObject(C,o,f)),m},svgViewportTransformation:!0,toSVG:function(o,f){o||(o={}),o.reviver=f;var m=[];return this._setSVGPreamble(m,o),this._setSVGHeader(m,o),this.clipPath&&m.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(m,"background"),this._setSVGBgOverlayImage(m,"backgroundImage",f),this._setSVGObjects(m,f),this.clipPath&&m.push("</g>\n"),this._setSVGBgOverlayColor(m,"overlay"),this._setSVGBgOverlayImage(m,"overlayImage",f),m.push("</svg>"),m.join("")},_setSVGPreamble:function(o,f){f.suppressPreamble||o.push('<?xml version="1.0" encoding="',f.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(o,f){var m,y=f.width||this.width,C=f.height||this.height,w='viewBox="0 0 '+this.width+" "+this.height+'" ',E=fabric.Object.NUM_FRACTION_DIGITS;f.viewBox?w='viewBox="'+f.viewBox.x+" "+f.viewBox.y+" "+f.viewBox.width+" "+f.viewBox.height+'" ':this.svgViewportTransformation&&(w='viewBox="'+l(-(m=this.viewportTransform)[4]/m[0],E)+" "+l(-m[5]/m[3],E)+" "+l(this.width/m[0],E)+" "+l(this.height/m[3],E)+'" '),o.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',y,'" ','height="',C,'" ',w,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",fabric.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(f),"</defs>\n")},createSVGClipPathMarkup:function(o){var f=this.clipPath;return f?(f.clipPathId="CLIPPATH_"+fabric.Object.__uid++,'<clipPath id="'+f.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(o.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var o=this;return["background","overlay"].map(function(f){var m=o[f+"Color"];if(m&&m.toLive){var y=o[f+"Vpt"],C=o.viewportTransform;return m.toSVG({width:o.width/(y?C[0]:1),height:o.height/(y?C[3]:1)},{additionalTransform:y?fabric.util.matrixToSVG(C):""})}}).join("")},createSVGFontFacesMarkup:function(){var o,f,m,y,C,w,E,M,N="",H={},nt=fabric.fontPaths,rt=[];for(this._objects.forEach(function F(U){rt.push(U),U._objects&&U._objects.forEach(F)}),E=0,M=rt.length;E<M;E++)if(f=(o=rt[E]).fontFamily,-1!==o.type.indexOf("text")&&!H[f]&&nt[f]&&(H[f]=!0,o.styles))for(C in m=o.styles)for(w in y=m[C])!H[f=y[w].fontFamily]&&nt[f]&&(H[f]=!0);for(var g in H)N+=["\t\t@font-face {\n","\t\t\tfont-family: '",g,"';\n","\t\t\tsrc: url('",nt[g],"');\n","\t\t}\n"].join("");return N&&(N=['\t<style type="text/css">',"<![CDATA[\n",N,"]]>","</style>\n"].join("")),N},_setSVGObjects:function(o,f){var m,y,C,w=this._objects;for(y=0,C=w.length;y<C;y++)(m=w[y]).excludeFromExport||this._setSVGObject(o,m,f)},_setSVGObject:function(o,f,m){o.push(f.toSVG(m))},_setSVGBgOverlayImage:function(o,f,m){this[f]&&!this[f].excludeFromExport&&this[f].toSVG&&o.push(this[f].toSVG(m))},_setSVGBgOverlayColor:function(o,f){var m=this[f+"Color"],C=this.width,w=this.height;if(m)if(m.toLive){var E=m.repeat,M=fabric.util.invertTransform(this.viewportTransform),N=this[f+"Vpt"]?fabric.util.matrixToSVG(M):"";o.push('<rect transform="'+N+" translate(",C/2,",",w/2,')"',' x="',m.offsetX-C/2,'" y="',m.offsetY-w/2,'" ','width="',"repeat-y"===E||"no-repeat"===E?m.source.width:C,'" height="',"repeat-x"===E||"no-repeat"===E?m.source.height:w,'" fill="url(#SVGID_'+m.id+')"',"></rect>\n")}else o.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',m,'"',"></rect>\n")},sendToBack:function(o){if(!o)return this;var f,m,y,C=this._activeObject;if(o===C&&"activeSelection"===o.type)for(f=(y=C._objects).length;f--;)a(this._objects,m=y[f]),this._objects.unshift(m);else a(this._objects,o),this._objects.unshift(o);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(o){if(!o)return this;var f,m,y,C=this._activeObject;if(o===C&&"activeSelection"===o.type)for(y=C._objects,f=0;f<y.length;f++)a(this._objects,m=y[f]),this._objects.push(m);else a(this._objects,o),this._objects.push(o);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(o,f){if(!o)return this;var m,y,C,w,E,M=this._activeObject,N=0;if(o===M&&"activeSelection"===o.type)for(E=M._objects,m=0;m<E.length;m++)0+N<(C=this._objects.indexOf(y=E[m]))&&(w=C-1,a(this._objects,y),this._objects.splice(w,0,y)),N++;else 0!==(C=this._objects.indexOf(o))&&(w=this._findNewLowerIndex(o,C,f),a(this._objects,o),this._objects.splice(w,0,o));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(o,f,m){var y,C;if(m){for(C=(y=f)-1;0<=C;--C)if(o.intersectsWithObject(this._objects[C])||o.isContainedWithinObject(this._objects[C])||this._objects[C].isContainedWithinObject(o)){y=C;break}}else y=f-1;return y},bringForward:function(o,f){if(!o)return this;var m,y,C,w,E,M=this._activeObject,N=0;if(o===M&&"activeSelection"===o.type)for(m=(E=M._objects).length;m--;)(C=this._objects.indexOf(y=E[m]))<this._objects.length-1-N&&(w=C+1,a(this._objects,y),this._objects.splice(w,0,y)),N++;else(C=this._objects.indexOf(o))!==this._objects.length-1&&(w=this._findNewUpperIndex(o,C,f),a(this._objects,o),this._objects.splice(w,0,o));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(o,f,m){var y,C,w;if(m){for(C=(y=f)+1,w=this._objects.length;C<w;++C)if(o.intersectsWithObject(this._objects[C])||o.isContainedWithinObject(this._objects[C])||this._objects[C].isContainedWithinObject(o)){y=C;break}}else y=f+1;return y},moveTo:function(o,f){return a(this._objects,o),this._objects.splice(f,0,o),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(fabric.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(o){o.dispose&&o.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),fabric.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),fabric.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),h(fabric.StaticCanvas.prototype,fabric.Observable),h(fabric.StaticCanvas.prototype,fabric.Collection),h(fabric.StaticCanvas.prototype,fabric.DataURLExporter),h(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(o){var f=s();if(!f||!f.getContext)return null;var m=f.getContext("2d");return m&&"setLineDash"===o?void 0!==m.setLineDash:null}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject,fabric.isLikelyNode&&(fabric.StaticCanvas.prototype.createPNGStream=function(){var o=i(this.lowerCanvasEl);return o&&o.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(o){var f=i(this.lowerCanvasEl);return f&&f.createJPEGStream(o)})}}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(h){h.strokeStyle=this.color,h.lineWidth=this.width,h.lineCap=this.strokeLineCap,h.miterLimit=this.strokeMiterLimit,h.lineJoin=this.strokeLineJoin,h.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(h){var n=this.canvas.viewportTransform;h.save(),h.transform(n[0],n[1],n[2],n[3],n[4],n[5])},_setShadow:function(){if(this.shadow){var h=this.canvas,n=this.shadow,a=h.contextTop,l=h.getZoom();h&&h._isRetinaScaling()&&(l*=fabric.devicePixelRatio),a.shadowColor=n.color,a.shadowBlur=n.blur*l,a.shadowOffsetX=n.offsetX*l,a.shadowOffsetY=n.offsetY*l}},needsFullRender:function(){return new fabric.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var h=this.canvas.contextTop;h.shadowColor="",h.shadowBlur=h.shadowOffsetX=h.shadowOffsetY=0},_isOutSideCanvas:function(h){return h.x<0||h.x>this.canvas.getWidth()||h.y<0||h.y>this.canvas.getHeight()}}),fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(h){this.canvas=h,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(h,n,a){var l=n.midPointFrom(a);return h.quadraticCurveTo(n.x,n.y,l.x,l.y),l},onMouseDown:function(h,n){this.canvas._isMainEvent(n.e)&&(this.drawStraightLine=n.e[this.straightLineKey],this._prepareForDrawing(h),this._captureDrawingPath(h),this._render())},onMouseMove:function(h,n){if(this.canvas._isMainEvent(n.e)&&(this.drawStraightLine=n.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(h))&&this._captureDrawingPath(h)&&1<this._points.length))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var a=this._points,l=a.length,t=this.canvas.contextTop;this._saveAndTransform(t),this.oldEnd&&(t.beginPath(),t.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(t,a[l-2],a[l-1],!0),t.stroke(),t.restore()}},onMouseUp:function(h){return!this.canvas._isMainEvent(h.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(h){var n=new fabric.Point(h.x,h.y);this._reset(),this._addPoint(n),this.canvas.contextTop.moveTo(n.x,n.y)},_addPoint:function(h){return!(1<this._points.length&&h.eq(this._points[this._points.length-1])||(this.drawStraightLine&&1<this._points.length&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(h),0))},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(h){var n=new fabric.Point(h.x,h.y);return this._addPoint(n)},_render:function(h){var n,a,l=this._points[0],t=this._points[1];if(this._saveAndTransform(h=h||this.canvas.contextTop),h.beginPath(),2===this._points.length&&l.x===t.x&&l.y===t.y){var e=this.width/1e3;l=new fabric.Point(l.x,l.y),t=new fabric.Point(t.x,t.y),l.x-=e,t.x+=e}for(h.moveTo(l.x,l.y),n=1,a=this._points.length;n<a;n++)this._drawSegment(h,l,t),l=this._points[n],t=this._points[n+1];h.lineTo(l.x,l.y),h.stroke(),h.restore()},convertPointsToSVGPath:function(h){return fabric.util.getSmoothPathFromPoints(h,this.width/1e3)},_isEmptySVGPath:function(h){return"M 0 0 Q 0 0 0 0 L 0 0"===fabric.util.joinPath(h)},createPath:function(h){var n=new fabric.Path(h,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,n.shadow=new fabric.Shadow(this.shadow)),n},decimatePoints:function(h,n){if(h.length<=2)return h;var a,l=this.canvas.getZoom(),t=Math.pow(n/l,2),e=h.length-1,i=h[0],s=[i];for(a=1;a<e-1;a++)t<=Math.pow(i.x-h[a].x,2)+Math.pow(i.y-h[a].y,2)&&s.push(i=h[a]);return s.push(h[e]),s},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var h=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(h))this.canvas.requestRenderAll();else{var n=this.createPath(h);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:n}),this.canvas.add(n),this.canvas.requestRenderAll(),n.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:n})}}}),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(h){this.canvas=h,this.points=[]},drawDot:function(h){var n=this.addPoint(h),a=this.canvas.contextTop;this._saveAndTransform(a),this.dot(a,n),a.restore()},dot:function(h,n){h.fillStyle=n.fill,h.beginPath(),h.arc(n.x,n.y,n.radius,0,2*Math.PI,!1),h.closePath(),h.fill()},onMouseDown:function(h){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(h)},_render:function(){var h,n,a=this.canvas.contextTop,l=this.points;for(this._saveAndTransform(a),h=0,n=l.length;h<n;h++)this.dot(a,l[h]);a.restore()},onMouseMove:function(h){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(h)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(h),this._render()):this.drawDot(h))},onMouseUp:function(){var h,n,a=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var l=[];for(h=0,n=this.points.length;h<n;h++){var t=this.points[h],e=new fabric.Circle({radius:t.radius,left:t.x,top:t.y,originX:"center",originY:"center",fill:t.fill});this.shadow&&(e.shadow=new fabric.Shadow(this.shadow)),l.push(e)}var i=new fabric.Group(l);i.canvas=this.canvas,this.canvas.fire("before:path:created",{path:i}),this.canvas.add(i),this.canvas.fire("path:created",{path:i}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},addPoint:function(h){var n=new fabric.Point(h.x,h.y),a=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,l=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return n.radius=a,n.fill=l,this.points.push(n),n}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(h){this.canvas=h,this.sprayChunks=[]},onMouseDown:function(h){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(h),this.render(this.sprayChunkPoints)},onMouseMove:function(h){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(h)||(this.addSprayChunk(h),this.render(this.sprayChunkPoints))},onMouseUp:function(){var h=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var n=[],a=0,l=this.sprayChunks.length;a<l;a++)for(var t=this.sprayChunks[a],e=0,i=t.length;e<i;e++){var s=new fabric.Rect({width:t[e].width,height:t[e].width,left:t[e].x+1,top:t[e].y+1,originX:"center",originY:"center",fill:this.color});n.push(s)}this.optimizeOverlapping&&(n=this._getOptimizedRects(n));var r=new fabric.Group(n);this.shadow&&r.set("shadow",new fabric.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:r}),this.canvas.add(r),this.canvas.fire("path:created",{path:r}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=h,this.canvas.requestRenderAll()},_getOptimizedRects:function(h){var n,a,l,t={};for(a=0,l=h.length;a<l;a++)t[n=h[a].left+""+h[a].top]||(t[n]=h[a]);var e=[];for(n in t)e.push(t[n]);return e},render:function(h){var n,a,l=this.canvas.contextTop;for(l.fillStyle=this.color,this._saveAndTransform(l),n=0,a=h.length;n<a;n++){var t=h[n];void 0!==t.opacity&&(l.globalAlpha=t.opacity),l.fillRect(t.x,t.y,t.width,t.width)}l.restore()},_render:function(){var h,n,a=this.canvas.contextTop;for(a.fillStyle=this.color,this._saveAndTransform(a),h=0,n=this.sprayChunks.length;h<n;h++)this.render(this.sprayChunks[h]);a.restore()},addSprayChunk:function(h){this.sprayChunkPoints=[];var n,a,l,t,e=this.width/2;for(t=0;t<this.density;t++){n=fabric.util.getRandomInt(h.x-e,h.x+e),a=fabric.util.getRandomInt(h.y-e,h.y+e),l=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var i=new fabric.Point(n,a);i.width=l,this.randomOpacity&&(i.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(i)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var h=fabric.util.createCanvasElement(),n=h.getContext("2d");return h.width=h.height=25,n.fillStyle=this.color,n.beginPath(),n.arc(10,10,10,0,2*Math.PI,!1),n.closePath(),n.fill(),h},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(h){return h.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(h){this.callSuper("_setBrushStyles",h),h.strokeStyle=this.getPattern(h)},createPath:function(h){var n=this.callSuper("createPath",h),a=n._getLeftTopCoords().scalarAdd(n.strokeWidth/2);return n.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-a.x,offsetY:-a.y}),n}}),function(){var h=fabric.util.getPointer,n=fabric.util.degreesToRadians,a=fabric.util.isTouchEvent;for(var l in fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e,i,s=this.getActiveObjects();if(0<s.length&&!this.preserveObjectStacking){e=[],i=[];for(var r=0,o=this._objects.length;r<o;r++)-1===s.indexOf(t=this._objects[r])?e.push(t):i.push(t);1<s.length&&(this._activeObject._objects=i),e.push.apply(e,i)}else e=this._objects;return e},renderAll:function(){return!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),this.renderCanvas(this.contextContainer,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire("after:render"),this},_normalizePointer:function(t,e){var i=t.calcTransformMatrix(),s=fabric.util.invertTransform(i),r=this.restorePointerVpt(e);return fabric.util.transformPoint(r,s)},isTargetTransparent:function(t,e,i){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var s=this._normalizePointer(t,{x:e,y:i}),r=Math.max(t.cacheTranslationX+s.x*t.zoomX,0),o=Math.max(t.cacheTranslationY+s.y*t.zoomY,0);return fabric.util.isTransparent(t._cacheContext,Math.round(r),Math.round(o),this.targetFindTolerance)}var f=this.contextCache,m=t.selectionBackgroundColor,y=this.viewportTransform;return t.selectionBackgroundColor="",this.clearContext(f),f.save(),f.transform(y[0],y[1],y[2],y[3],y[4],y[5]),t.render(f),f.restore(),t.selectionBackgroundColor=m,fabric.util.isTransparent(f,e,i,this.targetFindTolerance)},_isSelectionKeyPressed:function(t){return Array.isArray(this.selectionKey)?!!this.selectionKey.find(function(e){return!0===t[e]}):t[this.selectionKey]},_shouldClearSelection:function(t,e){var i=this.getActiveObjects(),s=this._activeObject;return!e||e&&s&&1<i.length&&-1===i.indexOf(e)&&s!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&s&&s!==e},_shouldCenterTransform:function(t,e,i){var s;if(t)return"scale"===e||"scaleX"===e||"scaleY"===e||"resizing"===e?s=this.centeredScaling||t.centeredScaling:"rotate"===e&&(s=this.centeredRotation||t.centeredRotation),s?!i:i},_getOriginFromCorner:function(t,e){var i={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?i.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(i.x="left"),"tl"===e||"mt"===e||"tr"===e?i.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(i.y="top"),i},_getActionFromCorner:function(t,e,i,s){if(!e||!t)return"drag";var r=s.controls[e];return r.getActionName(i,r,s)},_setupCurrentTransform:function(t,e,i){if(e){var s=this.getPointer(t),r=e.__corner,o=e.controls[r],f=i&&r?o.getActionHandler(t,e,o):fabric.controlsUtils.dragHandler,m=this._getActionFromCorner(i,r,t,e),y=this._getOriginFromCorner(e,r),C=t[this.centeredKey],w={target:e,action:m,actionHandler:f,corner:r,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:s.x-e.left,offsetY:s.y-e.top,originX:y.x,originY:y.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:n(e.angle),width:e.width*e.scaleX,shiftKey:t.shiftKey,altKey:C,original:fabric.util.saveObjectTransform(e)};this._shouldCenterTransform(e,m,C)&&(w.originX="center",w.originY="center"),w.original.originX=y.x,w.original.originY=y.y,this._currentTransform=w,this._beforeTransform(t)}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var e=this._groupSelector,i=new fabric.Point(e.ex,e.ey),s=fabric.util.transformPoint(i,this.viewportTransform),r=new fabric.Point(e.ex+e.left,e.ey+e.top),o=fabric.util.transformPoint(r,this.viewportTransform),f=Math.min(s.x,o.x),m=Math.min(s.y,o.y),y=Math.max(s.x,o.x),C=Math.max(s.y,o.y),w=this.selectionLineWidth/2;this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(f,m,y-f,C-m)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,f+=w,m+=w,y-=w,C-=w,fabric.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(f,m,y-f,C-m))},findTarget:function(t,e){if(!this.skipTargetFind){var i,s,r=this.getPointer(t,!0),o=this._activeObject,f=this.getActiveObjects(),m=a(t),y=1<f.length&&!e||1===f.length;if(this.targets=[],y&&o._findTargetCorner(r,m)||1<f.length&&!e&&o===this._searchPossibleTargets([o],r))return o;if(1===f.length&&o===this._searchPossibleTargets([o],r)){if(!this.preserveObjectStacking)return o;i=o,s=this.targets,this.targets=[]}var C=this._searchPossibleTargets(this._objects,r);return t[this.altSelectionKey]&&C&&i&&C!==i&&(C=i,this.targets=s),C}},_checkTarget:function(t,e,i){if(e&&e.visible&&e.evented&&e.containsPoint(t)&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,i.x,i.y)))return!0},_searchPossibleTargets:function(t,e){for(var i,s,r=t.length;r--;){var o=t[r],f=o.group?this._normalizePointer(o.group,e):e;if(this._checkTarget(f,o,e)){(i=t[r]).subTargetCheck&&i instanceof fabric.Group&&(s=this._searchPossibleTargets(i._objects,e))&&this.targets.push(s);break}}return i},restorePointerVpt:function(t){return fabric.util.transformPoint(t,fabric.util.invertTransform(this.viewportTransform))},getPointer:function(t,e){if(this._absolutePointer&&!e)return this._absolutePointer;if(this._pointer&&e)return this._pointer;var i,s=h(t),r=this.upperCanvasEl,o=r.getBoundingClientRect(),f=o.width||0,m=o.height||0;f&&m||("top"in o&&"bottom"in o&&(m=Math.abs(o.top-o.bottom)),"right"in o&&"left"in o&&(f=Math.abs(o.right-o.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,e||(s=this.restorePointerVpt(s));var y=this.getRetinaScaling();return 1!==y&&(s.x/=y,s.y/=y),{x:s.x*(i=0===f||0===m?{width:1,height:1}:{width:r.width/f,height:r.height/m}).width,y:s.y*i.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),e=this.lowerCanvasEl,i=this.upperCanvasEl;i?i.className="":(i=this._createCanvasElement(),this.upperCanvasEl=i),fabric.util.addClass(i,"upper-canvas "+t),this.wrapperEl.appendChild(i),this._copyCanvasStyle(e,i),this._applyCanvasStyle(i),this.contextTop=i.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,i=this.height||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),t.width=e,t.height=i,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?"activeSelection"===t.type&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),t===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",t)},_fireSelectionEvents:function(t,e){var i=!1,s=this.getActiveObjects(),r=[],o=[];t.forEach(function(f){-1===s.indexOf(f)&&(i=!0,f.fire("deselected",{e,target:f}),o.push(f))}),s.forEach(function(f){-1===t.indexOf(f)&&(i=!0,f.fire("selected",{e,target:f}),r.push(f))}),0<t.length&&0<s.length?i&&this.fire("selection:updated",{e,selected:r,deselected:o}):0<s.length?this.fire("selection:created",{e,selected:r}):0<t.length&&this.fire("selection:cleared",{e,deselected:o})},setActiveObject:function(t,e){var i=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(i,e),this},_setActiveObject:function(t,e){return this._activeObject!==t&&!!this._discardActiveObject(e,t)&&!t.onSelect({e})&&(this._activeObject=t,!0)},_discardActiveObject:function(t,e){var i=this._activeObject;if(i){if(i.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),i=this.getActiveObject();return e.length&&this.fire("before:selection:cleared",{target:i,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(e){fabric.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,fabric.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,i){var s=this._realizeGroupTransformOnObject(t),r=this.callSuper("_toObject",t,e,i);return this._unwindGroupTransformOnObject(t,s),r},_realizeGroupTransformOnObject:function(t){if(t.group&&"activeSelection"===t.group.type&&this._activeObject===t.group){var e={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(i){e[i]=t[i]}),fabric.util.addTransformToObject(t,this._activeObject.calcOwnMatrix()),e}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,i){var s=this._realizeGroupTransformOnObject(e);this.callSuper("_setSVGObject",t,e,i),this._unwindGroupTransformOnObject(e,s)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),fabric.StaticCanvas.prototype.setViewportTransform.call(this,t)}}),fabric.StaticCanvas)"prototype"!==l&&(fabric.Canvas[l]=fabric.StaticCanvas[l])}(),function(){var h=fabric.util.addListener,n=fabric.util.removeListener,a={passive:!1};function l(t,e){return t.button&&t.button===e-1}fabric.util.object.extend(fabric.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(h,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(t,e){var i=this.upperCanvasEl,s=this._getEventPrefix();t(fabric.window,"resize",this._onResize),t(i,s+"down",this._onMouseDown),t(i,s+"move",this._onMouseMove,a),t(i,s+"out",this._onMouseOut),t(i,s+"enter",this._onMouseEnter),t(i,"wheel",this._onMouseWheel),t(i,"contextmenu",this._onContextMenu),t(i,"dblclick",this._onDoubleClick),t(i,"dragover",this._onDragOver),t(i,"dragenter",this._onDragEnter),t(i,"dragleave",this._onDragLeave),t(i,"drop",this._onDrop),this.enablePointerEvents||t(i,"touchstart",this._onTouchStart,a),typeof eventjs<"u"&&e in eventjs&&(eventjs[e](i,"gesture",this._onGesture),eventjs[e](i,"drag",this._onDrag),eventjs[e](i,"orientation",this._onOrientationChange),eventjs[e](i,"shake",this._onShake),eventjs[e](i,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(n,"remove");var t=this._getEventPrefix();n(fabric.document,t+"up",this._onMouseUp),n(fabric.document,"touchend",this._onTouchEnd,a),n(fabric.document,t+"move",this._onMouseMove,a),n(fabric.document,"touchmove",this._onMouseMove,a)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t});var i=this;this._hoveredTargets.forEach(function(s){i.fire("mouse:out",{target:e,e:t}),s&&e.fire("mouseout",{e:t})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(s){s.isEditing&&s.hiddenTextarea.focus()})},_onMouseEnter:function(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onDragOver:function(t){t.preventDefault();var e=this._simpleEventHandler("dragover",t);this._fireEnterLeaveEvents(e,t)},_onDrop:function(t){return this._simpleEventHandler("drop:before",t),this._simpleEventHandler("drop",t)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData(t)},getPointerId:function(t){var e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1},_isMainEvent:function(t){return!0===t.isPrimary||!1!==t.isPrimary&&("touchend"===t.type&&0===t.touches.length||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(t){t.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),this._resetTransformEventData();var e=this.upperCanvasEl,i=this._getEventPrefix();h(fabric.document,"touchend",this._onTouchEnd,a),h(fabric.document,"touchmove",this._onMouseMove,a),n(e,i+"down",this._onMouseDown)},_onMouseDown:function(t){this.__onMouseDown(t),this._resetTransformEventData();var e=this.upperCanvasEl,i=this._getEventPrefix();n(e,i+"move",this._onMouseMove,a),h(fabric.document,i+"up",this._onMouseUp),h(fabric.document,i+"move",this._onMouseMove,a)},_onTouchEnd:function(t){if(!(0<t.touches.length)){this.__onMouseUp(t),this._resetTransformEventData(),this.mainTouchId=null;var e=this._getEventPrefix();n(fabric.document,"touchend",this._onTouchEnd,a),n(fabric.document,"touchmove",this._onMouseMove,a);var i=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){h(i.upperCanvasEl,e+"down",i._onMouseDown),i._willAddMouseDown=0},400)}},_onMouseUp:function(t){this.__onMouseUp(t),this._resetTransformEventData();var e=this.upperCanvasEl,i=this._getEventPrefix();this._isMainEvent(t)&&(n(fabric.document,i+"up",this._onMouseUp),n(fabric.document,i+"move",this._onMouseMove,a),h(e,i+"move",this._onMouseMove,a))},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t){var e=this._activeObject;return!!(!!e!=!!t||e&&t&&e!==t)||!1},__onMouseUp:function(t){var e,i=this._currentTransform,s=this._groupSelector,r=!1,o=!s||0===s.left&&0===s.top;if(this._cacheTransformEventData(t),e=this._target,this._handleEvent(t,"up:before"),l(t,3))this.fireRightClick&&this._handleEvent(t,"up",3,o);else{if(l(t,2))return this.fireMiddleClick&&this._handleEvent(t,"up",2,o),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(t);else if(this._isMainEvent(t)){if(i&&(this._finalizeCurrentTransform(t),r=i.actionPerformed),!o){var f=e===this._activeObject;this._maybeGroupObjects(t),r||(r=this._shouldRender(e)||!f&&e===this._activeObject)}var m,y;if(e){if(m=e._findTargetCorner(this.getPointer(t,!0),fabric.util.isTouchEvent(t)),e.selectable&&e!==this._activeObject&&"up"===e.activeOn)this.setActiveObject(e,t),r=!0;else{var C=e.controls[m],w=C&&C.getMouseUpHandler(t,e,C);w&&w(t,i,(y=this.getPointer(t)).x,y.y)}e.isMoving=!1}if(i&&(i.target!==e||i.corner!==m)){var E=i.target&&i.target.controls[i.corner],M=E&&E.getMouseUpHandler(t,e,C);y=y||this.getPointer(t),M&&M(t,i,y.x,y.y)}this._setCursorFromEvent(t,e),this._handleEvent(t,"up",1,o),this._groupSelector=null,this._currentTransform=null,e&&(e.__corner=0),r?this.requestRenderAll():o||this.renderTop()}}},_simpleEventHandler:function(t,e){var i=this.findTarget(e),s=this.targets,r={e,target:i,subTargets:s};if(this.fire(t,r),i&&i.fire(t,r),!s)return i;for(var o=0;o<s.length;o++)s[o].fire(t,r);return i},_handleEvent:function(t,e,i,s){var r=this._target,o=this.targets||[],f={e:t,target:r,subTargets:o,button:i||1,isClick:s||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===e&&(f.currentTarget=this.findTarget(t),f.currentSubTargets=this.targets),this.fire("mouse:"+e,f),r&&r.fire("mouse"+e,f);for(var m=0;m<o.length;m++)o[m].fire("mouse"+e,f)},_finalizeCurrentTransform:function(t){var e=this._currentTransform,i=e.target,s={e:t,target:i,transform:e,action:e.action};i._scaling&&(i._scaling=!1),i.setCoords(),(e.actionPerformed||this.stateful&&i.hasStateChanged())&&this._fire("modified",s)},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(t).requestRenderAll();var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){var e=this.getPointer(t);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:t,pointer:e}),this._handleEvent(t,"up")},__onMouseDown:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"down:before");var e=this._target;if(l(t,3))this.fireRightClick&&this._handleEvent(t,"down",3);else if(l(t,2))this.fireMiddleClick&&this._handleEvent(t,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(this._isMainEvent(t)&&!this._currentTransform){var i=this._pointer;this._previousPointer=i;var s=this._shouldRender(e),r=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this.discardActiveObject(t):r&&(this._handleGrouping(t,e),e=this._activeObject),!this.selection||e&&(e.selectable||e.isEditing||e===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),e){var o=e===this._activeObject;e.selectable&&"down"===e.activeOn&&this.setActiveObject(e,t);var f=e._findTargetCorner(this.getPointer(t,!0),fabric.util.isTouchEvent(t));if(e.__corner=f,e===this._activeObject&&(f||!r)){this._setupCurrentTransform(t,e,o);var m=e.controls[f],y=(i=this.getPointer(t),m&&m.getMouseDownHandler(t,e,m));y&&y(t,this._currentTransform,i.x,i.y)}}this._handleEvent(t,"down"),(s||r)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)||null},_beforeTransform:function(t){var e=this._currentTransform;this.stateful&&e.target.saveState(),this.fire("before:transform",{e:t,transform:e})},__onMouseMove:function(t){var e,i;if(this._handleEvent(t,"move:before"),this._cacheTransformEventData(t),this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(this._isMainEvent(t)){var s=this._groupSelector;s?(s.left=(i=this._absolutePointer).x-s.ex,s.top=i.y-s.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t)||null,this._setCursorFromEvent(t,e),this._fireOverOutEvents(e,t)),this._handleEvent(t,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(t,e){var i=this._hoveredTarget,s=this._hoveredTargets,r=this.targets,o=Math.max(s.length,r.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:i,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var f=0;f<o;f++)this.fireSyntheticInOutEvents(r[f],e,{oldTarget:s[f],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(t,e){var i=this._draggedoverTarget,s=this._hoveredTargets,r=this.targets,o=Math.max(s.length,r.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:i,evtOut:"dragleave",evtIn:"dragenter"});for(var f=0;f<o;f++)this.fireSyntheticInOutEvents(r[f],e,{oldTarget:s[f],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=t},fireSyntheticInOutEvents:function(t,e,i){var s,r,o,f=i.oldTarget,m=f!==t,y=i.canvasEvtIn,C=i.canvasEvtOut;m&&(s={e,target:t,previousTarget:f},r={e,target:f,nextTarget:t}),o=t&&m,f&&m&&(C&&this.fire(C,r),f.fire(i.evtOut,r)),o&&(y&&this.fire(y,s),t.fire(i.evtIn,s))},__onMouseWheel:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()},_transformObject:function(t){var e=this.getPointer(t),i=this._currentTransform;i.reset=!1,i.shiftKey=t.shiftKey,i.altKey=t[this.centeredKey],this._performTransformAction(t,i,e),i.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(t,e,i){var o=e.action,f=!1,m=e.actionHandler;m&&(f=m(t,e,i.x,i.y)),"drag"===o&&f&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||f},_fire:fabric.controlsUtils.fireEvent,_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var i=e.hoverCursor||this.hoverCursor,s=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,r=(!s||!s.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));r?this.setCursor(this.getCornerCursor(r,e,t)):(e.subTargetCheck&&this.targets.concat().reverse().map(function(o){i=o.hoverCursor||i}),this.setCursor(i))},getCornerCursor:function(t,e,i){var s=e.controls[t];return s.cursorStyleHandler(i,s,e)}})}(),function(){var h=Math.min,n=Math.max;fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(a,l){var t=this._activeObject;return t&&this._isSelectionKeyPressed(a)&&l&&l.selectable&&this.selection&&(t!==l||"activeSelection"===t.type)&&!l.onSelect({e:a})},_handleGrouping:function(a,l){var t=this._activeObject;t.__corner||(l!==t||(l=this.findTarget(a,!0))&&l.selectable)&&(t&&"activeSelection"===t.type?this._updateActiveSelection(l,a):this._createActiveSelection(l,a))},_updateActiveSelection:function(a,l){var t=this._activeObject,e=t._objects.slice(0);t.contains(a)?(t.removeWithUpdate(a),this._hoveredTarget=a,this._hoveredTargets=this.targets.concat(),1===t.size()&&this._setActiveObject(t.item(0),l)):(t.addWithUpdate(a),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(e,l)},_createActiveSelection:function(a,l){var t=this.getActiveObjects(),e=this._createGroup(a);this._hoveredTarget=e,this._setActiveObject(e,l),this._fireSelectionEvents(t,l)},_createGroup:function(a){var l=this._objects,t=l.indexOf(this._activeObject)<l.indexOf(a)?[this._activeObject,a]:[a,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new fabric.ActiveSelection(t,{canvas:this})},_groupSelectedObjects:function(a){var l,t=this._collectObjects(a);1===t.length?this.setActiveObject(t[0],a):1<t.length&&(l=new fabric.ActiveSelection(t.reverse(),{canvas:this}),this.setActiveObject(l,a))},_collectObjects:function(a){for(var l,t=[],e=this._groupSelector.ex,i=this._groupSelector.ey,s=e+this._groupSelector.left,r=i+this._groupSelector.top,o=new fabric.Point(h(e,s),h(i,r)),f=new fabric.Point(n(e,s),n(i,r)),m=!this.selectionFullyContained,y=e===s&&i===r,C=this._objects.length;C--&&!((l=this._objects[C])&&l.selectable&&l.visible&&(m&&l.intersectsWithRect(o,f,!0)||l.isContainedWithinRect(o,f,!0)||m&&l.containsPoint(o,null,!0)||m&&l.containsPoint(f,null,!0))&&(t.push(l),y)););return 1<t.length&&(t=t.filter(function(w){return!w.onSelect({e:a})})),t},_maybeGroupObjects:function(a){this.selection&&this._groupSelector&&this._groupSelectedObjects(a),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(h){h||(h={});var n=h.format||"png",a=h.quality||1,l=(h.multiplier||1)*(h.enableRetinaScaling?this.getRetinaScaling():1),t=this.toCanvasElement(l,h);return fabric.util.toDataURL(t,n,a)},toCanvasElement:function(h,n){var a=((n=n||{}).width||this.width)*(h=h||1),l=(n.height||this.height)*h,t=this.getZoom(),e=this.width,i=this.height,s=t*h,r=this.viewportTransform,m=this.interactive,y=[s,0,0,s,(r[4]-(n.left||0))*h,(r[5]-(n.top||0))*h],C=this.enableRetinaScaling,w=fabric.util.createCanvasElement(),E=this.contextTop;return w.width=a,w.height=l,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=y,this.width=a,this.height=l,this.calcViewportBoundaries(),this.renderCanvas(w.getContext("2d"),this._objects),this.viewportTransform=r,this.width=e,this.height=i,this.calcViewportBoundaries(),this.interactive=m,this.enableRetinaScaling=C,this.contextTop=E,w}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromJSON:function(h,n,a){if(h){var l="string"==typeof h?JSON.parse(h):fabric.util.object.clone(h),t=this,e=l.clipPath,i=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete l.clipPath,this._enlivenObjects(l.objects,function(s){t.clear(),t._setBgOverlay(l,function(){e?t._enlivenObjects([e],function(r){t.clipPath=r[0],t.__setupCanvas.call(t,l,s,i,n)}):t.__setupCanvas.call(t,l,s,i,n)})},a),this}},__setupCanvas:function(h,n,a,l){var t=this;n.forEach(function(e,i){t.insertAt(e,i)}),this.renderOnAddRemove=a,delete h.objects,delete h.backgroundImage,delete h.overlayImage,delete h.background,delete h.overlay,this._setOptions(h),this.renderAll(),l&&l()},_setBgOverlay:function(h,n){var a={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(h.backgroundImage||h.overlayImage||h.background||h.overlay){var l=function(){a.backgroundImage&&a.overlayImage&&a.backgroundColor&&a.overlayColor&&n&&n()};this.__setBgOverlay("backgroundImage",h.backgroundImage,a,l),this.__setBgOverlay("overlayImage",h.overlayImage,a,l),this.__setBgOverlay("backgroundColor",h.background,a,l),this.__setBgOverlay("overlayColor",h.overlay,a,l)}else n&&n()},__setBgOverlay:function(h,n,a,l){var t=this;if(!n)return a[h]=!0,void(l&&l());"backgroundImage"===h||"overlayImage"===h?fabric.util.enlivenObjects([n],function(e){t[h]=e[0],a[h]=!0,l&&l()}):this["set"+fabric.util.string.capitalize(h,!0)](n,function(){a[h]=!0,l&&l()})},_enlivenObjects:function(h,n,a){h&&0!==h.length?fabric.util.enlivenObjects(h,function(l){n&&n(l)},null,a):n&&n([])},_toDataURL:function(h,n){this.clone(function(a){n(a.toDataURL(h))})},_toDataURLWithMultiplier:function(h,n,a){this.clone(function(l){a(l.toDataURLWithMultiplier(h,n))})},clone:function(h,n){var a=JSON.stringify(this.toJSON(n));this.cloneWithoutData(function(l){l.loadFromJSON(a,function(){h&&h(l)})})},cloneWithoutData:function(h){var n=fabric.util.createCanvasElement();n.width=this.width,n.height=this.height;var a=new fabric.Canvas(n);this.backgroundImage?(a.setBackgroundImage(this.backgroundImage.src,function(){a.renderAll(),h&&h(a)}),a.backgroundImageOpacity=this.backgroundImageOpacity,a.backgroundImageStretch=this.backgroundImageStretch):h&&h(a)}}),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.util.object.clone,t=n.util.toFixed,e=n.util.string.capitalize,i=n.util.degreesToRadians;n.Object||(n.Object=n.util.createClass(n.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:!n.isLikelyNode,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(r){r&&this.setOptions(r)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=n.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(r){var o=n.perfLimitSizeTotal,f=r.width,m=r.height,y=n.maxCacheSideLimit,C=n.minCacheSideLimit;if(f<=y&&m<=y&&f*m<=o)return f<C&&(r.width=C),m<C&&(r.height=C),r;var E=n.util.limitDimsByArea(f/m,o),M=n.util.capValue,N=M(C,E.x,y),H=M(C,E.y,y);return N<f&&(r.zoomX/=f/N,r.width=N,r.capped=!0),H<m&&(r.zoomY/=m/H,r.height=H,r.capped=!0),r},_getCacheCanvasDimensions:function(){var r=this.getTotalObjectScaling(),o=this._getTransformedDimensions(0,0),f=o.x*r.scaleX/this.scaleX,m=o.y*r.scaleY/this.scaleY;return{width:f+2,height:m+2,zoomX:r.scaleX,zoomY:r.scaleY,x:f,y:m}},_updateCacheCanvas:function(){var r=this.canvas;if(this.noScaleCache&&r&&r._currentTransform){var f=r._currentTransform.action;if(this===r._currentTransform.target&&f.slice&&"scale"===f.slice(0,5))return!1}var m,y,C=this._cacheCanvas,w=this._limitCacheSize(this._getCacheCanvasDimensions()),E=n.minCacheSideLimit,M=w.width,N=w.height,H=w.zoomX,nt=w.zoomY,rt=M!==this.cacheWidth||N!==this.cacheHeight,F=rt||this.zoomX!==H||this.zoomY!==nt,U=0,et=0,st=!1;if(rt){var ct=this._cacheCanvas.width,W=this._cacheCanvas.height,z=ct<M||W<N;st=z||(M<.9*ct||N<.9*W)&&E<ct&&E<W,z&&!w.capped&&(E<M||E<N)&&(U=.1*M,et=.1*N)}return this instanceof n.Text&&this.path&&(st=F=!0,U+=this.getHeightOfLine(0)*this.zoomX,et+=this.getHeightOfLine(0)*this.zoomY),!!F&&(st?(C.width=Math.ceil(M+U),C.height=Math.ceil(N+et)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,C.width,C.height)),m=w.x/2,y=w.y/2,this.cacheTranslationX=Math.round(C.width/2-m)+m,this.cacheTranslationY=Math.round(C.height/2-y)+y,this.cacheWidth=M,this.cacheHeight=N,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(H,nt),this.zoomX=H,this.zoomY=nt,!0)},setOptions:function(r){this._setOptions(r),this._initGradient(r.fill,"fill"),this._initGradient(r.stroke,"stroke"),this._initPattern(r.fill,"fill"),this._initPattern(r.stroke,"stroke")},transform:function(r){var f=this.calcTransformMatrix(!(this.group&&!this.group._transformDone||this.group&&this.canvas&&r===this.canvas.contextTop));r.transform(f[0],f[1],f[2],f[3],f[4],f[5])},toObject:function(r){var o=n.Object.NUM_FRACTION_DIGITS,f={type:this.type,version:n.version,originX:this.originX,originY:this.originY,left:t(this.left,o),top:t(this.top,o),width:t(this.width,o),height:t(this.height,o),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:t(this.strokeWidth,o),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:t(this.strokeMiterLimit,o),scaleX:t(this.scaleX,o),scaleY:t(this.scaleY,o),angle:t(this.angle,o),flipX:this.flipX,flipY:this.flipY,opacity:t(this.opacity,o),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:t(this.skewX,o),skewY:t(this.skewY,o)};return this.clipPath&&!this.clipPath.excludeFromExport&&(f.clipPath=this.clipPath.toObject(r),f.clipPath.inverted=this.clipPath.inverted,f.clipPath.absolutePositioned=this.clipPath.absolutePositioned),n.util.populateWithProperties(this,f,r),this.includeDefaultValues||(f=this._removeDefaultValues(f)),f},toDatalessObject:function(r){return this.toObject(r)},_removeDefaultValues:function(r){var o=n.util.getKlass(r.type).prototype;return o.stateProperties.forEach(function(f){"left"!==f&&"top"!==f&&(r[f]===o[f]&&delete r[f],Array.isArray(r[f])&&Array.isArray(o[f])&&0===r[f].length&&0===o[f].length&&delete r[f])}),r},toString:function(){return"#<fabric."+e(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var r=n.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(r.scaleX),scaleY:Math.abs(r.scaleY)}},getTotalObjectScaling:function(){var r=this.getObjectScaling(),o=r.scaleX,f=r.scaleY;if(this.canvas){var m=this.canvas.getZoom(),y=this.canvas.getRetinaScaling();o*=m*y,f*=m*y}return{scaleX:o,scaleY:f}},getObjectOpacity:function(){var r=this.opacity;return this.group&&(r*=this.group.getObjectOpacity()),r},_set:function(r,o){var m=this[r]!==o,y=!1;return("scaleX"===r||"scaleY"===r)&&(o=this._constrainScale(o)),"scaleX"===r&&o<0?(this.flipX=!this.flipX,o*=-1):"scaleY"===r&&o<0?(this.flipY=!this.flipY,o*=-1):"shadow"!==r||!o||o instanceof n.Shadow?"dirty"===r&&this.group&&this.group.set("dirty",o):o=new n.Shadow(o),this[r]=o,m&&(y=this.group&&this.group.isOnACache(),-1<this.cacheProperties.indexOf(r)?(this.dirty=!0,y&&this.group.set("dirty",!0)):y&&-1<this.stateProperties.indexOf(r)&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:n.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(r){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(r.save(),this._setupCompositeOperation(r),this.drawSelectionBackground(r),this.transform(r),this._setOpacity(r),this._setShadow(r,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(r)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(r),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),r.restore())},renderCache:function(r){r=r||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,r.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!=typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(r,o){if(r.save(),r.globalCompositeOperation=o.inverted?"destination-out":"destination-in",o.absolutePositioned){var f=n.util.invertTransform(this.calcTransformMatrix());r.transform(f[0],f[1],f[2],f[3],f[4],f[5])}o.transform(r),r.scale(1/o.zoomX,1/o.zoomY),r.drawImage(o._cacheCanvas,-o.cacheTranslationX,-o.cacheTranslationY),r.restore()},drawObject:function(r,o){var f=this.fill,m=this.stroke;o?(this.fill="black",this.stroke="",this._setClippingProperties(r)):this._renderBackground(r),this._render(r),this._drawClipPath(r,this.clipPath),this.fill=f,this.stroke=m},_drawClipPath:function(r,o){o&&(o.canvas=this.canvas,o.shouldCache(),o._transformDone=!0,o.renderCache({forClipping:!0}),this.drawClipPathOnCache(r,o))},drawCacheOnCanvas:function(r){r.scale(1/this.zoomX,1/this.zoomY),r.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(r){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!r&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!r){var o=this.cacheWidth/this.zoomX,f=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-o/2,-f/2,o,f)}return!0}return!1},_renderBackground:function(r){if(this.backgroundColor){var o=this._getNonTransformedDimensions();r.fillStyle=this.backgroundColor,r.fillRect(-o.x/2,-o.y/2,o.x,o.y),this._removeShadow(r)}},_setOpacity:function(r){this.group&&!this.group._transformDone?r.globalAlpha=this.getObjectOpacity():r.globalAlpha*=this.opacity},_setStrokeStyles:function(r,o){var f=o.stroke;f&&(r.lineWidth=o.strokeWidth,r.lineCap=o.strokeLineCap,r.lineDashOffset=o.strokeDashOffset,r.lineJoin=o.strokeLineJoin,r.miterLimit=o.strokeMiterLimit,f.toLive?"percentage"===f.gradientUnits||f.gradientTransform||f.patternTransform?this._applyPatternForTransformedGradient(r,f):(r.strokeStyle=f.toLive(r,this),this._applyPatternGradientTransform(r,f)):r.strokeStyle=o.stroke)},_setFillStyles:function(r,o){var f=o.fill;f&&(f.toLive?(r.fillStyle=f.toLive(r,this),this._applyPatternGradientTransform(r,o.fill)):r.fillStyle=f)},_setClippingProperties:function(r){r.globalAlpha=1,r.strokeStyle="transparent",r.fillStyle="#000000"},_setLineDash:function(r,o){o&&0!==o.length&&(1&o.length&&o.push.apply(o,o),r.setLineDash(o))},_renderControls:function(r,o){var f,m,y,C=this.getViewportTransform(),w=this.calcTransformMatrix();m=void 0!==(o=o||{}).hasBorders?o.hasBorders:this.hasBorders,y=void 0!==o.hasControls?o.hasControls:this.hasControls,w=n.util.multiplyTransformMatrices(C,w),f=n.util.qrDecompose(w),r.save(),r.translate(f.translateX,f.translateY),r.lineWidth=1*this.borderScaleFactor,this.group||(r.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(f.angle-=180),r.rotate(i(this.group?f.angle:this.angle)),o.forActiveSelection||this.group?m&&this.drawBordersInGroup(r,f,o):m&&this.drawBorders(r,o),y&&this.drawControls(r,o),r.restore()},_setShadow:function(r){if(this.shadow){var o,f=this.shadow,m=this.canvas,y=m&&m.viewportTransform[0]||1,C=m&&m.viewportTransform[3]||1;o=f.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),m&&m._isRetinaScaling()&&(y*=n.devicePixelRatio,C*=n.devicePixelRatio),r.shadowColor=f.color,r.shadowBlur=f.blur*n.browserShadowBlurConstant*(y+C)*(o.scaleX+o.scaleY)/4,r.shadowOffsetX=f.offsetX*y*o.scaleX,r.shadowOffsetY=f.offsetY*C*o.scaleY}},_removeShadow:function(r){this.shadow&&(r.shadowColor="",r.shadowBlur=r.shadowOffsetX=r.shadowOffsetY=0)},_applyPatternGradientTransform:function(r,o){if(!o||!o.toLive)return{offsetX:0,offsetY:0};var f=o.gradientTransform||o.patternTransform,m=-this.width/2+o.offsetX||0,y=-this.height/2+o.offsetY||0;return"percentage"===o.gradientUnits?r.transform(this.width,0,0,this.height,m,y):r.transform(1,0,0,1,m,y),f&&r.transform(f[0],f[1],f[2],f[3],f[4],f[5]),{offsetX:m,offsetY:y}},_renderPaintInOrder:function(r){"stroke"===this.paintFirst?(this._renderStroke(r),this._renderFill(r)):(this._renderFill(r),this._renderStroke(r))},_render:function(){},_renderFill:function(r){this.fill&&(r.save(),this._setFillStyles(r,this),"evenodd"===this.fillRule?r.fill("evenodd"):r.fill(),r.restore())},_renderStroke:function(r){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(r),r.save(),this.strokeUniform&&this.group){var o=this.getObjectScaling();r.scale(1/o.scaleX,1/o.scaleY)}else this.strokeUniform&&r.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(r,this.strokeDashArray),this._setStrokeStyles(r,this),r.stroke(),r.restore()}},_applyPatternForTransformedGradient:function(r,o){var f,m=this._limitCacheSize(this._getCacheCanvasDimensions()),y=n.util.createCanvasElement(),C=this.canvas.getRetinaScaling(),w=m.x/this.scaleX/C,E=m.y/this.scaleY/C;y.width=w,y.height=E,(f=y.getContext("2d")).beginPath(),f.moveTo(0,0),f.lineTo(w,0),f.lineTo(w,E),f.lineTo(0,E),f.closePath(),f.translate(w/2,E/2),f.scale(m.zoomX/this.scaleX/C,m.zoomY/this.scaleY/C),this._applyPatternGradientTransform(f,o),f.fillStyle=o.toLive(r),f.fill(),r.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),r.scale(C*this.scaleX/m.zoomX,C*this.scaleY/m.zoomY),r.strokeStyle=f.createPattern(y,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var r=n.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",r.scaleX),this.set("scaleY",r.scaleY),this.angle=r.angle,this.skewX=r.skewX,this.skewY=0}},_removeTransformMatrix:function(r){var o=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),o=n.util.transformPoint(o,this.transformMatrix)),this.transformMatrix=null,r&&(this.scaleX*=r.scaleX,this.scaleY*=r.scaleY,this.cropX=r.cropX,this.cropY=r.cropY,o.x+=r.offsetLeft,o.y+=r.offsetTop,this.width=r.width,this.height=r.height),this.setPositionByOrigin(o,"center","center")},clone:function(r,o){var f=this.toObject(o);this.constructor.fromObject?this.constructor.fromObject(f,r):n.Object._fromObject("Object",f,r)},cloneAsImage:function(r,o){var f=this.toCanvasElement(o);return r&&r(new n.Image(f)),this},toCanvasElement:function(r){r||(r={});var o=n.util,f=o.saveObjectTransform(this),m=this.group,y=this.shadow,C=Math.abs,w=(r.multiplier||1)*(r.enableRetinaScaling?n.devicePixelRatio:1);delete this.group,r.withoutTransform&&o.resetObjectTransform(this),r.withoutShadow&&(this.shadow=null);var E,M,H,nt=n.util.createCanvasElement(),rt=this.getBoundingRect(!0,!0),g=this.shadow,F={x:0,y:0};g&&(M=g.blur,E=g.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),F.x=2*Math.round(C(g.offsetX)+M)*C(E.scaleX),F.y=2*Math.round(C(g.offsetY)+M)*C(E.scaleY)),H=rt.height+F.y,nt.width=Math.ceil(rt.width+F.x),nt.height=Math.ceil(H);var U=new n.StaticCanvas(nt,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===r.format&&(U.backgroundColor="#fff"),this.setPositionByOrigin(new n.Point(U.width/2,U.height/2),"center","center");var et=this.canvas;U.add(this);var st=U.toCanvasElement(w||1,r);return this.shadow=y,this.set("canvas",et),m&&(this.group=m),this.set(f).setCoords(),U._objects=[],U.dispose(),U=null,st},toDataURL:function(r){return r||(r={}),n.util.toDataURL(this.toCanvasElement(r),r.format||"png",r.quality||1)},isType:function(r){return 1<arguments.length?Array.from(arguments).includes(this.type):this.type===r},complexity:function(){return 1},toJSON:function(r){return this.toObject(r)},rotate:function(r){var o=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return o&&this._setOriginToCenter(),this.set("angle",r),o&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(r,o){o=o||this.canvas.getPointer(r);var f=new n.Point(o.x,o.y),m=this._getLeftTopCoords();return this.angle&&(f=n.util.rotatePoint(f,m,i(-this.angle))),{x:f.x-m.x,y:f.y-m.y}},_setupCompositeOperation:function(r){this.globalCompositeOperation&&(r.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){n.runningAnimations&&n.runningAnimations.cancelByTarget(this)}}),n.util.createAccessors&&n.util.createAccessors(n.Object),a(n.Object.prototype,n.Observable),n.Object.NUM_FRACTION_DIGITS=2,n.Object.ENLIVEN_PROPS=["clipPath"],n.Object._fromObject=function(r,o,f,m){var y=n[r];o=l(o,!0),n.util.enlivenPatterns([o.fill,o.stroke],function(C){void 0!==C[0]&&(o.fill=C[0]),void 0!==C[1]&&(o.stroke=C[1]),n.util.enlivenObjectEnlivables(o,o,function(){var w=m?new y(o[m],o):new y(o);f&&f(w)})})},n.Object.__uid=0)}(typeof exports<"u"?exports:this),function(){var h=fabric.util.degreesToRadians,n={left:-.5,center:0,right:.5},a={top:-.5,center:0,bottom:.5};fabric.util.object.extend(fabric.Object.prototype,{translateToGivenOrigin:function(l,t,e,i,s){var r,o,f,m=l.x,y=l.y;return"string"==typeof t?t=n[t]:t-=.5,"string"==typeof i?i=n[i]:i-=.5,"string"==typeof e?e=a[e]:e-=.5,"string"==typeof s?s=a[s]:s-=.5,o=s-e,((r=i-t)||o)&&(f=this._getTransformedDimensions(),m=l.x+r*f.x,y=l.y+o*f.y),new fabric.Point(m,y)},translateToCenterPoint:function(l,t,e){var i=this.translateToGivenOrigin(l,t,e,"center","center");return this.angle?fabric.util.rotatePoint(i,l,h(this.angle)):i},translateToOriginPoint:function(l,t,e){var i=this.translateToGivenOrigin(l,"center","center",t,e);return this.angle?fabric.util.rotatePoint(i,l,h(this.angle)):i},getCenterPoint:function(){var l=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(l,this.originX,this.originY)},getPointByOrigin:function(l,t){var e=this.getCenterPoint();return this.translateToOriginPoint(e,l,t)},toLocalPoint:function(l,t,e){var i,s,r=this.getCenterPoint();return i=void 0!==t&&void 0!==e?this.translateToGivenOrigin(r,"center","center",t,e):new fabric.Point(this.left,this.top),s=new fabric.Point(l.x,l.y),this.angle&&(s=fabric.util.rotatePoint(s,r,-h(this.angle))),s.subtractEquals(i)},setPositionByOrigin:function(l,t,e){var i=this.translateToCenterPoint(l,t,e),s=this.translateToOriginPoint(i,this.originX,this.originY);this.set("left",s.x),this.set("top",s.y)},adjustPosition:function(l){var t,e,i=h(this.angle),s=this.getScaledWidth(),r=fabric.util.cos(i)*s,o=fabric.util.sin(i)*s;this.left+=r*((e="string"==typeof l?n[l]:l-.5)-(t="string"==typeof this.originX?n[this.originX]:this.originX-.5)),this.top+=o*(e-t),this.setCoords(),this.originX=l},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var l=this.getCenterPoint();this.originX="center",this.originY="center",this.left=l.x,this.top=l.y},_resetOrigin:function(){var l=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=l.x,this.top=l.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){var h=fabric.util,n=h.degreesToRadians,a=h.multiplyTransformMatrices,l=h.transformPoint;h.object.extend(fabric.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(t,e){return e?t?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),t?this.aCoords:this.lineCoords)},getCoords:function(t,e){return i=this._getCoords(t,e),[new fabric.Point(i.tl.x,i.tl.y),new fabric.Point(i.tr.x,i.tr.y),new fabric.Point(i.br.x,i.br.y),new fabric.Point(i.bl.x,i.bl.y)];var i},intersectsWithRect:function(t,e,i,s){var r=this.getCoords(i,s);return"Intersection"===fabric.Intersection.intersectPolygonRectangle(r,t,e).status},intersectsWithObject:function(t,e,i){return"Intersection"===fabric.Intersection.intersectPolygonPolygon(this.getCoords(e,i),t.getCoords(e,i)).status||t.isContainedWithinObject(this,e,i)||this.isContainedWithinObject(t,e,i)},isContainedWithinObject:function(t,e,i){for(var s=this.getCoords(e,i),o=0,f=t._getImageLines(e?t.aCoords:t.lineCoords);o<4;o++)if(!t.containsPoint(s[o],f))return!1;return!0},isContainedWithinRect:function(t,e,i,s){var r=this.getBoundingRect(i,s);return r.left>=t.x&&r.left+r.width<=e.x&&r.top>=t.y&&r.top+r.height<=e.y},containsPoint:function(t,e,i,s){var r=this._getCoords(i,s),o=(e=e||this._getImageLines(r),this._findCrossPoints(t,e));return 0!==o&&o%2==1},isOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.getCoords(!0,t).some(function(s){return s.x<=i.x&&s.x>=e.x&&s.y<=i.y&&s.y>=e.y})||!!this.intersectsWithRect(e,i,!0,t)||this._containsCenterOfCanvas(e,i,t)},_containsCenterOfCanvas:function(t,e,i){return!!this.containsPoint({x:(t.x+e.x)/2,y:(t.y+e.y)/2},null,!0,i)},isPartiallyOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.intersectsWithRect(e,i,!0,t)||this.getCoords(!0,t).every(function(s){return(s.x>=i.x||s.x<=e.x)&&(s.y>=i.y||s.y<=e.y)})&&this._containsCenterOfCanvas(e,i,t)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,s,r,o=0;for(var f in e)if(!((r=e[f]).o.y<t.y&&r.d.y<t.y||r.o.y>=t.y&&r.d.y>=t.y||(r.o.x===r.d.x&&r.o.x>=t.x?s=r.o.x:(i=(r.d.y-r.o.y)/(r.d.x-r.o.x),s=-(t.y-0*t.x-(r.o.y-i*r.o.x))/(0-i)),s>=t.x&&(o+=1),2!==o)))break;return o},getBoundingRect:function(t,e){var i=this.getCoords(t,e);return h.makeBoundingBoxFromPoints(i)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t},scale:function(t){return this._set("scaleX",t),this._set("scaleY",t),this.setCoords()},scaleToWidth:function(t,e){var i=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/i)},scaleToHeight:function(t,e){var i=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/i)},calcLineCoords:function(){var t=this.getViewportTransform(),e=this.padding,i=n(this.angle),s=h.cos(i)*e,r=h.sin(i)*e,o=s+r,f=s-r,m=this.calcACoords(),y={tl:l(m.tl,t),tr:l(m.tr,t),bl:l(m.bl,t),br:l(m.br,t)};return e&&(y.tl.x-=f,y.tl.y-=o,y.tr.x+=o,y.tr.y-=f,y.bl.x-=o,y.bl.y+=f,y.br.x+=f,y.br.y+=o),y},calcOCoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),i=this.getViewportTransform(),s=a(i,e),r=a(s,t),o=(r=a(r,[1/i[0],0,0,1/i[3],0,0]),this._calculateCurrentDimensions()),f={};return this.forEachControl(function(m,y,C){f[y]=m.positionHandler(o,r,C)}),f},calcACoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),i=a(e,t),s=this._getTransformedDimensions(),r=s.x/2,o=s.y/2;return{tl:l({x:-r,y:-o},i),tr:l({x:r,y:-o},i),bl:l({x:-r,y:o},i),br:l({x:r,y:o},i)}},setCoords:function(t){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),t||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return h.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var t=this.getCenterPoint();return[1,0,0,1,t.x,t.y]},transformMatrixKey:function(t){var e="_",i="";return!t&&this.group&&(i=this.group.transformMatrixKey(t)+e),i+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(t){var e=this.calcOwnMatrix();if(t||!this.group)return e;var i=this.transformMatrixKey(t),s=this.matrixCache||(this.matrixCache={});return s.key===i?s.value:(this.group&&(e=a(this.group.calcTransformMatrix(!1),e)),s.key=i,s.value=e)},calcOwnMatrix:function(){var t=this.transformMatrixKey(!0),e=this.ownMatrixCache||(this.ownMatrixCache={});if(e.key===t)return e.value;var i=this._calcTranslateMatrix(),s={angle:this.angle,translateX:i[4],translateY:i[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return e.key=t,e.value=h.composeMatrix(s),e.value},_getNonTransformedDimensions:function(){var t=this.strokeWidth;return{x:this.width+t,y:this.height+t}},_getTransformedDimensions:function(t,e){void 0===t&&(t=this.skewX),void 0===e&&(e=this.skewY);var i,s,r,o=0===t&&0===e;if(this.strokeUniform?(s=this.width,r=this.height):(s=(i=this._getNonTransformedDimensions()).x,r=i.y),o)return this._finalizeDimensions(s*this.scaleX,r*this.scaleY);var f=h.sizeAfterTransform(s,r,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:t,skewY:e});return this._finalizeDimensions(f.x,f.y)},_finalizeDimensions:function(t,e){return this.strokeUniform?{x:t+this.strokeWidth,y:e+this.strokeWidth}:{x:t,y:e}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions();return l(e,t,!0).scalarAdd(2*this.padding)}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(h){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,h):this.canvas&&this.canvas.sendBackwards(this,h),this},bringForward:function(h){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,h):this.canvas&&this.canvas.bringForward(this,h),this},moveTo:function(h){return this.group&&"activeSelection"!==this.group.type?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,h):this.canvas&&this.canvas.moveTo(this,h),this}}),function(){function h(a,l){if(l){if(l.toLive)return a+": url(#SVGID_"+l.id+"); ";var t=new fabric.Color(l),e=a+": "+t.toRgb()+"; ",i=t.getAlpha();return 1!==i&&(e+=a+"-opacity: "+i.toString()+"; "),e}return a+": none; "}var n=fabric.util.toFixed;fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(a){var l=this.fillRule?this.fillRule:"nonzero",t=this.strokeWidth?this.strokeWidth:"0",e=this.strokeDashArray?this.strokeDashArray.join(" "):"none",i=this.strokeDashOffset?this.strokeDashOffset:"0",s=this.strokeLineCap?this.strokeLineCap:"butt",r=this.strokeLineJoin?this.strokeLineJoin:"miter",o=this.strokeMiterLimit?this.strokeMiterLimit:"4",f=void 0!==this.opacity?this.opacity:"1",m=this.visible?"":" visibility: hidden;",y=a?"":this.getSvgFilter(),C=h("fill",this.fill);return[h("stroke",this.stroke),"stroke-width: ",t,"; ","stroke-dasharray: ",e,"; ","stroke-linecap: ",s,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",r,"; ","stroke-miterlimit: ",o,"; ",C,"fill-rule: ",l,"; ","opacity: ",f,";",y,m].join("")},getSvgSpanStyles:function(a,l){var t="; ",e=a.fontFamily?"font-family: "+(-1===a.fontFamily.indexOf("'")&&-1===a.fontFamily.indexOf('"')?"'"+a.fontFamily+"'":a.fontFamily)+t:"",i=a.strokeWidth?"stroke-width: "+a.strokeWidth+t:"",s=a.fontSize?"font-size: "+a.fontSize+"px"+t:"",r=a.fontStyle?"font-style: "+a.fontStyle+t:"",o=a.fontWeight?"font-weight: "+a.fontWeight+t:"",f=a.fill?h("fill",a.fill):"",m=a.stroke?h("stroke",a.stroke):"",y=this.getSvgTextDecoration(a);return y&&(y="text-decoration: "+y+t),[m,i,e,s,r,o,y,f,a.deltaY?"baseline-shift: "+-a.deltaY+"; ":"",l?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(a){return["overline","underline","line-through"].filter(function(l){return a[l.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(a,l){var t=a?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+fabric.util.matrixToSVG(t)+(l||"")+'" '},_setSVGBg:function(a){if(this.backgroundColor){var l=fabric.Object.NUM_FRACTION_DIGITS;a.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',n(-this.width/2,l),'" y="',n(-this.height/2,l),'" width="',n(this.width,l),'" height="',n(this.height,l),'"></rect>\n')}},toSVG:function(a){return this._createBaseSVGMarkup(this._toSVG(a),{reviver:a})},toClipPathSVG:function(a){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(a),{reviver:a})},_createBaseClipPathSVGMarkup:function(a,l){var t=(l=l||{}).reviver,i=[this.getSvgTransform(!0,l.additionalTransform||""),this.getSvgCommons()].join(""),s=a.indexOf("COMMON_PARTS");return a[s]=i,t?t(a.join("")):a.join("")},_createBaseSVGMarkup:function(a,l){var t,e,i=(l=l||{}).noStyle,s=l.reviver,r=i?"":'style="'+this.getSvgStyles()+'" ',o=l.withShadow?'style="'+this.getSvgFilter()+'" ':"",f=this.clipPath,m=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",y=f&&f.absolutePositioned,C=this.stroke,w=this.fill,E=this.shadow,M=[],N=a.indexOf("COMMON_PARTS"),H=l.additionalTransform;return f&&(f.clipPathId="CLIPPATH_"+fabric.Object.__uid++,e='<clipPath id="'+f.clipPathId+'" >\n'+f.toClipPathSVG(s)+"</clipPath>\n"),y&&M.push("<g ",o,this.getSvgCommons()," >\n"),M.push("<g ",this.getSvgTransform(!1),y?"":o+this.getSvgCommons()," >\n"),t=[r,m,i?"":this.addPaintOrder()," ",H?'transform="'+H+'" ':""].join(""),a[N]=t,w&&w.toLive&&M.push(w.toSVG(this)),C&&C.toLive&&M.push(C.toSVG(this)),E&&M.push(E.toSVG(this)),f&&M.push(e),M.push(a.join("")),M.push("</g>\n"),y&&M.push("</g>\n"),s?s(M.join("")):M.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var h=fabric.util.object.extend,n="stateProperties";function a(l,t,e){var i={};e.forEach(function(s){i[s]=l[s]}),h(l[t],i,!0)}fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(l){var t="_"+(l=l||n);return Object.keys(this[t]).length<this[l].length||!function e(i,s,r){if(i===s)return!0;if(Array.isArray(i)){if(!Array.isArray(s)||i.length!==s.length)return!1;for(var o=0,f=i.length;o<f;o++)if(!e(i[o],s[o]))return!1;return!0}if(i&&"object"==typeof i){var m,y=Object.keys(i);if(!s||"object"!=typeof s||!r&&y.length!==Object.keys(s).length)return!1;for(o=0,f=y.length;o<f;o++)if("canvas"!==(m=y[o])&&"group"!==m&&!e(i[m],s[m]))return!1;return!0}}(this[t],this,!0)},saveState:function(l){var t=l&&l.propertySet||n,e="_"+t;return this[e]?(a(this,e,this[t]),l&&l.stateProperties&&a(this,e,l.stateProperties),this):this.setupState(l)},setupState:function(l){var t=(l=l||{}).propertySet||n;return this["_"+(l.propertySet=t)]={},this.saveState(l),this}})}(),function(){var h=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{_findTargetCorner:function(n,a){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var l,t,e,i=n.x,s=n.y,r=Object.keys(this.oCoords),o=r.length-1;for(this.__corner=0;0<=o;o--)if(this.isControlVisible(e=r[o])&&(t=this._getImageLines(a?this.oCoords[e].touchCorner:this.oCoords[e].corner),0!==(l=this._findCrossPoints({x:i,y:s},t))&&l%2==1))return this.__corner=e;return!1},forEachControl:function(n){for(var a in this.controls)n(this.controls[a],a,this)},_setCornerCoords:function(){var n=this.oCoords;for(var a in n){var l=this.controls[a];n[a].corner=l.calcCornerCoords(this.angle,this.cornerSize,n[a].x,n[a].y,!1),n[a].touchCorner=l.calcCornerCoords(this.angle,this.touchCornerSize,n[a].x,n[a].y,!0)}},drawSelectionBackground:function(n){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;n.save();var a=this.getCenterPoint(),l=this._calculateCurrentDimensions(),t=this.canvas.viewportTransform;return n.translate(a.x,a.y),n.scale(1/t[0],1/t[3]),n.rotate(h(this.angle)),n.fillStyle=this.selectionBackgroundColor,n.fillRect(-l.x/2,-l.y/2,l.x,l.y),n.restore(),this},drawBorders:function(n,a){a=a||{};var l=this._calculateCurrentDimensions(),t=this.borderScaleFactor,e=l.x+t,i=l.y+t,s=void 0!==a.hasControls?a.hasControls:this.hasControls,r=!1;return n.save(),n.strokeStyle=a.borderColor||this.borderColor,this._setLineDash(n,a.borderDashArray||this.borderDashArray),n.strokeRect(-e/2,-i/2,e,i),s&&(n.beginPath(),this.forEachControl(function(o,f,m){o.withConnection&&o.getVisibility(m,f)&&(r=!0,n.moveTo(o.x*e,o.y*i),n.lineTo(o.x*e+o.offsetX,o.y*i+o.offsetY))}),r&&n.stroke()),n.restore(),this},drawBordersInGroup:function(n,a,l){l=l||{};var t=fabric.util.sizeAfterTransform(this.width,this.height,a),e=this.strokeWidth,i=this.strokeUniform,s=this.borderScaleFactor,r=t.x+e*(i?this.canvas.getZoom():a.scaleX)+s,o=t.y+e*(i?this.canvas.getZoom():a.scaleY)+s;return n.save(),this._setLineDash(n,l.borderDashArray||this.borderDashArray),n.strokeStyle=l.borderColor||this.borderColor,n.strokeRect(-r/2,-o/2,r,o),n.restore(),this},drawControls:function(n,a){a=a||{},n.save();var l,t,e=this.canvas.getRetinaScaling();return n.setTransform(e,0,0,e,0,0),n.strokeStyle=n.fillStyle=a.cornerColor||this.cornerColor,this.transparentCorners||(n.strokeStyle=a.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(n,a.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(l=this.group.calcTransformMatrix()),this.forEachControl(function(i,s,r){t=r.oCoords[s],i.getVisibility(r,s)&&(l&&(t=fabric.util.transformPoint(t,l)),i.render(n,t.x,t.y,a,r))}),n.restore(),this},isControlVisible:function(n){return this.controls[n]&&this.controls[n].getVisibility(this,n)},setControlVisible:function(n,a){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[n]=a,this},setControlsVisibility:function(n){for(var a in n||(n={}),n)this.setControlVisible(a,n[a]);return this},onDeselect:function(){},onSelect:function(){}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(h,n){var a=function(){},l=(n=n||{}).onComplete||a,t=n.onChange||a,e=this;return fabric.util.animate({target:this,startValue:h.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(i){h.set("left",i),e.requestRenderAll(),t()},onComplete:function(){h.setCoords(),l()}})},fxCenterObjectV:function(h,n){var a=function(){},l=(n=n||{}).onComplete||a,t=n.onChange||a,e=this;return fabric.util.animate({target:this,startValue:h.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(i){h.set("top",i),e.requestRenderAll(),t()},onComplete:function(){h.setCoords(),l()}})},fxRemove:function(h,n){var a=function(){},l=(n=n||{}).onComplete||a,t=n.onChange||a,e=this;return fabric.util.animate({target:this,startValue:h.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(i){h.set("opacity",i),e.requestRenderAll(),t()},onComplete:function(){e.remove(h),l()}})}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var h,a=[],l=[];for(h in arguments[0])a.push(h);for(var t=0,e=a.length;t<e;t++)l.push(this._animate(h=a[t],arguments[0][h],arguments[1],t!==e-1));return l}return this._animate.apply(this,arguments)},_animate:function(h,n,a,l){var t,e=this;n=n.toString(),a=a?fabric.util.object.clone(a):{},~h.indexOf(".")&&(t=h.split("."));var i=-1<e.colorProperties.indexOf(h)||t&&-1<e.colorProperties.indexOf(t[1]),s=t?this.get(t[0])[t[1]]:this.get(h);"from"in a||(a.from=s),i||(n=~n.indexOf("=")?s+parseFloat(n.replace("=","")):parseFloat(n));var r={target:this,startValue:a.from,endValue:n,byValue:a.by,easing:a.easing,duration:a.duration,abort:a.abort&&function(o,f,m){return a.abort.call(e,o,f,m)},onChange:function(o,f,m){t?e[t[0]][t[1]]=o:e.set(h,o),l||a.onChange&&a.onChange(o,f,m)},onComplete:function(o,f,m){l||(e.setCoords(),a.onComplete&&a.onComplete(o,f,m))}};return i?fabric.util.animateColor(r.startValue,r.endValue,r.duration,r):fabric.util.animate(r)}}),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.util.object.clone,t={x1:1,x2:1,y1:1,y2:1};function e(i,s){var r=i.origin,o=i.axis1,f=i.axis2,m=i.dimension,y=s.nearest,C=s.center,w=s.farthest;return function(){switch(this.get(r)){case y:return Math.min(this.get(o),this.get(f));case C:return Math.min(this.get(o),this.get(f))+.5*this.get(m);case w:return Math.max(this.get(o),this.get(f))}}}n.Line?n.warn("fabric.Line is already defined"):(n.Line=n.util.createClass(n.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:n.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(i,s){i||(i=[0,0,0,0]),this.callSuper("initialize",s),this.set("x1",i[0]),this.set("y1",i[1]),this.set("x2",i[2]),this.set("y2",i[3]),this._setWidthHeight(s)},_setWidthHeight:function(i){i||(i={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in i?i.left:this._getLeftToOriginX(),this.top="top"in i?i.top:this._getTopToOriginY()},_set:function(i,s){return this.callSuper("_set",i,s),void 0!==t[i]&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(i){i.beginPath();var s=this.calcLinePoints();i.moveTo(s.x1,s.y1),i.lineTo(s.x2,s.y2),i.lineWidth=this.strokeWidth;var r=i.strokeStyle;i.strokeStyle=this.stroke||i.fillStyle,this.stroke&&this._renderStroke(i),i.strokeStyle=r},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(i){return a(this.callSuper("toObject",i),this.calcLinePoints())},_getNonTransformedDimensions:function(){var i=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(i.y-=this.strokeWidth),0===this.height&&(i.x-=this.strokeWidth)),i},calcLinePoints:function(){var i=this.x1<=this.x2?-1:1,s=this.y1<=this.y2?-1:1;return{x1:i*this.width*.5,x2:i*this.width*-.5,y1:s*this.height*.5,y2:s*this.height*-.5}},_toSVG:function(){var i=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',i.x1,'" y1="',i.y1,'" x2="',i.x2,'" y2="',i.y2,'" />\n']}}),n.Line.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),n.Line.fromElement=function(i,s,r){r=r||{};var o=n.parseAttributes(i,n.Line.ATTRIBUTE_NAMES);s(new n.Line([o.x1||0,o.y1||0,o.x2||0,o.y2||0],a(o,r)))},n.Line.fromObject=function(i,s){var r=l(i,!0);r.points=[i.x1,i.y1,i.x2,i.y2],n.Object._fromObject("Line",r,function(o){delete o.points,s&&s(o)},"points")})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.degreesToRadians;n.Circle?n.warn("fabric.Circle is already defined."):(n.Circle=n.util.createClass(n.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:n.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(l,t){return this.callSuper("_set",l,t),"radius"===l&&this.setRadius(t),this},toObject:function(l){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(l))},_toSVG:function(){var l,t=(this.endAngle-this.startAngle)%360;if(0===t)l=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var e=a(this.startAngle),i=a(this.endAngle),s=this.radius;l=['<path d="M '+n.util.cos(e)*s+" "+n.util.sin(e)*s," A "+s+" "+s," 0 ",+(180<t?"1":"0")+" 1"," "+n.util.cos(i)*s+" "+n.util.sin(i)*s,'" ',"COMMON_PARTS"," />\n"]}return l},_render:function(l){l.beginPath(),l.arc(0,0,this.radius,a(this.startAngle),a(this.endAngle),!1),this._renderPaintInOrder(l)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(l){return this.radius=l,this.set("width",2*l).set("height",2*l)}}),n.Circle.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),n.Circle.fromElement=function(l,t){var e,i=n.parseAttributes(l,n.Circle.ATTRIBUTE_NAMES);if(!("radius"in(e=i)&&0<=e.radius))throw new Error("value of `r` attribute is required and can not be negative");i.left=(i.left||0)-i.radius,i.top=(i.top||0)-i.radius,t(new n.Circle(i))},n.Circle.fromObject=function(l,t){n.Object._fromObject("Circle",l,t)})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={});n.Triangle?n.warn("fabric.Triangle is already defined"):(n.Triangle=n.util.createClass(n.Object,{type:"triangle",width:100,height:100,_render:function(a){var l=this.width/2,t=this.height/2;a.beginPath(),a.moveTo(-l,t),a.lineTo(0,-t),a.lineTo(l,t),a.closePath(),this._renderPaintInOrder(a)},_toSVG:function(){var a=this.width/2,l=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-a+" "+l,"0 "+-l,a+" "+l].join(","),'" />']}}),n.Triangle.fromObject=function(a,l){return n.Object._fromObject("Triangle",a,l)})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=2*Math.PI;n.Ellipse?n.warn("fabric.Ellipse is already defined."):(n.Ellipse=n.util.createClass(n.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(l){this.callSuper("initialize",l),this.set("rx",l&&l.rx||0),this.set("ry",l&&l.ry||0)},_set:function(l,t){switch(this.callSuper("_set",l,t),l){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(l){return this.callSuper("toObject",["rx","ry"].concat(l))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(l){l.beginPath(),l.save(),l.transform(1,0,0,this.ry/this.rx,0,0),l.arc(0,0,this.rx,0,a,!1),l.restore(),this._renderPaintInOrder(l)}}),n.Ellipse.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),n.Ellipse.fromElement=function(l,t){var e=n.parseAttributes(l,n.Ellipse.ATTRIBUTE_NAMES);e.left=(e.left||0)-e.rx,e.top=(e.top||0)-e.ry,t(new n.Ellipse(e))},n.Ellipse.fromObject=function(l,t){n.Object._fromObject("Ellipse",l,t)})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend;n.Rect?n.warn("fabric.Rect is already defined"):(n.Rect=n.util.createClass(n.Object,{stateProperties:n.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(l){this.callSuper("initialize",l),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(l){var t=this.rx?Math.min(this.rx,this.width/2):0,e=this.ry?Math.min(this.ry,this.height/2):0,i=this.width,s=this.height,r=-this.width/2,o=-this.height/2,f=0!==t||0!==e,m=.4477152502;l.beginPath(),l.moveTo(r+t,o),l.lineTo(r+i-t,o),f&&l.bezierCurveTo(r+i-m*t,o,r+i,o+m*e,r+i,o+e),l.lineTo(r+i,o+s-e),f&&l.bezierCurveTo(r+i,o+s-m*e,r+i-m*t,o+s,r+i-t,o+s),l.lineTo(r+t,o+s),f&&l.bezierCurveTo(r+m*t,o+s,r,o+s-m*e,r,o+s-e),l.lineTo(r,o+e),f&&l.bezierCurveTo(r,o+m*e,r+m*t,o,r+t,o),l.closePath(),this._renderPaintInOrder(l)},toObject:function(l){return this.callSuper("toObject",["rx","ry"].concat(l))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),n.Rect.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),n.Rect.fromElement=function(l,t,e){if(!l)return t(null);e=e||{};var i=n.parseAttributes(l,n.Rect.ATTRIBUTE_NAMES);i.left=i.left||0,i.top=i.top||0,i.height=i.height||0,i.width=i.width||0;var s=new n.Rect(a(e?n.util.object.clone(e):{},i));s.visible=s.visible&&0<s.width&&0<s.height,t(s)},n.Rect.fromObject=function(l,t){return n.Object._fromObject("Rect",l,t)})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.util.array.min,t=n.util.array.max,e=n.util.toFixed,i=n.util.projectStrokeOnPoints;n.Polyline?n.warn("fabric.Polyline is already defined"):(n.Polyline=n.util.createClass(n.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:n.Object.prototype.cacheProperties.concat("points"),initialize:function(s,r){r=r||{},this.points=s||[],this.callSuper("initialize",r),this._setPositionDimensions(r)},_projectStrokeOnPoints:function(){return i(this.points,this,!0)},_setPositionDimensions:function(s){var r,o=this._calcDimensions(s),f=this.exactBoundingBox?this.strokeWidth:0;this.width=o.width-f,this.height=o.height-f,s.fromSVG||(r=this.translateToGivenOrigin({x:o.left-this.strokeWidth/2+f/2,y:o.top-this.strokeWidth/2+f/2},"left","top",this.originX,this.originY)),void 0===s.left&&(this.left=s.fromSVG?o.left:r.x),void 0===s.top&&(this.top=s.fromSVG?o.top:r.y),this.pathOffset={x:o.left+this.width/2+f/2,y:o.top+this.height/2+f/2}},_calcDimensions:function(){var s=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,r=l(s,"x")||0,o=l(s,"y")||0;return{left:r,top:o,width:(t(s,"x")||0)-r,height:(t(s,"y")||0)-o}},toObject:function(s){return a(this.callSuper("toObject",s),{points:this.points.concat()})},_toSVG:function(){for(var s=[],r=this.pathOffset.x,o=this.pathOffset.y,f=n.Object.NUM_FRACTION_DIGITS,m=0,y=this.points.length;m<y;m++)s.push(e(this.points[m].x-r,f),",",e(this.points[m].y-o,f)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',s.join(""),'" />\n']},commonRender:function(s){var r,o=this.points.length,f=this.pathOffset.x,m=this.pathOffset.y;if(!o||isNaN(this.points[o-1].y))return!1;s.beginPath(),s.moveTo(this.points[0].x-f,this.points[0].y-m);for(var y=0;y<o;y++)s.lineTo((r=this.points[y]).x-f,r.y-m);return!0},_render:function(s){this.commonRender(s)&&this._renderPaintInOrder(s)},complexity:function(){return this.get("points").length}}),n.Polyline.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polyline.fromElementGenerator=function(s){return function(r,o,f){if(!r)return o(null);f||(f={});var m=n.parsePointsAttribute(r.getAttribute("points")),y=n.parseAttributes(r,n[s].ATTRIBUTE_NAMES);y.fromSVG=!0,o(new n[s](m,a(y,f)))}},n.Polyline.fromElement=n.Polyline.fromElementGenerator("Polyline"),n.Polyline.fromObject=function(s,r){return n.Object._fromObject("Polyline",s,r,"points")})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.projectStrokeOnPoints;n.Polygon?n.warn("fabric.Polygon is already defined"):(n.Polygon=n.util.createClass(n.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return a(this.points,this)},_render:function(l){this.commonRender(l)&&(l.closePath(),this._renderPaintInOrder(l))}}),n.Polygon.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polygon.fromElement=n.Polyline.fromElementGenerator("Polygon"),n.Polygon.fromObject=function(l,t){n.Object._fromObject("Polygon",l,t,"points")})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.array.min,l=n.util.array.max,t=n.util.object.extend,e=n.util.object.clone,i=n.util.toFixed;n.Path?n.warn("fabric.Path is already defined"):(n.Path=n.util.createClass(n.Object,{type:"path",path:null,cacheProperties:n.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:n.Object.prototype.stateProperties.concat("path"),initialize:function(s,r){delete(r=e(r||{})).path,this.callSuper("initialize",r),this._setPath(s||[],r)},_setPath:function(s,r){this.path=n.util.makePathSimpler(Array.isArray(s)?s:n.util.parsePath(s)),n.Polyline.prototype._setPositionDimensions.call(this,r||{})},_renderPathCommands:function(s){var r,o=0,f=0,m=0,y=0,E=-this.pathOffset.x,M=-this.pathOffset.y;s.beginPath();for(var N=0,H=this.path.length;N<H;++N)switch((r=this.path[N])[0]){case"L":s.lineTo((m=r[1])+E,(y=r[2])+M);break;case"M":o=m=r[1],f=y=r[2],s.moveTo(m+E,y+M);break;case"C":s.bezierCurveTo(r[1]+E,r[2]+M,r[3]+E,r[4]+M,(m=r[5])+E,(y=r[6])+M);break;case"Q":s.quadraticCurveTo(r[1]+E,r[2]+M,r[3]+E,r[4]+M),m=r[3],y=r[4];break;case"z":case"Z":m=o,y=f,s.closePath()}},_render:function(s){this._renderPathCommands(s),this._renderPaintInOrder(s)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(s){return t(this.callSuper("toObject",s),{path:this.path.map(function(r){return r.slice()})})},toDatalessObject:function(s){var r=this.toObject(["sourcePath"].concat(s));return r.sourcePath&&delete r.path,r},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',n.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var s=n.Object.NUM_FRACTION_DIGITS;return" translate("+i(-this.pathOffset.x,s)+", "+i(-this.pathOffset.y,s)+")"},toClipPathSVG:function(s){var r=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:s,additionalTransform:r})},toSVG:function(s){var r=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:s,additionalTransform:r})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var s,r,o=[],f=[],m=0,y=0,C=0,w=0,E=0,M=this.path.length;E<M;++E){switch((s=this.path[E])[0]){case"L":C=s[1],w=s[2],r=[];break;case"M":m=C=s[1],y=w=s[2],r=[];break;case"C":r=n.util.getBoundsOfCurve(C,w,s[1],s[2],s[3],s[4],s[5],s[6]),C=s[5],w=s[6];break;case"Q":r=n.util.getBoundsOfCurve(C,w,s[1],s[2],s[1],s[2],s[3],s[4]),C=s[3],w=s[4];break;case"z":case"Z":C=m,w=y}r.forEach(function(nt){o.push(nt.x),f.push(nt.y)}),o.push(C),f.push(w)}var N=a(o)||0,H=a(f)||0;return{left:N,top:H,width:(l(o)||0)-N,height:(l(f)||0)-H}}}),n.Path.fromObject=function(s,r){"string"==typeof s.sourcePath?n.loadSVGFromURL(s.sourcePath,function(f){var m=f[0];m.setOptions(s),r&&r(m)}):n.Object._fromObject("Path",s,r,"path")},n.Path.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(["d"]),n.Path.fromElement=function(s,r,o){var f=n.parseAttributes(s,n.Path.ATTRIBUTE_NAMES);f.fromSVG=!0,r(new n.Path(f.d,t(f,o)))})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.array.min,l=n.util.array.max;n.Group||(n.Group=n.util.createClass(n.Object,n.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,i){e=e||{},this._objects=[],i&&this.callSuper("initialize",e),this._objects=t||[];for(var s=this._objects.length;s--;)this._objects[s].group=this;if(i)this._updateObjectsACoords();else{var r=e&&e.centerPoint;void 0!==e.originX&&(this.originX=e.originX),void 0!==e.originY&&(this.originY=e.originY),r||this._calcBounds(),this._updateObjectsCoords(r),delete e.centerPoint,this.callSuper("initialize",e)}this.setCoords()},_updateObjectsACoords:function(){for(var t=this._objects.length;t--;)this._objects[t].setCoords(!0)},_updateObjectsCoords:function(t){t=t||this.getCenterPoint();for(var e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){t.set({left:t.left-e.x,top:t.top-e.y}),t.group=this,t.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){var e=!!this.group;return this._restoreObjectsState(),n.util.resetObjectTransform(this),t&&(e&&n.util.removeTransformFromObject(t,this.group.calcTransformMatrix()),this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,e?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),n.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,e){var i=this._objects.length;if(this.useSetOnGroup)for(;i--;)this._objects[i].setOnGroup(t,e);if("canvas"===t)for(;i--;)this._objects[i]._set(t,e);n.Object.prototype._set.call(this,t,e)},toObject:function(t){var e=this.includeDefaultValues,i=this._objects.filter(function(r){return!r.excludeFromExport}).map(function(r){var o=r.includeDefaultValues;r.includeDefaultValues=e;var f=r.toObject(t);return r.includeDefaultValues=o,f}),s=n.Object.prototype.toObject.call(this,t);return s.objects=i,s},toDatalessObject:function(t){var e,i=this.sourcePath;if(i)e=i;else{var s=this.includeDefaultValues;e=this._objects.map(function(o){var f=o.includeDefaultValues;o.includeDefaultValues=s;var m=o.toDatalessObject(t);return o.includeDefaultValues=f,m})}var r=n.Object.prototype.toDatalessObject.call(this,t);return r.objects=e,r},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=n.Object.prototype.shouldCache.call(this);if(t)for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1;return t},willDrawShadow:function(){if(n.Object.prototype.willDrawShadow.call(this))return!0;for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,i=this._objects.length;e<i;e++)this._objects[e].render(t);this._drawClipPath(t,this.clipPath)},isCacheDirty:function(t){if(this.callSuper("isCacheDirty",t))return!0;if(!this.statefullCache)return!1;for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].isCacheDirty(!0)){if(this._cacheCanvas){var s=this.cacheWidth/this.zoomX,r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-s/2,-r/2,s,r)}return!0}return!1},_restoreObjectsState:function(){var t=this.calcOwnMatrix();return this._objects.forEach(function(e){n.util.addTransformToObject(e,t),delete e.group,e.setCoords()}),this},destroy:function(){return this._objects.forEach(function(t){t.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(t){t.dispose&&t.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var t=this._objects,e=this.canvas;this._objects=[];var i=this.toObject();delete i.objects;var s=new n.ActiveSelection([]);return s.set(i),s.type="activeSelection",e.remove(this),t.forEach(function(r){r.group=s,r.dirty=!0,e.add(r)}),s.canvas=e,s._objects=t,(e._activeObject=s).setCoords(),s}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords(!0)}),this},_calcBounds:function(t){for(var e,i,s,r,o=[],f=[],m=["tr","br","bl","tl"],y=0,C=this._objects.length,w=m.length;y<C;++y){for(s=(e=this._objects[y]).calcACoords(),r=0;r<w;r++)o.push(s[i=m[r]].x),f.push(s[i].y);e.aCoords=s}this._getBounds(o,f,t)},_getBounds:function(t,e,i){var s=new n.Point(a(t),a(e)),r=new n.Point(l(t),l(e)),o=s.y||0,f=s.x||0,y=r.y-s.y||0;this.width=r.x-s.x||0,this.height=y,i||this.setPositionByOrigin({x:f,y:o},"left","top")},_toSVG:function(t){for(var e=["<g ","COMMON_PARTS"," >\n"],i=0,s=this._objects.length;i<s;i++)e.push("\t\t",this._objects[i].toSVG(t));return e.push("</g>\n"),e},getSvgStyles:function(){var e=this.visible?"":" visibility: hidden;";return[void 0!==this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",this.getSvgFilter(),e].join("")},toClipPathSVG:function(t){for(var e=[],i=0,s=this._objects.length;i<s;i++)e.push("\t",this._objects[i].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}}),n.Group.fromObject=function(t,e){var i=t.objects,s=n.util.object.clone(t,!0);delete s.objects,"string"!=typeof i?n.util.enlivenObjects(i,function(r){var o=n.util.object.clone(t,!0);delete o.objects,n.util.enlivenObjectEnlivables(t,o,function(){e&&e(new n.Group(r,o,!0))})}):n.loadSVGFromURL(i,function(r){var o=n.util.groupSVGElements(r,t,i);o.set(s),e&&e(o)})})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={});n.ActiveSelection||(n.ActiveSelection=n.util.createClass(n.Group,{type:"activeSelection",initialize:function(a,l){l=l||{},this._objects=a||[];for(var t=this._objects.length;t--;)this._objects[t].group=this;l.originX&&(this.originX=l.originX),l.originY&&(this.originY=l.originY),this._calcBounds(),this._updateObjectsCoords(),n.Object.prototype.initialize.call(this,l),this.setCoords()},toGroup:function(){var a=this._objects.concat();this._objects=[];var l=n.Object.prototype.toObject.call(this),t=new n.Group([]);if(delete l.type,t.set(l),a.forEach(function(i){i.canvas.remove(i),i.group=t}),t._objects=a,!this.canvas)return t;var e=this.canvas;return e.add(t),(e._activeObject=t).setCoords(),t},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(a,l,t){a.save(),a.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",a,l),void 0===(t=t||{}).hasControls&&(t.hasControls=!1),t.forActiveSelection=!0;for(var e=0,i=this._objects.length;e<i;e++)this._objects[e]._renderControls(a,t);a.restore()}}),n.ActiveSelection.fromObject=function(a,l){n.util.enlivenObjects(a.objects,function(t){delete a.objects,l&&l(new n.ActiveSelection(t,a,!0))})})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=fabric.util.object.extend;h.fabric||(h.fabric={}),h.fabric.Image?fabric.warn("fabric.Image is already defined."):(fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:fabric.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:fabric.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(a,l){l||(l={}),this.filters=[],this.cacheKey="texture"+fabric.Object.__uid++,this.callSuper("initialize",l),this._initElement(a,l)},getElement:function(){return this._element||{}},setElement:function(a,l){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=a,this._originalElement=a,this._initConfig(l),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(a){var l=fabric.filterBackend;l&&l.evictCachesForKey&&l.evictCachesForKey(a)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(a){fabric.util.cleanUpJsdomNode(this[a]),this[a]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var a=this.getElement();return{width:a.naturalWidth||a.width,height:a.naturalHeight||a.height}},_stroke:function(a){if(this.stroke&&0!==this.strokeWidth){var l=this.width/2,t=this.height/2;a.beginPath(),a.moveTo(-l,-t),a.lineTo(l,-t),a.lineTo(l,t),a.lineTo(-l,t),a.lineTo(-l,-t),a.closePath()}},toObject:function(a){var l=[];this.filters.forEach(function(e){e&&l.push(e.toObject())});var t=n(this.callSuper("toObject",["cropX","cropY"].concat(a)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:l});return this.resizeFilter&&(t.resizeFilter=this.resizeFilter.toObject()),t},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var a,l=[],t=[],e=this._element,i=-this.width/2,s=-this.height/2,r="",o="";if(!e)return[];if(this.hasCrop()){var f=fabric.Object.__uid++;l.push('<clipPath id="imageCrop_'+f+'">\n','\t<rect x="'+i+'" y="'+s+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),r=' clip-path="url(#imageCrop_'+f+')" '}if(this.imageSmoothing||(o='" image-rendering="optimizeSpeed'),t.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',i-this.cropX,'" y="',s-this.cropY,'" width="',e.width||e.naturalWidth,'" height="',e.height||e.height,o,'"',r,"></image>\n"),this.stroke||this.strokeDashArray){var m=this.fill;this.fill=null,a=["\t<rect ",'x="',i,'" y="',s,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=m}return"fill"!==this.paintFirst?l.concat(a,t):l.concat(t,a)},getSrc:function(a){var l=a?this._element:this._originalElement;return l?l.toDataURL?l.toDataURL():this.srcFromAttribute?l.getAttribute("src"):l.src:this.src||""},setSrc:function(a,l,t){return fabric.util.loadImage(a,function(e,i){this.setElement(e,t),this._setWidthHeight(),l&&l(this,i)},this,t&&t.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var a=this.resizeFilter,l=this.minimumScaleTrigger,t=this.getTotalObjectScaling(),e=t.scaleX,i=t.scaleY,s=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!a||l<e&&l<i)return this._element=s,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=e,void(this._lastScaleY=i);fabric.filterBackend||(fabric.filterBackend=fabric.initFilterBackend());var r=fabric.util.createCanvasElement(),o=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,f=s.width,m=s.height;r.width=f,r.height=m,this._element=r,this._lastScaleX=a.scaleX=e,this._lastScaleY=a.scaleY=i,fabric.filterBackend.applyFilters([a],s,f,m,this._element,o),this._filterScalingX=r.width/this._originalElement.width,this._filterScalingY=r.height/this._originalElement.height},applyFilters:function(a){if(a=(a=a||this.filters||[]).filter(function(s){return s&&!s.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===a.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var l=this._originalElement,t=l.naturalWidth||l.width,e=l.naturalHeight||l.height;if(this._element===this._originalElement){var i=fabric.util.createCanvasElement();i.width=t,i.height=e,this._element=i,this._filteredEl=i}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,t,e),this._lastScaleX=1,this._lastScaleY=1;return fabric.filterBackend||(fabric.filterBackend=fabric.initFilterBackend()),fabric.filterBackend.applyFilters(a,this._originalElement,t,e,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(a){fabric.util.setImageSmoothing(a,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(a),this._renderPaintInOrder(a)},drawCacheOnCanvas:function(a){fabric.util.setImageSmoothing(a,this.imageSmoothing),fabric.Object.prototype.drawCacheOnCanvas.call(this,a)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(a){var l=this._element;if(l){var t=this._filterScalingX,e=this._filterScalingY,i=this.width,s=this.height,r=Math.min,o=Math.max,f=o(this.cropX,0),m=o(this.cropY,0),y=l.naturalWidth||l.width,C=l.naturalHeight||l.height,w=f*t,E=m*e,M=r(i*t,y-w),N=r(s*e,C-E),H=-i/2,nt=-s/2,rt=r(i,y/t-f),g=r(s,C/e-m);l&&a.drawImage(l,w,E,M,N,H,nt,rt,g)}},_needsResize:function(){var a=this.getTotalObjectScaling();return a.scaleX!==this._lastScaleX||a.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(a,l){this.setElement(fabric.util.getById(a),l),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(a){a||(a={}),this.setOptions(a),this._setWidthHeight(a)},_initFilters:function(a,l){a&&a.length?fabric.util.enlivenObjects(a,function(t){l&&l(t)},"fabric.Image.filters"):l&&l()},_setWidthHeight:function(a){a||(a={});var l=this.getElement();this.width=a.width||l.naturalWidth||l.width||0,this.height=a.height||l.naturalHeight||l.height||0},parsePreserveAspectRatioAttribute:function(){var a,l=fabric.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),t=this._element.width,e=this._element.height,i=1,s=1,r=0,o=0,f=0,m=0,y=this.width,C=this.height,w={width:y,height:C};return!l||"none"===l.alignX&&"none"===l.alignY?(i=y/t,s=C/e):("meet"===l.meetOrSlice&&(a=(y-t*(i=s=fabric.util.findScaleToFit(this._element,w)))/2,"Min"===l.alignX&&(r=-a),"Max"===l.alignX&&(r=a),a=(C-e*s)/2,"Min"===l.alignY&&(o=-a),"Max"===l.alignY&&(o=a)),"slice"===l.meetOrSlice&&(a=t-y/(i=s=fabric.util.findScaleToCover(this._element,w)),"Mid"===l.alignX&&(f=a/2),"Max"===l.alignX&&(f=a),a=e-C/s,"Mid"===l.alignY&&(m=a/2),"Max"===l.alignY&&(m=a),t=y/i,e=C/s)),{width:t,height:e,scaleX:i,scaleY:s,offsetLeft:r,offsetTop:o,cropX:f,cropY:m}}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(a,l){var t=fabric.util.object.clone(a);fabric.util.loadImage(t.src,function(e,i){i?l&&l(null,!0):fabric.Image.prototype._initFilters.call(t,t.filters,function(s){t.filters=s||[],fabric.Image.prototype._initFilters.call(t,[t.resizeFilter],function(r){t.resizeFilter=r[0],fabric.util.enlivenObjectEnlivables(t,t,function(){var o=new fabric.Image(e,t);l(o,!1)})})})},null,t.crossOrigin)},fabric.Image.fromURL=function(a,l,t){fabric.util.loadImage(a,function(e,i){l&&l(new fabric.Image(e,t),i)},null,t&&t.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),fabric.Image.fromElement=function(a,l,t){var e=fabric.parseAttributes(a,fabric.Image.ATTRIBUTE_NAMES);fabric.Image.fromURL(e["xlink:href"],l,n(t?fabric.util.object.clone(t):{},e))})}(typeof exports<"u"?exports:this),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var h=this.angle%360;return 0<h?90*Math.round((h-1)/90):90*Math.round(h/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(h){var n=function(){},a=(h=h||{}).onComplete||n,l=h.onChange||n,t=this;return fabric.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(e){t.rotate(e),l()},onComplete:function(){t.setCoords(),a()}})}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(h){return h.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(h){return h.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){"use strict";fabric.isWebglSupported=function(n){if(fabric.isLikelyNode)return!1;n=n||fabric.WebglFilterBackend.prototype.tileSize;var a,l,t,e=document.createElement("canvas"),i=e.getContext("webgl")||e.getContext("experimental-webgl"),s=!1;if(i){fabric.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),s=fabric.maxTextureSize>=n;for(var r=["highp","mediump","lowp"],o=0;o<3;o++)if(l="precision "+r[o]+" float;\nvoid main(){}",t=(a=i).createShader(a.FRAGMENT_SHADER),a.shaderSource(t,l),a.compileShader(t),a.getShaderParameter(t,a.COMPILE_STATUS)){fabric.webGlPrecision=r[o];break}}return this.isSupported=s},(fabric.WebglFilterBackend=function h(n){n&&n.tileSize&&(this.tileSize=n.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}).prototype={tileSize:2048,resources:{},setupGLContext:function(n,a){this.dispose(),this.createWebGLCanvas(n,a),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(n,a)},chooseFastestCopyGLTo2DMethod:function(n,a){var l,t=void 0!==window.performance;try{new ImageData(1,1),l=!0}catch{l=!1}var e=typeof ArrayBuffer<"u",i=typeof Uint8ClampedArray<"u";if(t&&l&&e&&i){var s=fabric.util.createCanvasElement(),r=new ArrayBuffer(n*a*4);if(fabric.forceGLPutImageData)return this.imageBuffer=r,void(this.copyGLTo2D=copyGLTo2DPutImageData);var o,f,m={imageBuffer:r,destinationWidth:n,destinationHeight:a,targetCanvas:s};s.width=n,s.height=a,o=window.performance.now(),copyGLTo2DDrawImage.call(m,this.gl,m),f=window.performance.now()-o,o=window.performance.now(),copyGLTo2DPutImageData.call(m,this.gl,m),window.performance.now()-o<f?(this.imageBuffer=r,this.copyGLTo2D=copyGLTo2DPutImageData):this.copyGLTo2D=copyGLTo2DDrawImage}},createWebGLCanvas:function(n,a){var l=fabric.util.createCanvasElement();l.width=n,l.height=a;var t={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},e=l.getContext("webgl",t);e||(e=l.getContext("experimental-webgl",t)),e&&(e.clearColor(0,0,0,0),this.canvas=l,this.gl=e)},applyFilters:function(n,a,l,t,e,i){var s,r=this.gl;i&&(s=this.getCachedTexture(i,a));var o={originalWidth:a.width||a.originalWidth,originalHeight:a.height||a.originalHeight,sourceWidth:l,sourceHeight:t,destinationWidth:l,destinationHeight:t,context:r,sourceTexture:this.createTexture(r,l,t,!s&&a),targetTexture:this.createTexture(r,l,t),originalTexture:s||this.createTexture(r,l,t,!s&&a),passes:n.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:e},f=r.createFramebuffer();return r.bindFramebuffer(r.FRAMEBUFFER,f),n.forEach(function(m){m&&m.applyTo(o)}),resizeCanvasIfNeeded(o),this.copyGLTo2D(r,o),r.bindTexture(r.TEXTURE_2D,null),r.deleteTexture(o.sourceTexture),r.deleteTexture(o.targetTexture),r.deleteFramebuffer(f),e.getContext("2d").setTransform(1,0,0,1,0,0),o},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(n,a,l,t){var e=n.createTexture();return n.bindTexture(n.TEXTURE_2D,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),t?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,a,l,0,n.RGBA,n.UNSIGNED_BYTE,null),e},getCachedTexture:function(n,a){if(this.textureCache[n])return this.textureCache[n];var l=this.createTexture(this.gl,a.width,a.height,a);return this.textureCache[n]=l},evictCachesForKey:function(n){this.textureCache[n]&&(this.gl.deleteTexture(this.textureCache[n]),delete this.textureCache[n])},copyGLTo2D:copyGLTo2DDrawImage,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var n=this.gl,a={renderer:"",vendor:""};if(!n)return a;var l=n.getExtension("WEBGL_debug_renderer_info");if(l){var t=n.getParameter(l.UNMASKED_RENDERER_WEBGL),e=n.getParameter(l.UNMASKED_VENDOR_WEBGL);t&&(a.renderer=t.toLowerCase()),e&&(a.vendor=e.toLowerCase())}return this.gpuInfo=a}}}(),function(){"use strict";var h=function(){};(fabric.Canvas2dFilterBackend=function n(){}).prototype={evictCachesForKey:h,dispose:h,clearWebGLCaches:h,resources:{},applyFilters:function(a,l,t,e,i){var s=i.getContext("2d");s.drawImage(l,0,0,t,e);var r={sourceWidth:t,sourceHeight:e,imageData:s.getImageData(0,0,t,e),originalEl:l,originalImageData:s.getImageData(0,0,t,e),canvasEl:i,ctx:s,filterBackend:this};return a.forEach(function(o){o.applyTo(r)}),r.imageData.width===t&&r.imageData.height===e||(i.width=r.imageData.width,i.height=r.imageData.height),s.putImageData(r.imageData,0,0),r}}}(),fabric.Image=fabric.Image||{},fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(h){h&&this.setOptions(h)},setOptions:function(h){for(var n in h)this[n]=h[n]},createProgram:function(h,n,a){n=n||this.fragmentSource,a=a||this.vertexSource,"highp"!==fabric.webGlPrecision&&(n=n.replace(/precision highp float/g,"precision "+fabric.webGlPrecision+" float"));var l=h.createShader(h.VERTEX_SHADER);if(h.shaderSource(l,a),h.compileShader(l),!h.getShaderParameter(l,h.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+h.getShaderInfoLog(l));var t=h.createShader(h.FRAGMENT_SHADER);if(h.shaderSource(t,n),h.compileShader(t),!h.getShaderParameter(t,h.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+h.getShaderInfoLog(t));var e=h.createProgram();if(h.attachShader(e,l),h.attachShader(e,t),h.linkProgram(e),!h.getProgramParameter(e,h.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+h.getProgramInfoLog(e));var i=this.getAttributeLocations(h,e),s=this.getUniformLocations(h,e)||{};return s.uStepW=h.getUniformLocation(e,"uStepW"),s.uStepH=h.getUniformLocation(e,"uStepH"),{program:e,attributeLocations:i,uniformLocations:s}},getAttributeLocations:function(h,n){return{aPosition:h.getAttribLocation(n,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(h,n,a){var l=n.aPosition,t=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,t),h.enableVertexAttribArray(l),h.vertexAttribPointer(l,2,h.FLOAT,!1,0,0),h.bufferData(h.ARRAY_BUFFER,a,h.STATIC_DRAW)},_setupFrameBuffer:function(h){var n,a,l=h.context;1<h.passes?(a=h.destinationHeight,h.sourceWidth===(n=h.destinationWidth)&&h.sourceHeight===a||(l.deleteTexture(h.targetTexture),h.targetTexture=h.filterBackend.createTexture(l,n,a)),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,h.targetTexture,0)):(l.bindFramebuffer(l.FRAMEBUFFER,null),l.finish())},_swapTextures:function(h){h.passes--,h.pass++;var n=h.targetTexture;h.targetTexture=h.sourceTexture,h.sourceTexture=n},isNeutralState:function(){var h=this.mainParameter,n=fabric.Image.filters[this.type].prototype;if(h){if(Array.isArray(n[h])){for(var a=n[h].length;a--;)if(this[h][a]!==n[h][a])return!1;return!0}return n[h]===this[h]}return!1},applyTo:function(h){h.webgl?(this._setupFrameBuffer(h),this.applyToWebGL(h),this._swapTextures(h)):this.applyTo2d(h)},retrieveShader:function(h){return h.programCache.hasOwnProperty(this.type)||(h.programCache[this.type]=this.createProgram(h.context)),h.programCache[this.type]},applyToWebGL:function(h){var n=h.context,a=this.retrieveShader(h);n.bindTexture(n.TEXTURE_2D,0===h.pass&&h.originalTexture?h.originalTexture:h.sourceTexture),n.useProgram(a.program),this.sendAttributeData(n,a.attributeLocations,h.aPosition),n.uniform1f(a.uniformLocations.uStepW,1/h.sourceWidth),n.uniform1f(a.uniformLocations.uStepH,1/h.sourceHeight),this.sendUniformData(n,a.uniformLocations),n.viewport(0,0,h.destinationWidth,h.destinationHeight),n.drawArrays(n.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(h,n,a){h.activeTexture(a),h.bindTexture(h.TEXTURE_2D,n),h.activeTexture(h.TEXTURE0)},unbindAdditionalTexture:function(h,n){h.activeTexture(n),h.bindTexture(h.TEXTURE_2D,null),h.activeTexture(h.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(h){this[this.mainParameter]=h},sendUniformData:function(){},createHelpLayer:function(h){if(!h.helpLayer){var n=document.createElement("canvas");n.width=h.sourceWidth,n.height=h.sourceHeight,h.helpLayer=n}},toObject:function(){var h={type:this.type},n=this.mainParameter;return n&&(h[n]=this[n]),h},toJSON:function(){return this.toObject()}}),fabric.Image.filters.BaseFilter.fromObject=function(h,n){var a=new fabric.Image.filters[h.type](h);return n&&n(a),a},function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.ColorMatrix=(0,n.util.createClass)(a.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var e,i,s,r,o,f=t.imageData.data,m=f.length,y=this.matrix,C=this.colorsOnly;for(o=0;o<m;o+=4)e=f[o],i=f[o+1],s=f[o+2],C?(f[o]=e*y[0]+i*y[1]+s*y[2]+255*y[4],f[o+1]=e*y[5]+i*y[6]+s*y[7]+255*y[9],f[o+2]=e*y[10]+i*y[11]+s*y[12]+255*y[14]):(f[o]=e*y[0]+i*y[1]+s*y[2]+(r=f[o+3])*y[3]+255*y[4],f[o+1]=e*y[5]+i*y[6]+s*y[7]+r*y[8]+255*y[9],f[o+2]=e*y[10]+i*y[11]+s*y[12]+r*y[13]+255*y[14],f[o+3]=e*y[15]+i*y[16]+s*y[17]+r*y[18]+255*y[19])},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}},sendUniformData:function(t,e){var i=this.matrix,r=[i[4],i[9],i[14],i[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]]),t.uniform4fv(e.uConstants,r)}}),n.Image.filters.ColorMatrix.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Brightness=(0,n.util.createClass)(a.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(t){if(0!==this.brightness){var e,i=t.imageData.data,s=i.length,r=Math.round(255*this.brightness);for(e=0;e<s;e+=4)i[e]=i[e]+r,i[e+1]=i[e+1]+r,i[e+2]=i[e+2]+r}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),n.Image.filters.Brightness.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.Image.filters;l.Convolute=(0,n.util.createClass)(l.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(e){var i=Math.sqrt(this.matrix.length),s=this.type+"_"+i+"_"+(this.opaque?1:0),r=this.fragmentSource[s];return e.programCache.hasOwnProperty(s)||(e.programCache[s]=this.createProgram(e.context,r)),e.programCache[s]},applyTo2d:function(e){var i,s,r,o,f,m,y,C,w,E,M,N,H,nt=e.imageData,rt=nt.data,g=this.matrix,F=Math.round(Math.sqrt(g.length)),U=Math.floor(F/2),et=nt.width,st=nt.height,ct=e.ctx.createImageData(et,st),W=ct.data,z=this.opaque?1:0;for(M=0;M<st;M++)for(E=0;E<et;E++){for(f=4*(M*et+E),H=o=r=s=i=0;H<F;H++)for(N=0;N<F;N++)m=E+N-U,(y=M+H-U)<0||st<=y||m<0||et<=m||(i+=rt[C=4*(y*et+m)]*(w=g[H*F+N]),s+=rt[C+1]*w,r+=rt[C+2]*w,z||(o+=rt[C+3]*w));W[f]=i,W[f+1]=s,W[f+2]=r,W[f+3]=z?rt[f+3]:o}e.imageData=ct},getUniformLocations:function(e,i){return{uMatrix:e.getUniformLocation(i,"uMatrix"),uOpaque:e.getUniformLocation(i,"uOpaque"),uHalfSize:e.getUniformLocation(i,"uHalfSize"),uSize:e.getUniformLocation(i,"uSize")}},sendUniformData:function(e,i){e.uniform1fv(i.uMatrix,this.matrix)},toObject:function(){return a(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),n.Image.filters.Convolute.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Grayscale=(0,n.util.createClass)(a.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(t){var e,i,s=t.imageData.data,r=s.length,o=this.mode;for(e=0;e<r;e+=4)"average"===o?i=(s[e]+s[e+1]+s[e+2])/3:"lightness"===o?i=(Math.min(s[e],s[e+1],s[e+2])+Math.max(s[e],s[e+1],s[e+2]))/2:"luminosity"===o&&(i=.21*s[e]+.72*s[e+1]+.07*s[e+2]),s[e]=i,s[e+1]=i,s[e+2]=i},retrieveShader:function(t){var e=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,this.fragmentSource[this.mode])),t.programCache[e]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,"uMode")}},sendUniformData:function(t,e){t.uniform1i(e.uMode,1)},isNeutralState:function(){return!1}}),n.Image.filters.Grayscale.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Invert=(0,n.util.createClass)(a.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(t){var e,i=t.imageData.data,s=i.length;for(e=0;e<s;e+=4)i[e]=255-i[e],i[e+1]=255-i[e+1],i[e+2]=255-i[e+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,"uInvert")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),n.Image.filters.Invert.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.Image.filters;l.Noise=(0,n.util.createClass)(l.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(e){if(0!==this.noise){var i,s,o,r=e.imageData.data,f=this.noise;for(i=0,o=r.length;i<o;i+=4)s=(.5-Math.random())*f,r[i]+=s,r[i+1]+=s,r[i+2]+=s}},getUniformLocations:function(e,i){return{uNoise:e.getUniformLocation(i,"uNoise"),uSeed:e.getUniformLocation(i,"uSeed")}},sendUniformData:function(e,i){e.uniform1f(i.uNoise,this.noise/255),e.uniform1f(i.uSeed,Math.random())},toObject:function(){return a(this.callSuper("toObject"),{noise:this.noise})}}),n.Image.filters.Noise.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Pixelate=(0,n.util.createClass)(a.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(t){var e,i,s,r,o,f,m,y,C,w,E,M=t.imageData,N=M.data,H=M.height,nt=M.width;for(i=0;i<H;i+=this.blocksize)for(s=0;s<nt;s+=this.blocksize)for(r=N[e=4*i*nt+4*s],o=N[e+1],f=N[e+2],m=N[e+3],w=Math.min(i+this.blocksize,H),E=Math.min(s+this.blocksize,nt),y=i;y<w;y++)for(C=s;C<E;C++)N[e=4*y*nt+4*C]=r,N[e+1]=o,N[e+2]=f,N[e+3]=m},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),n.Image.filters.Pixelate.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.Image.filters;l.RemoveColor=(0,n.util.createClass)(l.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(e){var i,s,r,o,f=e.imageData.data,m=255*this.distance,y=new n.Color(this.color).getSource(),C=[y[0]-m,y[1]-m,y[2]-m],w=[y[0]+m,y[1]+m,y[2]+m];for(i=0;i<f.length;i+=4)r=f[i+1],o=f[i+2],C[0]<(s=f[i])&&C[1]<r&&C[2]<o&&s<w[0]&&r<w[1]&&o<w[2]&&(f[i+3]=0)},getUniformLocations:function(e,i){return{uLow:e.getUniformLocation(i,"uLow"),uHigh:e.getUniformLocation(i,"uHigh")}},sendUniformData:function(e,i){var s=new n.Color(this.color).getSource(),r=parseFloat(this.distance),f=[s[0]/255+r,s[1]/255+r,s[2]/255+r,1];e.uniform4fv(i.uLow,[0+s[0]/255-r,0+s[1]/255-r,0+s[2]/255-r,1]),e.uniform4fv(i.uHigh,f)},toObject:function(){return a(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),n.Image.filters.RemoveColor.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters,l=n.util.createClass,t={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var e in t)a[e]=l(a.ColorMatrix,{type:e,matrix:t[e],mainParameter:!1,colorsOnly:!0}),n.Image.filters[e].fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric,a=n.Image.filters;a.BlendColor=(0,n.util.createClass)(a.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(t){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[t]+"}\n}"},retrieveShader:function(t){var e,i=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(i)||(e=this.buildSource(this.mode),t.programCache[i]=this.createProgram(t.context,e)),t.programCache[i]},applyTo2d:function(t){var e,i,s,r,o,f,m,y=t.imageData.data,C=y.length,w=1-this.alpha;e=(m=new n.Color(this.color).getSource())[0]*this.alpha,i=m[1]*this.alpha,s=m[2]*this.alpha;for(var E=0;E<C;E+=4)switch(r=y[E],o=y[E+1],f=y[E+2],this.mode){case"multiply":y[E]=r*e/255,y[E+1]=o*i/255,y[E+2]=f*s/255;break;case"screen":y[E]=255-(255-r)*(255-e)/255,y[E+1]=255-(255-o)*(255-i)/255,y[E+2]=255-(255-f)*(255-s)/255;break;case"add":y[E]=r+e,y[E+1]=o+i,y[E+2]=f+s;break;case"diff":case"difference":y[E]=Math.abs(r-e),y[E+1]=Math.abs(o-i),y[E+2]=Math.abs(f-s);break;case"subtract":y[E]=r-e,y[E+1]=o-i,y[E+2]=f-s;break;case"darken":y[E]=Math.min(r,e),y[E+1]=Math.min(o,i),y[E+2]=Math.min(f,s);break;case"lighten":y[E]=Math.max(r,e),y[E+1]=Math.max(o,i),y[E+2]=Math.max(f,s);break;case"overlay":y[E]=e<128?2*r*e/255:255-2*(255-r)*(255-e)/255,y[E+1]=i<128?2*o*i/255:255-2*(255-o)*(255-i)/255,y[E+2]=s<128?2*f*s/255:255-2*(255-f)*(255-s)/255;break;case"exclusion":y[E]=e+r-2*e*r/255,y[E+1]=i+o-2*i*o/255,y[E+2]=s+f-2*s*f/255;break;case"tint":y[E]=e+r*w,y[E+1]=i+o*w,y[E+2]=s+f*w}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,"uColor")}},sendUniformData:function(t,e){var i=new n.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(e.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendColor.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric,a=n.Image.filters;a.BlendImage=(0,n.util.createClass)(a.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(t){var e=this.type+"_"+this.mode,i=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,i)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,i=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,i,e.TEXTURE1),this.callSuper("applyToWebGL",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/t._element.width,-t.top/t._element.height,1]},applyTo2d:function(t){var e,i,s,r,o,f,m,y,C,w,E,M=t.imageData,N=t.filterBackend.resources,H=M.data,nt=H.length,rt=M.width,g=M.height,F=this.image;N.blendImage||(N.blendImage=n.util.createCanvasElement()),w=(C=N.blendImage).getContext("2d"),C.width!==rt||C.height!==g?(C.width=rt,C.height=g):w.clearRect(0,0,rt,g),w.setTransform(F.scaleX,0,0,F.scaleY,F.left,F.top),w.drawImage(F._element,0,0,rt,g),E=w.getImageData(0,0,rt,g).data;for(var U=0;U<nt;U+=4)switch(o=H[U],f=H[U+1],m=H[U+2],y=H[U+3],e=E[U],i=E[U+1],s=E[U+2],r=E[U+3],this.mode){case"multiply":H[U]=o*e/255,H[U+1]=f*i/255,H[U+2]=m*s/255,H[U+3]=y*r/255;break;case"mask":H[U+3]=r}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}},sendUniformData:function(t,e){var i=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,i)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendImage.fromObject=function(t,e){n.Image.fromObject(t.image,function(i){var s=n.util.object.clone(t);s.image=i,e(new n.Image.filters.BlendImage(s))})}}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=Math.pow,l=Math.floor,t=Math.sqrt,e=Math.abs,i=Math.round,s=Math.sin,r=Math.ceil,o=n.Image.filters;o.Resize=(0,n.util.createClass)(o.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(m,y){return{uDelta:m.getUniformLocation(y,"uDelta"),uTaps:m.getUniformLocation(y,"uTaps")}},sendUniformData:function(m,y){m.uniform2fv(y.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),m.uniform1fv(y.uTaps,this.taps)},retrieveShader:function(m){var y=this.getFilterWindow(),C=this.type+"_"+y;if(!m.programCache.hasOwnProperty(C)){var w=this.generateShader(y);m.programCache[C]=this.createProgram(m.context,w)}return m.programCache[C]},getFilterWindow:function(){return Math.ceil(this.lanczosLobes/this.tempScale)},getTaps:function(){for(var m=this.lanczosCreate(this.lanczosLobes),y=this.tempScale,C=this.getFilterWindow(),w=new Array(C),E=1;E<=C;E++)w[E-1]=m(E*y);return w},generateShader:function(m){for(var y=new Array(m),C=this.fragmentSourceTOP,w=1;w<=m;w++)y[w-1]=w+".0 * uDelta";return C+="uniform float uTaps["+m+"];\n",C+="void main() {\n",C+="  vec4 color = texture2D(uTexture, vTexCoord);\n",C+="  float sum = 1.0;\n",y.forEach(function(E,M){C+="  color += texture2D(uTexture, vTexCoord + "+E+") * uTaps["+M+"];\n",C+="  color += texture2D(uTexture, vTexCoord - "+E+") * uTaps["+M+"];\n",C+="  sum += 2.0 * uTaps["+M+"];\n"}),C+="  gl_FragColor = color / sum;\n",C+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(m){m.webgl?(m.passes++,this.width=m.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=m.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),m.destinationWidth=this.dW,this._setupFrameBuffer(m),this.applyToWebGL(m),this._swapTextures(m),m.sourceWidth=m.destinationWidth,this.height=m.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),m.destinationHeight=this.dH,this._setupFrameBuffer(m),this.applyToWebGL(m),this._swapTextures(m),m.sourceHeight=m.destinationHeight):this.applyTo2d(m)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(m){return function(y){if(m<=y||y<=-m)return 0;if(y<1.1920929e-7&&-1.1920929e-7<y)return 1;var C=(y*=Math.PI)/m;return s(y)/y*s(C)/C}},applyTo2d:function(m){var y=m.imageData,C=this.scaleX,w=this.scaleY;this.rcpScaleX=1/C,this.rcpScaleY=1/w;var E,M=y.width,N=y.height,H=i(M*C),nt=i(N*w);"sliceHack"===this.resizeType?E=this.sliceByTwo(m,M,N,H,nt):"hermite"===this.resizeType?E=this.hermiteFastResize(m,M,N,H,nt):"bilinear"===this.resizeType?E=this.bilinearFiltering(m,M,N,H,nt):"lanczos"===this.resizeType&&(E=this.lanczosResize(m,M,N,H,nt)),m.imageData=E},sliceByTwo:function(m,y,C,w,E){var M,N,H=m.imageData,nt=!1,rt=!1,g=.5*y,F=.5*C,U=n.filterBackend.resources,et=0,st=0,ct=y,W=0;for(U.sliceByTwo||(U.sliceByTwo=document.createElement("canvas")),((M=U.sliceByTwo).width<1.5*y||M.height<C)&&(M.width=1.5*y,M.height=C),(N=M.getContext("2d")).clearRect(0,0,1.5*y,C),N.putImageData(H,0,0),w=l(w),E=l(E);!nt||!rt;)C=F,w<l(.5*(y=g))?g=l(.5*g):(g=w,nt=!0),E<l(.5*F)?F=l(.5*F):(F=E,rt=!0),N.drawImage(M,et,st,y,C,ct,W,g,F),et=ct,st=W,W+=F;return N.getImageData(et,st,w,E)},lanczosResize:function(m,y,C,w,E){var M=m.imageData.data,N=m.ctx.createImageData(w,E),H=N.data,nt=this.lanczosCreate(this.lanczosLobes),rt=this.rcpScaleX,g=this.rcpScaleY,F=2/this.rcpScaleX,U=2/this.rcpScaleY,et=r(rt*this.lanczosLobes/2),st=r(g*this.lanczosLobes/2),ct={},W={},z={};return function tt(ft){var ot,vt,_t,G,bt,Ct,J,Ot,Tt,Lt,zt;for(W.x=(ft+.5)*rt,z.x=l(W.x),ot=0;ot<E;ot++){for(W.y=(ot+.5)*g,z.y=l(W.y),Tt=Ot=J=Ct=bt=0,vt=z.x-et;vt<=z.x+et;vt++)if(!(vt<0||y<=vt)){Lt=l(1e3*e(vt-W.x)),ct[Lt]||(ct[Lt]={});for(var Xt=z.y-st;Xt<=z.y+st;Xt++)Xt<0||C<=Xt||(zt=l(1e3*e(Xt-W.y)),ct[Lt][zt]||(ct[Lt][zt]=nt(t(a(Lt*F,2)+a(zt*U,2))/1e3)),0<(_t=ct[Lt][zt])&&(bt+=_t,Ct+=_t*M[G=4*(Xt*y+vt)],J+=_t*M[G+1],Ot+=_t*M[G+2],Tt+=_t*M[G+3]))}H[G=4*(ot*w+ft)]=Ct/bt,H[G+1]=J/bt,H[G+2]=Ot/bt,H[G+3]=Tt/bt}return++ft<w?tt(ft):N}(0)},bilinearFiltering:function(m,y,C,w,E){var M,N,H,nt,rt,g,F,et,st=0,ct=this.rcpScaleX,W=this.rcpScaleY,z=4*(y-1),tt=m.imageData.data,ft=m.ctx.createImageData(w,E),ot=ft.data;for(H=0;H<E;H++)for(nt=0;nt<w;nt++)for(rt=ct*nt-(M=l(ct*nt)),g=W*H-(N=l(W*H)),et=4*(N*y+M),F=0;F<4;F++)ot[st++]=tt[et+F]*(1-rt)*(1-g)+tt[et+4+F]*rt*(1-g)+tt[et+z+F]*g*(1-rt)+tt[et+z+4+F]*rt*g;return ft},hermiteFastResize:function(m,y,C,w,E){for(var M=this.rcpScaleX,N=this.rcpScaleY,H=r(M/2),nt=r(N/2),rt=m.imageData.data,g=m.ctx.createImageData(w,E),F=g.data,U=0;U<E;U++)for(var et=0;et<w;et++){for(var st=4*(et+U*w),ct=0,W=0,z=0,tt=0,ft=0,ot=0,vt=0,_t=(U+.5)*N,G=l(U*N);G<(U+1)*N;G++)for(var bt=e(_t-(G+.5))/nt,Ct=(et+.5)*M,J=bt*bt,Ot=l(et*M);Ot<(et+1)*M;Ot++){var Tt=e(Ct-(Ot+.5))/H,Lt=t(J+Tt*Tt);1<Lt&&Lt<-1||0<(ct=2*Lt*Lt*Lt-3*Lt*Lt+1)&&(vt+=ct*rt[3+(Tt=4*(Ot+G*y))],z+=ct,rt[Tt+3]<255&&(ct=ct*rt[Tt+3]/250),tt+=ct*rt[Tt],ft+=ct*rt[Tt+1],ot+=ct*rt[Tt+2],W+=ct)}F[st]=tt/W,F[st+1]=ft/W,F[st+2]=ot/W,F[st+3]=vt/z}return g},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),n.Image.filters.Resize.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Contrast=(0,n.util.createClass)(a.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(0!==this.contrast){var e,i=t.imageData.data,s=i.length,r=Math.floor(255*this.contrast),o=259*(r+255)/(255*(259-r));for(e=0;e<s;e+=4)i[e]=o*(i[e]-128)+128,i[e+1]=o*(i[e+1]-128)+128,i[e+2]=o*(i[e+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),n.Image.filters.Contrast.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Saturation=(0,n.util.createClass)(a.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(0!==this.saturation){var e,i,s=t.imageData.data,r=s.length,o=-this.saturation;for(e=0;e<r;e+=4)i=Math.max(s[e],s[e+1],s[e+2]),s[e]+=i!==s[e]?(i-s[e])*o:0,s[e+1]+=i!==s[e+1]?(i-s[e+1])*o:0,s[e+2]+=i!==s[e+2]?(i-s[e+2])*o:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),n.Image.filters.Saturation.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Vibrance=(0,n.util.createClass)(a.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(t){if(0!==this.vibrance){var e,i,r,o=t.imageData.data,f=o.length,m=-this.vibrance;for(e=0;e<f;e+=4)i=Math.max(o[e],o[e+1],o[e+2]),r=2*Math.abs(i-(o[e]+o[e+1]+o[e+2])/3)/255*m,o[e]+=i!==o[e]?(i-o[e])*r:0,o[e+1]+=i!==o[e+1]?(i-o[e+1])*r:0,o[e+2]+=i!==o[e+2]?(i-o[e+2])*r:0}},getUniformLocations:function(t,e){return{uVibrance:t.getUniformLocation(e,"uVibrance")}},sendUniformData:function(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}}),n.Image.filters.Vibrance.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Blur=(0,n.util.createClass)(a.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var e,i,s=t.filterBackend.resources,r=t.imageData.width,o=t.imageData.height;s.blurLayer1||(s.blurLayer1=n.util.createCanvasElement(),s.blurLayer2=n.util.createCanvasElement()),i=s.blurLayer2,(e=s.blurLayer1).width===r&&e.height===o||(i.width=e.width=r,i.height=e.height=o);var f,m,y,C,w=e.getContext("2d"),E=i.getContext("2d"),M=.06*this.blur*.5;for(w.putImageData(t.imageData,0,0),E.clearRect(0,0,r,o),C=-15;C<=15;C++)y=M*(m=C/15)*r+(f=(Math.random()-.5)/4),E.globalAlpha=1-Math.abs(m),E.drawImage(e,y,f),w.drawImage(i,0,0),E.globalAlpha=1,E.clearRect(0,0,i.width,i.height);for(C=-15;C<=15;C++)y=M*(m=C/15)*o+(f=(Math.random()-.5)/4),E.globalAlpha=1-Math.abs(m),E.drawImage(e,f,y),w.drawImage(i,0,0),E.globalAlpha=1,E.clearRect(0,0,i.width,i.height);t.ctx.drawImage(e,0,0);var N=t.ctx.getImageData(0,0,e.width,e.height);return w.globalAlpha=1,w.clearRect(0,0,e.width,e.height),N},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,"uDelta")}},sendUniformData:function(t,e){var i=this.chooseRightDelta();t.uniform2fv(e.delta,i)},chooseRightDelta:function(){var t,e=1,i=[0,0];return this.horizontal?1<this.aspectRatio&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),t=e*this.blur*.12,this.horizontal?i[0]=t:i[1]=t,i}}),a.Blur.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Gamma=(0,n.util.createClass)(a.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(t){this.gamma=[1,1,1],a.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var e,i=t.imageData.data,s=this.gamma,r=i.length,o=1/s[0],f=1/s[1],m=1/s[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),e=0,r=256;e<r;e++)this.rVals[e]=255*Math.pow(e/255,o),this.gVals[e]=255*Math.pow(e/255,f),this.bVals[e]=255*Math.pow(e/255,m);for(e=0,r=i.length;e<r;e+=4)i[e]=this.rVals[i[e]],i[e+1]=this.gVals[i[e+1]],i[e+2]=this.bVals[i[e+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),n.Image.filters.Gamma.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Composed=(0,n.util.createClass)(a.BaseFilter,{type:"Composed",subFilters:[],initialize:function(t){this.callSuper("initialize",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach(function(e){e.applyTo(t)})},toObject:function(){return n.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(t){return t.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(t){return!t.isNeutralState()})}}),n.Image.filters.Composed.fromObject=function(t,e){var i=(t.subFilters||[]).map(function(r){return new n.Image.filters[r.type](r)}),s=new n.Image.filters.Composed({subFilters:i});return e&&e(s),s}}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.HueRotation=(0,n.util.createClass)(a.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var t=this.rotation*Math.PI,e=n.util.cos(t),i=n.util.sin(t),s=Math.sqrt(1/3)*i,r=1-e;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=e+r/3,this.matrix[1]=1/3*r-s,this.matrix[2]=1/3*r+s,this.matrix[5]=1/3*r+s,this.matrix[6]=e+1/3*r,this.matrix[7]=1/3*r-s,this.matrix[10]=1/3*r-s,this.matrix[11]=1/3*r+s,this.matrix[12]=e+1/3*r},isNeutralState:function(t){return this.calculateMatrix(),a.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),a.BaseFilter.prototype.applyTo.call(this,t)}}),n.Image.filters.HueRotation.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.clone;if(n.Text)n.warn("fabric.Text is already defined");else{var l="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");n.Text=n.util.createClass(n.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:n.Object.prototype.stateProperties.concat(l),cacheProperties:n.Object.prototype.cacheProperties.concat(l),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,e){this.styles=e&&e.styles||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var t=this.path;t&&(t.segmentsInfo=n.util.getPathSegmentsInfo(t.path))},getMeasuringContext:function(){return n._measuringContext||(n._measuringContext=this.canvas&&this.canvas.contextCache||n.util.createCanvasElement().getContext("2d")),n._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var t,e,s,r,o,f,m=0,y=this._textLines.length;m<y;m++)if(("justify"===this.textAlign||m!==y-1&&!this.isEndOfWrapping(m))&&(s=0,r=this._textLines[m],(e=this.getLineWidth(m))<this.width&&(f=this.textLines[m].match(this._reSpacesAndTabs)))){t=(this.width-e)/f.length;for(var C=0,w=r.length;C<=w;C++)o=this.__charBounds[m][C],this._reSpaceAndTab.test(r[C])?(o.width+=t,o.kernedWidth+=t,o.left+=s,s+=t):o.left+=s}},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){var e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){"stroke"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,i){if(t.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":t.textBaseline="middle";break;case"ascender":t.textBaseline="top";break;case"descender":t.textBaseline="bottom"}t.font=this._getFontDeclaration(e,i)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,i=this._textLines.length;e<i;e++){var s=this.getLineWidth(e);t<s&&(t=s)}return t},_renderTextLine:function(t,e,i,s,r,o){this._renderChars(t,e,i,s,r,o)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var e,i,s,r,o,f,m,y=t.fillStyle,C=this._getLeftOffset(),w=this._getTopOffset(),E=0,M=0,N=this.path,H=0,nt=this._textLines.length;H<nt;H++)if(e=this.getHeightOfLine(H),this.textBackgroundColor||this.styleHas("textBackgroundColor",H)){s=this._textLines[H],i=this._getLineLeftOffset(H),E=M=0,r=this.getValueOfPropertyAt(H,0,"textBackgroundColor");for(var rt=0,g=s.length;rt<g;rt++)o=this.__charBounds[H][rt],f=this.getValueOfPropertyAt(H,rt,"textBackgroundColor"),N?(t.save(),t.translate(o.renderLeft,o.renderTop),t.rotate(o.angle),(t.fillStyle=f)&&t.fillRect(-o.width/2,-e/this.lineHeight*(1-this._fontSizeFraction),o.width,e/this.lineHeight),t.restore()):f!==r?(m=C+i+E,"rtl"===this.direction&&(m=this.width-m-M),(t.fillStyle=r)&&t.fillRect(m,w,M,e/this.lineHeight),E=o.left,M=o.width,r=f):M+=o.kernedWidth;f&&!N&&(m=C+i+E,"rtl"===this.direction&&(m=this.width-m-M),t.fillStyle=f,t.fillRect(m,w,M,e/this.lineHeight)),w+=e}else w+=e;t.fillStyle=y,this._removeShadow(t)}},getFontCache:function(t){var e=t.fontFamily.toLowerCase();n.charWidthsCache[e]||(n.charWidthsCache[e]={});var i=n.charWidthsCache[e],s=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return i[s]||(i[s]={}),i[s]},_measureChar:function(t,e,i,s){var r,o,f,m,y=this.getFontCache(e),C=i+t,w=this._getFontDeclaration(e)===this._getFontDeclaration(s),E=e.fontSize/this.CACHE_FONT_SIZE;if(i&&void 0!==y[i]&&(f=y[i]),void 0!==y[t]&&(m=r=y[t]),w&&void 0!==y[C]&&(m=(o=y[C])-f),void 0===r||void 0===f||void 0===o){var M=this.getMeasuringContext();this._setTextStyles(M,e,!0)}return void 0===r&&(m=r=M.measureText(t).width,y[t]=r),void 0===f&&w&&i&&(f=M.measureText(i).width,y[i]=f),w&&void 0===o&&(o=M.measureText(C).width,m=(y[C]=o)-f),{width:r*E,kernedWidth:m*E}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")},measureLine:function(t){var e=this._measureLine(t);return 0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(t){var e,i,s,r,o,f,m=0,y=this._textLines[t],C=new Array(y.length),w=0,E=this.path,M="right"===this.pathSide;for(this.__charBounds[t]=C,e=0;e<y.length;e++)r=this._getGraphemeBox(i=y[e],t,e,s),m+=(C[e]=r).kernedWidth,s=i;if(C[e]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize},E){switch(f=E.segmentsInfo[E.segmentsInfo.length-1].length,(o=n.util.getPointOnPath(E.path,0,E.segmentsInfo)).x+=E.pathOffset.x,o.y+=E.pathOffset.y,this.textAlign){case"left":w=M?f-m:0;break;case"center":w=(f-m)/2;break;case"right":w=M?0:f-m}for(w+=this.pathStartOffset*(M?-1:1),e=M?y.length-1:0;M?0<=e:e<y.length;M?e--:e++)f<w?w%=f:w<0&&(w+=f),this._setGraphemeOnPath(w,r=C[e],o),w+=r.kernedWidth}return{width:m,numOfSpaces:0}},_setGraphemeOnPath:function(t,e,i){var r=this.path,o=n.util.getPointOnPath(r.path,t+e.kernedWidth/2,r.segmentsInfo);e.renderLeft=o.x-i.x,e.renderTop=o.y-i.y,e.angle=o.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(t,e,i,s,r){var o,f=this.getCompleteStyleDeclaration(e,i),m=s?this.getCompleteStyleDeclaration(e,i-1):{},y=this._measureChar(t,f,s,m),C=y.kernedWidth,w=y.width;0!==this.charSpacing&&(w+=o=this._getWidthOfCharSpacing(),C+=o);var E={width:w,left:0,height:f.fontSize,kernedWidth:C,deltaY:f.deltaY};if(0<i&&!r){var M=this.__charBounds[e][i-1];E.left=M.left+M.width+y.kernedWidth-y.width}return E},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],i=this.getHeightOfChar(t,0),s=1,r=e.length;s<r;s++)i=Math.max(this.getHeightOfChar(t,s),i);return this.__lineHeights[t]=i*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,e=0,i=0,s=this._textLines.length;i<s;i++)t=this.getHeightOfLine(i),e+=i===s-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){t.save();for(var i=0,s=this._getLeftOffset(),r=this._getTopOffset(),o=0,f=this._textLines.length;o<f;o++){var m=this.getHeightOfLine(o),y=m/this.lineHeight,C=this._getLineLeftOffset(o);this._renderTextLine(e,t,this._textLines[o],s+C,r+i+y,o),i+=m}t.restore()},_renderTextFill:function(t){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,e,i,s,r,o){var f,m,y,C,E=this.getHeightOfLine(o),M=-1!==this.textAlign.indexOf("justify"),N="",H=0,nt=this.path,rt=!M&&0===this.charSpacing&&this.isEmptyStyles(o)&&!nt,g="ltr"===this.direction,F="ltr"===this.direction?1:-1,U=e.canvas.getAttribute("dir");if(e.save(),U!==this.direction&&(e.canvas.setAttribute("dir",g?"ltr":"rtl"),e.direction=g?"ltr":"rtl",e.textAlign=g?"left":"right"),r-=E*this._fontSizeFraction/this.lineHeight,rt)return this._renderChar(t,e,o,0,i.join(""),s,r,E),void e.restore();for(var et=0,st=i.length-1;et<=st;et++)C=et===st||this.charSpacing||nt,N+=i[et],y=this.__charBounds[o][et],0===H?(s+=F*(y.kernedWidth-y.width),H+=y.width):H+=y.kernedWidth,M&&!C&&this._reSpaceAndTab.test(i[et])&&(C=!0),C||(f=f||this.getCompleteStyleDeclaration(o,et),m=this.getCompleteStyleDeclaration(o,et+1),C=this._hasStyleChanged(f,m)),C&&(nt?(e.save(),e.translate(y.renderLeft,y.renderTop),e.rotate(y.angle),this._renderChar(t,e,o,et,N,-H/2,0,E),e.restore()):this._renderChar(t,e,o,et,N,s,r,E),N="",f=m,s+=F*H,H=0);e.restore()},_applyPatternGradientTransformText:function(t){var e,i=n.util.createCanvasElement(),s=this.width+this.strokeWidth,r=this.height+this.strokeWidth;return i.width=s,i.height=r,(e=i.getContext("2d")).beginPath(),e.moveTo(0,0),e.lineTo(s,0),e.lineTo(s,r),e.lineTo(0,r),e.closePath(),e.translate(s/2,r/2),e.fillStyle=t.toLive(e),this._applyPatternGradientTransform(e,t),e.fill(),e.createPattern(i,"no-repeat")},handleFiller:function(t,e,i){var s,r;return i.toLive?"percentage"===i.gradientUnits||i.gradientTransform||i.patternTransform?(t.translate(s=-this.width/2,r=-this.height/2),t[e]=this._applyPatternGradientTransformText(i),{offsetX:s,offsetY:r}):(t[e]=i.toLive(t,this),this._applyPatternGradientTransform(t,i)):(t[e]=i,{offsetX:0,offsetY:0})},_setStrokeStyles:function(t,e){return t.lineWidth=e.strokeWidth,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",e.stroke)},_setFillStyles:function(t,e){return this.handleFiller(t,"fillStyle",e.fill)},_renderChar:function(t,e,i,s,r,o,f){var m,y,C=this._getStyleDeclaration(i,s),w=this.getCompleteStyleDeclaration(i,s),E="fillText"===t&&w.fill,M="strokeText"===t&&w.stroke&&w.strokeWidth;(M||E)&&(e.save(),E&&(m=this._setFillStyles(e,w)),M&&(y=this._setStrokeStyles(e,w)),e.font=this._getFontDeclaration(w),C&&C.textBackgroundColor&&this._removeShadow(e),C&&C.deltaY&&(f+=C.deltaY),E&&e.fillText(r,o-m.offsetX,f-m.offsetY),M&&e.strokeText(r,o-y.offsetX,f-y.offsetY),e.restore())},setSuperscript:function(t,e){return this._setScript(t,e,this.superscript)},setSubscript:function(t,e){return this._setScript(t,e,this.subscript)},_setScript:function(t,e,i){var s=this.get2DCursorLocation(t,!0),r=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),o=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY");return this.setSelectionStyles({fontSize:r*i.size,deltaY:o+r*i.baseline},t,e),this},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.deltaY!==e.deltaY},_hasStyleChangedForSvg:function(t,e){return this._hasStyleChanged(t,e)||t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough},_getLineLeftOffset:function(t){var e=this.getLineWidth(t),i=this.width-e,s=this.textAlign,r=this.direction,o=0,f=this.isEndOfWrapping(t);return"justify"===s||"justify-center"===s&&!f||"justify-right"===s&&!f||"justify-left"===s&&!f?0:("center"===s&&(o=i/2),"right"===s&&(o=i),"justify-center"===s&&(o=i/2),"justify-right"===s&&(o=i),"rtl"===r&&(o-=i),o)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){if(void 0!==this.__lineWidths[t])return this.__lineWidths[t];var e=this.measureLine(t).width;return this.__lineWidths[t]=e},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,i){var s=this._getStyleDeclaration(t,e);return s&&void 0!==s[i]?s[i]:this[i]},_renderTextDecoration:function(t,e){if(this[e]||this.styleHas(e)){for(var i,s,r,o,f,m,y,C,w,E,M,N,H,nt,rt,g,F=this._getLeftOffset(),U=this._getTopOffset(),et=this.path,st=this._getWidthOfCharSpacing(),ct=this.offsets[e],W=0,z=this._textLines.length;W<z;W++)if(i=this.getHeightOfLine(W),this[e]||this.styleHas(e,W)){y=this._textLines[W],nt=i/this.lineHeight,o=this._getLineLeftOffset(W),M=E=0,C=this.getValueOfPropertyAt(W,0,e),g=this.getValueOfPropertyAt(W,0,"fill"),w=U+nt*(1-this._fontSizeFraction),s=this.getHeightOfChar(W,0),f=this.getValueOfPropertyAt(W,0,"deltaY");for(var tt=0,ft=y.length;tt<ft;tt++)if(N=this.__charBounds[W][tt],H=this.getValueOfPropertyAt(W,tt,e),rt=this.getValueOfPropertyAt(W,tt,"fill"),r=this.getHeightOfChar(W,tt),m=this.getValueOfPropertyAt(W,tt,"deltaY"),et&&H&&rt)t.save(),t.fillStyle=g,t.translate(N.renderLeft,N.renderTop),t.rotate(N.angle),t.fillRect(-N.kernedWidth/2,ct*r+m,N.kernedWidth,this.fontSize/15),t.restore();else if((H!==C||rt!==g||r!==s||m!==f)&&0<M){var ot=F+o+E;"rtl"===this.direction&&(ot=this.width-ot-M),C&&g&&(t.fillStyle=g,t.fillRect(ot,w+ct*s+f,M,this.fontSize/15)),E=N.left,M=N.width,C=H,g=rt,s=r,f=m}else M+=N.kernedWidth;ot=F+o+E,"rtl"===this.direction&&(ot=this.width-ot-M),t.fillStyle=rt,H&&rt&&t.fillRect(ot,w+ct*s+f,M-st,this.fontSize/15),U+=i}else U+=i;this._removeShadow(t)}},_getFontDeclaration:function(t,e){var i=t||this,s=this.fontFamily,r=-1<n.Text.genericFonts.indexOf(s.toLowerCase()),o=void 0===s||-1<s.indexOf("'")||-1<s.indexOf(",")||-1<s.indexOf('"')||r?i.fontFamily:'"'+i.fontFamily+'"';return[n.isLikelyNode?i.fontWeight:i.fontStyle,n.isLikelyNode?i.fontStyle:i.fontWeight,e?this.CACHE_FONT_SIZE+"px":i.fontSize+"px",o].join(" ")},render:function(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t)))},_splitTextIntoLines:function(t){for(var e=t.split(this._reNewline),i=new Array(e.length),s=["\n"],r=[],o=0;o<e.length;o++)i[o]=n.util.string.graphemeSplit(e[o]),r=r.concat(i[o],s);return r.pop(),{_unwrappedLines:i,lines:e,graphemeText:r,graphemeLines:i}},toObject:function(t){var e=l.concat(t),i=this.callSuper("toObject",e);return i.styles=a(this.styles,!0),i.path&&(i.path=this.path.toObject()),i},set:function(t,e){this.callSuper("set",t,e);var i=!1,s=!1;if("object"==typeof t)for(var r in t)"path"===r&&this.setPathInfo(),i=i||-1!==this._dimensionAffectingProps.indexOf(r),s=s||"path"===r;else i=-1!==this._dimensionAffectingProps.indexOf(t),s="path"===t;return s&&this.setPathInfo(),i&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),n.Text.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),n.Text.DEFAULT_SVG_FONT_SIZE=16,n.Text.fromElement=function(t,e,i){if(!t)return e(null);var s=n.parseAttributes(t,n.Text.ATTRIBUTE_NAMES),r=s.textAnchor||"left";if((i=n.util.object.extend(i?a(i):{},s)).top=i.top||0,i.left=i.left||0,s.textDecoration){var o=s.textDecoration;-1!==o.indexOf("underline")&&(i.underline=!0),-1!==o.indexOf("overline")&&(i.overline=!0),-1!==o.indexOf("line-through")&&(i.linethrough=!0),delete i.textDecoration}"dx"in s&&(i.left+=s.dx),"dy"in s&&(i.top+=s.dy),"fontSize"in i||(i.fontSize=n.Text.DEFAULT_SVG_FONT_SIZE);var f="";"textContent"in t?f=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(f=t.firstChild.data),f=f.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var m=i.strokeWidth;i.strokeWidth=0;var y=new n.Text(f,i),C=y.getScaledHeight()/y.height,w=((y.height+y.strokeWidth)*y.lineHeight-y.height)*C,E=y.getScaledHeight()+w,M=0;"center"===r&&(M=y.getScaledWidth()/2),"right"===r&&(M=y.getScaledWidth()),y.set({left:y.left-M,top:y.top-(E-y.fontSize*(.07+y._fontSizeFraction))/y.lineHeight,strokeWidth:void 0!==m?m:1}),e(y)},n.Text.fromObject=function(t,e){var i=a(t),s=t.path;return delete i.path,n.Object._fromObject("Text",i,function(r){s?n.Object._fromObject("Path",s,function(o){r.set("path",o),e(r)},"path"):e(r)},"text")},n.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],n.util.createAccessors&&n.util.createAccessors(n.Text)}}(typeof exports<"u"?exports:this),fabric.util.object.extend(fabric.Text.prototype,{isEmptyStyles:function(h){if(!this.styles||void 0!==h&&!this.styles[h])return!0;var n=void 0===h?this.styles:{line:this.styles[h]};for(var a in n)for(var l in n[a])for(var t in n[a][l])return!1;return!0},styleHas:function(h,n){if(!this.styles||!h||""===h||void 0!==n&&!this.styles[n])return!1;var a=void 0===n?this.styles:{0:this.styles[n]};for(var l in a)for(var t in a[l])if(void 0!==a[l][t][h])return!0;return!1},cleanStyle:function(h){if(!this.styles||!h||""===h)return!1;var n,a,l=this.styles,t=0,e=!0,i=0;for(var s in l){for(var r in n=0,l[s]){var o;t++,(o=l[s][r]).hasOwnProperty(h)?(a?o[h]!==a&&(e=!1):a=o[h],o[h]===this[h]&&delete o[h]):e=!1,0!==Object.keys(o).length?n++:delete l[s][r]}0===n&&delete l[s]}for(var f=0;f<this._textLines.length;f++)i+=this._textLines[f].length;e&&t===i&&(this[h]=a,this.removeStyle(h))},removeStyle:function(h){if(this.styles&&h&&""!==h){var n,a,l,t=this.styles;for(a in t){for(l in n=t[a])delete n[l][h],0===Object.keys(n[l]).length&&delete n[l];0===Object.keys(n).length&&delete t[a]}}},_extendStyles:function(h,n){var a=this.get2DCursorLocation(h);this._getLineStyle(a.lineIndex)||this._setLineStyle(a.lineIndex),this._getStyleDeclaration(a.lineIndex,a.charIndex)||this._setStyleDeclaration(a.lineIndex,a.charIndex,{}),fabric.util.object.extend(this._getStyleDeclaration(a.lineIndex,a.charIndex),n)},get2DCursorLocation:function(h,n){void 0===h&&(h=this.selectionStart);for(var a=n?this._unwrappedTextLines:this._textLines,l=a.length,t=0;t<l;t++){if(h<=a[t].length)return{lineIndex:t,charIndex:h};h-=a[t].length+this.missingNewlineOffset(t)}return{lineIndex:t-1,charIndex:a[t-1].length<h?a[t-1].length:h}},getSelectionStyles:function(h,n,a){void 0===h&&(h=this.selectionStart||0),void 0===n&&(n=this.selectionEnd||h);for(var l=[],t=h;t<n;t++)l.push(this.getStyleAtPosition(t,a));return l},getStyleAtPosition:function(h,n){var a=this.get2DCursorLocation(h);return(n?this.getCompleteStyleDeclaration(a.lineIndex,a.charIndex):this._getStyleDeclaration(a.lineIndex,a.charIndex))||{}},setSelectionStyles:function(h,n,a){void 0===n&&(n=this.selectionStart||0),void 0===a&&(a=this.selectionEnd||n);for(var l=n;l<a;l++)this._extendStyles(l,h);return this._forceClearCache=!0,this},_getStyleDeclaration:function(h,n){var a=this.styles&&this.styles[h];return a?a[n]:null},getCompleteStyleDeclaration:function(h,n){for(var a,l=this._getStyleDeclaration(h,n)||{},t={},e=0;e<this._styleProperties.length;e++)t[a=this._styleProperties[e]]=void 0===l[a]?this[a]:l[a];return t},_setStyleDeclaration:function(h,n,a){this.styles[h][n]=a},_deleteStyleDeclaration:function(h,n){delete this.styles[h][n]},_getLineStyle:function(h){return!!this.styles[h]},_setLineStyle:function(h){this.styles[h]={}},_deleteLineStyle:function(h){delete this.styles[h]}}),function(){function h(n){n.textDecoration&&(-1<n.textDecoration.indexOf("underline")&&(n.underline=!0),-1<n.textDecoration.indexOf("line-through")&&(n.linethrough=!0),-1<n.textDecoration.indexOf("overline")&&(n.overline=!0),delete n.textDecoration)}fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(n,a){this.callSuper("initialize",n,a),this.initBehavior()},setSelectionStart:function(n){n=Math.max(n,0),this._updateAndFire("selectionStart",n)},setSelectionEnd:function(n){n=Math.min(n,this.text.length),this._updateAndFire("selectionEnd",n)},_updateAndFire:function(n,a){this[n]!==a&&(this._fireSelectionChanged(),this[n]=a),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(n){this.clearContextTop(),this.callSuper("render",n),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(n){this.callSuper("_render",n)},clearContextTop:function(n){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var a=this.canvas.contextTop,l=this.canvas.viewportTransform;a.save(),a.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this.transform(a),this._clearTextArea(a),n||a.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var n=this._getCursorBoundaries(),a=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(n,a):this.renderSelection(n,a),a.restore()}},_clearTextArea:function(n){var a=this.width+4,l=this.height+4;n.clearRect(-a/2,-l/2,a,l)},_getCursorBoundaries:function(n){void 0===n&&(n=this.selectionStart);var a=this._getLeftOffset(),l=this._getTopOffset(),t=this._getCursorBoundariesOffsets(n);return{left:a,top:l,leftOffset:t.left,topOffset:t.top}},_getCursorBoundariesOffsets:function(n){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var a,l,t,e,i=0,s=0,r=this.get2DCursorLocation(n);t=r.charIndex,l=r.lineIndex;for(var o=0;o<l;o++)i+=this.getHeightOfLine(o);a=this._getLineLeftOffset(l);var f=this.__charBounds[l][t];return f&&(s=f.left),0!==this.charSpacing&&t===this._textLines[l].length&&(s-=this._getWidthOfCharSpacing()),e={top:i,left:a+(0<s?s:0)},"rtl"===this.direction&&(e.left*=-1),this.cursorOffsetCache=e,this.cursorOffsetCache},renderCursor:function(n,a){var l=this.get2DCursorLocation(),t=l.lineIndex,e=0<l.charIndex?l.charIndex-1:0,i=this.getValueOfPropertyAt(t,e,"fontSize"),s=this.scaleX*this.canvas.getZoom(),r=this.cursorWidth/s,o=n.topOffset,f=this.getValueOfPropertyAt(t,e,"deltaY");o+=(1-this._fontSizeFraction)*this.getHeightOfLine(t)/this.lineHeight-i*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(n,a),a.fillStyle=this.cursorColor||this.getValueOfPropertyAt(t,e,"fill"),a.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,a.fillRect(n.left+n.leftOffset-r/2,o+n.top+f,r,i)},renderSelection:function(n,a){for(var l=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,t=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,e=-1!==this.textAlign.indexOf("justify"),i=this.get2DCursorLocation(l),s=this.get2DCursorLocation(t),r=i.lineIndex,o=s.lineIndex,f=i.charIndex<0?0:i.charIndex,m=s.charIndex<0?0:s.charIndex,y=r;y<=o;y++){var C,w=this._getLineLeftOffset(y)||0,E=this.getHeightOfLine(y),M=0,N=0;if(y===r&&(M=this.__charBounds[r][f].left),r<=y&&y<o)N=e&&!this.isEndOfWrapping(y)?this.width:this.getLineWidth(y)||5;else if(y===o)if(0===m)N=this.__charBounds[o][m].left;else{var H=this._getWidthOfCharSpacing();N=this.__charBounds[o][m-1].left+this.__charBounds[o][m-1].width-H}C=E,(this.lineHeight<1||y===o&&1<this.lineHeight)&&(E/=this.lineHeight);var nt=n.left+w+M,rt=N-M,g=E,F=0;this.inCompositionMode?(a.fillStyle=this.compositionColor||"black",g=1,F=E):a.fillStyle=this.selectionColor,"rtl"===this.direction&&(nt=this.width-nt-rt),a.fillRect(nt,n.top+n.topOffset+F,rt,g),n.topOffset+=C}},getCurrentCharFontSize:function(){var n=this._getCurrentCharIndex();return this.getValueOfPropertyAt(n.l,n.c,"fontSize")},getCurrentCharColor:function(){var n=this._getCurrentCharIndex();return this.getValueOfPropertyAt(n.l,n.c,"fill")},_getCurrentCharIndex:function(){var n=this.get2DCursorLocation(this.selectionStart,!0);return{l:n.lineIndex,c:0<n.charIndex?n.charIndex-1:0}}}),fabric.IText.fromObject=function(n,a){if(h(n),n.styles)for(var l in n.styles)for(var t in n.styles[l])h(n.styles[l][t]);fabric.Object._fromObject("IText",n,a,"text")}}(),function(){var h=fabric.util.object.clone;fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var n=this;this.on("added",function(){var a=n.canvas;a&&(a._hasITextHandlers||(a._hasITextHandlers=!0,n._initCanvasHandlers(a)),a._iTextInstances=a._iTextInstances||[],a._iTextInstances.push(n))})},initRemovedHandler:function(){var n=this;this.on("removed",function(){var a=n.canvas;a&&(a._iTextInstances=a._iTextInstances||[],fabric.util.removeFromArray(a._iTextInstances,n),0===a._iTextInstances.length&&(a._hasITextHandlers=!1,n._removeCanvasHandlers(a)))})},_initCanvasHandlers:function(n){n._mouseUpITextHandler=function(){n._iTextInstances&&n._iTextInstances.forEach(function(a){a.__isMousedown=!1})},n.on("mouse:up",n._mouseUpITextHandler)},_removeCanvasHandlers:function(n){n.off("mouse:up",n._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(n,a,l,t){var e;return e={isAborted:!1,abort:function(){this.isAborted=!0}},n.animate("_currentCursorOpacity",a,{duration:l,onComplete:function(){e.isAborted||n[t]()},onChange:function(){n.canvas&&n.selectionStart===n.selectionEnd&&n.renderCursorOrSelection()},abort:function(){return e.isAborted}}),e},_onTickComplete:function(){var n=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){n._currentTickCompleteState=n._animateCursor(n,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(n){var a=this,l=n?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){a._tick()},l)},abortCursorAnimation:function(){var n=this._currentTickState||this._currentTickCompleteState,a=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,n&&a&&a.clearContext(a.contextTop||a.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(n){var a=0,l=n-1;if(this._reSpace.test(this._text[l]))for(;this._reSpace.test(this._text[l]);)a++,l--;for(;/\S/.test(this._text[l])&&-1<l;)a++,l--;return n-a},findWordBoundaryRight:function(n){var a=0,l=n;if(this._reSpace.test(this._text[l]))for(;this._reSpace.test(this._text[l]);)a++,l++;for(;/\S/.test(this._text[l])&&l<this._text.length;)a++,l++;return n+a},findLineBoundaryLeft:function(n){for(var a=0,l=n-1;!/\n/.test(this._text[l])&&-1<l;)a++,l--;return n-a},findLineBoundaryRight:function(n){for(var a=0,l=n;!/\n/.test(this._text[l])&&l<this._text.length;)a++,l++;return n+a},searchWordBoundary:function(n,a){for(var l=this._text,t=this._reSpace.test(l[n])?n-1:n,e=l[t],i=fabric.reNonWord;!i.test(e)&&0<t&&t<l.length;)e=l[t+=a];return i.test(e)&&(t+=1===a?0:1),t},selectWord:function(n){var a=this.searchWordBoundary(n=n||this.selectionStart,-1),l=this.searchWordBoundary(n,1);this.selectionStart=a,this.selectionEnd=l,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(n){var a=this.findLineBoundaryLeft(n=n||this.selectionStart),l=this.findLineBoundaryRight(n);return this.selectionStart=a,this.selectionEnd=l,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(n){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(n),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll()),this},exitEditingOnOthers:function(n){n._iTextInstances&&n._iTextInstances.forEach(function(a){a.selected=!1,a.isEditing&&a.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(n){if(this.__isMousedown&&this.isEditing){var a=this.getSelectionStartFromPointer(n.e),l=this.selectionStart,t=this.selectionEnd;(a===this.__selectionStartOnMouseDown&&l!==t||l!==a&&t!==a)&&(a>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=a):(this.selectionStart=a,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===l&&this.selectionEnd===t||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(n,a,l){var t=l.slice(0,n),e=fabric.util.string.graphemeSplit(t).length;if(n===a)return{selectionStart:e,selectionEnd:e};var i=l.slice(n,a);return{selectionStart:e,selectionEnd:e+fabric.util.string.graphemeSplit(i).length}},fromGraphemeToStringSelection:function(n,a,l){var t=l.slice(0,n).join("").length;return n===a?{selectionStart:t,selectionEnd:t}:{selectionStart:t,selectionEnd:t+l.slice(n,a).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var n=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=n.selectionStart,this.hiddenTextarea.selectionEnd=n.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var n=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=n.selectionEnd,this.inCompositionMode||(this.selectionStart=n.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var n=this._calcTextareaPosition();this.hiddenTextarea.style.left=n.left,this.hiddenTextarea.style.top=n.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var n=this.inCompositionMode?this.compositionStart:this.selectionStart,a=this._getCursorBoundaries(n),l=this.get2DCursorLocation(n),i=this.getValueOfPropertyAt(l.lineIndex,l.charIndex,"fontSize")*this.lineHeight,s=a.leftOffset,r=this.calcTransformMatrix(),o={x:a.left+s,y:a.top+a.topOffset+i},f=this.canvas.getRetinaScaling(),m=this.canvas.upperCanvasEl,y=m.width/f,C=m.height/f,w=y-i,E=C-i,M=m.clientWidth/y,N=m.clientHeight/C;return o=fabric.util.transformPoint(o,r),(o=fabric.util.transformPoint(o,this.canvas.viewportTransform)).x*=M,o.y*=N,o.x<0&&(o.x=0),o.x>w&&(o.x=w),o.y<0&&(o.y=0),o.y>E&&(o.y=E),o.x+=this.canvas._offset.left,o.y+=this.canvas._offset.top,{left:o.x+"px",top:o.y+"px",fontSize:i+"px",charHeight:i}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var n=this._textBeforeEdit!==this.text,a=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,a&&(a.blur&&a.blur(),a.parentNode&&a.parentNode.removeChild(a)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),n&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),n&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var n in this.styles)this._textLines[n]||delete this.styles[n]},removeStyleFromTo:function(n,a){var l,t,e=this.get2DCursorLocation(n,!0),i=this.get2DCursorLocation(a,!0),s=e.lineIndex,r=e.charIndex,o=i.lineIndex,f=i.charIndex;if(s!==o){if(this.styles[s])for(l=r;l<this._unwrappedTextLines[s].length;l++)delete this.styles[s][l];if(this.styles[o])for(l=f;l<this._unwrappedTextLines[o].length;l++)(t=this.styles[o][l])&&(this.styles[s]||(this.styles[s]={}),this.styles[s][r+l-f]=t);for(l=s+1;l<=o;l++)delete this.styles[l];this.shiftLineStyles(o,s-o)}else if(this.styles[s]){t=this.styles[s];var m,y,C=f-r;for(l=r;l<f;l++)delete t[l];for(y in this.styles[s])f<=(m=parseInt(y,10))&&(t[m-C]=t[y],delete t[y])}},shiftLineStyles:function(n,a){var l=h(this.styles);for(var t in this.styles){var e=parseInt(t,10);n<e&&(this.styles[e+a]=l[e],l[e-a]||delete this.styles[e])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(n,a,l,t){var e,i={},s=!1,r=this._unwrappedTextLines[n].length===a;for(var o in l||(l=1),this.shiftLineStyles(n,l),this.styles[n]&&(e=this.styles[n][0===a?a:a-1]),this.styles[n]){var f=parseInt(o,10);a<=f&&(s=!0,i[f-a]=this.styles[n][o],r&&0===a||delete this.styles[n][o])}var m=!1;for(s&&!r&&(this.styles[n+l]=i,m=!0),m&&l--;0<l;)t&&t[l-1]?this.styles[n+l]={0:h(t[l-1])}:e?this.styles[n+l]={0:h(e)}:delete this.styles[n+l],l--;this._forceClearCache=!0},insertCharStyleObject:function(n,a,l,t){this.styles||(this.styles={});var e=this.styles[n],i=e?h(e):{};for(var s in l||(l=1),i){var r=parseInt(s,10);a<=r&&(e[r+l]=i[r],i[r-l]||delete e[r])}if(this._forceClearCache=!0,t)for(;l--;)Object.keys(t[l]).length&&(this.styles[n]||(this.styles[n]={}),this.styles[n][a+l]=h(t[l]));else if(e)for(var o=e[a?a-1:1];o&&l--;)this.styles[n][a+l]=h(o)},insertNewStyleBlock:function(n,a,l){for(var t=this.get2DCursorLocation(a,!0),e=[0],i=0,s=0;s<n.length;s++)"\n"===n[s]?e[++i]=0:e[i]++;for(0<e[0]&&(this.insertCharStyleObject(t.lineIndex,t.charIndex,e[0],l),l=l&&l.slice(e[0]+1)),i&&this.insertNewlineStyleObject(t.lineIndex,t.charIndex+e[0],i),s=1;s<i;s++)0<e[s]?this.insertCharStyleObject(t.lineIndex+s,0,e[s],l):l&&this.styles[t.lineIndex+s]&&l[0]&&(this.styles[t.lineIndex+s][0]=l[0]),l=l&&l.slice(e[s]+1);0<e[s]&&this.insertCharStyleObject(t.lineIndex+s,0,e[s],l)},setSelectionStartEndWithShift:function(n,a,l){l<=n?(a===n?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=n),this.selectionStart=l):n<l&&l<a?"right"===this._selectionDirection?this.selectionEnd=l:this.selectionStart=l:(a===n?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=a),this.selectionEnd=l)},setSelectionInBoundaries:function(){var n=this.text.length;this.selectionStart>n?this.selectionStart=n:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>n?this.selectionEnd=n:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(h){if(this.canvas){this.__newClickTime=+new Date;var n=h.pointer;this.isTripleClick(n)&&(this.fire("tripleclick",h),this._stopEvent(h.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=n,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(h){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===h.x&&this.__lastPointer.y===h.y},_stopEvent:function(h){h.preventDefault&&h.preventDefault(),h.stopPropagation&&h.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(h){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(h.e))},tripleClickHandler:function(h){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(h.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(h){!this.canvas||!this.editable||h.e.button&&1!==h.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(h.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(h){!this.canvas||!this.editable||h.e.button&&1!==h.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(h){if(this.__isMousedown=!1,!(!this.editable||this.group||h.transform&&h.transform.actionPerformed||h.e.button&&1!==h.e.button)){if(this.canvas){var n=this.canvas._activeObject;if(n&&n!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(h.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(h){var n=this.getSelectionStartFromPointer(h);h.shiftKey?this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,n):(this.selectionStart=n,this.selectionEnd=n),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(h){for(var n,a=this.getLocalPointer(h),l=0,t=0,e=0,i=0,s=0,r=0,o=this._textLines.length;r<o&&e<=a.y;r++)e+=this.getHeightOfLine(r)*this.scaleY,0<(s=r)&&(i+=this._textLines[r-1].length+this.missingNewlineOffset(r-1));t=this._getLineLeftOffset(s)*this.scaleX,n=this._textLines[s],"rtl"===this.direction&&(a.x=this.width*this.scaleX-a.x+t);for(var f=0,m=n.length;f<m&&(l=t,(t+=this.__charBounds[s][f].kernedWidth*this.scaleX)<=a.x);f++)i++;return this._getNewSelectionStartFromOffset(a,l,t,i,m)},_getNewSelectionStartFromOffset:function(h,n,a,l,t){var i=a-h.x,s=l+(h.x-n<i||i<0?0:1);return this.flipX&&(s=t-s),s>this._text.length&&(s=this._text.length),s}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var h=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+h.top+"; left: "+h.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uff70top: "+h.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):fabric.document.body.appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),fabric.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),fabric.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(h){if(this.isEditing){var n="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(h.keyCode in n)this[n[h.keyCode]](h);else{if(!(h.keyCode in this.ctrlKeysMapDown)||!h.ctrlKey&&!h.metaKey)return;this[this.ctrlKeysMapDown[h.keyCode]](h)}h.stopImmediatePropagation(),h.preventDefault(),33<=h.keyCode&&h.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(h){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:h.keyCode in this.ctrlKeysMapUp&&(h.ctrlKey||h.metaKey)&&(this[this.ctrlKeysMapUp[h.keyCode]](h),h.stopImmediatePropagation(),h.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(h){var n=this.fromPaste;if(this.fromPaste=!1,h&&h.stopPropagation(),this.isEditing){var a,l,t,e,i,s=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,r=this._text.length,o=s.length,f=o-r,m=this.selectionStart,y=this.selectionEnd,C=m!==y;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var w=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),E=m>w.selectionStart;C?(a=this._text.slice(m,y),f+=y-m):o<r&&(a=E?this._text.slice(y+f,y):this._text.slice(m,m-f)),l=s.slice(w.selectionEnd-f,w.selectionEnd),a&&a.length&&(l.length&&(t=this.getSelectionStyles(m,m+1,!1),t=l.map(function(){return t[0]})),C?(e=m,i=y):E?(e=y-a.length,i=y):i=(e=y)+a.length,this.removeStyleFromTo(e,i)),l.length&&(n&&l.join("")===fabric.copiedText&&!fabric.disableStyleCopyPaste&&(t=fabric.copiedTextStyle),this.insertNewStyleBlock(l,m,t)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(h){this.compositionStart=h.target.selectionStart,this.compositionEnd=h.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(fabric.copiedText=this.getSelectedText(),fabric.copiedTextStyle=fabric.disableStyleCopyPaste?null:this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(h){return h&&h.clipboardData||fabric.window.clipboardData},_getWidthBeforeCursor:function(h,n){var a,l=this._getLineLeftOffset(h);return 0<n&&(l+=(a=this.__charBounds[h][n-1]).left+a.width),l},getDownCursorOffset:function(h,n){var a=this._getSelectionForOffset(h,n),l=this.get2DCursorLocation(a),t=l.lineIndex;if(t===this._textLines.length-1||h.metaKey||34===h.keyCode)return this._text.length-a;var e=l.charIndex,i=this._getWidthBeforeCursor(t,e),s=this._getIndexOnLine(t+1,i);return this._textLines[t].slice(e).length+s+1+this.missingNewlineOffset(t)},_getSelectionForOffset:function(h,n){return h.shiftKey&&this.selectionStart!==this.selectionEnd&&n?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(h,n){var a=this._getSelectionForOffset(h,n),l=this.get2DCursorLocation(a),t=l.lineIndex;if(0===t||h.metaKey||33===h.keyCode)return-a;var e=l.charIndex,i=this._getWidthBeforeCursor(t,e),s=this._getIndexOnLine(t-1,i),r=this._textLines[t].slice(0,e),o=this.missingNewlineOffset(t-1);return-this._textLines[t-1].length+s-r.length+(1-o)},_getIndexOnLine:function(h,n){for(var a,l,t=this._textLines[h],e=this._getLineLeftOffset(h),i=0,s=0,r=t.length;s<r;s++)if(n<(e+=a=this.__charBounds[h][s].width)){l=!0;var f=e,m=Math.abs(e-a-n);i=Math.abs(f-n)<m?s:s-1;break}return l||(i=t.length-1),i},moveCursorDown:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",h)},moveCursorUp:function(h){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",h)},_moveCursorUpOrDown:function(h,n){var a=this["get"+h+"CursorOffset"](n,"right"===this._selectionDirection);n.shiftKey?this.moveCursorWithShift(a):this.moveCursorWithoutShift(a),0!==a&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(h){return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,"left"===this._selectionDirection?this.selectionStart+h:this.selectionEnd+h),0!==h},moveCursorWithoutShift:function(h){return h<0?(this.selectionStart+=h,this.selectionEnd=this.selectionStart):(this.selectionEnd+=h,this.selectionStart=this.selectionEnd),0!==h},moveCursorLeft:function(h){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",h)},_move:function(h,n,a){var l;if(h.altKey)l=this["findWordBoundary"+a](this[n]);else{if(!h.metaKey&&35!==h.keyCode&&36!==h.keyCode)return this[n]+="Left"===a?-1:1,!0;l=this["findLineBoundary"+a](this[n])}if(void 0!==typeof l&&this[n]!==l)return this[n]=l,!0},_moveLeft:function(h,n){return this._move(h,n,"Left")},_moveRight:function(h,n){return this._move(h,n,"Right")},moveCursorLeftWithoutShift:function(h){var n=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(n=this._moveLeft(h,"selectionStart")),this.selectionEnd=this.selectionStart,n},moveCursorLeftWithShift:function(h){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(h,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(h,"selectionStart")):void 0},moveCursorRight:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",h)},_moveCursorLeftOrRight:function(h,n){var a="moveCursor"+h+"With";this._currentCursorOpacity=1,this[a+=n.shiftKey?"Shift":"outShift"](n)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(h){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(h,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(h,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(h){var n=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(n=this._moveRight(h,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,n},removeChars:function(h,n){void 0===n&&(n=h+1),this.removeStyleFromTo(h,n),this._text.splice(h,n-h),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(h,n,a,l){void 0===l&&(l=a),a<l&&this.removeStyleFromTo(a,l);var t=fabric.util.string.graphemeSplit(h);this.insertNewStyleBlock(t,a,n),this._text=[].concat(this._text.slice(0,a),t,this._text.slice(l)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var h=fabric.util.toFixed,n=/  +/g;fabric.util.object.extend(fabric.Text.prototype,{_toSVG:function(){var a=this._getSVGLeftTopOffsets(),l=this._getSVGTextAndBg(a.textTop,a.textLeft);return this._wrapSVGTextAndBg(l)},toSVG:function(a){return this._createBaseSVGMarkup(this._toSVG(),{reviver:a,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(a){var l=this.getSvgTextDecoration(this);return[a.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",l?'text-decoration="'+l+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",a.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(a,l){var t,e=[],i=[],s=a;this._setSVGBg(i);for(var r=0,o=this._textLines.length;r<o;r++)t=this._getLineLeftOffset(r),(this.textBackgroundColor||this.styleHas("textBackgroundColor",r))&&this._setSVGTextLineBg(i,r,l+t,s),this._setSVGTextLineText(e,r,l+t,s),s+=this.getHeightOfLine(r);return{textSpans:e,textBgRects:i}},_createTextCharSpan:function(a,l,t,e){var i=a!==a.trim()||a.match(n),s=this.getSvgSpanStyles(l,i),r=s?'style="'+s+'"':"",o=l.deltaY,f="",m=fabric.Object.NUM_FRACTION_DIGITS;return o&&(f=' dy="'+h(o,m)+'" '),['<tspan x="',h(t,m),'" y="',h(e,m),'" ',f,r,">",fabric.util.string.escapeXml(a),"</tspan>"].join("")},_setSVGTextLineText:function(a,l,t,e){var i,s,r,o,f,m=this.getHeightOfLine(l),y=-1!==this.textAlign.indexOf("justify"),C="",w=0,E=this._textLines[l];e+=m*(1-this._fontSizeFraction)/this.lineHeight;for(var M=0,N=E.length-1;M<=N;M++)f=M===N||this.charSpacing,C+=E[M],r=this.__charBounds[l][M],0===w?(t+=r.kernedWidth-r.width,w+=r.width):w+=r.kernedWidth,y&&!f&&this._reSpaceAndTab.test(E[M])&&(f=!0),f||(i=i||this.getCompleteStyleDeclaration(l,M),s=this.getCompleteStyleDeclaration(l,M+1),f=this._hasStyleChangedForSvg(i,s)),f&&(o=this._getStyleDeclaration(l,M)||{},a.push(this._createTextCharSpan(C,o,t,e)),C="",i=s,t+=w,w=0)},_pushTextBgRect:function(a,l,t,e,i,s){var r=fabric.Object.NUM_FRACTION_DIGITS;a.push("\t\t<rect ",this._getFillAttributes(l),' x="',h(t,r),'" y="',h(e,r),'" width="',h(i,r),'" height="',h(s,r),'"></rect>\n')},_setSVGTextLineBg:function(a,l,t,e){for(var i,s,r=this._textLines[l],o=this.getHeightOfLine(l)/this.lineHeight,f=0,m=0,y=this.getValueOfPropertyAt(l,0,"textBackgroundColor"),C=0,w=r.length;C<w;C++)i=this.__charBounds[l][C],(s=this.getValueOfPropertyAt(l,C,"textBackgroundColor"))!==y?(y&&this._pushTextBgRect(a,y,t+m,e,f,o),m=i.left,f=i.width,y=s):f+=i.kernedWidth;s&&this._pushTextBgRect(a,s,t+m,e,f,o)},_getFillAttributes:function(a){var l=a&&"string"==typeof a?new fabric.Color(a):"";return l&&l.getSource()&&1!==l.getAlpha()?'opacity="'+l.getAlpha()+'" fill="'+l.setAlpha(1).toRgb()+'"':'fill="'+a+'"'},_getSVGLineTopOffset:function(a){for(var l,t=0,e=0;e<a;e++)t+=this.getHeightOfLine(e);return l=this.getHeightOfLine(e),{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*l/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(a){return fabric.Object.prototype.getSvgStyles.call(this,a)+" white-space: pre;"}})}(),function(h){"use strict";var n=h.fabric||(h.fabric={});n.Textbox=n.util.createClass(n.IText,n.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:n.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(a){for(var l=0,t=0,e=0,i={},s=0;s<a.graphemeLines.length;s++)"\n"===a.graphemeText[e]&&0<s?(t=0,e++,l++):!this.splitByGrapheme&&this._reSpaceAndTab.test(a.graphemeText[e])&&0<s&&(t++,e++),i[s]={line:l,offset:t},e+=a.graphemeLines[s].length,t+=a.graphemeLines[s].length;return i},styleHas:function(a,l){if(this._styleMap&&!this.isWrapping){var t=this._styleMap[l];t&&(l=t.line)}return n.Text.prototype.styleHas.call(this,a,l)},isEmptyStyles:function(a){if(!this.styles)return!0;var l,t,e=0,i=!1,s=this._styleMap[a],r=this._styleMap[a+1];for(var o in s&&(a=s.line,e=s.offset),r&&(i=r.line===a,l=r.offset),t=void 0===a?this.styles:{line:this.styles[a]})for(var f in t[o])if(e<=f&&(!i||f<l))for(var m in t[o][f])return!1;return!0},_getStyleDeclaration:function(a,l){if(this._styleMap&&!this.isWrapping){var t=this._styleMap[a];if(!t)return null;a=t.line,l=t.offset+l}return this.callSuper("_getStyleDeclaration",a,l)},_setStyleDeclaration:function(a,l,t){var e=this._styleMap[a];this.styles[a=e.line][l=e.offset+l]=t},_deleteStyleDeclaration:function(a,l){var t=this._styleMap[a];delete this.styles[a=t.line][l=t.offset+l]},_getLineStyle:function(a){return!!this.styles[this._styleMap[a].line]},_setLineStyle:function(a){this.styles[this._styleMap[a].line]={}},_wrapText:function(a,l){var t,e=[];for(this.isWrapping=!0,t=0;t<a.length;t++)e=e.concat(this._wrapLine(a[t],t,l));return this.isWrapping=!1,e},_measureWord:function(a,l,t){var e,i=0;t=t||0;for(var s=0,r=a.length;s<r;s++)i+=this._getGraphemeBox(a[s],l,s+t,e,!0).kernedWidth,e=a[s];return i},_wrapLine:function(a,l,t,e){var i=0,s=this.splitByGrapheme,r=[],o=[],f=s?n.util.string.graphemeSplit(a):a.split(this._wordJoiners),m="",y=0,C=s?"":" ",w=0,E=0,M=0,N=!0,H=this._getWidthOfCharSpacing();e=e||0,0===f.length&&f.push([]),t-=e;for(var nt=0;nt<f.length;nt++)m=s?f[nt]:n.util.string.graphemeSplit(f[nt]),w=this._measureWord(m,l,y),y+=m.length,t<(i+=E+w-H)&&!N?(r.push(o),o=[],i=w,N=!0):i+=H,N||s||o.push(C),o=o.concat(m),E=s?0:this._measureWord([C],l,y),y++,N=!1,M<w&&(M=w);return nt&&r.push(o),M+e>this.dynamicMinWidth&&(this.dynamicMinWidth=M-H+e),r},isEndOfWrapping:function(a){return!this._styleMap[a+1]||this._styleMap[a+1].line!==this._styleMap[a].line},missingNewlineOffset:function(a){return this.splitByGrapheme?this.isEndOfWrapping(a)?1:0:1},_splitTextIntoLines:function(a){for(var l=n.Text.prototype._splitTextIntoLines.call(this,a),t=this._wrapText(l.lines,this.width),e=new Array(t.length),i=0;i<t.length;i++)e[i]=t[i].join("");return l.lines=e,l.graphemeLines=t,l},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var a={};for(var l in this._styleMap)this._textLines[l]&&(a[this._styleMap[l].line]=1);for(var l in this.styles)a[l]||delete this.styles[l]},toObject:function(a){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(a))}}),n.Textbox.fromObject=function(a,l){return n.Object._fromObject("Textbox",a,l,"text")}}(typeof exports<"u"?exports:this),function(){var h=fabric.controlsUtils,n=h.scaleSkewCursorStyleHandler,a=h.scaleCursorStyleHandler,l=h.scalingEqually,t=h.scalingYOrSkewingX,e=h.scalingXOrSkewingY,i=h.scaleOrSkewActionName,s=fabric.Object.prototype.controls;if(s.ml=new fabric.Control({x:-.5,y:0,cursorStyleHandler:n,actionHandler:e,getActionName:i}),s.mr=new fabric.Control({x:.5,y:0,cursorStyleHandler:n,actionHandler:e,getActionName:i}),s.mb=new fabric.Control({x:0,y:.5,cursorStyleHandler:n,actionHandler:t,getActionName:i}),s.mt=new fabric.Control({x:0,y:-.5,cursorStyleHandler:n,actionHandler:t,getActionName:i}),s.tl=new fabric.Control({x:-.5,y:-.5,cursorStyleHandler:a,actionHandler:l}),s.tr=new fabric.Control({x:.5,y:-.5,cursorStyleHandler:a,actionHandler:l}),s.bl=new fabric.Control({x:-.5,y:.5,cursorStyleHandler:a,actionHandler:l}),s.br=new fabric.Control({x:.5,y:.5,cursorStyleHandler:a,actionHandler:l}),s.mtr=new fabric.Control({x:0,y:-.5,actionHandler:h.rotationWithSnapping,cursorStyleHandler:h.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),fabric.Textbox){var r=fabric.Textbox.prototype.controls={};r.mtr=s.mtr,r.tr=s.tr,r.br=s.br,r.tl=s.tl,r.bl=s.bl,r.mt=s.mt,r.mb=s.mb,r.mr=new fabric.Control({x:.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:n,actionName:"resizing"}),r.ml=new fabric.Control({x:-.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:n,actionName:"resizing"})}}(),function(h,n){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=h.document?n(h,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return n(a)}:n(h)}(typeof window<"u"?window:this,function(h,n){"use strict";var a=[],l=Object.getPrototypeOf,t=a.slice,e=a.flat?function(c){return a.flat.call(c)}:function(c){return a.concat.apply([],c)},i=a.push,s=a.indexOf,r={},o=r.toString,f=r.hasOwnProperty,m=f.toString,y=m.call(Object),C={},w=function(c){return"function"==typeof c&&"number"!=typeof c.nodeType&&"function"!=typeof c.item},E=function(c){return null!=c&&c===c.window},M=h.document,N={type:!0,src:!0,nonce:!0,noModule:!0};function H(c,d,v){var _,S,k=(v=v||M).createElement("script");if(k.text=c,d)for(_ in N)(S=d[_]||d.getAttribute&&d.getAttribute(_))&&k.setAttribute(_,S);v.head.appendChild(k).parentNode.removeChild(k)}function nt(c){return null==c?c+"":"object"==typeof c||"function"==typeof c?r[o.call(c)]||"object":typeof c}var g=function(c,d){return new g.fn.init(c,d)};function F(c){var d=!!c&&"length"in c&&c.length,v=nt(c);return!w(c)&&!E(c)&&("array"===v||0===d||"number"==typeof d&&0<d&&d-1 in c)}g.fn=g.prototype={jquery:"3.6.0",constructor:g,length:0,toArray:function(){return t.call(this)},get:function(c){return null==c?t.call(this):c<0?this[c+this.length]:this[c]},pushStack:function(c){var d=g.merge(this.constructor(),c);return d.prevObject=this,d},each:function(c){return g.each(this,c)},map:function(c){return this.pushStack(g.map(this,function(d,v){return c.call(d,v,d)}))},slice:function(){return this.pushStack(t.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(g.grep(this,function(c,d){return(d+1)%2}))},odd:function(){return this.pushStack(g.grep(this,function(c,d){return d%2}))},eq:function(c){var d=this.length,v=+c+(c<0?d:0);return this.pushStack(0<=v&&v<d?[this[v]]:[])},end:function(){return this.prevObject||this.constructor()},push:i,sort:a.sort,splice:a.splice},g.extend=g.fn.extend=function(){var c,d,v,_,S,k,P=arguments[0]||{},R=1,Y=arguments.length,K=!1;for("boolean"==typeof P&&(K=P,P=arguments[R]||{},R++),"object"==typeof P||w(P)||(P={}),R===Y&&(P=this,R--);R<Y;R++)if(null!=(c=arguments[R]))for(d in c)_=c[d],"__proto__"!==d&&P!==_&&(K&&_&&(g.isPlainObject(_)||(S=Array.isArray(_)))?(v=P[d],k=S&&!Array.isArray(v)?[]:S||g.isPlainObject(v)?v:{},S=!1,P[d]=g.extend(K,k,_)):void 0!==_&&(P[d]=_));return P},g.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(c){throw new Error(c)},noop:function(){},isPlainObject:function(c){var d,v;return!(!c||"[object Object]"!==o.call(c)||(d=l(c))&&("function"!=typeof(v=f.call(d,"constructor")&&d.constructor)||m.call(v)!==y))},isEmptyObject:function(c){var d;for(d in c)return!1;return!0},globalEval:function(c,d,v){H(c,{nonce:d&&d.nonce},v)},each:function(c,d){var v,_=0;if(F(c))for(v=c.length;_<v&&!1!==d.call(c[_],_,c[_]);_++);else for(_ in c)if(!1===d.call(c[_],_,c[_]))break;return c},makeArray:function(c,d){var v=d||[];return null!=c&&(F(Object(c))?g.merge(v,"string"==typeof c?[c]:c):i.call(v,c)),v},inArray:function(c,d,v){return null==d?-1:s.call(d,c,v)},merge:function(c,d){for(var v=+d.length,_=0,S=c.length;_<v;_++)c[S++]=d[_];return c.length=S,c},grep:function(c,d,v){for(var _=[],S=0,k=c.length,P=!v;S<k;S++)!d(c[S],S)!==P&&_.push(c[S]);return _},map:function(c,d,v){var _,S,k=0,P=[];if(F(c))for(_=c.length;k<_;k++)null!=(S=d(c[k],k,v))&&P.push(S);else for(k in c)null!=(S=d(c[k],k,v))&&P.push(S);return e(P)},guid:1,support:C}),"function"==typeof Symbol&&(g.fn[Symbol.iterator]=a[Symbol.iterator]),g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(c,d){r["[object "+d+"]"]=d.toLowerCase()});var U=function(c){var d,v,_,S,k,P,R,Y,K,D,p,x,A,Q,lt,ut,Bt,Gt,ge,Qt="sizzle"+1*new Date,Wt=c.document,Pe=0,Jt=0,pe=Tn(),Ge=Tn(),Pi=Tn(),He=Tn(),Qi=function(L,B){return L===B&&(p=!0),0},fi={}.hasOwnProperty,Qe=[],wn=Qe.pop,vi=Qe.push,je=Qe.push,di=Qe.slice,oi=function(L,B){for(var q=0,mt=L.length;q<mt;q++)if(L[q]===B)return q;return-1},Xi="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Zt="[\\x20\\t\\r\\n\\f]",le="(?:\\\\[\\da-fA-F]{1,6}"+Zt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Fe="\\["+Zt+"*("+le+")(?:"+Zt+"*([*^$|!~]?=)"+Zt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+le+"))|)"+Zt+"*\\]",pi=":("+le+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Fe+")*)|.*)\\)|)",Ie=new RegExp(Zt+"+","g"),gi=new RegExp("^"+Zt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Zt+"+$","g"),Cn=new RegExp("^"+Zt+"*,"+Zt+"*"),Xn=new RegExp("^"+Zt+"*([>+~]|"+Zt+")"+Zt+"*"),yr=new RegExp(Zt+"|>"),br=new RegExp(pi),Ji=new RegExp("^"+le+"$"),Zn={ID:new RegExp("^#("+le+")"),CLASS:new RegExp("^\\.("+le+")"),TAG:new RegExp("^("+le+"|[*])"),ATTR:new RegExp("^"+Fe),PSEUDO:new RegExp("^"+pi),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Zt+"*(even|odd|(([+-]|)(\\d*)n|)"+Zt+"*(?:([+-]|)"+Zt+"*(\\d+)|))"+Zt+"*\\)|)","i"),bool:new RegExp("^(?:"+Xi+")$","i"),needsContext:new RegExp("^"+Zt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Zt+"*((?:-\\d)?\\d*)"+Zt+"*\\)|)(?=[^-]|$)","i")},xr=/HTML$/i,wr=/^(?:input|select|textarea|button)$/i,Cr=/^h\d$/i,In=/^[^{]+\{\s*\[native \w/,Tr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,lr=/[+~]/,Zi=new RegExp("\\\\[\\da-fA-F]{1,6}"+Zt+"?|\\\\([^\\r\\n\\f])","g"),tn=function(L,B){var q="0x"+L.slice(1)-65536;return B||(q<0?String.fromCharCode(q+65536):String.fromCharCode(q>>10|55296,1023&q|56320))},fr=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,tr=function(L,B){return B?"\0"===L?"\ufffd":L.slice(0,-1)+"\\"+L.charCodeAt(L.length-1).toString(16)+" ":"\\"+L},Yn=function(){x()},dr=ir(function(L){return!0===L.disabled&&"fieldset"===L.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{je.apply(Qe=di.call(Wt.childNodes),Wt.childNodes)}catch{je={apply:Qe.length?function(B,q){vi.apply(B,di.call(q))}:function(B,q){for(var mt=B.length,it=0;B[mt++]=q[it++];);B.length=mt-1}}}function be(L,B,q,mt){var it,yt,xt,St,Pt,Ut,Vt,qt=B&&B.ownerDocument,ue=B?B.nodeType:9;if(q=q||[],"string"!=typeof L||!L||1!==ue&&9!==ue&&11!==ue)return q;if(!mt&&(x(B),B=B||A,lt)){if(11!==ue&&(Pt=Tr.exec(L)))if(it=Pt[1]){if(9===ue){if(!(xt=B.getElementById(it)))return q;if(xt.id===it)return q.push(xt),q}else if(qt&&(xt=qt.getElementById(it))&&ge(B,xt)&&xt.id===it)return q.push(xt),q}else{if(Pt[2])return je.apply(q,B.getElementsByTagName(L)),q;if((it=Pt[3])&&v.getElementsByClassName&&B.getElementsByClassName)return je.apply(q,B.getElementsByClassName(it)),q}if(v.qsa&&!He[L+" "]&&(!ut||!ut.test(L))&&(1!==ue||"object"!==B.nodeName.toLowerCase())){if(Vt=L,qt=B,1===ue&&(yr.test(L)||Xn.test(L))){for((qt=lr.test(L)&&er(B.parentNode)||B)===B&&v.scope||((St=B.getAttribute("id"))?St=St.replace(fr,tr):B.setAttribute("id",St=Qt)),yt=(Ut=P(L)).length;yt--;)Ut[yt]=(St?"#"+St:":scope")+" "+Vn(Ut[yt]);Vt=Ut.join(",")}try{return je.apply(q,qt.querySelectorAll(Vt)),q}catch{He(L,!0)}finally{St===Qt&&B.removeAttribute("id")}}}return Y(L.replace(gi,"$1"),B,q,mt)}function Tn(){var L=[];return function B(q,mt){return L.push(q+" ")>_.cacheLength&&delete B[L.shift()],B[q+" "]=mt}}function Ti(L){return L[Qt]=!0,L}function ji(L){var B=A.createElement("fieldset");try{return!!L(B)}catch{return!1}finally{B.parentNode&&B.parentNode.removeChild(B),B=null}}function cr(L,B){for(var q=L.split("|"),mt=q.length;mt--;)_.attrHandle[q[mt]]=B}function pr(L,B){var q=B&&L,mt=q&&1===L.nodeType&&1===B.nodeType&&L.sourceIndex-B.sourceIndex;if(mt)return mt;if(q)for(;q=q.nextSibling;)if(q===B)return-1;return L?1:-1}function Sn(L){return function(B){return"input"===B.nodeName.toLowerCase()&&B.type===L}}function Sr(L){return function(B){var q=B.nodeName.toLowerCase();return("input"===q||"button"===q)&&B.type===L}}function gr(L){return function(B){return"form"in B?B.parentNode&&!1===B.disabled?"label"in B?"label"in B.parentNode?B.parentNode.disabled===L:B.disabled===L:B.isDisabled===L||B.isDisabled!==!L&&dr(B)===L:B.disabled===L:"label"in B&&B.disabled===L}}function Yi(L){return Ti(function(B){return B=+B,Ti(function(q,mt){for(var it,yt=L([],q.length,B),xt=yt.length;xt--;)q[it=yt[xt]]&&(q[it]=!(mt[it]=q[it]))})})}function er(L){return L&&typeof L.getElementsByTagName<"u"&&L}for(d in v=be.support={},k=be.isXML=function(L){var q=L&&(L.ownerDocument||L).documentElement;return!xr.test(L&&L.namespaceURI||q&&q.nodeName||"HTML")},x=be.setDocument=function(L){var B,q,mt=L?L.ownerDocument||L:Wt;return mt!=A&&9===mt.nodeType&&mt.documentElement&&(Q=(A=mt).documentElement,lt=!k(A),Wt!=A&&(q=A.defaultView)&&q.top!==q&&(q.addEventListener?q.addEventListener("unload",Yn,!1):q.attachEvent&&q.attachEvent("onunload",Yn)),v.scope=ji(function(it){return Q.appendChild(it).appendChild(A.createElement("div")),typeof it.querySelectorAll<"u"&&!it.querySelectorAll(":scope fieldset div").length}),v.attributes=ji(function(it){return it.className="i",!it.getAttribute("className")}),v.getElementsByTagName=ji(function(it){return it.appendChild(A.createComment("")),!it.getElementsByTagName("*").length}),v.getElementsByClassName=In.test(A.getElementsByClassName),v.getById=ji(function(it){return Q.appendChild(it).id=Qt,!A.getElementsByName||!A.getElementsByName(Qt).length}),v.getById?(_.filter.ID=function(it){var yt=it.replace(Zi,tn);return function(xt){return xt.getAttribute("id")===yt}},_.find.ID=function(it,yt){if(typeof yt.getElementById<"u"&&lt){var xt=yt.getElementById(it);return xt?[xt]:[]}}):(_.filter.ID=function(it){var yt=it.replace(Zi,tn);return function(xt){var St=typeof xt.getAttributeNode<"u"&&xt.getAttributeNode("id");return St&&St.value===yt}},_.find.ID=function(it,yt){if(typeof yt.getElementById<"u"&&lt){var xt,St,Pt,Ut=yt.getElementById(it);if(Ut){if((xt=Ut.getAttributeNode("id"))&&xt.value===it)return[Ut];for(Pt=yt.getElementsByName(it),St=0;Ut=Pt[St++];)if((xt=Ut.getAttributeNode("id"))&&xt.value===it)return[Ut]}return[]}}),_.find.TAG=v.getElementsByTagName?function(it,yt){return typeof yt.getElementsByTagName<"u"?yt.getElementsByTagName(it):v.qsa?yt.querySelectorAll(it):void 0}:function(it,yt){var xt,St=[],Pt=0,Ut=yt.getElementsByTagName(it);if("*"===it){for(;xt=Ut[Pt++];)1===xt.nodeType&&St.push(xt);return St}return Ut},_.find.CLASS=v.getElementsByClassName&&function(it,yt){if(typeof yt.getElementsByClassName<"u"&&lt)return yt.getElementsByClassName(it)},Bt=[],ut=[],(v.qsa=In.test(A.querySelectorAll))&&(ji(function(it){var yt;Q.appendChild(it).innerHTML="<a id='"+Qt+"'></a><select id='"+Qt+"-\r\\' msallowcapture=''><option selected=''></option></select>",it.querySelectorAll("[msallowcapture^='']").length&&ut.push("[*^$]="+Zt+"*(?:''|\"\")"),it.querySelectorAll("[selected]").length||ut.push("\\["+Zt+"*(?:value|"+Xi+")"),it.querySelectorAll("[id~="+Qt+"-]").length||ut.push("~="),(yt=A.createElement("input")).setAttribute("name",""),it.appendChild(yt),it.querySelectorAll("[name='']").length||ut.push("\\["+Zt+"*name"+Zt+"*="+Zt+"*(?:''|\"\")"),it.querySelectorAll(":checked").length||ut.push(":checked"),it.querySelectorAll("a#"+Qt+"+*").length||ut.push(".#.+[+~]"),it.querySelectorAll("\\\f"),ut.push("[\\r\\n\\f]")}),ji(function(it){it.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var yt=A.createElement("input");yt.setAttribute("type","hidden"),it.appendChild(yt).setAttribute("name","D"),it.querySelectorAll("[name=d]").length&&ut.push("name"+Zt+"*[*^$|!~]?="),2!==it.querySelectorAll(":enabled").length&&ut.push(":enabled",":disabled"),Q.appendChild(it).disabled=!0,2!==it.querySelectorAll(":disabled").length&&ut.push(":enabled",":disabled"),it.querySelectorAll("*,:x"),ut.push(",.*:")})),(v.matchesSelector=In.test(Gt=Q.matches||Q.webkitMatchesSelector||Q.mozMatchesSelector||Q.oMatchesSelector||Q.msMatchesSelector))&&ji(function(it){v.disconnectedMatch=Gt.call(it,"*"),Gt.call(it,"[s!='']:x"),Bt.push("!=",pi)}),ut=ut.length&&new RegExp(ut.join("|")),Bt=Bt.length&&new RegExp(Bt.join("|")),B=In.test(Q.compareDocumentPosition),ge=B||In.test(Q.contains)?function(it,yt){var xt=9===it.nodeType?it.documentElement:it,St=yt&&yt.parentNode;return it===St||!(!St||1!==St.nodeType||!(xt.contains?xt.contains(St):it.compareDocumentPosition&&16&it.compareDocumentPosition(St)))}:function(it,yt){if(yt)for(;yt=yt.parentNode;)if(yt===it)return!0;return!1},Qi=B?function(it,yt){if(it===yt)return p=!0,0;var xt=!it.compareDocumentPosition-!yt.compareDocumentPosition;return xt||(1&(xt=(it.ownerDocument||it)==(yt.ownerDocument||yt)?it.compareDocumentPosition(yt):1)||!v.sortDetached&&yt.compareDocumentPosition(it)===xt?it==A||it.ownerDocument==Wt&&ge(Wt,it)?-1:yt==A||yt.ownerDocument==Wt&&ge(Wt,yt)?1:D?oi(D,it)-oi(D,yt):0:4&xt?-1:1)}:function(it,yt){if(it===yt)return p=!0,0;var xt,St=0,Pt=it.parentNode,Ut=yt.parentNode,Vt=[it],qt=[yt];if(!Pt||!Ut)return it==A?-1:yt==A?1:Pt?-1:Ut?1:D?oi(D,it)-oi(D,yt):0;if(Pt===Ut)return pr(it,yt);for(xt=it;xt=xt.parentNode;)Vt.unshift(xt);for(xt=yt;xt=xt.parentNode;)qt.unshift(xt);for(;Vt[St]===qt[St];)St++;return St?pr(Vt[St],qt[St]):Vt[St]==Wt?-1:qt[St]==Wt?1:0}),A},be.matches=function(L,B){return be(L,null,null,B)},be.matchesSelector=function(L,B){if(x(L),v.matchesSelector&&lt&&!He[B+" "]&&(!Bt||!Bt.test(B))&&(!ut||!ut.test(B)))try{var q=Gt.call(L,B);if(q||v.disconnectedMatch||L.document&&11!==L.document.nodeType)return q}catch{He(B,!0)}return 0<be(B,A,null,[L]).length},be.contains=function(L,B){return(L.ownerDocument||L)!=A&&x(L),ge(L,B)},be.attr=function(L,B){(L.ownerDocument||L)!=A&&x(L);var q=_.attrHandle[B.toLowerCase()],mt=q&&fi.call(_.attrHandle,B.toLowerCase())?q(L,B,!lt):void 0;return void 0!==mt?mt:v.attributes||!lt?L.getAttribute(B):(mt=L.getAttributeNode(B))&&mt.specified?mt.value:null},be.escape=function(L){return(L+"").replace(fr,tr)},be.error=function(L){throw new Error("Syntax error, unrecognized expression: "+L)},be.uniqueSort=function(L){var B,q=[],mt=0,it=0;if(p=!v.detectDuplicates,D=!v.sortStable&&L.slice(0),L.sort(Qi),p){for(;B=L[it++];)B===L[it]&&(mt=q.push(it));for(;mt--;)L.splice(q[mt],1)}return D=null,L},S=be.getText=function(L){var B,q="",mt=0,it=L.nodeType;if(it){if(1===it||9===it||11===it){if("string"==typeof L.textContent)return L.textContent;for(L=L.firstChild;L;L=L.nextSibling)q+=S(L)}else if(3===it||4===it)return L.nodeValue}else for(;B=L[mt++];)q+=S(B);return q},(_=be.selectors={cacheLength:50,createPseudo:Ti,match:Zn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(L){return L[1]=L[1].replace(Zi,tn),L[3]=(L[3]||L[4]||L[5]||"").replace(Zi,tn),"~="===L[2]&&(L[3]=" "+L[3]+" "),L.slice(0,4)},CHILD:function(L){return L[1]=L[1].toLowerCase(),"nth"===L[1].slice(0,3)?(L[3]||be.error(L[0]),L[4]=+(L[4]?L[5]+(L[6]||1):2*("even"===L[3]||"odd"===L[3])),L[5]=+(L[7]+L[8]||"odd"===L[3])):L[3]&&be.error(L[0]),L},PSEUDO:function(L){var B,q=!L[6]&&L[2];return Zn.CHILD.test(L[0])?null:(L[3]?L[2]=L[4]||L[5]||"":q&&br.test(q)&&(B=P(q,!0))&&(B=q.indexOf(")",q.length-B)-q.length)&&(L[0]=L[0].slice(0,B),L[2]=q.slice(0,B)),L.slice(0,3))}},filter:{TAG:function(L){var B=L.replace(Zi,tn).toLowerCase();return"*"===L?function(){return!0}:function(q){return q.nodeName&&q.nodeName.toLowerCase()===B}},CLASS:function(L){var B=pe[L+" "];return B||(B=new RegExp("(^|"+Zt+")"+L+"("+Zt+"|$)"))&&pe(L,function(q){return B.test("string"==typeof q.className&&q.className||typeof q.getAttribute<"u"&&q.getAttribute("class")||"")})},ATTR:function(L,B,q){return function(mt){var it=be.attr(mt,L);return null==it?"!="===B:!B||(it+="","="===B?it===q:"!="===B?it!==q:"^="===B?q&&0===it.indexOf(q):"*="===B?q&&-1<it.indexOf(q):"$="===B?q&&it.slice(-q.length)===q:"~="===B?-1<(" "+it.replace(Ie," ")+" ").indexOf(q):"|="===B&&(it===q||it.slice(0,q.length+1)===q+"-"))}},CHILD:function(L,B,q,mt,it){var yt="nth"!==L.slice(0,3),xt="last"!==L.slice(-4),St="of-type"===B;return 1===mt&&0===it?function(Pt){return!!Pt.parentNode}:function(Pt,Ut,Vt){var qt,ue,Ae,T,u,b,j=yt!==xt?"nextSibling":"previousSibling",V=Pt.parentNode,$=St&&Pt.nodeName.toLowerCase(),at=!Vt&&!St,dt=!1;if(V){if(yt){for(;j;){for(T=Pt;T=T[j];)if(St?T.nodeName.toLowerCase()===$:1===T.nodeType)return!1;b=j="only"===L&&!b&&"nextSibling"}return!0}if(b=[xt?V.firstChild:V.lastChild],xt&&at){for(dt=(u=(qt=(ue=(Ae=(T=V)[Qt]||(T[Qt]={}))[T.uniqueID]||(Ae[T.uniqueID]={}))[L]||[])[0]===Pe&&qt[1])&&qt[2],T=u&&V.childNodes[u];T=++u&&T&&T[j]||(dt=u=0)||b.pop();)if(1===T.nodeType&&++dt&&T===Pt){ue[L]=[Pe,u,dt];break}}else if(at&&(dt=u=(qt=(ue=(Ae=(T=Pt)[Qt]||(T[Qt]={}))[T.uniqueID]||(Ae[T.uniqueID]={}))[L]||[])[0]===Pe&&qt[1]),!1===dt)for(;(T=++u&&T&&T[j]||(dt=u=0)||b.pop())&&((St?T.nodeName.toLowerCase()!==$:1!==T.nodeType)||!++dt||(at&&((ue=(Ae=T[Qt]||(T[Qt]={}))[T.uniqueID]||(Ae[T.uniqueID]={}))[L]=[Pe,dt]),T!==Pt)););return(dt-=it)===mt||dt%mt==0&&0<=dt/mt}}},PSEUDO:function(L,B){var q,mt=_.pseudos[L]||_.setFilters[L.toLowerCase()]||be.error("unsupported pseudo: "+L);return mt[Qt]?mt(B):1<mt.length?(q=[L,L,"",B],_.setFilters.hasOwnProperty(L.toLowerCase())?Ti(function(it,yt){for(var xt,St=mt(it,B),Pt=St.length;Pt--;)it[xt=oi(it,St[Pt])]=!(yt[xt]=St[Pt])}):function(it){return mt(it,0,q)}):mt}},pseudos:{not:Ti(function(L){var B=[],q=[],mt=R(L.replace(gi,"$1"));return mt[Qt]?Ti(function(it,yt,xt,St){for(var Pt,Ut=mt(it,null,St,[]),Vt=it.length;Vt--;)(Pt=Ut[Vt])&&(it[Vt]=!(yt[Vt]=Pt))}):function(it,yt,xt){return B[0]=it,mt(B,null,xt,q),B[0]=null,!q.pop()}}),has:Ti(function(L){return function(B){return 0<be(L,B).length}}),contains:Ti(function(L){return L=L.replace(Zi,tn),function(B){return-1<(B.textContent||S(B)).indexOf(L)}}),lang:Ti(function(L){return Ji.test(L||"")||be.error("unsupported lang: "+L),L=L.replace(Zi,tn).toLowerCase(),function(B){var q;do{if(q=lt?B.lang:B.getAttribute("xml:lang")||B.getAttribute("lang"))return(q=q.toLowerCase())===L||0===q.indexOf(L+"-")}while((B=B.parentNode)&&1===B.nodeType);return!1}}),target:function(L){var B=c.location&&c.location.hash;return B&&B.slice(1)===L.id},root:function(L){return L===Q},focus:function(L){return L===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(L.type||L.href||~L.tabIndex)},enabled:gr(!1),disabled:gr(!0),checked:function(L){var B=L.nodeName.toLowerCase();return"input"===B&&!!L.checked||"option"===B&&!!L.selected},selected:function(L){return!0===L.selected},empty:function(L){for(L=L.firstChild;L;L=L.nextSibling)if(L.nodeType<6)return!1;return!0},parent:function(L){return!_.pseudos.empty(L)},header:function(L){return Cr.test(L.nodeName)},input:function(L){return wr.test(L.nodeName)},button:function(L){var B=L.nodeName.toLowerCase();return"input"===B&&"button"===L.type||"button"===B},text:function(L){var B;return"input"===L.nodeName.toLowerCase()&&"text"===L.type&&(null==(B=L.getAttribute("type"))||"text"===B.toLowerCase())},first:Yi(function(){return[0]}),last:Yi(function(L,B){return[B-1]}),eq:Yi(function(L,B,q){return[q<0?q+B:q]}),even:Yi(function(L,B){for(var q=0;q<B;q+=2)L.push(q);return L}),odd:Yi(function(L,B){for(var q=1;q<B;q+=2)L.push(q);return L}),lt:Yi(function(L,B,q){for(var mt=q<0?q+B:B<q?B:q;0<=--mt;)L.push(mt);return L}),gt:Yi(function(L,B,q){for(var mt=q<0?q+B:q;++mt<B;)L.push(mt);return L})}}).pseudos.nth=_.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[d]=Sn(d);for(d in{submit:!0,reset:!0})_.pseudos[d]=Sr(d);function Fn(){}function Vn(L){for(var B=0,q=L.length,mt="";B<q;B++)mt+=L[B].value;return mt}function ir(L,B,q){var mt=B.dir,it=B.next,yt=it||mt,xt=q&&"parentNode"===yt,St=Jt++;return B.first?function(Pt,Ut,Vt){for(;Pt=Pt[mt];)if(1===Pt.nodeType||xt)return L(Pt,Ut,Vt);return!1}:function(Pt,Ut,Vt){var qt,ue,Ae,T=[Pe,St];if(Vt){for(;Pt=Pt[mt];)if((1===Pt.nodeType||xt)&&L(Pt,Ut,Vt))return!0}else for(;Pt=Pt[mt];)if(1===Pt.nodeType||xt)if(ue=(Ae=Pt[Qt]||(Pt[Qt]={}))[Pt.uniqueID]||(Ae[Pt.uniqueID]={}),it&&it===Pt.nodeName.toLowerCase())Pt=Pt[mt]||Pt;else{if((qt=ue[yt])&&qt[0]===Pe&&qt[1]===St)return T[2]=qt[2];if((ue[yt]=T)[2]=L(Pt,Ut,Vt))return!0}return!1}}function hr(L){return 1<L.length?function(B,q,mt){for(var it=L.length;it--;)if(!L[it](B,q,mt))return!1;return!0}:L[0]}function on(L,B,q,mt,it){for(var yt,xt=[],St=0,Pt=L.length,Ut=null!=B;St<Pt;St++)(yt=L[St])&&(q&&!q(yt,mt,it)||(xt.push(yt),Ut&&B.push(St)));return xt}function ur(L,B,q,mt,it,yt){return mt&&!mt[Qt]&&(mt=ur(mt)),it&&!it[Qt]&&(it=ur(it,yt)),Ti(function(xt,St,Pt,Ut){var Vt,qt,ue,Ae=[],T=[],u=St.length,b=xt||function($,at,dt){for(var wt=0,jt=at.length;wt<jt;wt++)be($,at[wt],dt);return dt}(B||"*",Pt.nodeType?[Pt]:Pt,[]),j=!L||!xt&&B?b:on(b,Ae,L,Pt,Ut),V=q?it||(xt?L:u||mt)?[]:St:j;if(q&&q(j,V,Pt,Ut),mt)for(Vt=on(V,T),mt(Vt,[],Pt,Ut),qt=Vt.length;qt--;)(ue=Vt[qt])&&(V[T[qt]]=!(j[T[qt]]=ue));if(xt){if(it||L){if(it){for(Vt=[],qt=V.length;qt--;)(ue=V[qt])&&Vt.push(j[qt]=ue);it(null,V=[],Vt,Ut)}for(qt=V.length;qt--;)(ue=V[qt])&&-1<(Vt=it?oi(xt,ue):Ae[qt])&&(xt[Vt]=!(St[Vt]=ue))}}else V=on(V===St?V.splice(u,V.length):V),it?it(null,St,V,Ut):je.apply(St,V)})}function nr(L){for(var B,q,mt,it=L.length,yt=_.relative[L[0].type],xt=yt||_.relative[" "],St=yt?1:0,Pt=ir(function(qt){return qt===B},xt,!0),Ut=ir(function(qt){return-1<oi(B,qt)},xt,!0),Vt=[function(qt,ue,Ae){var T=!yt&&(Ae||ue!==K)||((B=ue).nodeType?Pt(qt,ue,Ae):Ut(qt,ue,Ae));return B=null,T}];St<it;St++)if(q=_.relative[L[St].type])Vt=[ir(hr(Vt),q)];else{if((q=_.filter[L[St].type].apply(null,L[St].matches))[Qt]){for(mt=++St;mt<it&&!_.relative[L[mt].type];mt++);return ur(1<St&&hr(Vt),1<St&&Vn(L.slice(0,St-1).concat({value:" "===L[St-2].type?"*":""})).replace(gi,"$1"),q,St<mt&&nr(L.slice(St,mt)),mt<it&&nr(L=L.slice(mt)),mt<it&&Vn(L))}Vt.push(q)}return hr(Vt)}return Fn.prototype=_.filters=_.pseudos,_.setFilters=new Fn,P=be.tokenize=function(L,B){var q,mt,it,yt,xt,St,Pt,Ut=Ge[L+" "];if(Ut)return B?0:Ut.slice(0);for(xt=L,St=[],Pt=_.preFilter;xt;){for(yt in q&&!(mt=Cn.exec(xt))||(mt&&(xt=xt.slice(mt[0].length)||xt),St.push(it=[])),q=!1,(mt=Xn.exec(xt))&&(q=mt.shift(),it.push({value:q,type:mt[0].replace(gi," ")}),xt=xt.slice(q.length)),_.filter)!(mt=Zn[yt].exec(xt))||Pt[yt]&&!(mt=Pt[yt](mt))||(q=mt.shift(),it.push({value:q,type:yt,matches:mt}),xt=xt.slice(q.length));if(!q)break}return B?xt.length:xt?be.error(L):Ge(L,St).slice(0)},R=be.compile=function(L,B){var q,mt,it,yt,xt,St,Pt=[],Ut=[],Vt=Pi[L+" "];if(!Vt){for(B||(B=P(L)),q=B.length;q--;)(Vt=nr(B[q]))[Qt]?Pt.push(Vt):Ut.push(Vt);(Vt=Pi(L,(mt=Ut,yt=0<(it=Pt).length,xt=0<mt.length,St=function(qt,ue,Ae,T,u){var b,j,V,$=0,at="0",dt=qt&&[],wt=[],jt=K,Ft=qt||xt&&_.find.TAG("*",u),kt=Pe+=null==jt?1:Math.random()||.1,ne=Ft.length;for(u&&(K=ue==A||ue||u);at!==ne&&null!=(b=Ft[at]);at++){if(xt&&b){for(j=0,ue||b.ownerDocument==A||(x(b),Ae=!lt);V=mt[j++];)if(V(b,ue||A,Ae)){T.push(b);break}u&&(Pe=kt)}yt&&((b=!V&&b)&&$--,qt&&dt.push(b))}if($+=at,yt&&at!==$){for(j=0;V=it[j++];)V(dt,wt,ue,Ae);if(qt){if(0<$)for(;at--;)dt[at]||wt[at]||(wt[at]=wn.call(T));wt=on(wt)}je.apply(T,wt),u&&!qt&&0<wt.length&&1<$+it.length&&be.uniqueSort(T)}return u&&(Pe=kt,K=jt),dt},yt?Ti(St):St))).selector=L}return Vt},Y=be.select=function(L,B,q,mt){var it,yt,xt,St,Pt,Ut="function"==typeof L&&L,Vt=!mt&&P(L=Ut.selector||L);if(q=q||[],1===Vt.length){if(2<(yt=Vt[0]=Vt[0].slice(0)).length&&"ID"===(xt=yt[0]).type&&9===B.nodeType&&lt&&_.relative[yt[1].type]){if(!(B=(_.find.ID(xt.matches[0].replace(Zi,tn),B)||[])[0]))return q;Ut&&(B=B.parentNode),L=L.slice(yt.shift().value.length)}for(it=Zn.needsContext.test(L)?0:yt.length;it--&&!_.relative[St=(xt=yt[it]).type];)if((Pt=_.find[St])&&(mt=Pt(xt.matches[0].replace(Zi,tn),lr.test(yt[0].type)&&er(B.parentNode)||B))){if(yt.splice(it,1),!(L=mt.length&&Vn(yt)))return je.apply(q,mt),q;break}}return(Ut||R(L,Vt))(mt,B,!lt,q,!B||lr.test(L)&&er(B.parentNode)||B),q},v.sortStable=Qt.split("").sort(Qi).join("")===Qt,v.detectDuplicates=!!p,x(),v.sortDetached=ji(function(L){return 1&L.compareDocumentPosition(A.createElement("fieldset"))}),ji(function(L){return L.innerHTML="<a href='#'></a>","#"===L.firstChild.getAttribute("href")})||cr("type|href|height|width",function(L,B,q){if(!q)return L.getAttribute(B,"type"===B.toLowerCase()?1:2)}),v.attributes&&ji(function(L){return L.innerHTML="<input/>",L.firstChild.setAttribute("value",""),""===L.firstChild.getAttribute("value")})||cr("value",function(L,B,q){if(!q&&"input"===L.nodeName.toLowerCase())return L.defaultValue}),ji(function(L){return null==L.getAttribute("disabled")})||cr(Xi,function(L,B,q){var mt;if(!q)return!0===L[B]?B.toLowerCase():(mt=L.getAttributeNode(B))&&mt.specified?mt.value:null}),be}(h);g.find=U,g.expr=U.selectors,g.expr[":"]=g.expr.pseudos,g.uniqueSort=g.unique=U.uniqueSort,g.text=U.getText,g.isXMLDoc=U.isXML,g.contains=U.contains,g.escapeSelector=U.escape;var et=function(c,d,v){for(var _=[],S=void 0!==v;(c=c[d])&&9!==c.nodeType;)if(1===c.nodeType){if(S&&g(c).is(v))break;_.push(c)}return _},st=function(c,d){for(var v=[];c;c=c.nextSibling)1===c.nodeType&&c!==d&&v.push(c);return v},ct=g.expr.match.needsContext;function W(c,d){return c.nodeName&&c.nodeName.toLowerCase()===d.toLowerCase()}var z=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function tt(c,d,v){return w(d)?g.grep(c,function(_,S){return!!d.call(_,S,_)!==v}):d.nodeType?g.grep(c,function(_){return _===d!==v}):"string"!=typeof d?g.grep(c,function(_){return-1<s.call(d,_)!==v}):g.filter(d,c,v)}g.filter=function(c,d,v){var _=d[0];return v&&(c=":not("+c+")"),1===d.length&&1===_.nodeType?g.find.matchesSelector(_,c)?[_]:[]:g.find.matches(c,g.grep(d,function(S){return 1===S.nodeType}))},g.fn.extend({find:function(c){var d,v,_=this.length,S=this;if("string"!=typeof c)return this.pushStack(g(c).filter(function(){for(d=0;d<_;d++)if(g.contains(S[d],this))return!0}));for(v=this.pushStack([]),d=0;d<_;d++)g.find(c,S[d],v);return 1<_?g.uniqueSort(v):v},filter:function(c){return this.pushStack(tt(this,c||[],!1))},not:function(c){return this.pushStack(tt(this,c||[],!0))},is:function(c){return!!tt(this,"string"==typeof c&&ct.test(c)?g(c):c||[],!1).length}});var ft,ot=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(g.fn.init=function(c,d,v){var _,S;if(!c)return this;if(v=v||ft,"string"==typeof c){if(!(_="<"===c[0]&&">"===c[c.length-1]&&3<=c.length?[null,c,null]:ot.exec(c))||!_[1]&&d)return!d||d.jquery?(d||v).find(c):this.constructor(d).find(c);if(_[1]){if(g.merge(this,g.parseHTML(_[1],(d=d instanceof g?d[0]:d)&&d.nodeType?d.ownerDocument||d:M,!0)),z.test(_[1])&&g.isPlainObject(d))for(_ in d)w(this[_])?this[_](d[_]):this.attr(_,d[_]);return this}return(S=M.getElementById(_[2]))&&(this[0]=S,this.length=1),this}return c.nodeType?(this[0]=c,this.length=1,this):w(c)?void 0!==v.ready?v.ready(c):c(g):g.makeArray(c,this)}).prototype=g.fn,ft=g(M);var vt=/^(?:parents|prev(?:Until|All))/,_t={children:!0,contents:!0,next:!0,prev:!0};function G(c,d){for(;(c=c[d])&&1!==c.nodeType;);return c}g.fn.extend({has:function(c){var d=g(c,this),v=d.length;return this.filter(function(){for(var _=0;_<v;_++)if(g.contains(this,d[_]))return!0})},closest:function(c,d){var v,_=0,S=this.length,k=[],P="string"!=typeof c&&g(c);if(!ct.test(c))for(;_<S;_++)for(v=this[_];v&&v!==d;v=v.parentNode)if(v.nodeType<11&&(P?-1<P.index(v):1===v.nodeType&&g.find.matchesSelector(v,c))){k.push(v);break}return this.pushStack(1<k.length?g.uniqueSort(k):k)},index:function(c){return c?"string"==typeof c?s.call(g(c),this[0]):s.call(this,c.jquery?c[0]:c):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(c,d){return this.pushStack(g.uniqueSort(g.merge(this.get(),g(c,d))))},addBack:function(c){return this.add(null==c?this.prevObject:this.prevObject.filter(c))}}),g.each({parent:function(c){var d=c.parentNode;return d&&11!==d.nodeType?d:null},parents:function(c){return et(c,"parentNode")},parentsUntil:function(c,d,v){return et(c,"parentNode",v)},next:function(c){return G(c,"nextSibling")},prev:function(c){return G(c,"previousSibling")},nextAll:function(c){return et(c,"nextSibling")},prevAll:function(c){return et(c,"previousSibling")},nextUntil:function(c,d,v){return et(c,"nextSibling",v)},prevUntil:function(c,d,v){return et(c,"previousSibling",v)},siblings:function(c){return st((c.parentNode||{}).firstChild,c)},children:function(c){return st(c.firstChild)},contents:function(c){return null!=c.contentDocument&&l(c.contentDocument)?c.contentDocument:(W(c,"template")&&(c=c.content||c),g.merge([],c.childNodes))}},function(c,d){g.fn[c]=function(v,_){var S=g.map(this,d,v);return"Until"!==c.slice(-5)&&(_=v),_&&"string"==typeof _&&(S=g.filter(_,S)),1<this.length&&(_t[c]||g.uniqueSort(S),vt.test(c)&&S.reverse()),this.pushStack(S)}});var bt=/[^\x20\t\r\n\f]+/g;function Ct(c){return c}function J(c){throw c}function Ot(c,d,v,_){var S;try{c&&w(S=c.promise)?S.call(c).done(d).fail(v):c&&w(S=c.then)?S.call(c,d,v):d.apply(void 0,[c].slice(_))}catch(k){v.apply(void 0,[k])}}g.Callbacks=function(c){var v;c="string"==typeof c?(v={},g.each(c.match(bt)||[],function(x,A){v[A]=!0}),v):g.extend({},c);var _,S,k,P,R=[],Y=[],K=-1,D=function(){for(P=P||c.once,k=_=!0;Y.length;K=-1)for(S=Y.shift();++K<R.length;)!1===R[K].apply(S[0],S[1])&&c.stopOnFalse&&(K=R.length,S=!1);c.memory||(S=!1),_=!1,P&&(R=S?[]:"")},p={add:function(){return R&&(S&&!_&&(K=R.length-1,Y.push(S)),function x(A){g.each(A,function(Q,lt){w(lt)?c.unique&&p.has(lt)||R.push(lt):lt&&lt.length&&"string"!==nt(lt)&&x(lt)})}(arguments),S&&!_&&D()),this},remove:function(){return g.each(arguments,function(x,A){for(var Q;-1<(Q=g.inArray(A,R,Q));)R.splice(Q,1),Q<=K&&K--}),this},has:function(x){return x?-1<g.inArray(x,R):0<R.length},empty:function(){return R&&(R=[]),this},disable:function(){return P=Y=[],R=S="",this},disabled:function(){return!R},lock:function(){return P=Y=[],S||_||(R=S=""),this},locked:function(){return!!P},fireWith:function(x,A){return P||(A=[x,(A=A||[]).slice?A.slice():A],Y.push(A),_||D()),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!k}};return p},g.extend({Deferred:function(c){var d=[["notify","progress",g.Callbacks("memory"),g.Callbacks("memory"),2],["resolve","done",g.Callbacks("once memory"),g.Callbacks("once memory"),0,"resolved"],["reject","fail",g.Callbacks("once memory"),g.Callbacks("once memory"),1,"rejected"]],v="pending",_={state:function(){return v},always:function(){return S.done(arguments).fail(arguments),this},catch:function(k){return _.then(null,k)},pipe:function(){var k=arguments;return g.Deferred(function(P){g.each(d,function(R,Y){var K=w(k[Y[4]])&&k[Y[4]];S[Y[1]](function(){var D=K&&K.apply(this,arguments);D&&w(D.promise)?D.promise().progress(P.notify).done(P.resolve).fail(P.reject):P[Y[0]+"With"](this,K?[D]:arguments)})}),k=null}).promise()},then:function(k,P,R){var Y=0;function K(D,p,x,A){return function(){var Q=this,lt=arguments,ut=function(){var Gt,ge;if(!(D<Y)){if((Gt=x.apply(Q,lt))===p.promise())throw new TypeError("Thenable self-resolution");w(ge=Gt&&("object"==typeof Gt||"function"==typeof Gt)&&Gt.then)?A?ge.call(Gt,K(Y,p,Ct,A),K(Y,p,J,A)):(Y++,ge.call(Gt,K(Y,p,Ct,A),K(Y,p,J,A),K(Y,p,Ct,p.notifyWith))):(x!==Ct&&(Q=void 0,lt=[Gt]),(A||p.resolveWith)(Q,lt))}},Bt=A?ut:function(){try{ut()}catch(Gt){g.Deferred.exceptionHook&&g.Deferred.exceptionHook(Gt,Bt.stackTrace),Y<=D+1&&(x!==J&&(Q=void 0,lt=[Gt]),p.rejectWith(Q,lt))}};D?Bt():(g.Deferred.getStackHook&&(Bt.stackTrace=g.Deferred.getStackHook()),h.setTimeout(Bt))}}return g.Deferred(function(D){d[0][3].add(K(0,D,w(R)?R:Ct,D.notifyWith)),d[1][3].add(K(0,D,w(k)?k:Ct)),d[2][3].add(K(0,D,w(P)?P:J))}).promise()},promise:function(k){return null!=k?g.extend(k,_):_}},S={};return g.each(d,function(k,P){var R=P[2],Y=P[5];_[P[1]]=R.add,Y&&R.add(function(){v=Y},d[3-k][2].disable,d[3-k][3].disable,d[0][2].lock,d[0][3].lock),R.add(P[3].fire),S[P[0]]=function(){return S[P[0]+"With"](this===S?void 0:this,arguments),this},S[P[0]+"With"]=R.fireWith}),_.promise(S),c&&c.call(S,S),S},when:function(c){var d=arguments.length,v=d,_=Array(v),S=t.call(arguments),k=g.Deferred(),P=function(R){return function(Y){_[R]=this,S[R]=1<arguments.length?t.call(arguments):Y,--d||k.resolveWith(_,S)}};if(d<=1&&(Ot(c,k.done(P(v)).resolve,k.reject,!d),"pending"===k.state()||w(S[v]&&S[v].then)))return k.then();for(;v--;)Ot(S[v],P(v),k.reject);return k.promise()}});var Tt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;g.Deferred.exceptionHook=function(c,d){h.console&&h.console.warn&&c&&Tt.test(c.name)&&h.console.warn("jQuery.Deferred exception: "+c.message,c.stack,d)},g.readyException=function(c){h.setTimeout(function(){throw c})};var Lt=g.Deferred();function zt(){M.removeEventListener("DOMContentLoaded",zt),h.removeEventListener("load",zt),g.ready()}g.fn.ready=function(c){return Lt.then(c).catch(function(d){g.readyException(d)}),this},g.extend({isReady:!1,readyWait:1,ready:function(c){(!0===c?--g.readyWait:g.isReady)||(g.isReady=!0)!==c&&0<--g.readyWait||Lt.resolveWith(M,[g])}}),g.ready.then=Lt.then,"complete"===M.readyState||"loading"!==M.readyState&&!M.documentElement.doScroll?h.setTimeout(g.ready):(M.addEventListener("DOMContentLoaded",zt),h.addEventListener("load",zt));var Xt=function(c,d,v,_,S,k,P){var R=0,Y=c.length,K=null==v;if("object"===nt(v))for(R in S=!0,v)Xt(c,d,R,v[R],!0,k,P);else if(void 0!==_&&(S=!0,w(_)||(P=!0),K&&(P?(d.call(c,_),d=null):(K=d,d=function(D,p,x){return K.call(g(D),x)})),d))for(;R<Y;R++)d(c[R],v,P?_:_.call(c[R],R,d(c[R],v)));return S?c:K?d.call(c):Y?d(c[0],v):k},xe=/^-ms-/,_e=/-([a-z])/g;function re(c,d){return d.toUpperCase()}function se(c){return c.replace(xe,"ms-").replace(_e,re)}var Dt=function(c){return 1===c.nodeType||9===c.nodeType||!+c.nodeType};function Ne(){this.expando=g.expando+Ne.uid++}Ne.uid=1,Ne.prototype={cache:function(c){var d=c[this.expando];return d||(d={},Dt(c)&&(c.nodeType?c[this.expando]=d:Object.defineProperty(c,this.expando,{value:d,configurable:!0}))),d},set:function(c,d,v){var _,S=this.cache(c);if("string"==typeof d)S[se(d)]=v;else for(_ in d)S[se(_)]=d[_];return S},get:function(c,d){return void 0===d?this.cache(c):c[this.expando]&&c[this.expando][se(d)]},access:function(c,d,v){return void 0===d||d&&"string"==typeof d&&void 0===v?this.get(c,d):(this.set(c,d,v),void 0!==v?v:d)},remove:function(c,d){var v,_=c[this.expando];if(void 0!==_){if(void 0!==d)for((v=(d=Array.isArray(d)?d.map(se):(d=se(d))in _?[d]:d.match(bt)||[]).length);v--;)delete _[d[v]];(void 0===d||g.isEmptyObject(_))&&(c.nodeType?c[this.expando]=void 0:delete c[this.expando])}},hasData:function(c){var d=c[this.expando];return void 0!==d&&!g.isEmptyObject(d)}};var It=new Ne,Nt=new Ne,qe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Je=/[A-Z]/g;function Re(c,d,v){var _,S;if(void 0===v&&1===c.nodeType)if(_="data-"+d.replace(Je,"-$&").toLowerCase(),"string"==typeof(v=c.getAttribute(_))){try{v="true"===(S=v)||"false"!==S&&("null"===S?null:S===+S+""?+S:qe.test(S)?JSON.parse(S):S)}catch{}Nt.set(c,d,v)}else v=void 0;return v}g.extend({hasData:function(c){return Nt.hasData(c)||It.hasData(c)},data:function(c,d,v){return Nt.access(c,d,v)},removeData:function(c,d){Nt.remove(c,d)},_data:function(c,d,v){return It.access(c,d,v)},_removeData:function(c,d){It.remove(c,d)}}),g.fn.extend({data:function(c,d){var v,_,S,k=this[0],P=k&&k.attributes;if(void 0===c){if(this.length&&(S=Nt.get(k),1===k.nodeType&&!It.get(k,"hasDataAttrs"))){for(v=P.length;v--;)P[v]&&0===(_=P[v].name).indexOf("data-")&&(_=se(_.slice(5)),Re(k,_,S[_]));It.set(k,"hasDataAttrs",!0)}return S}return"object"==typeof c?this.each(function(){Nt.set(this,c)}):Xt(this,function(R){var Y;if(k&&void 0===R)return void 0!==(Y=Nt.get(k,c))||void 0!==(Y=Re(k,c))?Y:void 0;this.each(function(){Nt.set(this,c,R)})},null,d,1<arguments.length,null,!0)},removeData:function(c){return this.each(function(){Nt.remove(this,c)})}}),g.extend({queue:function(c,d,v){var _;if(c)return _=It.get(c,d=(d||"fx")+"queue"),v&&(!_||Array.isArray(v)?_=It.access(c,d,g.makeArray(v)):_.push(v)),_||[]},dequeue:function(c,d){var v=g.queue(c,d=d||"fx"),_=v.length,S=v.shift(),k=g._queueHooks(c,d);"inprogress"===S&&(S=v.shift(),_--),S&&("fx"===d&&v.unshift("inprogress"),delete k.stop,S.call(c,function(){g.dequeue(c,d)},k)),!_&&k&&k.empty.fire()},_queueHooks:function(c,d){var v=d+"queueHooks";return It.get(c,v)||It.access(c,v,{empty:g.Callbacks("once memory").add(function(){It.remove(c,[d+"queue",v])})})}}),g.fn.extend({queue:function(c,d){var v=2;return"string"!=typeof c&&(d=c,c="fx",v--),arguments.length<v?g.queue(this[0],c):void 0===d?this:this.each(function(){var _=g.queue(this,c,d);g._queueHooks(this,c),"fx"===c&&"inprogress"!==_[0]&&g.dequeue(this,c)})},dequeue:function(c){return this.each(function(){g.dequeue(this,c)})},clearQueue:function(c){return this.queue(c||"fx",[])},promise:function(c,d){var v,_=1,S=g.Deferred(),k=this,P=this.length,R=function(){--_||S.resolveWith(k,[k])};for("string"!=typeof c&&(d=c,c=void 0),c=c||"fx";P--;)(v=It.get(k[P],c+"queueHooks"))&&v.empty&&(_++,v.empty.add(R));return R(),S.promise(d)}});var me=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ye=new RegExp("^(?:([+-])=|)("+me+")([a-z%]*)$","i"),we=["Top","Right","Bottom","Left"],Ee=M.documentElement,ni=function(c){return g.contains(c.ownerDocument,c)},Mi={composed:!0};Ee.getRootNode&&(ni=function(c){return g.contains(c.ownerDocument,c)||c.getRootNode(Mi)===c.ownerDocument});var ze=function(c,d){return"none"===(c=d||c).style.display||""===c.style.display&&ni(c)&&"none"===g.css(c,"display")};function li(c,d,v,_){var S,k,P=20,R=_?function(){return _.cur()}:function(){return g.css(c,d,"")},Y=R(),K=v&&v[3]||(g.cssNumber[d]?"":"px"),D=c.nodeType&&(g.cssNumber[d]||"px"!==K&&+Y)&&ye.exec(g.css(c,d));if(D&&D[3]!==K){for(K=K||D[3],D=+(Y/=2)||1;P--;)g.style(c,d,D+K),(1-k)*(1-(k=R()/Y||.5))<=0&&(P=0),D/=k;g.style(c,d,(D*=2)+K),v=v||[]}return v&&(D=+D||+Y||0,S=v[1]?D+(v[1]+1)*v[2]:+v[2],_&&(_.unit=K,_.start=D,_.end=S)),S}var Si={};function Me(c,d){for(var v,_,S,k,P,R,Y,K=[],D=0,p=c.length;D<p;D++)(_=c[D]).style&&(v=_.style.display,d?("none"===v&&(K[D]=It.get(_,"display")||null,K[D]||(_.style.display="")),""===_.style.display&&ze(_)&&(K[D]=(Y=P=k=void 0,P=(S=_).ownerDocument,(Y=Si[R=S.nodeName])||(k=P.body.appendChild(P.createElement(R)),Y=g.css(k,"display"),k.parentNode.removeChild(k),"none"===Y&&(Y="block"),Si[R]=Y)))):"none"!==v&&(K[D]="none",It.set(_,"display",v)));for(D=0;D<p;D++)null!=K[D]&&(c[D].style.display=K[D]);return c}g.fn.extend({show:function(){return Me(this,!0)},hide:function(){return Me(this)},toggle:function(c){return"boolean"==typeof c?c?this.show():this.hide():this.each(function(){ze(this)?g(this).show():g(this).hide()})}});var fe,Xe,Be=/^(?:checkbox|radio)$/i,ci=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ye=/^$|^module$|\/(?:java|ecma)script/i;fe=M.createDocumentFragment().appendChild(M.createElement("div")),(Xe=M.createElement("input")).setAttribute("type","radio"),Xe.setAttribute("checked","checked"),Xe.setAttribute("name","t"),fe.appendChild(Xe),C.checkClone=fe.cloneNode(!0).cloneNode(!0).lastChild.checked,fe.innerHTML="<textarea>x</textarea>",C.noCloneChecked=!!fe.cloneNode(!0).lastChild.defaultValue,fe.innerHTML="<option></option>",C.option=!!fe.lastChild;var ce={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function O(c,d){var v;return v=typeof c.getElementsByTagName<"u"?c.getElementsByTagName(d||"*"):typeof c.querySelectorAll<"u"?c.querySelectorAll(d||"*"):[],void 0===d||d&&W(c,d)?g.merge([c],v):v}function I(c,d){for(var v=0,_=c.length;v<_;v++)It.set(c[v],"globalEval",!d||It.get(d[v],"globalEval"))}ce.tbody=ce.tfoot=ce.colgroup=ce.caption=ce.thead,ce.th=ce.td,C.option||(ce.optgroup=ce.option=[1,"<select multiple='multiple'>","</select>"]);var X=/<|&#?\w+;/;function Z(c,d,v,_,S){for(var k,P,R,Y,K,D,p=d.createDocumentFragment(),x=[],A=0,Q=c.length;A<Q;A++)if((k=c[A])||0===k)if("object"===nt(k))g.merge(x,k.nodeType?[k]:k);else if(X.test(k)){for(P=P||p.appendChild(d.createElement("div")),R=(ci.exec(k)||["",""])[1].toLowerCase(),P.innerHTML=(Y=ce[R]||ce._default)[1]+g.htmlPrefilter(k)+Y[2],D=Y[0];D--;)P=P.lastChild;g.merge(x,P.childNodes),(P=p.firstChild).textContent=""}else x.push(d.createTextNode(k));for(p.textContent="",A=0;k=x[A++];)if(_&&-1<g.inArray(k,_))S&&S.push(k);else if(K=ni(k),P=O(p.appendChild(k),"script"),K&&I(P),v)for(D=0;k=P[D++];)Ye.test(k.type||"")&&v.push(k);return p}var gt=/^([^.]*)(?:\.(.+)|)/;function pt(){return!0}function ht(){return!1}function Et(c,d){return c===function(){try{return M.activeElement}catch{}}()==("focus"===d)}function At(c,d,v,_,S,k){var P,R;if("object"==typeof d){for(R in"string"!=typeof v&&(_=_||v,v=void 0),d)At(c,R,v,_,d[R],k);return c}if(null==_&&null==S?(S=v,_=v=void 0):null==S&&("string"==typeof v?(S=_,_=void 0):(S=_,_=v,v=void 0)),!1===S)S=ht;else if(!S)return c;return 1===k&&(P=S,(S=function(Y){return g().off(Y),P.apply(this,arguments)}).guid=P.guid||(P.guid=g.guid++)),c.each(function(){g.event.add(this,d,S,_,v)})}function Rt(c,d,v){v?(It.set(c,d,!1),g.event.add(c,d,{namespace:!1,handler:function(_){var S,k,P=It.get(this,d);if(1&_.isTrigger&&this[d]){if(P.length)(g.event.special[d]||{}).delegateType&&_.stopPropagation();else if(P=t.call(arguments),It.set(this,d,P),S=v(this,d),this[d](),P!==(k=It.get(this,d))||S?It.set(this,d,!1):k={},P!==k)return _.stopImmediatePropagation(),_.preventDefault(),k&&k.value}else P.length&&(It.set(this,d,{value:g.event.trigger(g.extend(P[0],g.Event.prototype),P.slice(1),this)}),_.stopImmediatePropagation())}})):void 0===It.get(c,d)&&g.event.add(c,d,pt)}g.event={global:{},add:function(c,d,v,_,S){var k,P,R,Y,K,D,p,x,A,Q,lt,ut=It.get(c);if(Dt(c))for(v.handler&&(v=(k=v).handler,S=k.selector),S&&g.find.matchesSelector(Ee,S),v.guid||(v.guid=g.guid++),(Y=ut.events)||(Y=ut.events=Object.create(null)),(P=ut.handle)||(P=ut.handle=function(Bt){return typeof g<"u"&&g.event.triggered!==Bt.type?g.event.dispatch.apply(c,arguments):void 0}),K=(d=(d||"").match(bt)||[""]).length;K--;)A=lt=(R=gt.exec(d[K])||[])[1],Q=(R[2]||"").split(".").sort(),A&&(p=g.event.special[A]||{},p=g.event.special[A=(S?p.delegateType:p.bindType)||A]||{},D=g.extend({type:A,origType:lt,data:_,handler:v,guid:v.guid,selector:S,needsContext:S&&g.expr.match.needsContext.test(S),namespace:Q.join(".")},k),(x=Y[A])||((x=Y[A]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(c,_,Q,P)||c.addEventListener&&c.addEventListener(A,P)),p.add&&(p.add.call(c,D),D.handler.guid||(D.handler.guid=v.guid)),S?x.splice(x.delegateCount++,0,D):x.push(D),g.event.global[A]=!0)},remove:function(c,d,v,_,S){var k,P,R,Y,K,D,p,x,A,Q,lt,ut=It.hasData(c)&&It.get(c);if(ut&&(Y=ut.events)){for(K=(d=(d||"").match(bt)||[""]).length;K--;)if(A=lt=(R=gt.exec(d[K])||[])[1],Q=(R[2]||"").split(".").sort(),A){for(p=g.event.special[A]||{},x=Y[A=(_?p.delegateType:p.bindType)||A]||[],R=R[2]&&new RegExp("(^|\\.)"+Q.join("\\.(?:.*\\.|)")+"(\\.|$)"),P=k=x.length;k--;)D=x[k],!S&&lt!==D.origType||v&&v.guid!==D.guid||R&&!R.test(D.namespace)||_&&_!==D.selector&&("**"!==_||!D.selector)||(x.splice(k,1),D.selector&&x.delegateCount--,p.remove&&p.remove.call(c,D));P&&!x.length&&(p.teardown&&!1!==p.teardown.call(c,Q,ut.handle)||g.removeEvent(c,A,ut.handle),delete Y[A])}else for(A in Y)g.event.remove(c,A+d[K],v,_,!0);g.isEmptyObject(Y)&&It.remove(c,"handle events")}},dispatch:function(c){var d,v,_,S,k,P,R=new Array(arguments.length),Y=g.event.fix(c),K=(It.get(this,"events")||Object.create(null))[Y.type]||[],D=g.event.special[Y.type]||{};for(R[0]=Y,d=1;d<arguments.length;d++)R[d]=arguments[d];if(Y.delegateTarget=this,!D.preDispatch||!1!==D.preDispatch.call(this,Y)){for(P=g.event.handlers.call(this,Y,K),d=0;(S=P[d++])&&!Y.isPropagationStopped();)for(Y.currentTarget=S.elem,v=0;(k=S.handlers[v++])&&!Y.isImmediatePropagationStopped();)Y.rnamespace&&!1!==k.namespace&&!Y.rnamespace.test(k.namespace)||(Y.handleObj=k,Y.data=k.data,void 0!==(_=((g.event.special[k.origType]||{}).handle||k.handler).apply(S.elem,R))&&!1===(Y.result=_)&&(Y.preventDefault(),Y.stopPropagation()));return D.postDispatch&&D.postDispatch.call(this,Y),Y.result}},handlers:function(c,d){var v,_,S,k,P,R=[],Y=d.delegateCount,K=c.target;if(Y&&K.nodeType&&!("click"===c.type&&1<=c.button))for(;K!==this;K=K.parentNode||this)if(1===K.nodeType&&("click"!==c.type||!0!==K.disabled)){for(k=[],P={},v=0;v<Y;v++)void 0===P[S=(_=d[v]).selector+" "]&&(P[S]=_.needsContext?-1<g(S,this).index(K):g.find(S,this,null,[K]).length),P[S]&&k.push(_);k.length&&R.push({elem:K,handlers:k})}return K=this,Y<d.length&&R.push({elem:K,handlers:d.slice(Y)}),R},addProp:function(c,d){Object.defineProperty(g.Event.prototype,c,{enumerable:!0,configurable:!0,get:w(d)?function(){if(this.originalEvent)return d(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[c]},set:function(v){Object.defineProperty(this,c,{enumerable:!0,configurable:!0,writable:!0,value:v})}})},fix:function(c){return c[g.expando]?c:new g.Event(c)},special:{load:{noBubble:!0},click:{setup:function(c){var d=this||c;return Be.test(d.type)&&d.click&&W(d,"input")&&Rt(d,"click",pt),!1},trigger:function(c){var d=this||c;return Be.test(d.type)&&d.click&&W(d,"input")&&Rt(d,"click"),!0},_default:function(c){var d=c.target;return Be.test(d.type)&&d.click&&W(d,"input")&&It.get(d,"click")||W(d,"a")}},beforeunload:{postDispatch:function(c){void 0!==c.result&&c.originalEvent&&(c.originalEvent.returnValue=c.result)}}}},g.removeEvent=function(c,d,v){c.removeEventListener&&c.removeEventListener(d,v)},g.Event=function(c,d){if(!(this instanceof g.Event))return new g.Event(c,d);c&&c.type?(this.originalEvent=c,this.type=c.type,this.isDefaultPrevented=c.defaultPrevented||void 0===c.defaultPrevented&&!1===c.returnValue?pt:ht,this.target=c.target&&3===c.target.nodeType?c.target.parentNode:c.target,this.currentTarget=c.currentTarget,this.relatedTarget=c.relatedTarget):this.type=c,d&&g.extend(this,d),this.timeStamp=c&&c.timeStamp||Date.now(),this[g.expando]=!0},g.Event.prototype={constructor:g.Event,isDefaultPrevented:ht,isPropagationStopped:ht,isImmediatePropagationStopped:ht,isSimulated:!1,preventDefault:function(){var c=this.originalEvent;this.isDefaultPrevented=pt,c&&!this.isSimulated&&c.preventDefault()},stopPropagation:function(){var c=this.originalEvent;this.isPropagationStopped=pt,c&&!this.isSimulated&&c.stopPropagation()},stopImmediatePropagation:function(){var c=this.originalEvent;this.isImmediatePropagationStopped=pt,c&&!this.isSimulated&&c.stopImmediatePropagation(),this.stopPropagation()}},g.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},g.event.addProp),g.each({focus:"focusin",blur:"focusout"},function(c,d){g.event.special[c]={setup:function(){return Rt(this,c,Et),!1},trigger:function(){return Rt(this,c),!0},_default:function(){return!0},delegateType:d}}),g.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(c,d){g.event.special[c]={delegateType:d,bindType:d,handle:function(v){var _,S=v.relatedTarget,k=v.handleObj;return S&&(S===this||g.contains(this,S))||(v.type=k.origType,_=k.handler.apply(this,arguments),v.type=d),_}}}),g.fn.extend({on:function(c,d,v,_){return At(this,c,d,v,_)},one:function(c,d,v,_){return At(this,c,d,v,_,1)},off:function(c,d,v){var _,S;if(c&&c.preventDefault&&c.handleObj)return _=c.handleObj,g(c.delegateTarget).off(_.namespace?_.origType+"."+_.namespace:_.origType,_.selector,_.handler),this;if("object"==typeof c){for(S in c)this.off(S,d,c[S]);return this}return!1!==d&&"function"!=typeof d||(v=d,d=void 0),!1===v&&(v=ht),this.each(function(){g.event.remove(this,c,v,d)})}});var Yt=/<script|<style|<link/i,Mt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ht=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Kt(c,d){return W(c,"table")&&W(11!==d.nodeType?d:d.firstChild,"tr")&&g(c).children("tbody")[0]||c}function oe(c){return c.type=(null!==c.getAttribute("type"))+"/"+c.type,c}function Ve(c){return"true/"===(c.type||"").slice(0,5)?c.type=c.type.slice(5):c.removeAttribute("type"),c}function hi(c,d){var v,_,S,k,P,R;if(1===d.nodeType){if(It.hasData(c)&&(R=It.get(c).events))for(S in It.remove(d,"handle events"),R)for(v=0,_=R[S].length;v<_;v++)g.event.add(d,S,R[S][v]);Nt.hasData(c)&&(k=Nt.access(c),P=g.extend({},k),Nt.set(d,P))}}function Ze(c,d,v,_){d=e(d);var S,k,P,R,Y,K,D=0,p=c.length,x=p-1,A=d[0],Q=w(A);if(Q||1<p&&"string"==typeof A&&!C.checkClone&&Mt.test(A))return c.each(function(lt){var ut=c.eq(lt);Q&&(d[0]=A.call(this,lt,ut.html())),Ze(ut,d,v,_)});if(p&&(k=(S=Z(d,c[0].ownerDocument,!1,c,_)).firstChild,1===S.childNodes.length&&(S=k),k||_)){for(R=(P=g.map(O(S,"script"),oe)).length;D<p;D++)Y=S,D!==x&&(Y=g.clone(Y,!0,!0),R&&g.merge(P,O(Y,"script"))),v.call(c[D],Y,D);if(R)for(K=P[P.length-1].ownerDocument,g.map(P,Ve),D=0;D<R;D++)Ye.test((Y=P[D]).type||"")&&!It.access(Y,"globalEval")&&g.contains(K,Y)&&(Y.src&&"module"!==(Y.type||"").toLowerCase()?g._evalUrl&&!Y.noModule&&g._evalUrl(Y.src,{nonce:Y.nonce||Y.getAttribute("nonce")},K):H(Y.textContent.replace(Ht,""),Y,K))}return c}function Ue(c,d,v){for(var _,S=d?g.filter(d,c):c,k=0;null!=(_=S[k]);k++)v||1!==_.nodeType||g.cleanData(O(_)),_.parentNode&&(v&&ni(_)&&I(O(_,"script")),_.parentNode.removeChild(_));return c}g.extend({htmlPrefilter:function(c){return c},clone:function(c,d,v){var _,S,k,P,R,Y,K,D=c.cloneNode(!0),p=ni(c);if(!(C.noCloneChecked||1!==c.nodeType&&11!==c.nodeType||g.isXMLDoc(c)))for(P=O(D),_=0,S=(k=O(c)).length;_<S;_++)R=k[_],"input"===(K=(Y=P[_]).nodeName.toLowerCase())&&Be.test(R.type)?Y.checked=R.checked:"input"!==K&&"textarea"!==K||(Y.defaultValue=R.defaultValue);if(d)if(v)for(k=k||O(c),P=P||O(D),_=0,S=k.length;_<S;_++)hi(k[_],P[_]);else hi(c,D);return 0<(P=O(D,"script")).length&&I(P,!p&&O(c,"script")),D},cleanData:function(c){for(var d,v,_,S=g.event.special,k=0;void 0!==(v=c[k]);k++)if(Dt(v)){if(d=v[It.expando]){if(d.events)for(_ in d.events)S[_]?g.event.remove(v,_):g.removeEvent(v,_,d.handle);v[It.expando]=void 0}v[Nt.expando]&&(v[Nt.expando]=void 0)}}}),g.fn.extend({detach:function(c){return Ue(this,c,!0)},remove:function(c){return Ue(this,c)},text:function(c){return Xt(this,function(d){return void 0===d?g.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=d)})},null,c,arguments.length)},append:function(){return Ze(this,arguments,function(c){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Kt(this,c).appendChild(c)})},prepend:function(){return Ze(this,arguments,function(c){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var d=Kt(this,c);d.insertBefore(c,d.firstChild)}})},before:function(){return Ze(this,arguments,function(c){this.parentNode&&this.parentNode.insertBefore(c,this)})},after:function(){return Ze(this,arguments,function(c){this.parentNode&&this.parentNode.insertBefore(c,this.nextSibling)})},empty:function(){for(var c,d=0;null!=(c=this[d]);d++)1===c.nodeType&&(g.cleanData(O(c,!1)),c.textContent="");return this},clone:function(c,d){return c=null!=c&&c,d=d??c,this.map(function(){return g.clone(this,c,d)})},html:function(c){return Xt(this,function(d){var v=this[0]||{},_=0,S=this.length;if(void 0===d&&1===v.nodeType)return v.innerHTML;if("string"==typeof d&&!Yt.test(d)&&!ce[(ci.exec(d)||["",""])[1].toLowerCase()]){d=g.htmlPrefilter(d);try{for(;_<S;_++)1===(v=this[_]||{}).nodeType&&(g.cleanData(O(v,!1)),v.innerHTML=d);v=0}catch{}}v&&this.empty().append(d)},null,c,arguments.length)},replaceWith:function(){var c=[];return Ze(this,arguments,function(d){var v=this.parentNode;g.inArray(this,c)<0&&(g.cleanData(O(this)),v&&v.replaceChild(d,this))},c)}}),g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(c,d){g.fn[c]=function(v){for(var _,S=[],k=g(v),P=k.length-1,R=0;R<=P;R++)_=R===P?this:this.clone(!0),g(k[R])[d](_),i.apply(S,_.get());return this.pushStack(S)}});var De=new RegExp("^("+me+")(?!px)[a-z%]+$","i"),Ii=function(c){var d=c.ownerDocument.defaultView;return d&&d.opener||(d=h),d.getComputedStyle(c)},Gi=function(c,d,v){var _,S,k={};for(S in d)k[S]=c.style[S],c.style[S]=d[S];for(S in _=v.call(c),d)c.style[S]=k[S];return _},cn=new RegExp(we.join("|"),"i");function $e(c,d,v){var _,S,k,P,R=c.style;return(v=v||Ii(c))&&(""!==(P=v.getPropertyValue(d)||v[d])||ni(c)||(P=g.style(c,d)),!C.pixelBoxStyles()&&De.test(P)&&cn.test(d)&&(_=R.width,S=R.minWidth,k=R.maxWidth,R.minWidth=R.maxWidth=R.width=P,P=v.width,R.width=_,R.minWidth=S,R.maxWidth=k)),void 0!==P?P+"":P}function Ke(c,d){return{get:function(){if(!c())return(this.get=d).apply(this,arguments);delete this.get}}}!function(){function c(){if(K){Y.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",K.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ee.appendChild(Y).appendChild(K);var D=h.getComputedStyle(K);v="1%"!==D.top,R=12===d(D.marginLeft),K.style.right="60%",k=36===d(D.right),_=36===d(D.width),K.style.position="absolute",S=12===d(K.offsetWidth/3),Ee.removeChild(Y),K=null}}function d(D){return Math.round(parseFloat(D))}var v,_,S,k,P,R,Y=M.createElement("div"),K=M.createElement("div");K.style&&(K.style.backgroundClip="content-box",K.cloneNode(!0).style.backgroundClip="",C.clearCloneStyle="content-box"===K.style.backgroundClip,g.extend(C,{boxSizingReliable:function(){return c(),_},pixelBoxStyles:function(){return c(),k},pixelPosition:function(){return c(),v},reliableMarginLeft:function(){return c(),R},scrollboxSize:function(){return c(),S},reliableTrDimensions:function(){var D,p,x,A;return null==P&&(D=M.createElement("table"),p=M.createElement("tr"),x=M.createElement("div"),D.style.cssText="position:absolute;left:-11111px;border-collapse:separate",p.style.cssText="border:1px solid",p.style.height="1px",x.style.height="9px",x.style.display="block",Ee.appendChild(D).appendChild(p).appendChild(x),A=h.getComputedStyle(p),P=parseInt(A.height,10)+parseInt(A.borderTopWidth,10)+parseInt(A.borderBottomWidth,10)===p.offsetHeight,Ee.removeChild(D)),P}}))}();var Oi=["Webkit","Moz","ms"],ti=M.createElement("div").style,On={};function hn(c){return g.cssProps[c]||On[c]||(c in ti?c:On[c]=function(v){for(var _=v[0].toUpperCase()+v.slice(1),S=Oi.length;S--;)if((v=Oi[S]+_)in ti)return v}(c)||c)}var mi=/^(none|table(?!-c[ea]).+)/,Ei=/^--/,un={position:"absolute",visibility:"hidden",display:"block"},qi={letterSpacing:"0",fontWeight:"400"};function En(c,d,v){var _=ye.exec(d);return _?Math.max(0,_[2]-(v||0))+(_[3]||"px"):d}function fn(c,d,v,_,S,k){var P="width"===d?1:0,R=0,Y=0;if(v===(_?"border":"content"))return 0;for(;P<4;P+=2)"margin"===v&&(Y+=g.css(c,v+we[P],!0,S)),_?("content"===v&&(Y-=g.css(c,"padding"+we[P],!0,S)),"margin"!==v&&(Y-=g.css(c,"border"+we[P]+"Width",!0,S))):(Y+=g.css(c,"padding"+we[P],!0,S),"padding"!==v?Y+=g.css(c,"border"+we[P]+"Width",!0,S):R+=g.css(c,"border"+we[P]+"Width",!0,S));return!_&&0<=k&&(Y+=Math.max(0,Math.ceil(c["offset"+d[0].toUpperCase()+d.slice(1)]-k-Y-R-.5))||0),Y}function Fi(c,d,v){var _=Ii(c),S=(!C.boxSizingReliable()||v)&&"border-box"===g.css(c,"boxSizing",!1,_),k=S,P=$e(c,d,_),R="offset"+d[0].toUpperCase()+d.slice(1);if(De.test(P)){if(!v)return P;P="auto"}return(!C.boxSizingReliable()&&S||!C.reliableTrDimensions()&&W(c,"tr")||"auto"===P||!parseFloat(P)&&"inline"===g.css(c,"display",!1,_))&&c.getClientRects().length&&(S="border-box"===g.css(c,"boxSizing",!1,_),(k=R in c)&&(P=c[R])),(P=parseFloat(P)||0)+fn(c,d,v||(S?"border":"content"),k,_,P)+"px"}function ei(c,d,v,_,S){return new ei.prototype.init(c,d,v,_,S)}g.extend({cssHooks:{opacity:{get:function(c,d){if(d){var v=$e(c,"opacity");return""===v?"1":v}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(c,d,v,_){if(c&&3!==c.nodeType&&8!==c.nodeType&&c.style){var S,k,P,R=se(d),Y=Ei.test(d),K=c.style;if(Y||(d=hn(R)),P=g.cssHooks[d]||g.cssHooks[R],void 0===v)return P&&"get"in P&&void 0!==(S=P.get(c,!1,_))?S:K[d];"string"==(k=typeof v)&&(S=ye.exec(v))&&S[1]&&(v=li(c,d,S),k="number"),null!=v&&v==v&&("number"!==k||Y||(v+=S&&S[3]||(g.cssNumber[R]?"":"px")),C.clearCloneStyle||""!==v||0!==d.indexOf("background")||(K[d]="inherit"),P&&"set"in P&&void 0===(v=P.set(c,v,_))||(Y?K.setProperty(d,v):K[d]=v))}},css:function(c,d,v,_){var S,k,P,R=se(d);return Ei.test(d)||(d=hn(R)),(P=g.cssHooks[d]||g.cssHooks[R])&&"get"in P&&(S=P.get(c,!0,v)),void 0===S&&(S=$e(c,d,_)),"normal"===S&&d in qi&&(S=qi[d]),""===v||v?(k=parseFloat(S),!0===v||isFinite(k)?k||0:S):S}}),g.each(["height","width"],function(c,d){g.cssHooks[d]={get:function(v,_,S){if(_)return!mi.test(g.css(v,"display"))||v.getClientRects().length&&v.getBoundingClientRect().width?Fi(v,d,S):Gi(v,un,function(){return Fi(v,d,S)})},set:function(v,_,S){var k,P=Ii(v),R=!C.scrollboxSize()&&"absolute"===P.position,Y=(R||S)&&"border-box"===g.css(v,"boxSizing",!1,P),K=S?fn(v,d,S,Y,P):0;return Y&&R&&(K-=Math.ceil(v["offset"+d[0].toUpperCase()+d.slice(1)]-parseFloat(P[d])-fn(v,d,"border",!1,P)-.5)),K&&(k=ye.exec(_))&&"px"!==(k[3]||"px")&&(v.style[d]=_,_=g.css(v,d)),En(0,_,K)}}}),g.cssHooks.marginLeft=Ke(C.reliableMarginLeft,function(c,d){if(d)return(parseFloat($e(c,"marginLeft"))||c.getBoundingClientRect().left-Gi(c,{marginLeft:0},function(){return c.getBoundingClientRect().left}))+"px"}),g.each({margin:"",padding:"",border:"Width"},function(c,d){g.cssHooks[c+d]={expand:function(v){for(var _=0,S={},k="string"==typeof v?v.split(" "):[v];_<4;_++)S[c+we[_]+d]=k[_]||k[_-2]||k[0];return S}},"margin"!==c&&(g.cssHooks[c+d].set=En)}),g.fn.extend({css:function(c,d){return Xt(this,function(v,_,S){var k,P,R={},Y=0;if(Array.isArray(_)){for(k=Ii(v),P=_.length;Y<P;Y++)R[_[Y]]=g.css(v,_[Y],!1,k);return R}return void 0!==S?g.style(v,_,S):g.css(v,_)},c,d,1<arguments.length)}}),((g.Tween=ei).prototype={constructor:ei,init:function(c,d,v,_,S,k){this.elem=c,this.prop=v,this.easing=S||g.easing._default,this.options=d,this.start=this.now=this.cur(),this.end=_,this.unit=k||(g.cssNumber[v]?"":"px")},cur:function(){var c=ei.propHooks[this.prop];return c&&c.get?c.get(this):ei.propHooks._default.get(this)},run:function(c){var d,v=ei.propHooks[this.prop];return this.pos=d=this.options.duration?g.easing[this.easing](c,this.options.duration*c,0,1,this.options.duration):c,this.now=(this.end-this.start)*d+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),v&&v.set?v.set(this):ei.propHooks._default.set(this),this}}).init.prototype=ei.prototype,(ei.propHooks={_default:{get:function(c){var d;return 1!==c.elem.nodeType||null!=c.elem[c.prop]&&null==c.elem.style[c.prop]?c.elem[c.prop]:(d=g.css(c.elem,c.prop,""))&&"auto"!==d?d:0},set:function(c){g.fx.step[c.prop]?g.fx.step[c.prop](c):1!==c.elem.nodeType||!g.cssHooks[c.prop]&&null==c.elem.style[hn(c.prop)]?c.elem[c.prop]=c.now:g.style(c.elem,c.prop,c.now+c.unit)}}}).scrollTop=ei.propHooks.scrollLeft={set:function(c){c.elem.nodeType&&c.elem.parentNode&&(c.elem[c.prop]=c.now)}},g.easing={linear:function(c){return c},swing:function(c){return.5-Math.cos(c*Math.PI)/2},_default:"swing"},g.fx=ei.prototype.init,g.fx.step={};var Ni,ri,Ri,Ai,An=/^(?:toggle|show|hide)$/,Bi=/queueHooks$/;function Hi(){ri&&(!1===M.hidden&&h.requestAnimationFrame?h.requestAnimationFrame(Hi):h.setTimeout(Hi,g.fx.interval),g.fx.tick())}function dn(){return h.setTimeout(function(){Ni=void 0}),Ni=Date.now()}function ki(c,d){var v,_=0,S={height:c};for(d=d?1:0;_<4;_+=2-d)S["margin"+(v=we[_])]=S["padding"+v]=c;return d&&(S.opacity=S.width=c),S}function kn(c,d,v){for(var _,S=(si.tweeners[d]||[]).concat(si.tweeners["*"]),k=0,P=S.length;k<P;k++)if(_=S[k].call(v,d,c))return _}function si(c,d,v){var _,S,k=0,P=si.prefilters.length,R=g.Deferred().always(function(){delete Y.elem}),Y=function(){if(S)return!1;for(var p=Ni||dn(),x=Math.max(0,K.startTime+K.duration-p),A=1-(x/K.duration||0),Q=0,lt=K.tweens.length;Q<lt;Q++)K.tweens[Q].run(A);return R.notifyWith(c,[K,A,x]),A<1&&lt?x:(lt||R.notifyWith(c,[K,1,0]),R.resolveWith(c,[K]),!1)},K=R.promise({elem:c,props:g.extend({},d),opts:g.extend(!0,{specialEasing:{},easing:g.easing._default},v),originalProperties:d,originalOptions:v,startTime:Ni||dn(),duration:v.duration,tweens:[],createTween:function(p,x){var A=g.Tween(c,K.opts,p,x,K.opts.specialEasing[p]||K.opts.easing);return K.tweens.push(A),A},stop:function(p){var x=0,A=p?K.tweens.length:0;if(S)return this;for(S=!0;x<A;x++)K.tweens[x].run(1);return p?(R.notifyWith(c,[K,1,0]),R.resolveWith(c,[K,p])):R.rejectWith(c,[K,p]),this}}),D=K.props;for(function(p,x){var A,Q,lt,ut,Bt;for(A in p)if(lt=x[Q=se(A)],ut=p[A],Array.isArray(ut)&&(lt=ut[1],ut=p[A]=ut[0]),A!==Q&&(p[Q]=ut,delete p[A]),(Bt=g.cssHooks[Q])&&"expand"in Bt)for(A in ut=Bt.expand(ut),delete p[Q],ut)A in p||(p[A]=ut[A],x[A]=lt);else x[Q]=lt}(D,K.opts.specialEasing);k<P;k++)if(_=si.prefilters[k].call(K,c,D,K.opts))return w(_.stop)&&(g._queueHooks(K.elem,K.opts.queue).stop=_.stop.bind(_)),_;return g.map(D,kn,K),w(K.opts.start)&&K.opts.start.call(c,K),K.progress(K.opts.progress).done(K.opts.done,K.opts.complete).fail(K.opts.fail).always(K.opts.always),g.fx.timer(g.extend(Y,{elem:c,anim:K,queue:K.opts.queue})),K}g.Animation=g.extend(si,{tweeners:{"*":[function(c,d){var v=this.createTween(c,d);return li(v.elem,c,ye.exec(d),v),v}]},tweener:function(c,d){w(c)?(d=c,c=["*"]):c=c.match(bt);for(var v,_=0,S=c.length;_<S;_++)(si.tweeners[v=c[_]]=si.tweeners[v]||[]).unshift(d)},prefilters:[function(c,d,v){var _,S,k,P,R,Y,K,D,p="width"in d||"height"in d,x=this,A={},Q=c.style,lt=c.nodeType&&ze(c),ut=It.get(c,"fxshow");for(_ in v.queue||(null==(P=g._queueHooks(c,"fx")).unqueued&&(P.unqueued=0,R=P.empty.fire,P.empty.fire=function(){P.unqueued||R()}),P.unqueued++,x.always(function(){x.always(function(){P.unqueued--,g.queue(c,"fx").length||P.empty.fire()})})),d)if(An.test(S=d[_])){if(delete d[_],k=k||"toggle"===S,S===(lt?"hide":"show")){if("show"!==S||!ut||void 0===ut[_])continue;lt=!0}A[_]=ut&&ut[_]||g.style(c,_)}if((Y=!g.isEmptyObject(d))||!g.isEmptyObject(A))for(_ in p&&1===c.nodeType&&(v.overflow=[Q.overflow,Q.overflowX,Q.overflowY],null==(K=ut&&ut.display)&&(K=It.get(c,"display")),"none"===(D=g.css(c,"display"))&&(K?D=K:(Me([c],!0),K=c.style.display||K,D=g.css(c,"display"),Me([c]))),("inline"===D||"inline-block"===D&&null!=K)&&"none"===g.css(c,"float")&&(Y||(x.done(function(){Q.display=K}),null==K&&(K="none"===(D=Q.display)?"":D)),Q.display="inline-block")),v.overflow&&(Q.overflow="hidden",x.always(function(){Q.overflow=v.overflow[0],Q.overflowX=v.overflow[1],Q.overflowY=v.overflow[2]})),Y=!1,A)Y||(ut?"hidden"in ut&&(lt=ut.hidden):ut=It.access(c,"fxshow",{display:K}),k&&(ut.hidden=!lt),lt&&Me([c],!0),x.done(function(){for(_ in lt||Me([c]),It.remove(c,"fxshow"),A)g.style(c,_,A[_])})),Y=kn(lt?ut[_]:0,_,x),_ in ut||(ut[_]=Y.start,lt&&(Y.end=Y.start,Y.start=0))}],prefilter:function(c,d){d?si.prefilters.unshift(c):si.prefilters.push(c)}}),g.speed=function(c,d,v){var _=c&&"object"==typeof c?g.extend({},c):{complete:v||!v&&d||w(c)&&c,duration:c,easing:v&&d||d&&!w(d)&&d};return g.fx.off?_.duration=0:"number"!=typeof _.duration&&(_.duration=_.duration in g.fx.speeds?g.fx.speeds[_.duration]:g.fx.speeds._default),null!=_.queue&&!0!==_.queue||(_.queue="fx"),_.old=_.complete,_.complete=function(){w(_.old)&&_.old.call(this),_.queue&&g.dequeue(this,_.queue)},_},g.fn.extend({fadeTo:function(c,d,v,_){return this.filter(ze).css("opacity",0).show().end().animate({opacity:d},c,v,_)},animate:function(c,d,v,_){var S=g.isEmptyObject(c),k=g.speed(d,v,_),P=function(){var R=si(this,g.extend({},c),k);(S||It.get(this,"finish"))&&R.stop(!0)};return P.finish=P,S||!1===k.queue?this.each(P):this.queue(k.queue,P)},stop:function(c,d,v){var _=function(S){var k=S.stop;delete S.stop,k(v)};return"string"!=typeof c&&(v=d,d=c,c=void 0),d&&this.queue(c||"fx",[]),this.each(function(){var S=!0,k=null!=c&&c+"queueHooks",P=g.timers,R=It.get(this);if(k)R[k]&&R[k].stop&&_(R[k]);else for(k in R)R[k]&&R[k].stop&&Bi.test(k)&&_(R[k]);for(k=P.length;k--;)P[k].elem!==this||null!=c&&P[k].queue!==c||(P[k].anim.stop(v),S=!1,P.splice(k,1));!S&&v||g.dequeue(this,c)})},finish:function(c){return!1!==c&&(c=c||"fx"),this.each(function(){var d,v=It.get(this),_=v[c+"queue"],S=v[c+"queueHooks"],k=g.timers,P=_?_.length:0;for(v.finish=!0,g.queue(this,c,[]),S&&S.stop&&S.stop.call(this,!0),d=k.length;d--;)k[d].elem===this&&k[d].queue===c&&(k[d].anim.stop(!0),k.splice(d,1));for(d=0;d<P;d++)_[d]&&_[d].finish&&_[d].finish.call(this);delete v.finish})}}),g.each(["toggle","show","hide"],function(c,d){var v=g.fn[d];g.fn[d]=function(_,S,k){return null==_||"boolean"==typeof _?v.apply(this,arguments):this.animate(ki(d,!0),_,S,k)}}),g.each({slideDown:ki("show"),slideUp:ki("hide"),slideToggle:ki("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(c,d){g.fn[c]=function(v,_,S){return this.animate(d,v,_,S)}}),g.timers=[],g.fx.tick=function(){var c,d=0,v=g.timers;for(Ni=Date.now();d<v.length;d++)(c=v[d])()||v[d]!==c||v.splice(d--,1);v.length||g.fx.stop(),Ni=void 0},g.fx.timer=function(c){g.timers.push(c),g.fx.start()},g.fx.interval=13,g.fx.start=function(){ri||(ri=!0,Hi())},g.fx.stop=function(){ri=null},g.fx.speeds={slow:600,fast:200,_default:400},g.fn.delay=function(c,d){return c=g.fx&&g.fx.speeds[c]||c,this.queue(d=d||"fx",function(v,_){var S=h.setTimeout(v,c);_.stop=function(){h.clearTimeout(S)}})},Ri=M.createElement("input"),Ai=M.createElement("select").appendChild(M.createElement("option")),Ri.type="checkbox",C.checkOn=""!==Ri.value,C.optSelected=Ai.selected,(Ri=M.createElement("input")).value="t",Ri.type="radio",C.radioValue="t"===Ri.value;var Dn,xi=g.expr.attrHandle;g.fn.extend({attr:function(c,d){return Xt(this,g.attr,c,d,1<arguments.length)},removeAttr:function(c){return this.each(function(){g.removeAttr(this,c)})}}),g.extend({attr:function(c,d,v){var _,S,k=c.nodeType;if(3!==k&&8!==k&&2!==k)return typeof c.getAttribute>"u"?g.prop(c,d,v):(1===k&&g.isXMLDoc(c)||(S=g.attrHooks[d.toLowerCase()]||(g.expr.match.bool.test(d)?Dn:void 0)),void 0!==v?null===v?void g.removeAttr(c,d):S&&"set"in S&&void 0!==(_=S.set(c,v,d))?_:(c.setAttribute(d,v+""),v):S&&"get"in S&&null!==(_=S.get(c,d))?_:null==(_=g.find.attr(c,d))?void 0:_)},attrHooks:{type:{set:function(c,d){if(!C.radioValue&&"radio"===d&&W(c,"input")){var v=c.value;return c.setAttribute("type",d),v&&(c.value=v),d}}}},removeAttr:function(c,d){var v,_=0,S=d&&d.match(bt);if(S&&1===c.nodeType)for(;v=S[_++];)c.removeAttribute(v)}}),Dn={set:function(c,d,v){return!1===d?g.removeAttr(c,v):c.setAttribute(v,v),v}},g.each(g.expr.match.bool.source.match(/\w+/g),function(c,d){var v=xi[d]||g.find.attr;xi[d]=function(_,S,k){var P,R,Y=S.toLowerCase();return k||(R=xi[Y],xi[Y]=P,P=null!=v(_,S,k)?Y:null,xi[Y]=R),P}});var sr=/^(?:input|select|textarea|button)$/i,wi=/^(?:a|area)$/i;function Di(c){return(c.match(bt)||[]).join(" ")}function Ci(c){return c.getAttribute&&c.getAttribute("class")||""}function pn(c){return Array.isArray(c)?c:"string"==typeof c&&c.match(bt)||[]}g.fn.extend({prop:function(c,d){return Xt(this,g.prop,c,d,1<arguments.length)},removeProp:function(c){return this.each(function(){delete this[g.propFix[c]||c]})}}),g.extend({prop:function(c,d,v){var _,S,k=c.nodeType;if(3!==k&&8!==k&&2!==k)return 1===k&&g.isXMLDoc(c)||(S=g.propHooks[d=g.propFix[d]||d]),void 0!==v?S&&"set"in S&&void 0!==(_=S.set(c,v,d))?_:c[d]=v:S&&"get"in S&&null!==(_=S.get(c,d))?_:c[d]},propHooks:{tabIndex:{get:function(c){var d=g.find.attr(c,"tabindex");return d?parseInt(d,10):sr.test(c.nodeName)||wi.test(c.nodeName)&&c.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),C.optSelected||(g.propHooks.selected={get:function(c){return null},set:function(c){}}),g.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){g.propFix[this.toLowerCase()]=this}),g.fn.extend({addClass:function(c){var d,v,_,S,k,P,R,Y=0;if(w(c))return this.each(function(K){g(this).addClass(c.call(this,K,Ci(this)))});if((d=pn(c)).length)for(;v=this[Y++];)if(S=Ci(v),_=1===v.nodeType&&" "+Di(S)+" "){for(P=0;k=d[P++];)_.indexOf(" "+k+" ")<0&&(_+=k+" ");S!==(R=Di(_))&&v.setAttribute("class",R)}return this},removeClass:function(c){var d,v,_,S,k,P,R,Y=0;if(w(c))return this.each(function(K){g(this).removeClass(c.call(this,K,Ci(this)))});if(!arguments.length)return this.attr("class","");if((d=pn(c)).length)for(;v=this[Y++];)if(S=Ci(v),_=1===v.nodeType&&" "+Di(S)+" "){for(P=0;k=d[P++];)for(;-1<_.indexOf(" "+k+" ");)_=_.replace(" "+k+" "," ");S!==(R=Di(_))&&v.setAttribute("class",R)}return this},toggleClass:function(c,d){var v=typeof c,_="string"===v||Array.isArray(c);return"boolean"==typeof d&&_?d?this.addClass(c):this.removeClass(c):w(c)?this.each(function(S){g(this).toggleClass(c.call(this,S,Ci(this),d),d)}):this.each(function(){var S,k,P,R;if(_)for(k=0,P=g(this),R=pn(c);S=R[k++];)P.hasClass(S)?P.removeClass(S):P.addClass(S);else void 0!==c&&"boolean"!==v||((S=Ci(this))&&It.set(this,"__className__",S),this.setAttribute&&this.setAttribute("class",S||!1===c?"":It.get(this,"__className__")||""))})},hasClass:function(c){var d,v,_=0;for(d=" "+c+" ";v=this[_++];)if(1===v.nodeType&&-1<(" "+Di(Ci(v))+" ").indexOf(d))return!0;return!1}});var or=/\r/g;g.fn.extend({val:function(c){var d,v,_,S=this[0];return arguments.length?(_=w(c),this.each(function(k){var P;1===this.nodeType&&(null==(P=_?c.call(this,k,g(this).val()):c)?P="":"number"==typeof P?P+="":Array.isArray(P)&&(P=g.map(P,function(R){return null==R?"":R+""})),(d=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()])&&"set"in d&&void 0!==d.set(this,P,"value")||(this.value=P))})):S?(d=g.valHooks[S.type]||g.valHooks[S.nodeName.toLowerCase()])&&"get"in d&&void 0!==(v=d.get(S,"value"))?v:"string"==typeof(v=S.value)?v.replace(or,""):v??"":void 0}}),g.extend({valHooks:{option:{get:function(c){return g.find.attr(c,"value")??Di(g.text(c))}},select:{get:function(c){var d,v,_,S=c.options,k=c.selectedIndex,P="select-one"===c.type,R=P?null:[],Y=P?k+1:S.length;for(_=k<0?Y:P?k:0;_<Y;_++)if(((v=S[_]).selected||_===k)&&!v.disabled&&(!v.parentNode.disabled||!W(v.parentNode,"optgroup"))){if(d=g(v).val(),P)return d;R.push(d)}return R},set:function(c,d){for(var v,_,S=c.options,k=g.makeArray(d),P=S.length;P--;)((_=S[P]).selected=-1<g.inArray(g.valHooks.option.get(_),k))&&(v=!0);return v||(c.selectedIndex=-1),k}}}}),g.each(["radio","checkbox"],function(){g.valHooks[this]={set:function(c,d){if(Array.isArray(d))return c.checked=-1<g.inArray(g(c).val(),d)}},C.checkOn||(g.valHooks[this].get=function(c){return null===c.getAttribute("value")?"on":c.value})}),C.focusin="onfocusin"in h;var nn=/^(?:focusinfocus|focusoutblur)$/,Gn=function(c){c.stopPropagation()};g.extend(g.event,{trigger:function(c,d,v,_){var S,k,P,R,Y,K,D,p,x=[v||M],A=f.call(c,"type")?c.type:c,Q=f.call(c,"namespace")?c.namespace.split("."):[];if(k=p=P=v=v||M,3!==v.nodeType&&8!==v.nodeType&&!nn.test(A+g.event.triggered)&&(-1<A.indexOf(".")&&(A=(Q=A.split(".")).shift(),Q.sort()),Y=A.indexOf(":")<0&&"on"+A,(c=c[g.expando]?c:new g.Event(A,"object"==typeof c&&c)).isTrigger=_?2:3,c.namespace=Q.join("."),c.rnamespace=c.namespace?new RegExp("(^|\\.)"+Q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=void 0,c.target||(c.target=v),d=null==d?[c]:g.makeArray(d,[c]),D=g.event.special[A]||{},_||!D.trigger||!1!==D.trigger.apply(v,d))){if(!_&&!D.noBubble&&!E(v)){for(nn.test((R=D.delegateType||A)+A)||(k=k.parentNode);k;k=k.parentNode)x.push(k),P=k;P===(v.ownerDocument||M)&&x.push(P.defaultView||P.parentWindow||h)}for(S=0;(k=x[S++])&&!c.isPropagationStopped();)p=k,c.type=1<S?R:D.bindType||A,(K=(It.get(k,"events")||Object.create(null))[c.type]&&It.get(k,"handle"))&&K.apply(k,d),(K=Y&&k[Y])&&K.apply&&Dt(k)&&(c.result=K.apply(k,d),!1===c.result&&c.preventDefault());return c.type=A,_||c.isDefaultPrevented()||D._default&&!1!==D._default.apply(x.pop(),d)||!Dt(v)||Y&&w(v[A])&&!E(v)&&((P=v[Y])&&(v[Y]=null),g.event.triggered=A,c.isPropagationStopped()&&p.addEventListener(A,Gn),v[A](),c.isPropagationStopped()&&p.removeEventListener(A,Gn),g.event.triggered=void 0,P&&(v[Y]=P)),c.result}},simulate:function(c,d,v){var _=g.extend(new g.Event,v,{type:c,isSimulated:!0});g.event.trigger(_,null,d)}}),g.fn.extend({trigger:function(c,d){return this.each(function(){g.event.trigger(c,d,this)})},triggerHandler:function(c,d){var v=this[0];if(v)return g.event.trigger(c,d,v,!0)}}),C.focusin||g.each({focus:"focusin",blur:"focusout"},function(c,d){var v=function(_){g.event.simulate(d,_.target,g.event.fix(_))};g.event.special[d]={setup:function(){var _=this.ownerDocument||this.document||this,S=It.access(_,d);S||_.addEventListener(c,v,!0),It.access(_,d,(S||0)+1)},teardown:function(){var _=this.ownerDocument||this.document||this,S=It.access(_,d)-1;S?It.access(_,d,S):(_.removeEventListener(c,v,!0),It.remove(_,d))}}});var rn=h.location,Pn={guid:Date.now()},gn=/\?/;g.parseXML=function(c){var d,v;if(!c||"string"!=typeof c)return null;try{d=(new h.DOMParser).parseFromString(c,"text/xml")}catch{}return v=d&&d.getElementsByTagName("parsererror")[0],d&&!v||g.error("Invalid XML: "+(v?g.map(v.childNodes,function(_){return _.textContent}).join("\n"):c)),d};var Rn=/\[\]$/,mn=/\r?\n/g,Wi=/^(?:submit|button|image|reset|file)$/i,jn=/^(?:input|select|textarea|keygen)/i;function vn(c,d,v,_){var S;if(Array.isArray(d))g.each(d,function(k,P){v||Rn.test(c)?_(c,P):vn(c+"["+("object"==typeof P&&null!=P?k:"")+"]",P,v,_)});else if(v||"object"!==nt(d))_(c,d);else for(S in d)vn(c+"["+S+"]",d[S],v,_)}g.param=function(c,d){var v,_=[],S=function(k,P){var R=w(P)?P():P;_[_.length]=encodeURIComponent(k)+"="+encodeURIComponent(R??"")};if(null==c)return"";if(Array.isArray(c)||c.jquery&&!g.isPlainObject(c))g.each(c,function(){S(this.name,this.value)});else for(v in c)vn(v,c[v],d,S);return _.join("&")},g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var c=g.prop(this,"elements");return c?g.makeArray(c):this}).filter(function(){var c=this.type;return this.name&&!g(this).is(":disabled")&&jn.test(this.nodeName)&&!Wi.test(c)&&(this.checked||!Be.test(c))}).map(function(c,d){var v=g(this).val();return null==v?null:Array.isArray(v)?g.map(v,function(_){return{name:d.name,value:_.replace(mn,"\r\n")}}):{name:d.name,value:v.replace(mn,"\r\n")}}).get()}});var _n=/%20/g,$i=/#.*$/,ar=/([?&])_=[^&]*/,qn=/^(.*?):[ \t]*([^\r\n]*)$/gm,$n=/^(?:GET|HEAD)$/,zi=/^\/\//,Bn={},Ln={},Ki="*/".concat("*"),yn=M.createElement("a");function sn(c){return function(d,v){"string"!=typeof d&&(v=d,d="*");var _,S=0,k=d.toLowerCase().match(bt)||[];if(w(v))for(;_=k[S++];)"+"===_[0]?(_=_.slice(1)||"*",(c[_]=c[_]||[]).unshift(v)):(c[_]=c[_]||[]).push(v)}}function Hn(c,d,v,_){var S={},k=c===Ln;function P(R){var Y;return S[R]=!0,g.each(c[R]||[],function(K,D){var p=D(d,v,_);return"string"!=typeof p||k||S[p]?k?!(Y=p):void 0:(d.dataTypes.unshift(p),P(p),!1)}),Y}return P(d.dataTypes[0])||!S["*"]&&P("*")}function Mn(c,d){var v,_,S=g.ajaxSettings.flatOptions||{};for(v in d)void 0!==d[v]&&((S[v]?c:_||(_={}))[v]=d[v]);return _&&g.extend(!0,c,_),c}yn.href=rn.href,g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:rn.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(rn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ki,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":g.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(c,d){return d?Mn(Mn(c,g.ajaxSettings),d):Mn(g.ajaxSettings,c)},ajaxPrefilter:sn(Bn),ajaxTransport:sn(Ln),ajax:function(c,d){"object"==typeof c&&(d=c,c=void 0);var v,_,S,k,P,R,Y,K,D,p,x=g.ajaxSetup({},d=d||{}),A=x.context||x,Q=x.context&&(A.nodeType||A.jquery)?g(A):g.event,lt=g.Deferred(),ut=g.Callbacks("once memory"),Bt=x.statusCode||{},Gt={},ge={},Qt="canceled",Wt={readyState:0,getResponseHeader:function(Jt){var pe;if(Y){if(!k)for(k={};pe=qn.exec(S);)k[pe[1].toLowerCase()+" "]=(k[pe[1].toLowerCase()+" "]||[]).concat(pe[2]);pe=k[Jt.toLowerCase()+" "]}return null==pe?null:pe.join(", ")},getAllResponseHeaders:function(){return Y?S:null},setRequestHeader:function(Jt,pe){return null==Y&&(Jt=ge[Jt.toLowerCase()]=ge[Jt.toLowerCase()]||Jt,Gt[Jt]=pe),this},overrideMimeType:function(Jt){return null==Y&&(x.mimeType=Jt),this},statusCode:function(Jt){var pe;if(Jt)if(Y)Wt.always(Jt[Wt.status]);else for(pe in Jt)Bt[pe]=[Bt[pe],Jt[pe]];return this},abort:function(Jt){var pe=Jt||Qt;return v&&v.abort(pe),Pe(0,pe),this}};if(lt.promise(Wt),x.url=((c||x.url||rn.href)+"").replace(zi,rn.protocol+"//"),x.type=d.method||d.type||x.method||x.type,x.dataTypes=(x.dataType||"*").toLowerCase().match(bt)||[""],null==x.crossDomain){R=M.createElement("a");try{R.href=x.url,R.href=R.href,x.crossDomain=yn.protocol+"//"+yn.host!=R.protocol+"//"+R.host}catch{x.crossDomain=!0}}if(x.data&&x.processData&&"string"!=typeof x.data&&(x.data=g.param(x.data,x.traditional)),Hn(Bn,x,d,Wt),Y)return Wt;for(D in(K=g.event&&x.global)&&0==g.active++&&g.event.trigger("ajaxStart"),x.type=x.type.toUpperCase(),x.hasContent=!$n.test(x.type),_=x.url.replace($i,""),x.hasContent?x.data&&x.processData&&0===(x.contentType||"").indexOf("application/x-www-form-urlencoded")&&(x.data=x.data.replace(_n,"+")):(p=x.url.slice(_.length),x.data&&(x.processData||"string"==typeof x.data)&&(_+=(gn.test(_)?"&":"?")+x.data,delete x.data),!1===x.cache&&(_=_.replace(ar,"$1"),p=(gn.test(_)?"&":"?")+"_="+Pn.guid+++p),x.url=_+p),x.ifModified&&(g.lastModified[_]&&Wt.setRequestHeader("If-Modified-Since",g.lastModified[_]),g.etag[_]&&Wt.setRequestHeader("If-None-Match",g.etag[_])),(x.data&&x.hasContent&&!1!==x.contentType||d.contentType)&&Wt.setRequestHeader("Content-Type",x.contentType),Wt.setRequestHeader("Accept",x.dataTypes[0]&&x.accepts[x.dataTypes[0]]?x.accepts[x.dataTypes[0]]+("*"!==x.dataTypes[0]?", "+Ki+"; q=0.01":""):x.accepts["*"]),x.headers)Wt.setRequestHeader(D,x.headers[D]);if(x.beforeSend&&(!1===x.beforeSend.call(A,Wt,x)||Y))return Wt.abort();if(Qt="abort",ut.add(x.complete),Wt.done(x.success),Wt.fail(x.error),v=Hn(Ln,x,d,Wt)){if(Wt.readyState=1,K&&Q.trigger("ajaxSend",[Wt,x]),Y)return Wt;x.async&&0<x.timeout&&(P=h.setTimeout(function(){Wt.abort("timeout")},x.timeout));try{Y=!1,v.send(Gt,Pe)}catch(Jt){if(Y)throw Jt;Pe(-1,Jt)}}else Pe(-1,"No Transport");function Pe(Jt,pe,Ge,Pi){var He,Qi,fi,Qe,wn,vi=pe;Y||(Y=!0,P&&h.clearTimeout(P),v=void 0,S=Pi||"",Wt.readyState=0<Jt?4:0,He=200<=Jt&&Jt<300||304===Jt,Ge&&(Qe=function(je,di,oi){for(var Xi,Zt,le,Fe,pi=je.contents,Ie=je.dataTypes;"*"===Ie[0];)Ie.shift(),void 0===Xi&&(Xi=je.mimeType||di.getResponseHeader("Content-Type"));if(Xi)for(Zt in pi)if(pi[Zt]&&pi[Zt].test(Xi)){Ie.unshift(Zt);break}if(Ie[0]in oi)le=Ie[0];else{for(Zt in oi){if(!Ie[0]||je.converters[Zt+" "+Ie[0]]){le=Zt;break}Fe||(Fe=Zt)}le=le||Fe}if(le)return le!==Ie[0]&&Ie.unshift(le),oi[le]}(x,Wt,Ge)),!He&&-1<g.inArray("script",x.dataTypes)&&g.inArray("json",x.dataTypes)<0&&(x.converters["text script"]=function(){}),Qe=function(je,di,oi,Xi){var Zt,le,Fe,pi,Ie,gi={},Cn=je.dataTypes.slice();if(Cn[1])for(Fe in je.converters)gi[Fe.toLowerCase()]=je.converters[Fe];for(le=Cn.shift();le;)if(je.responseFields[le]&&(oi[je.responseFields[le]]=di),!Ie&&Xi&&je.dataFilter&&(di=je.dataFilter(di,je.dataType)),Ie=le,le=Cn.shift())if("*"===le)le=Ie;else if("*"!==Ie&&Ie!==le){if(!(Fe=gi[Ie+" "+le]||gi["* "+le]))for(Zt in gi)if((pi=Zt.split(" "))[1]===le&&(Fe=gi[Ie+" "+pi[0]]||gi["* "+pi[0]])){!0===Fe?Fe=gi[Zt]:!0!==gi[Zt]&&(le=pi[0],Cn.unshift(pi[1]));break}if(!0!==Fe)if(Fe&&je.throws)di=Fe(di);else try{di=Fe(di)}catch(Xn){return{state:"parsererror",error:Fe?Xn:"No conversion from "+Ie+" to "+le}}}return{state:"success",data:di}}(x,Qe,Wt,He),He?(x.ifModified&&((wn=Wt.getResponseHeader("Last-Modified"))&&(g.lastModified[_]=wn),(wn=Wt.getResponseHeader("etag"))&&(g.etag[_]=wn)),204===Jt||"HEAD"===x.type?vi="nocontent":304===Jt?vi="notmodified":(vi=Qe.state,Qi=Qe.data,He=!(fi=Qe.error))):(fi=vi,!Jt&&vi||(vi="error",Jt<0&&(Jt=0))),Wt.status=Jt,Wt.statusText=(pe||vi)+"",He?lt.resolveWith(A,[Qi,vi,Wt]):lt.rejectWith(A,[Wt,vi,fi]),Wt.statusCode(Bt),Bt=void 0,K&&Q.trigger(He?"ajaxSuccess":"ajaxError",[Wt,x,He?Qi:fi]),ut.fireWith(A,[Wt,vi]),K&&(Q.trigger("ajaxComplete",[Wt,x]),--g.active||g.event.trigger("ajaxStop")))}return Wt},getJSON:function(c,d,v){return g.get(c,d,v,"json")},getScript:function(c,d){return g.get(c,void 0,d,"script")}}),g.each(["get","post"],function(c,d){g[d]=function(v,_,S,k){return w(_)&&(k=k||S,S=_,_=void 0),g.ajax(g.extend({url:v,type:d,dataType:k,data:_,success:S},g.isPlainObject(v)&&v))}}),g.ajaxPrefilter(function(c){var d;for(d in c.headers)"content-type"===d.toLowerCase()&&(c.contentType=c.headers[d]||"")}),g._evalUrl=function(c,d,v){return g.ajax({url:c,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(_){g.globalEval(_,d,v)}})},g.fn.extend({wrapAll:function(c){var d;return this[0]&&(w(c)&&(c=c.call(this[0])),d=g(c,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&d.insertBefore(this[0]),d.map(function(){for(var v=this;v.firstElementChild;)v=v.firstElementChild;return v}).append(this)),this},wrapInner:function(c){return w(c)?this.each(function(d){g(this).wrapInner(c.call(this,d))}):this.each(function(){var d=g(this),v=d.contents();v.length?v.wrapAll(c):d.append(c)})},wrap:function(c){var d=w(c);return this.each(function(v){g(this).wrapAll(d?c.call(this,v):c)})},unwrap:function(c){return this.parent(c).not("body").each(function(){g(this).replaceWith(this.childNodes)}),this}}),g.expr.pseudos.hidden=function(c){return!g.expr.pseudos.visible(c)},g.expr.pseudos.visible=function(c){return!!(c.offsetWidth||c.offsetHeight||c.getClientRects().length)},g.ajaxSettings.xhr=function(){try{return new h.XMLHttpRequest}catch{}};var Kn={0:200,1223:204},ui=g.ajaxSettings.xhr();C.cors=!!ui&&"withCredentials"in ui,C.ajax=ui=!!ui,g.ajaxTransport(function(c){var d,v;if(C.cors||ui&&!c.crossDomain)return{send:function(_,S){var k,P=c.xhr();if(P.open(c.type,c.url,c.async,c.username,c.password),c.xhrFields)for(k in c.xhrFields)P[k]=c.xhrFields[k];for(k in c.mimeType&&P.overrideMimeType&&P.overrideMimeType(c.mimeType),c.crossDomain||_["X-Requested-With"]||(_["X-Requested-With"]="XMLHttpRequest"),_)P.setRequestHeader(k,_[k]);d=function(R){return function(){d&&(d=v=P.onload=P.onerror=P.onabort=P.ontimeout=P.onreadystatechange=null,"abort"===R?P.abort():"error"===R?"number"!=typeof P.status?S(0,"error"):S(P.status,P.statusText):S(Kn[P.status]||P.status,P.statusText,"text"!==(P.responseType||"text")||"string"!=typeof P.responseText?{binary:P.response}:{text:P.responseText},P.getAllResponseHeaders()))}},P.onload=d(),v=P.onerror=P.ontimeout=d("error"),void 0!==P.onabort?P.onabort=v:P.onreadystatechange=function(){4===P.readyState&&h.setTimeout(function(){d&&v()})},d=d("abort");try{P.send(c.hasContent&&c.data||null)}catch(R){if(d)throw R}},abort:function(){d&&d()}}}),g.ajaxPrefilter(function(c){c.crossDomain&&(c.contents.script=!1)}),g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(c){return g.globalEval(c),c}}}),g.ajaxPrefilter("script",function(c){void 0===c.cache&&(c.cache=!1),c.crossDomain&&(c.type="GET")}),g.ajaxTransport("script",function(c){var d,v;if(c.crossDomain||c.scriptAttrs)return{send:function(_,S){d=g("<script>").attr(c.scriptAttrs||{}).prop({charset:c.scriptCharset,src:c.url}).on("load error",v=function(k){d.remove(),v=null,k&&S("error"===k.type?404:200,k.type)}),M.head.appendChild(d[0])},abort:function(){v&&v()}}});var Qn,Wn=[],bn=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var c=Wn.pop()||g.expando+"_"+Pn.guid++;return this[c]=!0,c}}),g.ajaxPrefilter("json jsonp",function(c,d,v){var _,S,k,P=!1!==c.jsonp&&(bn.test(c.url)?"url":"string"==typeof c.data&&0===(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&bn.test(c.data)&&"data");if(P||"jsonp"===c.dataTypes[0])return _=c.jsonpCallback=w(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,P?c[P]=c[P].replace(bn,"$1"+_):!1!==c.jsonp&&(c.url+=(gn.test(c.url)?"&":"?")+c.jsonp+"="+_),c.converters["script json"]=function(){return k||g.error(_+" was not called"),k[0]},c.dataTypes[0]="json",S=h[_],h[_]=function(){k=arguments},v.always(function(){void 0===S?g(h).removeProp(_):h[_]=S,c[_]&&(c.jsonpCallback=d.jsonpCallback,Wn.push(_)),k&&w(S)&&S(k[0]),k=S=void 0}),"script"}),C.createHTMLDocument=((Qn=M.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Qn.childNodes.length),g.parseHTML=function(c,d,v){return"string"!=typeof c?[]:("boolean"==typeof d&&(v=d,d=!1),d||(C.createHTMLDocument?((_=(d=M.implementation.createHTMLDocument("")).createElement("base")).href=M.location.href,d.head.appendChild(_)):d=M),k=!v&&[],(S=z.exec(c))?[d.createElement(S[1])]:(S=Z([c],d,k),k&&k.length&&g(k).remove(),g.merge([],S.childNodes)));var _,S,k},g.fn.load=function(c,d,v){var _,S,k,P=this,R=c.indexOf(" ");return-1<R&&(_=Di(c.slice(R)),c=c.slice(0,R)),w(d)?(v=d,d=void 0):d&&"object"==typeof d&&(S="POST"),0<P.length&&g.ajax({url:c,type:S||"GET",dataType:"html",data:d}).done(function(Y){k=arguments,P.html(_?g("<div>").append(g.parseHTML(Y)).find(_):Y)}).always(v&&function(Y,K){P.each(function(){v.apply(this,k||[Y.responseText,K,Y])})}),this},g.expr.pseudos.animated=function(c){return g.grep(g.timers,function(d){return c===d.elem}).length},g.offset={setOffset:function(c,d,v){var _,S,k,P,R,Y,K=g.css(c,"position"),D=g(c),p={};"static"===K&&(c.style.position="relative"),R=D.offset(),k=g.css(c,"top"),Y=g.css(c,"left"),("absolute"===K||"fixed"===K)&&-1<(k+Y).indexOf("auto")?(P=(_=D.position()).top,S=_.left):(P=parseFloat(k)||0,S=parseFloat(Y)||0),w(d)&&(d=d.call(c,v,g.extend({},R))),null!=d.top&&(p.top=d.top-R.top+P),null!=d.left&&(p.left=d.left-R.left+S),"using"in d?d.using.call(c,p):D.css(p)}},g.fn.extend({offset:function(c){if(arguments.length)return void 0===c?this:this.each(function(S){g.offset.setOffset(this,c,S)});var d,v,_=this[0];return _?_.getClientRects().length?{top:(d=_.getBoundingClientRect()).top+(v=_.ownerDocument.defaultView).pageYOffset,left:d.left+v.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var c,d,v,_=this[0],S={top:0,left:0};if("fixed"===g.css(_,"position"))d=_.getBoundingClientRect();else{for(d=this.offset(),v=_.ownerDocument,c=_.offsetParent||v.documentElement;c&&(c===v.body||c===v.documentElement)&&"static"===g.css(c,"position");)c=c.parentNode;c&&c!==_&&1===c.nodeType&&((S=g(c).offset()).top+=g.css(c,"borderTopWidth",!0),S.left+=g.css(c,"borderLeftWidth",!0))}return{top:d.top-S.top-g.css(_,"marginTop",!0),left:d.left-S.left-g.css(_,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var c=this.offsetParent;c&&"static"===g.css(c,"position");)c=c.offsetParent;return c||Ee})}}),g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(c,d){var v="pageYOffset"===d;g.fn[c]=function(_){return Xt(this,function(S,k,P){var R;if(E(S)?R=S:9===S.nodeType&&(R=S.defaultView),void 0===P)return R?R[d]:S[k];R?R.scrollTo(v?R.pageXOffset:P,v?P:R.pageYOffset):S[k]=P},c,_,arguments.length)}}),g.each(["top","left"],function(c,d){g.cssHooks[d]=Ke(C.pixelPosition,function(v,_){if(_)return _=$e(v,d),De.test(_)?g(v).position()[d]+"px":_})}),g.each({Height:"height",Width:"width"},function(c,d){g.each({padding:"inner"+c,content:d,"":"outer"+c},function(v,_){g.fn[_]=function(S,k){var P=arguments.length&&(v||"boolean"!=typeof S),R=v||(!0===S||!0===k?"margin":"border");return Xt(this,function(Y,K,D){var p;return E(Y)?0===_.indexOf("outer")?Y["inner"+c]:Y.document.documentElement["client"+c]:9===Y.nodeType?(p=Y.documentElement,Math.max(Y.body["scroll"+c],p["scroll"+c],Y.body["offset"+c],p["offset"+c],p["client"+c])):void 0===D?g.css(Y,K,R):g.style(Y,K,D,R)},d,P?S:void 0,P)}})}),g.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(c,d){g.fn[d]=function(v){return this.on(d,v)}}),g.fn.extend({bind:function(c,d,v){return this.on(c,null,d,v)},unbind:function(c,d){return this.off(c,null,d)},delegate:function(c,d,v,_){return this.on(d,c,v,_)},undelegate:function(c,d,v){return 1===arguments.length?this.off(c,"**"):this.off(d,c||"**",v)},hover:function(c,d){return this.mouseenter(c).mouseleave(d||c)}}),g.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(c,d){g.fn[d]=function(v,_){return 0<arguments.length?this.on(d,null,v,_):this.trigger(d)}});var zn=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;g.proxy=function(c,d){var v,_,S;if("string"==typeof d&&(v=c[d],d=c,c=v),w(c))return _=t.call(arguments,2),(S=function(){return c.apply(d||this,_.concat(t.call(arguments)))}).guid=c.guid=c.guid||g.guid++,S},g.holdReady=function(c){c?g.readyWait++:g.ready(!0)},g.isArray=Array.isArray,g.parseJSON=JSON.parse,g.nodeName=W,g.isFunction=w,g.isWindow=E,g.camelCase=se,g.type=nt,g.now=Date.now,g.isNumeric=function(c){var d=g.type(c);return("number"===d||"string"===d)&&!isNaN(c-parseFloat(c))},g.trim=function(c){return null==c?"":(c+"").replace(zn,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return g});var xn=h.jQuery,Jn=h.$;return g.noConflict=function(c){return h.$===g&&(h.$=Jn),c&&h.jQuery===g&&(h.jQuery=xn),g},typeof n>"u"&&(h.jQuery=h.$=g),g}),function(h,n){"object"==typeof exports&&typeof module<"u"?module.exports=n():"function"==typeof define&&define.amd?define(n):h.Popper=n()}(this,function(){"use strict";function h(O){return O&&"[object Function]"==={}.toString.call(O)}function n(O,I){if(1!==O.nodeType)return[];var Z=O.ownerDocument.defaultView.getComputedStyle(O,null);return I?Z[I]:Z}function a(O){return"HTML"===O.nodeName?O:O.parentNode||O.host}function l(O){if(!O)return document.body;switch(O.nodeName){case"HTML":case"BODY":return O.ownerDocument.body;case"#document":return O.body}var I=n(O);return/(auto|scroll|overlay)/.test(I.overflow+I.overflowY+I.overflowX)?O:l(a(O))}function t(O){return O&&O.referenceNode?O.referenceNode:O}function e(O){return 11===O?Mi:10===O?ze:Mi||ze}function i(O){if(!O)return document.documentElement;for(var I=e(10)?document.body:null,X=O.offsetParent||null;X===I&&O.nextElementSibling;)X=(O=O.nextElementSibling).offsetParent;var Z=X&&X.nodeName;return Z&&"BODY"!==Z&&"HTML"!==Z?-1!==["TH","TD","TABLE"].indexOf(X.nodeName)&&"static"===n(X,"position")?i(X):X:O?O.ownerDocument.documentElement:document.documentElement}function r(O){return null===O.parentNode?O:r(O.parentNode)}function o(O,I){if(!(O&&O.nodeType&&I&&I.nodeType))return document.documentElement;var X=O.compareDocumentPosition(I)&Node.DOCUMENT_POSITION_FOLLOWING,Z=X?O:I,gt=X?I:O,pt=document.createRange();pt.setStart(Z,0),pt.setEnd(gt,0);var ht=pt.commonAncestorContainer;if(O!==ht&&I!==ht||Z.contains(gt))return function s(O){var I=O.nodeName;return"BODY"!==I&&("HTML"===I||i(O.firstElementChild)===O)}(ht)?ht:i(ht);var Et=r(O);return Et.host?o(Et.host,I):o(O,r(I).host)}function f(O){var X="top"===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",Z=O.nodeName;return"BODY"===Z||"HTML"===Z?(O.ownerDocument.scrollingElement||O.ownerDocument.documentElement)[X]:O[X]}function y(O,I){var X="x"===I?"Left":"Top",Z="Left"==X?"Right":"Bottom";return parseFloat(O["border"+X+"Width"])+parseFloat(O["border"+Z+"Width"])}function C(O,I,X,Z){return me(I["offset"+O],I["scroll"+O],X["client"+O],X["offset"+O],X["scroll"+O],e(10)?parseInt(X["offset"+O])+parseInt(Z["margin"+("Height"===O?"Top":"Left")])+parseInt(Z["margin"+("Height"===O?"Bottom":"Right")]):0)}function w(O){var I=O.body,X=O.documentElement,Z=e(10)&&getComputedStyle(X);return{height:C("Height",I,X,Z),width:C("Width",I,X,Z)}}function E(O){return fe({},O,{right:O.left+O.width,bottom:O.top+O.height})}function M(O){var I={};try{if(e(10)){I=O.getBoundingClientRect();var X=f(O,"top"),Z=f(O,"left");I.top+=X,I.left+=Z,I.bottom+=X,I.right+=Z}else I=O.getBoundingClientRect()}catch{}var gt={left:I.left,top:I.top,width:I.right-I.left,height:I.bottom-I.top},pt="HTML"===O.nodeName?w(O.ownerDocument):{},At=O.offsetWidth-(pt.width||O.clientWidth||gt.width),Rt=O.offsetHeight-(pt.height||O.clientHeight||gt.height);if(At||Rt){var Yt=n(O);At-=y(Yt,"x"),Rt-=y(Yt,"y"),gt.width-=At,gt.height-=Rt}return E(gt)}function N(O,I){var X=2<arguments.length&&void 0!==arguments[2]&&arguments[2],Z=e(10),gt="HTML"===I.nodeName,pt=M(O),ht=M(I),Et=l(O),At=n(I),Rt=parseFloat(At.borderTopWidth),Yt=parseFloat(At.borderLeftWidth);X&&gt&&(ht.top=me(ht.top,0),ht.left=me(ht.left,0));var Mt=E({top:pt.top-ht.top-Rt,left:pt.left-ht.left-Yt,width:pt.width,height:pt.height});if(Mt.marginTop=0,Mt.marginLeft=0,!Z&&gt){var Ht=parseFloat(At.marginTop),Kt=parseFloat(At.marginLeft);Mt.top-=Rt-Ht,Mt.bottom-=Rt-Ht,Mt.left-=Yt-Kt,Mt.right-=Yt-Kt,Mt.marginTop=Ht,Mt.marginLeft=Kt}return(Z&&!X?I.contains(Et):I===Et&&"BODY"!==Et.nodeName)&&(Mt=function m(O,I){var X=2<arguments.length&&void 0!==arguments[2]&&arguments[2],Z=f(I,"top"),gt=f(I,"left"),pt=X?-1:1;return O.top+=Z*pt,O.bottom+=Z*pt,O.left+=gt*pt,O.right+=gt*pt,O}(Mt,I)),Mt}function nt(O){var I=O.nodeName;if("BODY"===I||"HTML"===I)return!1;if("fixed"===n(O,"position"))return!0;var X=a(O);return!!X&&nt(X)}function rt(O){if(!O||!O.parentElement||e())return document.documentElement;for(var I=O.parentElement;I&&"none"===n(I,"transform");)I=I.parentElement;return I||document.documentElement}function g(O,I,X,Z){var gt=4<arguments.length&&void 0!==arguments[4]&&arguments[4],pt={top:0,left:0},ht=gt?rt(O):o(O,t(I));if("viewport"===Z)pt=function H(O){var I=1<arguments.length&&void 0!==arguments[1]&&arguments[1],X=O.ownerDocument.documentElement,Z=N(O,X),gt=me(X.clientWidth,window.innerWidth||0),pt=me(X.clientHeight,window.innerHeight||0),ht=I?0:f(X),Et=I?0:f(X,"left");return E({top:ht-Z.top+Z.marginTop,left:Et-Z.left+Z.marginLeft,width:gt,height:pt})}(ht,gt);else{var Et;"scrollParent"===Z?"BODY"===(Et=l(a(I))).nodeName&&(Et=O.ownerDocument.documentElement):Et="window"===Z?O.ownerDocument.documentElement:Z;var At=N(Et,ht,gt);if("HTML"!==Et.nodeName||nt(ht))pt=At;else{var Rt=w(O.ownerDocument),Yt=Rt.height,Mt=Rt.width;pt.top+=At.top-At.marginTop,pt.bottom=Yt+At.top,pt.left+=At.left-At.marginLeft,pt.right=Mt+At.left}}var Ht="number"==typeof(X=X||0);return pt.left+=Ht?X:X.left||0,pt.top+=Ht?X:X.top||0,pt.right-=Ht?X:X.right||0,pt.bottom-=Ht?X:X.bottom||0,pt}function F(O){return O.width*O.height}function U(O,I,X,Z,gt){var pt=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===O.indexOf("auto"))return O;var ht=g(X,Z,pt,gt),Et={top:{width:ht.width,height:I.top-ht.top},right:{width:ht.right-I.right,height:ht.height},bottom:{width:ht.width,height:ht.bottom-I.bottom},left:{width:I.left-ht.left,height:ht.height}},At=Object.keys(Et).map(function(Ht){return fe({key:Ht},Et[Ht],{area:F(Et[Ht])})}).sort(function(Ht,Kt){return Kt.area-Ht.area}),Rt=At.filter(function(Ht){return Ht.width>=X.clientWidth&&Ht.height>=X.clientHeight}),Yt=0<Rt.length?Rt[0].key:At[0].key,Mt=O.split("-")[1];return Yt+(Mt?"-"+Mt:"")}function et(O,I,X){var Z=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return N(X,Z?rt(I):o(I,t(X)),Z)}function st(O){var X=O.ownerDocument.defaultView.getComputedStyle(O),Z=parseFloat(X.marginTop||0)+parseFloat(X.marginBottom||0),gt=parseFloat(X.marginLeft||0)+parseFloat(X.marginRight||0);return{width:O.offsetWidth+gt,height:O.offsetHeight+Z}}function ct(O){var I={left:"right",right:"left",bottom:"top",top:"bottom"};return O.replace(/left|right|bottom|top/g,function(X){return I[X]})}function W(O,I,X){X=X.split("-")[0];var Z=st(O),gt={width:Z.width,height:Z.height},pt=-1!==["right","left"].indexOf(X),ht=pt?"top":"left",Et=pt?"left":"top",At=pt?"height":"width",Rt=pt?"width":"height";return gt[ht]=I[ht]+I[At]/2-Z[At]/2,gt[Et]=X===Et?I[Et]-Z[Rt]:I[ct(Et)],gt}function z(O,I){return Array.prototype.find?O.find(I):O.filter(I)[0]}function ft(O,I,X){var Z=void 0===X?O:O.slice(0,function tt(O,I,X){if(Array.prototype.findIndex)return O.findIndex(function(gt){return gt[I]===X});var Z=z(O,function(gt){return gt[I]===X});return O.indexOf(Z)}(O,"name",X));return Z.forEach(function(gt){gt.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var pt=gt.function||gt.fn;gt.enabled&&h(pt)&&(I.offsets.popper=E(I.offsets.popper),I.offsets.reference=E(I.offsets.reference),I=pt(I,gt))}),I}function ot(){if(!this.state.isDestroyed){var O={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};O.offsets.reference=et(this.state,this.popper,this.reference,this.options.positionFixed),O.placement=U(this.options.placement,O.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),O.originalPlacement=O.placement,O.positionFixed=this.options.positionFixed,O.offsets.popper=W(this.popper,O.offsets.reference,O.placement),O.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",O=ft(this.modifiers,O),this.state.isCreated?this.options.onUpdate(O):(this.state.isCreated=!0,this.options.onCreate(O))}}function vt(O,I){return O.some(function(X){return X.enabled&&X.name===I})}function _t(O){for(var I=[!1,"ms","Webkit","Moz","O"],X=O.charAt(0).toUpperCase()+O.slice(1),Z=0;Z<I.length;Z++){var gt=I[Z],pt=gt?""+gt+X:O;if(typeof document.body.style[pt]<"u")return pt}return null}function G(){return this.state.isDestroyed=!0,vt(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[_t("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function bt(O){var I=O.ownerDocument;return I?I.defaultView:window}function Ct(O,I,X,Z){var gt="BODY"===O.nodeName,pt=gt?O.ownerDocument.defaultView:O;pt.addEventListener(I,X,{passive:!0}),gt||Ct(l(pt.parentNode),I,X,Z),Z.push(pt)}function J(O,I,X,Z){X.updateBound=Z,bt(O).addEventListener("resize",X.updateBound,{passive:!0});var gt=l(O);return Ct(gt,"scroll",X.updateBound,X.scrollParents),X.scrollElement=gt,X.eventsEnabled=!0,X}function Ot(){this.state.eventsEnabled||(this.state=J(this.reference,0,this.state,this.scheduleUpdate))}function Lt(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function Tt(O,I){return bt(O).removeEventListener("resize",I.updateBound),I.scrollParents.forEach(function(X){X.removeEventListener("scroll",I.updateBound)}),I.updateBound=null,I.scrollParents=[],I.scrollElement=null,I.eventsEnabled=!1,I}(this.reference,this.state))}function zt(O){return""!==O&&!isNaN(parseFloat(O))&&isFinite(O)}function Xt(O,I){Object.keys(I).forEach(function(X){var Z="";-1!==["width","height","top","right","bottom","left"].indexOf(X)&&zt(I[X])&&(Z="px"),O.style[X]=I[X]+Z})}function re(O,I,X){var Z=z(O,function(ht){return ht.name===I}),gt=!!Z&&O.some(function(ht){return ht.name===X&&ht.enabled&&ht.order<Z.order});if(!gt){var pt="`"+I+"`";console.warn("`"+X+"` modifier is required by "+pt+" modifier in order to work, be sure to include it before "+pt+"!")}return gt}function Dt(O){var I=1<arguments.length&&void 0!==arguments[1]&&arguments[1],X=ci.indexOf(O),Z=ci.slice(X+1).concat(ci.slice(0,X));return I?Z.reverse():Z}var qe=Math.min,Je=Math.floor,Re=Math.round,me=Math.max,ye=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",we=function(){for(var O=["Edge","Trident","Firefox"],I=0;I<O.length;I+=1)if(ye&&0<=navigator.userAgent.indexOf(O[I]))return 1;return 0}(),ni=ye&&window.Promise?function(O){var I=!1;return function(){I||(I=!0,window.Promise.resolve().then(function(){I=!1,O()}))}}:function(O){var I=!1;return function(){I||(I=!0,setTimeout(function(){I=!1,O()},we))}},Mi=ye&&!(!window.MSInputMethodContext||!document.documentMode),ze=ye&&/MSIE 10/.test(navigator.userAgent),li=function(O,I){if(!(O instanceof I))throw new TypeError("Cannot call a class as a function")},Si=function(){function O(I,X){for(var Z,gt=0;gt<X.length;gt++)(Z=X[gt]).enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(I,Z.key,Z)}return function(I,X,Z){return X&&O(I.prototype,X),Z&&O(I,Z),I}}(),Me=function(O,I,X){return I in O?Object.defineProperty(O,I,{value:X,enumerable:!0,configurable:!0,writable:!0}):O[I]=X,O},fe=Object.assign||function(O){for(var I,X=1;X<arguments.length;X++)for(var Z in I=arguments[X])Object.prototype.hasOwnProperty.call(I,Z)&&(O[Z]=I[Z]);return O},Xe=ye&&/Firefox/i.test(navigator.userAgent),Be=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],ci=Be.slice(3),ce=function(){function O(I,X){var Z=this,gt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};li(this,O),this.scheduleUpdate=function(){return requestAnimationFrame(Z.update)},this.update=ni(this.update.bind(this)),this.options=fe({},O.Defaults,gt),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=I&&I.jquery?I[0]:I,this.popper=X&&X.jquery?X[0]:X,this.options.modifiers={},Object.keys(fe({},O.Defaults.modifiers,gt.modifiers)).forEach(function(ht){Z.options.modifiers[ht]=fe({},O.Defaults.modifiers[ht]||{},gt.modifiers?gt.modifiers[ht]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(ht){return fe({name:ht},Z.options.modifiers[ht])}).sort(function(ht,Et){return ht.order-Et.order}),this.modifiers.forEach(function(ht){ht.enabled&&h(ht.onLoad)&&ht.onLoad(Z.reference,Z.popper,Z.options,ht,Z.state)}),this.update();var pt=this.options.eventsEnabled;pt&&this.enableEventListeners(),this.state.eventsEnabled=pt}return Si(O,[{key:"update",value:function(){return ot.call(this)}},{key:"destroy",value:function(){return G.call(this)}},{key:"enableEventListeners",value:function(){return Ot.call(this)}},{key:"disableEventListeners",value:function(){return Lt.call(this)}}]),O}();return ce.Utils=(typeof window>"u"?global:window).PopperUtils,ce.placements=Be,ce.Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(O){var I=O.placement,X=I.split("-")[0],Z=I.split("-")[1];if(Z){var gt=O.offsets,pt=gt.reference,ht=gt.popper,Et=-1!==["bottom","top"].indexOf(X),At=Et?"left":"top",Rt=Et?"width":"height",Yt={start:Me({},At,pt[At]),end:Me({},At,pt[At]+pt[Rt]-ht[Rt])};O.offsets.popper=fe({},ht,Yt[Z])}return O}},offset:{order:200,enabled:!0,fn:function Nt(O,I){var X,Z=I.offset,pt=O.offsets,ht=pt.popper,Et=pt.reference,At=O.placement.split("-")[0];return X=zt(+Z)?[+Z,0]:function It(O,I,X,Z){var gt=[0,0],pt=-1!==["right","left"].indexOf(Z),ht=O.split(/(\+|\-)/).map(function(Yt){return Yt.trim()}),Et=ht.indexOf(z(ht,function(Yt){return-1!==Yt.search(/,|\s/)}));ht[Et]&&-1===ht[Et].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var At=/\s*,\s*|\s+/,Rt=-1===Et?[ht]:[ht.slice(0,Et).concat([ht[Et].split(At)[0]]),[ht[Et].split(At)[1]].concat(ht.slice(Et+1))];return Rt=Rt.map(function(Yt,Mt){var Ht=(1===Mt?!pt:pt)?"height":"width",Kt=!1;return Yt.reduce(function(oe,Ve){return""===oe[oe.length-1]&&-1!==["+","-"].indexOf(Ve)?(oe[oe.length-1]=Ve,Kt=!0,oe):Kt?(oe[oe.length-1]+=Ve,Kt=!1,oe):oe.concat(Ve)},[]).map(function(oe){return function Ne(O,I,X,Z){var gt=O.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),pt=+gt[1],ht=gt[2];return pt?0===ht.indexOf("%")?E("%p"===ht?X:Z)[I]/100*pt:"vh"===ht||"vw"===ht?("vh"===ht?me(document.documentElement.clientHeight,window.innerHeight||0):me(document.documentElement.clientWidth,window.innerWidth||0))/100*pt:pt:O}(oe,Ht,I,X)})}),Rt.forEach(function(Yt,Mt){Yt.forEach(function(Ht,Kt){zt(Ht)&&(gt[Mt]+=Ht*("-"===Yt[Kt-1]?-1:1))})}),gt}(Z,ht,Et,At),"left"===At?(ht.top+=X[0],ht.left-=X[1]):"right"===At?(ht.top+=X[0],ht.left+=X[1]):"top"===At?(ht.left+=X[0],ht.top-=X[1]):"bottom"===At&&(ht.left+=X[0],ht.top+=X[1]),O.popper=ht,O},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(O,I){var X=I.boundariesElement||i(O.instance.popper);O.instance.reference===X&&(X=i(X));var Z=_t("transform"),gt=O.instance.popper.style,pt=gt.top,ht=gt.left,Et=gt[Z];gt.top="",gt.left="",gt[Z]="";var At=g(O.instance.popper,O.instance.reference,I.padding,X,O.positionFixed);gt.top=pt,gt.left=ht,gt[Z]=Et,I.boundaries=At;var Yt=O.offsets.popper,Mt={primary:function(Ht){var Kt=Yt[Ht];return Yt[Ht]<At[Ht]&&!I.escapeWithReference&&(Kt=me(Yt[Ht],At[Ht])),Me({},Ht,Kt)},secondary:function(Ht){var Kt="right"===Ht?"left":"top",oe=Yt[Kt];return Yt[Ht]>At[Ht]&&!I.escapeWithReference&&(oe=qe(Yt[Kt],At[Ht]-("right"===Ht?Yt.width:Yt.height))),Me({},Kt,oe)}};return I.priority.forEach(function(Ht){var Kt=-1===["left","top"].indexOf(Ht)?"secondary":"primary";Yt=fe({},Yt,Mt[Kt](Ht))}),O.offsets.popper=Yt,O},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(O){var I=O.offsets,X=I.popper,Z=I.reference,gt=O.placement.split("-")[0],pt=Je,ht=-1!==["top","bottom"].indexOf(gt),Et=ht?"right":"bottom",At=ht?"left":"top",Rt=ht?"width":"height";return X[Et]<pt(Z[At])&&(O.offsets.popper[At]=pt(Z[At])-X[Rt]),X[At]>pt(Z[Et])&&(O.offsets.popper[At]=pt(Z[Et])),O}},arrow:{order:500,enabled:!0,fn:function(O,I){var X;if(!re(O.instance.modifiers,"arrow","keepTogether"))return O;var Z=I.element;if("string"==typeof Z){if(!(Z=O.instance.popper.querySelector(Z)))return O}else if(!O.instance.popper.contains(Z))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),O;var gt=O.placement.split("-")[0],pt=O.offsets,ht=pt.popper,Et=pt.reference,At=-1!==["left","right"].indexOf(gt),Rt=At?"height":"width",Yt=At?"Top":"Left",Mt=Yt.toLowerCase(),Ht=At?"left":"top",Kt=At?"bottom":"right",oe=st(Z)[Rt];Et[Kt]-oe<ht[Mt]&&(O.offsets.popper[Mt]-=ht[Mt]-(Et[Kt]-oe)),Et[Mt]+oe>ht[Kt]&&(O.offsets.popper[Mt]+=Et[Mt]+oe-ht[Kt]),O.offsets.popper=E(O.offsets.popper);var Ve=Et[Mt]+Et[Rt]/2-oe/2,hi=n(O.instance.popper),Ze=parseFloat(hi["margin"+Yt]),Ue=parseFloat(hi["border"+Yt+"Width"]),De=Ve-O.offsets.popper[Mt]-Ze-Ue;return De=me(qe(ht[Rt]-oe,De),0),O.arrowElement=Z,O.offsets.arrow=(Me(X={},Mt,Re(De)),Me(X,Ht,""),X),O},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(O,I){if(vt(O.instance.modifiers,"inner")||O.flipped&&O.placement===O.originalPlacement)return O;var X=g(O.instance.popper,O.instance.reference,I.padding,I.boundariesElement,O.positionFixed),Z=O.placement.split("-")[0],gt=ct(Z),pt=O.placement.split("-")[1]||"",ht=[];switch(I.behavior){case"flip":ht=[Z,gt];break;case"clockwise":ht=Dt(Z);break;case"counterclockwise":ht=Dt(Z,!0);break;default:ht=I.behavior}return ht.forEach(function(Et,At){if(Z!==Et||ht.length===At+1)return O;Z=O.placement.split("-")[0],gt=ct(Z);var Rt=O.offsets.popper,Yt=O.offsets.reference,Mt=Je,Ht="left"===Z&&Mt(Rt.right)>Mt(Yt.left)||"right"===Z&&Mt(Rt.left)<Mt(Yt.right)||"top"===Z&&Mt(Rt.bottom)>Mt(Yt.top)||"bottom"===Z&&Mt(Rt.top)<Mt(Yt.bottom),Kt=Mt(Rt.left)<Mt(X.left),oe=Mt(Rt.right)>Mt(X.right),Ve=Mt(Rt.top)<Mt(X.top),hi=Mt(Rt.bottom)>Mt(X.bottom),Ze="left"===Z&&Kt||"right"===Z&&oe||"top"===Z&&Ve||"bottom"===Z&&hi,Ue=-1!==["top","bottom"].indexOf(Z),Gi=!!I.flipVariations&&(Ue&&"start"===pt&&Kt||Ue&&"end"===pt&&oe||!Ue&&"start"===pt&&Ve||!Ue&&"end"===pt&&hi)||!!I.flipVariationsByContent&&(Ue&&"start"===pt&&oe||Ue&&"end"===pt&&Kt||!Ue&&"start"===pt&&hi||!Ue&&"end"===pt&&Ve);(Ht||Ze||Gi)&&(O.flipped=!0,(Ht||Ze)&&(Z=ht[At+1]),Gi&&(pt=function se(O){return"end"===O?"start":"start"===O?"end":O}(pt)),O.placement=Z+(pt?"-"+pt:""),O.offsets.popper=fe({},O.offsets.popper,W(O.instance.popper,O.offsets.reference,O.placement)),O=ft(O.instance.modifiers,O,"flip"))}),O},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(O){var I=O.placement,X=I.split("-")[0],Z=O.offsets,gt=Z.popper,pt=Z.reference,ht=-1!==["left","right"].indexOf(X),Et=-1===["top","left"].indexOf(X);return gt[ht?"left":"top"]=pt[X]-(Et?gt[ht?"width":"height"]:0),O.placement=ct(I),O.offsets.popper=E(gt),O}},hide:{order:800,enabled:!0,fn:function(O){if(!re(O.instance.modifiers,"hide","preventOverflow"))return O;var I=O.offsets.reference,X=z(O.instance.modifiers,function(Z){return"preventOverflow"===Z.name}).boundaries;if(I.bottom<X.top||I.left>X.right||I.top>X.bottom||I.right<X.left){if(!0===O.hide)return O;O.hide=!0,O.attributes["x-out-of-boundaries"]=""}else{if(!1===O.hide)return O;O.hide=!1,O.attributes["x-out-of-boundaries"]=!1}return O}},computeStyle:{order:850,enabled:!0,fn:function(O,I){var X=I.x,Z=I.y,gt=O.offsets.popper,pt=z(O.instance.modifiers,function(De){return"applyStyle"===De.name}).gpuAcceleration;void 0!==pt&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var ht,Et,At=void 0===pt?I.gpuAcceleration:pt,Rt=i(O.instance.popper),Yt=M(Rt),Mt={position:gt.position},Ht=function _e(O,I){var X=O.offsets,Z=X.popper,pt=Re,ht=function(Kt){return Kt},Et=pt(X.reference.width),At=pt(Z.width),Rt=-1!==["left","right"].indexOf(O.placement),Yt=-1!==O.placement.indexOf("-"),Mt=I?Rt||Yt||Et%2==At%2?pt:Je:ht,Ht=I?pt:ht;return{left:Mt(Et%2==1&&At%2==1&&!Yt&&I?Z.left-1:Z.left),top:Ht(Z.top),bottom:Ht(Z.bottom),right:Mt(Z.right)}}(O,2>window.devicePixelRatio||!Xe),Kt="bottom"===X?"top":"bottom",oe="right"===Z?"left":"right",Ve=_t("transform");if(Et="bottom"==Kt?"HTML"===Rt.nodeName?-Rt.clientHeight+Ht.bottom:-Yt.height+Ht.bottom:Ht.top,ht="right"==oe?"HTML"===Rt.nodeName?-Rt.clientWidth+Ht.right:-Yt.width+Ht.right:Ht.left,At&&Ve)Mt[Ve]="translate3d("+ht+"px, "+Et+"px, 0)",Mt[Kt]=0,Mt[oe]=0,Mt.willChange="transform";else{var Ze="right"==oe?-1:1;Mt[Kt]=Et*("bottom"==Kt?-1:1),Mt[oe]=ht*Ze,Mt.willChange=Kt+", "+oe}return O.attributes=fe({},{"x-placement":O.placement},O.attributes),O.styles=fe({},Mt,O.styles),O.arrowStyles=fe({},O.offsets.arrow,O.arrowStyles),O},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(O){return Xt(O.instance.popper,O.styles),function xe(O,I){Object.keys(I).forEach(function(X){!1===I[X]?O.removeAttribute(X):O.setAttribute(X,I[X])})}(O.instance.popper,O.attributes),O.arrowElement&&Object.keys(O.arrowStyles).length&&Xt(O.arrowElement,O.arrowStyles),O},onLoad:function(O,I,X,Z,gt){var pt=et(gt,I,O,X.positionFixed),ht=U(X.placement,pt,I,O,X.modifiers.flip.boundariesElement,X.modifiers.flip.padding);return I.setAttribute("x-placement",ht),Xt(I,{position:X.positionFixed?"fixed":"absolute"}),X},gpuAcceleration:void 0}}},ce}),function(h,n){"object"==typeof exports&&typeof module<"u"?module.exports=n(require("@popperjs/core")):"function"==typeof define&&define.amd?define(["@popperjs/core"],n):(h=typeof globalThis<"u"?globalThis:h||self).bootstrap=n(h.Popper)}(this,function(h){"use strict";const a=function n(D){if(D&&D.__esModule)return D;const p=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(D)for(const x in D)if("default"!==x){const A=Object.getOwnPropertyDescriptor(D,x);Object.defineProperty(p,x,A.get?A:{enumerable:!0,get:()=>D[x]})}return p.default=D,Object.freeze(p)}(h),l="transitionend",t=D=>{let p=D.getAttribute("data-bs-target");if(!p||"#"===p){let x=D.getAttribute("href");if(!x||!x.includes("#")&&!x.startsWith("."))return null;x.includes("#")&&!x.startsWith("#")&&(x=`#${x.split("#")[1]}`),p=x&&"#"!==x?x.trim():null}return p},e=D=>{const p=t(D);return p&&document.querySelector(p)?p:null},i=D=>{const p=t(D);return p?document.querySelector(p):null},s=D=>{D.dispatchEvent(new Event(l))},r=D=>!(!D||"object"!=typeof D)&&(void 0!==D.jquery&&(D=D[0]),void 0!==D.nodeType),o=D=>r(D)?D.jquery?D[0]:D:"string"==typeof D&&D.length>0?document.querySelector(D):null,f=D=>{if(!r(D)||0===D.getClientRects().length)return!1;const p="visible"===getComputedStyle(D).getPropertyValue("visibility"),x=D.closest("details:not([open])");if(!x)return p;if(x!==D){const A=D.closest("summary");if(A&&A.parentNode!==x||null===A)return!1}return p},m=D=>!D||D.nodeType!==Node.ELEMENT_NODE||!!D.classList.contains("disabled")||(void 0!==D.disabled?D.disabled:D.hasAttribute("disabled")&&"false"!==D.getAttribute("disabled")),y=D=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof D.getRootNode){const p=D.getRootNode();return p instanceof ShadowRoot?p:null}return D instanceof ShadowRoot?D:D.parentNode?y(D.parentNode):null},C=()=>{},E=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,M=[],N=()=>"rtl"===document.documentElement.dir,H=D=>{var p;p=()=>{const x=E();if(x){const A=D.NAME,Q=x.fn[A];x.fn[A]=D.jQueryInterface,x.fn[A].Constructor=D,x.fn[A].noConflict=()=>(x.fn[A]=Q,D.jQueryInterface)}},"loading"===document.readyState?(M.length||document.addEventListener("DOMContentLoaded",()=>{for(const x of M)x()}),M.push(p)):p()},nt=D=>{"function"==typeof D&&D()},rt=(D,p,x=!0)=>{if(!x)return void nt(D);const A=(ut=>{if(!ut)return 0;let{transitionDuration:Bt,transitionDelay:Gt}=window.getComputedStyle(ut);const ge=Number.parseFloat(Bt),Qt=Number.parseFloat(Gt);return ge||Qt?(Bt=Bt.split(",")[0],Gt=Gt.split(",")[0],1e3*(Number.parseFloat(Bt)+Number.parseFloat(Gt))):0})(p)+5;let Q=!1;const lt=({target:ut})=>{ut===p&&(Q=!0,p.removeEventListener(l,lt),nt(D))};p.addEventListener(l,lt),setTimeout(()=>{Q||s(p)},A)},g=(D,p,x,A)=>{const Q=D.length;let lt=D.indexOf(p);return-1===lt?!x&&A?D[Q-1]:D[0]:(lt+=x?1:-1,A&&(lt=(lt+Q)%Q),D[Math.max(0,Math.min(lt,Q-1))])},F=/[^.]*(?=\..*)\.|.*/,U=/\..*/,et=/::\d+$/,st={};let ct=1;const W={mouseenter:"mouseover",mouseleave:"mouseout"},z=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function tt(D,p){return p&&`${p}::${ct++}`||D.uidEvent||ct++}function ft(D){const p=tt(D);return D.uidEvent=p,st[p]=st[p]||{},st[p]}function ot(D,p,x=null){return Object.values(D).find(A=>A.callable===p&&A.delegationSelector===x)}function vt(D,p,x){const A="string"==typeof p,Q=A?x:p||x;let lt=Ct(D);return z.has(lt)||(lt=D),[A,Q,lt]}function _t(D,p,x,A,Q){if("string"!=typeof p||!D)return;let[lt,ut,Bt]=vt(p,x,A);var pe;p in W&&(pe=ut,ut=function(Ge){if(!Ge.relatedTarget||Ge.relatedTarget!==Ge.delegateTarget&&!Ge.delegateTarget.contains(Ge.relatedTarget))return pe.call(this,Ge)});const Gt=ft(D),ge=Gt[Bt]||(Gt[Bt]={}),Qt=ot(ge,ut,lt?x:null);if(Qt)return void(Qt.oneOff=Qt.oneOff&&Q);const Wt=tt(ut,p.replace(F,"")),Pe=lt?function(Jt,pe,Ge){return function Pi(He){const Qi=Jt.querySelectorAll(pe);for(let{target:fi}=He;fi&&fi!==this;fi=fi.parentNode)for(const Qe of Qi)if(Qe===fi)return Ot(He,{delegateTarget:fi}),Pi.oneOff&&J.off(Jt,He.type,pe,Ge),Ge.apply(fi,[He])}}(D,x,ut):function(Jt,pe){return function Ge(Pi){return Ot(Pi,{delegateTarget:Jt}),Ge.oneOff&&J.off(Jt,Pi.type,pe),pe.apply(Jt,[Pi])}}(D,ut);Pe.delegationSelector=lt?x:null,Pe.callable=ut,Pe.oneOff=Q,Pe.uidEvent=Wt,ge[Wt]=Pe,D.addEventListener(Bt,Pe,lt)}function G(D,p,x,A,Q){const lt=ot(p[x],A,Q);lt&&(D.removeEventListener(x,lt,Boolean(Q)),delete p[x][lt.uidEvent])}function bt(D,p,x,A){const Q=p[x]||{};for(const lt of Object.keys(Q))if(lt.includes(A)){const ut=Q[lt];G(D,p,x,ut.callable,ut.delegationSelector)}}function Ct(D){return D=D.replace(U,""),W[D]||D}const J={on(D,p,x,A){_t(D,p,x,A,!1)},one(D,p,x,A){_t(D,p,x,A,!0)},off(D,p,x,A){if("string"!=typeof p||!D)return;const[Q,lt,ut]=vt(p,x,A),Bt=ut!==p,Gt=ft(D),ge=Gt[ut]||{},Qt=p.startsWith(".");if(void 0===lt){if(Qt)for(const Wt of Object.keys(Gt))bt(D,Gt,Wt,p.slice(1));for(const Wt of Object.keys(ge)){const Pe=Wt.replace(et,"");if(!Bt||p.includes(Pe)){const Jt=ge[Wt];G(D,Gt,ut,Jt.callable,Jt.delegationSelector)}}}else{if(!Object.keys(ge).length)return;G(D,Gt,ut,lt,Q?x:null)}},trigger(D,p,x){if("string"!=typeof p||!D)return null;const A=E();let Q=null,lt=!0,ut=!0,Bt=!1;p!==Ct(p)&&A&&(Q=A.Event(p,x),A(D).trigger(Q),lt=!Q.isPropagationStopped(),ut=!Q.isImmediatePropagationStopped(),Bt=Q.isDefaultPrevented());let Gt=new Event(p,{bubbles:lt,cancelable:!0});return Gt=Ot(Gt,x),Bt&&Gt.preventDefault(),ut&&D.dispatchEvent(Gt),Gt.defaultPrevented&&Q&&Q.preventDefault(),Gt}};function Ot(D,p){for(const[x,A]of Object.entries(p||{}))try{D[x]=A}catch{Object.defineProperty(D,x,{configurable:!0,get:()=>A})}return D}const Tt=new Map,Lt={set(D,p,x){Tt.has(D)||Tt.set(D,new Map);const A=Tt.get(D);A.has(p)||0===A.size?A.set(p,x):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(A.keys())[0]}.`)},get:(D,p)=>Tt.has(D)&&Tt.get(D).get(p)||null,remove(D,p){if(!Tt.has(D))return;const x=Tt.get(D);x.delete(p),0===x.size&&Tt.delete(D)}};function zt(D){if("true"===D)return!0;if("false"===D)return!1;if(D===Number(D).toString())return Number(D);if(""===D||"null"===D)return null;if("string"!=typeof D)return D;try{return JSON.parse(decodeURIComponent(D))}catch{return D}}function Xt(D){return D.replace(/[A-Z]/g,p=>`-${p.toLowerCase()}`)}const xe={setDataAttribute(D,p,x){D.setAttribute(`data-bs-${Xt(p)}`,x)},removeDataAttribute(D,p){D.removeAttribute(`data-bs-${Xt(p)}`)},getDataAttributes(D){if(!D)return{};const p={},x=Object.keys(D.dataset).filter(A=>A.startsWith("bs")&&!A.startsWith("bsConfig"));for(const A of x){let Q=A.replace(/^bs/,"");Q=Q.charAt(0).toLowerCase()+Q.slice(1,Q.length),p[Q]=zt(D.dataset[A])}return p},getDataAttribute:(D,p)=>zt(D.getAttribute(`data-bs-${Xt(p)}`))};class _e{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(p){return p=this._mergeConfigObj(p),p=this._configAfterMerge(p),this._typeCheckConfig(p),p}_configAfterMerge(p){return p}_mergeConfigObj(p,x){const A=r(x)?xe.getDataAttribute(x,"config"):{};return{...this.constructor.Default,..."object"==typeof A?A:{},...r(x)?xe.getDataAttributes(x):{},..."object"==typeof p?p:{}}}_typeCheckConfig(p,x=this.constructor.DefaultType){for(const Q of Object.keys(x)){const lt=x[Q],ut=p[Q],Bt=r(ut)?"element":null==(A=ut)?`${A}`:Object.prototype.toString.call(A).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(lt).test(Bt))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${Q}" provided type "${Bt}" but expected type "${lt}".`)}var A}}class re extends _e{constructor(p,x){super(),(p=o(p))&&(this._element=p,this._config=this._getConfig(x),Lt.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Lt.remove(this._element,this.constructor.DATA_KEY),J.off(this._element,this.constructor.EVENT_KEY);for(const p of Object.getOwnPropertyNames(this))this[p]=null}_queueCallback(p,x,A=!0){rt(p,x,A)}_getConfig(p){return p=this._mergeConfigObj(p,this._element),p=this._configAfterMerge(p),this._typeCheckConfig(p),p}static getInstance(p){return Lt.get(o(p),this.DATA_KEY)}static getOrCreateInstance(p,x={}){return this.getInstance(p)||new this(p,"object"==typeof x?x:null)}static get VERSION(){return"5.2.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(p){return`${p}${this.EVENT_KEY}`}}const se=(D,p="hide")=>{const A=D.NAME;J.on(document,`click.dismiss${D.EVENT_KEY}`,`[data-bs-dismiss="${A}"]`,function(Q){if(["A","AREA"].includes(this.tagName)&&Q.preventDefault(),m(this))return;const lt=i(this)||this.closest(`.${A}`);D.getOrCreateInstance(lt)[p]()})};class Dt extends re{static get NAME(){return"alert"}close(){if(J.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const p=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,p)}_destroyElement(){this._element.remove(),J.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(p){return this.each(function(){const x=Dt.getOrCreateInstance(this);if("string"==typeof p){if(void 0===x[p]||p.startsWith("_")||"constructor"===p)throw new TypeError(`No method named "${p}"`);x[p](this)}})}}se(Dt,"close"),H(Dt);const Ne='[data-bs-toggle="button"]';class It extends re{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(p){return this.each(function(){const x=It.getOrCreateInstance(this);"toggle"===p&&x[p]()})}}J.on(document,"click.bs.button.data-api",Ne,D=>{D.preventDefault();const p=D.target.closest(Ne);It.getOrCreateInstance(p).toggle()}),H(It);const Nt={find:(D,p=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(p,D)),findOne:(D,p=document.documentElement)=>Element.prototype.querySelector.call(p,D),children:(D,p)=>[].concat(...D.children).filter(x=>x.matches(p)),parents(D,p){const x=[];let A=D.parentNode.closest(p);for(;A;)x.push(A),A=A.parentNode.closest(p);return x},prev(D,p){let x=D.previousElementSibling;for(;x;){if(x.matches(p))return[x];x=x.previousElementSibling}return[]},next(D,p){let x=D.nextElementSibling;for(;x;){if(x.matches(p))return[x];x=x.nextElementSibling}return[]},focusableChildren(D){const p=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(x=>`${x}:not([tabindex^="-"])`).join(",");return this.find(p,D).filter(x=>!m(x)&&f(x))}},qe={endCallback:null,leftCallback:null,rightCallback:null},Je={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Re extends _e{constructor(p,x){super(),this._element=p,p&&Re.isSupported()&&(this._config=this._getConfig(x),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return qe}static get DefaultType(){return Je}static get NAME(){return"swipe"}dispose(){J.off(this._element,".bs.swipe")}_start(p){this._supportPointerEvents?this._eventIsPointerPenTouch(p)&&(this._deltaX=p.clientX):this._deltaX=p.touches[0].clientX}_end(p){this._eventIsPointerPenTouch(p)&&(this._deltaX=p.clientX-this._deltaX),this._handleSwipe(),nt(this._config.endCallback)}_move(p){this._deltaX=p.touches&&p.touches.length>1?0:p.touches[0].clientX-this._deltaX}_handleSwipe(){const p=Math.abs(this._deltaX);if(p<=40)return;const x=p/this._deltaX;this._deltaX=0,x&&nt(x>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(J.on(this._element,"pointerdown.bs.swipe",p=>this._start(p)),J.on(this._element,"pointerup.bs.swipe",p=>this._end(p)),this._element.classList.add("pointer-event")):(J.on(this._element,"touchstart.bs.swipe",p=>this._start(p)),J.on(this._element,"touchmove.bs.swipe",p=>this._move(p)),J.on(this._element,"touchend.bs.swipe",p=>this._end(p)))}_eventIsPointerPenTouch(p){return this._supportPointerEvents&&("pen"===p.pointerType||"touch"===p.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const me="next",ye="prev",we="left",Ee="right",ni="slid.bs.carousel",Mi="carousel",ze="active",li={ArrowLeft:Ee,ArrowRight:we},Si={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Me={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class fe extends re{constructor(p,x){super(p,x),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Nt.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Mi&&this.cycle()}static get Default(){return Si}static get DefaultType(){return Me}static get NAME(){return"carousel"}next(){this._slide(me)}nextWhenVisible(){!document.hidden&&f(this._element)&&this.next()}prev(){this._slide(ye)}pause(){this._isSliding&&s(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?J.one(this._element,ni,()=>this.cycle()):this.cycle())}to(p){const x=this._getItems();if(p>x.length-1||p<0)return;if(this._isSliding)return void J.one(this._element,ni,()=>this.to(p));const A=this._getItemIndex(this._getActive());A!==p&&this._slide(p>A?me:ye,x[p])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(p){return p.defaultInterval=p.interval,p}_addEventListeners(){this._config.keyboard&&J.on(this._element,"keydown.bs.carousel",p=>this._keydown(p)),"hover"===this._config.pause&&(J.on(this._element,"mouseenter.bs.carousel",()=>this.pause()),J.on(this._element,"mouseleave.bs.carousel",()=>this._maybeEnableCycle())),this._config.touch&&Re.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const x of Nt.find(".carousel-item img",this._element))J.on(x,"dragstart.bs.carousel",A=>A.preventDefault());this._swipeHelper=new Re(this._element,{leftCallback:()=>this._slide(this._directionToOrder(we)),rightCallback:()=>this._slide(this._directionToOrder(Ee)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(p){if(/input|textarea/i.test(p.target.tagName))return;const x=li[p.key];x&&(p.preventDefault(),this._slide(this._directionToOrder(x)))}_getItemIndex(p){return this._getItems().indexOf(p)}_setActiveIndicatorElement(p){if(!this._indicatorsElement)return;const x=Nt.findOne(".active",this._indicatorsElement);x.classList.remove(ze),x.removeAttribute("aria-current");const A=Nt.findOne(`[data-bs-slide-to="${p}"]`,this._indicatorsElement);A&&(A.classList.add(ze),A.setAttribute("aria-current","true"))}_updateInterval(){const p=this._activeElement||this._getActive();if(!p)return;const x=Number.parseInt(p.getAttribute("data-bs-interval"),10);this._config.interval=x||this._config.defaultInterval}_slide(p,x=null){if(this._isSliding)return;const A=this._getActive(),Q=p===me,lt=x||g(this._getItems(),A,Q,this._config.wrap);if(lt===A)return;const ut=this._getItemIndex(lt),Bt=Wt=>J.trigger(this._element,Wt,{relatedTarget:lt,direction:this._orderToDirection(p),from:this._getItemIndex(A),to:ut});if(Bt("slide.bs.carousel").defaultPrevented||!A||!lt)return;const Gt=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(ut),this._activeElement=lt;const ge=Q?"carousel-item-start":"carousel-item-end",Qt=Q?"carousel-item-next":"carousel-item-prev";lt.classList.add(Qt),A.classList.add(ge),lt.classList.add(ge),this._queueCallback(()=>{lt.classList.remove(ge,Qt),lt.classList.add(ze),A.classList.remove(ze,Qt,ge),this._isSliding=!1,Bt(ni)},A,this._isAnimated()),Gt&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Nt.findOne(".active.carousel-item",this._element)}_getItems(){return Nt.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(p){return N()?p===we?ye:me:p===we?me:ye}_orderToDirection(p){return N()?p===ye?we:Ee:p===ye?Ee:we}static jQueryInterface(p){return this.each(function(){const x=fe.getOrCreateInstance(this,p);if("number"!=typeof p){if("string"==typeof p){if(void 0===x[p]||p.startsWith("_")||"constructor"===p)throw new TypeError(`No method named "${p}"`);x[p]()}}else x.to(p)})}}J.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(D){const p=i(this);if(!p||!p.classList.contains(Mi))return;D.preventDefault();const x=fe.getOrCreateInstance(p),A=this.getAttribute("data-bs-slide-to");return A?(x.to(A),void x._maybeEnableCycle()):"next"===xe.getDataAttribute(this,"slide")?(x.next(),void x._maybeEnableCycle()):(x.prev(),void x._maybeEnableCycle())}),J.on(window,"load.bs.carousel.data-api",()=>{const D=Nt.find('[data-bs-ride="carousel"]');for(const p of D)fe.getOrCreateInstance(p)}),H(fe);const Xe="show",Be="collapse",ci="collapsing",Ye='[data-bs-toggle="collapse"]',ce={parent:null,toggle:!0},O={parent:"(null|element)",toggle:"boolean"};class I extends re{constructor(p,x){super(p,x),this._isTransitioning=!1,this._triggerArray=[];const A=Nt.find(Ye);for(const Q of A){const lt=e(Q),ut=Nt.find(lt).filter(Bt=>Bt===this._element);null!==lt&&ut.length&&this._triggerArray.push(Q)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ce}static get DefaultType(){return O}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let p=[];if(this._config.parent&&(p=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(Q=>Q!==this._element).map(Q=>I.getOrCreateInstance(Q,{toggle:!1}))),p.length&&p[0]._isTransitioning||J.trigger(this._element,"show.bs.collapse").defaultPrevented)return;for(const Q of p)Q.hide();const x=this._getDimension();this._element.classList.remove(Be),this._element.classList.add(ci),this._element.style[x]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const A=`scroll${x[0].toUpperCase()+x.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ci),this._element.classList.add(Be,Xe),this._element.style[x]="",J.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[x]=`${this._element[A]}px`}hide(){if(this._isTransitioning||!this._isShown()||J.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const p=this._getDimension();this._element.style[p]=`${this._element.getBoundingClientRect()[p]}px`,this._element.classList.add(ci),this._element.classList.remove(Be,Xe);for(const x of this._triggerArray){const A=i(x);A&&!this._isShown(A)&&this._addAriaAndCollapsedClass([x],!1)}this._isTransitioning=!0,this._element.style[p]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ci),this._element.classList.add(Be),J.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(p=this._element){return p.classList.contains(Xe)}_configAfterMerge(p){return p.toggle=Boolean(p.toggle),p.parent=o(p.parent),p}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const p=this._getFirstLevelChildren(Ye);for(const x of p){const A=i(x);A&&this._addAriaAndCollapsedClass([x],this._isShown(A))}}_getFirstLevelChildren(p){const x=Nt.find(":scope .collapse .collapse",this._config.parent);return Nt.find(p,this._config.parent).filter(A=>!x.includes(A))}_addAriaAndCollapsedClass(p,x){if(p.length)for(const A of p)A.classList.toggle("collapsed",!x),A.setAttribute("aria-expanded",x)}static jQueryInterface(p){const x={};return"string"==typeof p&&/show|hide/.test(p)&&(x.toggle=!1),this.each(function(){const A=I.getOrCreateInstance(this,x);if("string"==typeof p){if(void 0===A[p])throw new TypeError(`No method named "${p}"`);A[p]()}})}}J.on(document,"click.bs.collapse.data-api",Ye,function(D){("A"===D.target.tagName||D.delegateTarget&&"A"===D.delegateTarget.tagName)&&D.preventDefault();const p=e(this),x=Nt.find(p);for(const A of x)I.getOrCreateInstance(A,{toggle:!1}).toggle()}),H(I);const X="dropdown",Z="ArrowUp",gt="ArrowDown",pt="click.bs.dropdown.data-api",ht="keydown.bs.dropdown.data-api",Et="show",At='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Rt=`${At}.show`,Yt=".dropdown-menu",Mt=N()?"top-end":"top-start",Ht=N()?"top-start":"top-end",Kt=N()?"bottom-end":"bottom-start",oe=N()?"bottom-start":"bottom-end",Ve=N()?"left-start":"right-start",hi=N()?"right-start":"left-start",Ze={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Ue={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class De extends re{constructor(p,x){super(p,x),this._popper=null,this._parent=this._element.parentNode,this._menu=Nt.next(this._element,Yt)[0]||Nt.prev(this._element,Yt)[0]||Nt.findOne(Yt,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ze}static get DefaultType(){return Ue}static get NAME(){return X}toggle(){return this._isShown()?this.hide():this.show()}show(){if(m(this._element)||this._isShown())return;const p={relatedTarget:this._element};if(!J.trigger(this._element,"show.bs.dropdown",p).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const x of[].concat(...document.body.children))J.on(x,"mouseover",C);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Et),this._element.classList.add(Et),J.trigger(this._element,"shown.bs.dropdown",p)}}hide(){!m(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(p){if(!J.trigger(this._element,"hide.bs.dropdown",p).defaultPrevented){if("ontouchstart"in document.documentElement)for(const x of[].concat(...document.body.children))J.off(x,"mouseover",C);this._popper&&this._popper.destroy(),this._menu.classList.remove(Et),this._element.classList.remove(Et),this._element.setAttribute("aria-expanded","false"),xe.removeDataAttribute(this._menu,"popper"),J.trigger(this._element,"hidden.bs.dropdown",p)}}_getConfig(p){if("object"==typeof(p=super._getConfig(p)).reference&&!r(p.reference)&&"function"!=typeof p.reference.getBoundingClientRect)throw new TypeError(`${X.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return p}_createPopper(){if(void 0===a)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let p=this._element;"parent"===this._config.reference?p=this._parent:r(this._config.reference)?p=o(this._config.reference):"object"==typeof this._config.reference&&(p=this._config.reference);const x=this._getPopperConfig();this._popper=a.createPopper(p,this._menu,x)}_isShown(){return this._menu.classList.contains(Et)}_getPlacement(){const p=this._parent;if(p.classList.contains("dropend"))return Ve;if(p.classList.contains("dropstart"))return hi;if(p.classList.contains("dropup-center"))return"top";if(p.classList.contains("dropdown-center"))return"bottom";const x="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return p.classList.contains("dropup")?x?Ht:Mt:x?oe:Kt}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:p}=this._config;return"string"==typeof p?p.split(",").map(x=>Number.parseInt(x,10)):"function"==typeof p?x=>p(x,this._element):p}_getPopperConfig(){const p={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(xe.setDataAttribute(this._menu,"popper","static"),p.modifiers=[{name:"applyStyles",enabled:!1}]),{...p,..."function"==typeof this._config.popperConfig?this._config.popperConfig(p):this._config.popperConfig}}_selectMenuItem({key:p,target:x}){const A=Nt.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(Q=>f(Q));A.length&&g(A,x,p===gt,!A.includes(x)).focus()}static jQueryInterface(p){return this.each(function(){const x=De.getOrCreateInstance(this,p);if("string"==typeof p){if(void 0===x[p])throw new TypeError(`No method named "${p}"`);x[p]()}})}static clearMenus(p){if(2===p.button||"keyup"===p.type&&"Tab"!==p.key)return;const x=Nt.find(Rt);for(const A of x){const Q=De.getInstance(A);if(!Q||!1===Q._config.autoClose)continue;const lt=p.composedPath(),ut=lt.includes(Q._menu);if(lt.includes(Q._element)||"inside"===Q._config.autoClose&&!ut||"outside"===Q._config.autoClose&&ut||Q._menu.contains(p.target)&&("keyup"===p.type&&"Tab"===p.key||/input|select|option|textarea|form/i.test(p.target.tagName)))continue;const Bt={relatedTarget:Q._element};"click"===p.type&&(Bt.clickEvent=p),Q._completeHide(Bt)}}static dataApiKeydownHandler(p){const x=/input|textarea/i.test(p.target.tagName),A="Escape"===p.key,Q=[Z,gt].includes(p.key);if(!Q&&!A||x&&!A)return;p.preventDefault();const lt=this.matches(At)?this:Nt.prev(this,At)[0]||Nt.next(this,At)[0]||Nt.findOne(At,p.delegateTarget.parentNode),ut=De.getOrCreateInstance(lt);if(Q)return p.stopPropagation(),ut.show(),void ut._selectMenuItem(p);ut._isShown()&&(p.stopPropagation(),ut.hide(),lt.focus())}}J.on(document,ht,At,De.dataApiKeydownHandler),J.on(document,ht,Yt,De.dataApiKeydownHandler),J.on(document,pt,De.clearMenus),J.on(document,"keyup.bs.dropdown.data-api",De.clearMenus),J.on(document,pt,At,function(D){D.preventDefault(),De.getOrCreateInstance(this).toggle()}),H(De);const Ii=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Gi=".sticky-top",cn="padding-right",$e="margin-right";class Ke{constructor(){this._element=document.body}getWidth(){const p=document.documentElement.clientWidth;return Math.abs(window.innerWidth-p)}hide(){const p=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,cn,x=>x+p),this._setElementAttributes(Ii,cn,x=>x+p),this._setElementAttributes(Gi,$e,x=>x-p)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,cn),this._resetElementAttributes(Ii,cn),this._resetElementAttributes(Gi,$e)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(p,x,A){const Q=this.getWidth();this._applyManipulationCallback(p,lt=>{if(lt!==this._element&&window.innerWidth>lt.clientWidth+Q)return;this._saveInitialAttribute(lt,x);const ut=window.getComputedStyle(lt).getPropertyValue(x);lt.style.setProperty(x,`${A(Number.parseFloat(ut))}px`)})}_saveInitialAttribute(p,x){const A=p.style.getPropertyValue(x);A&&xe.setDataAttribute(p,x,A)}_resetElementAttributes(p,x){this._applyManipulationCallback(p,A=>{const Q=xe.getDataAttribute(A,x);null!==Q?(xe.removeDataAttribute(A,x),A.style.setProperty(x,Q)):A.style.removeProperty(x)})}_applyManipulationCallback(p,x){if(r(p))x(p);else for(const A of Nt.find(p,this._element))x(A)}}const ti="mousedown.bs.backdrop",On={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},hn={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class mi extends _e{constructor(p){super(),this._config=this._getConfig(p),this._isAppended=!1,this._element=null}static get Default(){return On}static get DefaultType(){return hn}static get NAME(){return"backdrop"}show(p){if(!this._config.isVisible)return void nt(p);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{nt(p)})}hide(p){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),nt(p)})):nt(p)}dispose(){this._isAppended&&(J.off(this._element,ti),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const p=document.createElement("div");p.className=this._config.className,this._config.isAnimated&&p.classList.add("fade"),this._element=p}return this._element}_configAfterMerge(p){return p.rootElement=o(p.rootElement),p}_append(){if(this._isAppended)return;const p=this._getElement();this._config.rootElement.append(p),J.on(p,ti,()=>{nt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(p){rt(p,this._getElement(),this._config.isAnimated)}}const Ei=".bs.focustrap",un="backward",qi={autofocus:!0,trapElement:null},En={autofocus:"boolean",trapElement:"element"};class fn extends _e{constructor(p){super(),this._config=this._getConfig(p),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return qi}static get DefaultType(){return En}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),J.off(document,Ei),J.on(document,"focusin.bs.focustrap",p=>this._handleFocusin(p)),J.on(document,"keydown.tab.bs.focustrap",p=>this._handleKeydown(p)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,J.off(document,Ei))}_handleFocusin(p){const{trapElement:x}=this._config;if(p.target===document||p.target===x||x.contains(p.target))return;const A=Nt.focusableChildren(x);0===A.length?x.focus():this._lastTabNavDirection===un?A[A.length-1].focus():A[0].focus()}_handleKeydown(p){"Tab"===p.key&&(this._lastTabNavDirection=p.shiftKey?un:"forward")}}const Fi="hidden.bs.modal",ei="show.bs.modal",Ni="modal-open",Ri="modal-static",Ai={backdrop:!0,focus:!0,keyboard:!0},An={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Bi extends re{constructor(p,x){super(p,x),this._dialog=Nt.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ke,this._addEventListeners()}static get Default(){return Ai}static get DefaultType(){return An}static get NAME(){return"modal"}toggle(p){return this._isShown?this.hide():this.show(p)}show(p){this._isShown||this._isTransitioning||J.trigger(this._element,ei,{relatedTarget:p}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ni),this._adjustDialog(),this._backdrop.show(()=>this._showElement(p)))}hide(){this._isShown&&!this._isTransitioning&&(J.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){for(const p of[window,this._dialog])J.off(p,".bs.modal");this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new mi({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new fn({trapElement:this._element})}_showElement(p){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const x=Nt.findOne(".modal-body",this._dialog);x&&(x.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,J.trigger(this._element,"shown.bs.modal",{relatedTarget:p})},this._dialog,this._isAnimated())}_addEventListeners(){J.on(this._element,"keydown.dismiss.bs.modal",p=>{if("Escape"===p.key)return this._config.keyboard?(p.preventDefault(),void this.hide()):void this._triggerBackdropTransition()}),J.on(window,"resize.bs.modal",()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),J.on(this._element,"mousedown.dismiss.bs.modal",p=>{J.one(this._element,"click.dismiss.bs.modal",x=>{this._element===p.target&&this._element===x.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Ni),this._resetAdjustments(),this._scrollBar.reset(),J.trigger(this._element,Fi)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(J.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const p=this._element.scrollHeight>document.documentElement.clientHeight,x=this._element.style.overflowY;"hidden"===x||this._element.classList.contains(Ri)||(p||(this._element.style.overflowY="hidden"),this._element.classList.add(Ri),this._queueCallback(()=>{this._element.classList.remove(Ri),this._queueCallback(()=>{this._element.style.overflowY=x},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const p=this._element.scrollHeight>document.documentElement.clientHeight,x=this._scrollBar.getWidth(),A=x>0;if(A&&!p){const Q=N()?"paddingLeft":"paddingRight";this._element.style[Q]=`${x}px`}if(!A&&p){const Q=N()?"paddingRight":"paddingLeft";this._element.style[Q]=`${x}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(p,x){return this.each(function(){const A=Bi.getOrCreateInstance(this,p);if("string"==typeof p){if(void 0===A[p])throw new TypeError(`No method named "${p}"`);A[p](x)}})}}J.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(D){const p=i(this);["A","AREA"].includes(this.tagName)&&D.preventDefault(),J.one(p,ei,A=>{A.defaultPrevented||J.one(p,Fi,()=>{f(this)&&this.focus()})});const x=Nt.findOne(".modal.show");x&&Bi.getInstance(x).hide(),Bi.getOrCreateInstance(p).toggle(this)}),se(Bi),H(Bi);const dn="showing",kn=".offcanvas.show",si="hidePrevented.bs.offcanvas",Dn="hidden.bs.offcanvas",xi={backdrop:!0,keyboard:!0,scroll:!1},sr={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class wi extends re{constructor(p,x){super(p,x),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return xi}static get DefaultType(){return sr}static get NAME(){return"offcanvas"}toggle(p){return this._isShown?this.hide():this.show(p)}show(p){this._isShown||J.trigger(this._element,"show.bs.offcanvas",{relatedTarget:p}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Ke).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(dn),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(dn),J.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:p})},this._element,!0))}hide(){this._isShown&&(J.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Ke).reset(),J.trigger(this._element,Dn)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const p=Boolean(this._config.backdrop);return new mi({className:"offcanvas-backdrop",isVisible:p,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:p?()=>{"static"!==this._config.backdrop?this.hide():J.trigger(this._element,si)}:null})}_initializeFocusTrap(){return new fn({trapElement:this._element})}_addEventListeners(){J.on(this._element,"keydown.dismiss.bs.offcanvas",p=>{"Escape"===p.key&&(this._config.keyboard?this.hide():J.trigger(this._element,si))})}static jQueryInterface(p){return this.each(function(){const x=wi.getOrCreateInstance(this,p);if("string"==typeof p){if(void 0===x[p]||p.startsWith("_")||"constructor"===p)throw new TypeError(`No method named "${p}"`);x[p](this)}})}}J.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(D){const p=i(this);if(["A","AREA"].includes(this.tagName)&&D.preventDefault(),m(this))return;J.one(p,Dn,()=>{f(this)&&this.focus()});const x=Nt.findOne(kn);x&&x!==p&&wi.getInstance(x).hide(),wi.getOrCreateInstance(p).toggle(this)}),J.on(window,"load.bs.offcanvas.data-api",()=>{for(const D of Nt.find(kn))wi.getOrCreateInstance(D).show()}),J.on(window,"resize.bs.offcanvas",()=>{for(const D of Nt.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(D).position&&wi.getOrCreateInstance(D).hide()}),se(wi),H(wi);const Di=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Ci=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,pn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,or=(D,p)=>{const x=D.nodeName.toLowerCase();return p.includes(x)?!Di.has(x)||Boolean(Ci.test(D.nodeValue)||pn.test(D.nodeValue)):p.filter(A=>A instanceof RegExp).some(A=>A.test(x))},nn={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Gn={allowList:nn,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},rn={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Pn={entry:"(string|element|function|null)",selector:"(string|element)"};class gn extends _e{constructor(p){super(),this._config=this._getConfig(p)}static get Default(){return Gn}static get DefaultType(){return rn}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(p=>this._resolvePossibleFunction(p)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(p){return this._checkContent(p),this._config.content={...this._config.content,...p},this}toHtml(){const p=document.createElement("div");p.innerHTML=this._maybeSanitize(this._config.template);for(const[Q,lt]of Object.entries(this._config.content))this._setContent(p,lt,Q);const x=p.children[0],A=this._resolvePossibleFunction(this._config.extraClass);return A&&x.classList.add(...A.split(" ")),x}_typeCheckConfig(p){super._typeCheckConfig(p),this._checkContent(p.content)}_checkContent(p){for(const[x,A]of Object.entries(p))super._typeCheckConfig({selector:x,entry:A},Pn)}_setContent(p,x,A){const Q=Nt.findOne(A,p);Q&&((x=this._resolvePossibleFunction(x))?r(x)?this._putElementInTemplate(o(x),Q):this._config.html?Q.innerHTML=this._maybeSanitize(x):Q.textContent=x:Q.remove())}_maybeSanitize(p){return this._config.sanitize?function(x,A,Q){if(!x.length)return x;if(Q&&"function"==typeof Q)return Q(x);const lt=(new window.DOMParser).parseFromString(x,"text/html"),ut=[].concat(...lt.body.querySelectorAll("*"));for(const Bt of ut){const Gt=Bt.nodeName.toLowerCase();if(!Object.keys(A).includes(Gt)){Bt.remove();continue}const ge=[].concat(...Bt.attributes),Qt=[].concat(A["*"]||[],A[Gt]||[]);for(const Wt of ge)or(Wt,Qt)||Bt.removeAttribute(Wt.nodeName)}return lt.body.innerHTML}(p,this._config.allowList,this._config.sanitizeFn):p}_resolvePossibleFunction(p){return"function"==typeof p?p(this):p}_putElementInTemplate(p,x){if(this._config.html)return x.innerHTML="",void x.append(p);x.textContent=p.textContent}}const Rn=new Set(["sanitize","allowList","sanitizeFn"]),mn="fade",Wi="show",vn="hide.bs.modal",_n="hover",ar={AUTO:"auto",TOP:"top",RIGHT:N()?"left":"right",BOTTOM:"bottom",LEFT:N()?"right":"left"},qn={allowList:nn,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},$n={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class zi extends re{constructor(p,x){if(void 0===a)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(p,x),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return qn}static get DefaultType(){return $n}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),J.off(this._element.closest(".modal"),vn,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const p=J.trigger(this._element,this.constructor.eventName("show")),x=(y(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(p.defaultPrevented||!x)return;this._disposePopper();const A=this._getTipElement();this._element.setAttribute("aria-describedby",A.getAttribute("id"));const{container:Q}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(Q.append(A),J.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(A),A.classList.add(Wi),"ontouchstart"in document.documentElement)for(const lt of[].concat(...document.body.children))J.on(lt,"mouseover",C);this._queueCallback(()=>{J.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!J.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Wi),"ontouchstart"in document.documentElement)for(const p of[].concat(...document.body.children))J.off(p,"mouseover",C);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),J.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(p){const x=this._getTemplateFactory(p).toHtml();if(!x)return null;x.classList.remove(mn,Wi),x.classList.add(`bs-${this.constructor.NAME}-auto`);const A=(Q=>{do{Q+=Math.floor(1e6*Math.random())}while(document.getElementById(Q));return Q})(this.constructor.NAME).toString();return x.setAttribute("id",A),this._isAnimated()&&x.classList.add(mn),x}setContent(p){this._newContent=p,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(p){return this._templateFactory?this._templateFactory.changeContent(p):this._templateFactory=new gn({...this._config,content:p,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(p){return this.constructor.getOrCreateInstance(p.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(mn)}_isShown(){return this.tip&&this.tip.classList.contains(Wi)}_createPopper(p){const x="function"==typeof this._config.placement?this._config.placement.call(this,p,this._element):this._config.placement,A=ar[x.toUpperCase()];return a.createPopper(this._element,p,this._getPopperConfig(A))}_getOffset(){const{offset:p}=this._config;return"string"==typeof p?p.split(",").map(x=>Number.parseInt(x,10)):"function"==typeof p?x=>p(x,this._element):p}_resolvePossibleFunction(p){return"function"==typeof p?p.call(this._element):p}_getPopperConfig(p){const x={placement:p,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:A=>{this._getTipElement().setAttribute("data-popper-placement",A.state.placement)}}]};return{...x,..."function"==typeof this._config.popperConfig?this._config.popperConfig(x):this._config.popperConfig}}_setListeners(){const p=this._config.trigger.split(" ");for(const x of p)if("click"===x)J.on(this._element,this.constructor.eventName("click"),this._config.selector,A=>{this._initializeOnDelegatedTarget(A).toggle()});else if("manual"!==x){const A=this.constructor.eventName(x===_n?"mouseenter":"focusin"),Q=this.constructor.eventName(x===_n?"mouseleave":"focusout");J.on(this._element,A,this._config.selector,lt=>{const ut=this._initializeOnDelegatedTarget(lt);ut._activeTrigger["focusin"===lt.type?"focus":_n]=!0,ut._enter()}),J.on(this._element,Q,this._config.selector,lt=>{const ut=this._initializeOnDelegatedTarget(lt);ut._activeTrigger["focusout"===lt.type?"focus":_n]=ut._element.contains(lt.relatedTarget),ut._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},J.on(this._element.closest(".modal"),vn,this._hideModalHandler)}_fixTitle(){const p=this._element.getAttribute("title");p&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",p),this._element.setAttribute("data-bs-original-title",p),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(p,x){clearTimeout(this._timeout),this._timeout=setTimeout(p,x)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(p){const x=xe.getDataAttributes(this._element);for(const A of Object.keys(x))Rn.has(A)&&delete x[A];return p={...x,..."object"==typeof p&&p?p:{}},p=this._mergeConfigObj(p),p=this._configAfterMerge(p),this._typeCheckConfig(p),p}_configAfterMerge(p){return p.container=!1===p.container?document.body:o(p.container),"number"==typeof p.delay&&(p.delay={show:p.delay,hide:p.delay}),"number"==typeof p.title&&(p.title=p.title.toString()),"number"==typeof p.content&&(p.content=p.content.toString()),p}_getDelegateConfig(){const p={};for(const x in this._config)this.constructor.Default[x]!==this._config[x]&&(p[x]=this._config[x]);return p.selector=!1,p.trigger="manual",p}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(p){return this.each(function(){const x=zi.getOrCreateInstance(this,p);if("string"==typeof p){if(void 0===x[p])throw new TypeError(`No method named "${p}"`);x[p]()}})}}H(zi);const Bn={...zi.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Ln={...zi.DefaultType,content:"(null|string|element|function)"};class Ki extends zi{static get Default(){return Bn}static get DefaultType(){return Ln}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(p){return this.each(function(){const x=Ki.getOrCreateInstance(this,p);if("string"==typeof p){if(void 0===x[p])throw new TypeError(`No method named "${p}"`);x[p]()}})}}H(Ki);const yn="click.bs.scrollspy",sn="active",Mn={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Kn={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ui extends re{constructor(p,x){super(p,x),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Mn}static get DefaultType(){return Kn}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const p of this._observableSections.values())this._observer.observe(p)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(p){return p.target=o(p.target)||document.body,p.rootMargin=p.offset?`${p.offset}px 0px -30%`:p.rootMargin,"string"==typeof p.threshold&&(p.threshold=p.threshold.split(",").map(x=>Number.parseFloat(x))),p}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(J.off(this._config.target,yn),J.on(this._config.target,yn,"[href]",p=>{const x=this._observableSections.get(p.target.hash);if(x){p.preventDefault();const A=this._rootElement||window,Q=x.offsetTop-this._element.offsetTop;if(A.scrollTo)return void A.scrollTo({top:Q,behavior:"smooth"});A.scrollTop=Q}}))}_getNewObserver(){return new IntersectionObserver(x=>this._observerCallback(x),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(p){const x=ut=>this._targetLinks.get(`#${ut.target.id}`),A=ut=>{this._previousScrollData.visibleEntryTop=ut.target.offsetTop,this._process(x(ut))},Q=(this._rootElement||document.documentElement).scrollTop,lt=Q>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=Q;for(const ut of p){if(!ut.isIntersecting){this._activeTarget=null,this._clearActiveClass(x(ut));continue}const Bt=ut.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(lt&&Bt){if(A(ut),!Q)return}else lt||Bt||A(ut)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const p=Nt.find("[href]",this._config.target);for(const x of p){if(!x.hash||m(x))continue;const A=Nt.findOne(x.hash,this._element);f(A)&&(this._targetLinks.set(x.hash,x),this._observableSections.set(x.hash,A))}}_process(p){this._activeTarget!==p&&(this._clearActiveClass(this._config.target),this._activeTarget=p,p.classList.add(sn),this._activateParents(p),J.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:p}))}_activateParents(p){if(p.classList.contains("dropdown-item"))Nt.findOne(".dropdown-toggle",p.closest(".dropdown")).classList.add(sn);else for(const x of Nt.parents(p,".nav, .list-group"))for(const A of Nt.prev(x,".nav-link, .nav-item > .nav-link, .list-group-item"))A.classList.add(sn)}_clearActiveClass(p){p.classList.remove(sn);const x=Nt.find("[href].active",p);for(const A of x)A.classList.remove(sn)}static jQueryInterface(p){return this.each(function(){const x=ui.getOrCreateInstance(this,p);if("string"==typeof p){if(void 0===x[p]||p.startsWith("_")||"constructor"===p)throw new TypeError(`No method named "${p}"`);x[p]()}})}}J.on(window,"load.bs.scrollspy.data-api",()=>{for(const D of Nt.find('[data-bs-spy="scroll"]'))ui.getOrCreateInstance(D)}),H(ui);const Qn="ArrowLeft",Wn="ArrowRight",bn="ArrowUp",zn="ArrowDown",xn="active",c="show",d='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',v=`.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${d}`;class _ extends re{constructor(p){super(p),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),J.on(this._element,"keydown.bs.tab",x=>this._keydown(x)))}static get NAME(){return"tab"}show(){const p=this._element;if(this._elemIsActive(p))return;const x=this._getActiveElem(),A=x?J.trigger(x,"hide.bs.tab",{relatedTarget:p}):null;J.trigger(p,"show.bs.tab",{relatedTarget:x}).defaultPrevented||A&&A.defaultPrevented||(this._deactivate(x,p),this._activate(p,x))}_activate(p,x){p&&(p.classList.add(xn),this._activate(i(p)),this._queueCallback(()=>{"tab"===p.getAttribute("role")?(p.removeAttribute("tabindex"),p.setAttribute("aria-selected",!0),this._toggleDropDown(p,!0),J.trigger(p,"shown.bs.tab",{relatedTarget:x})):p.classList.add(c)},p,p.classList.contains("fade")))}_deactivate(p,x){p&&(p.classList.remove(xn),p.blur(),this._deactivate(i(p)),this._queueCallback(()=>{"tab"===p.getAttribute("role")?(p.setAttribute("aria-selected",!1),p.setAttribute("tabindex","-1"),this._toggleDropDown(p,!1),J.trigger(p,"hidden.bs.tab",{relatedTarget:x})):p.classList.remove(c)},p,p.classList.contains("fade")))}_keydown(p){if(![Qn,Wn,bn,zn].includes(p.key))return;p.stopPropagation(),p.preventDefault();const x=[Wn,zn].includes(p.key),A=g(this._getChildren().filter(Q=>!m(Q)),p.target,x,!0);A&&(A.focus({preventScroll:!0}),_.getOrCreateInstance(A).show())}_getChildren(){return Nt.find(v,this._parent)}_getActiveElem(){return this._getChildren().find(p=>this._elemIsActive(p))||null}_setInitialAttributes(p,x){this._setAttributeIfNotExists(p,"role","tablist");for(const A of x)this._setInitialAttributesOnChild(A)}_setInitialAttributesOnChild(p){p=this._getInnerElement(p);const x=this._elemIsActive(p),A=this._getOuterElement(p);p.setAttribute("aria-selected",x),A!==p&&this._setAttributeIfNotExists(A,"role","presentation"),x||p.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(p,"role","tab"),this._setInitialAttributesOnTargetPanel(p)}_setInitialAttributesOnTargetPanel(p){const x=i(p);x&&(this._setAttributeIfNotExists(x,"role","tabpanel"),p.id&&this._setAttributeIfNotExists(x,"aria-labelledby",`#${p.id}`))}_toggleDropDown(p,x){const A=this._getOuterElement(p);if(!A.classList.contains("dropdown"))return;const Q=(lt,ut)=>{const Bt=Nt.findOne(lt,A);Bt&&Bt.classList.toggle(ut,x)};Q(".dropdown-toggle",xn),Q(".dropdown-menu",c),A.setAttribute("aria-expanded",x)}_setAttributeIfNotExists(p,x,A){p.hasAttribute(x)||p.setAttribute(x,A)}_elemIsActive(p){return p.classList.contains(xn)}_getInnerElement(p){return p.matches(v)?p:Nt.findOne(v,p)}_getOuterElement(p){return p.closest(".nav-item, .list-group-item")||p}static jQueryInterface(p){return this.each(function(){const x=_.getOrCreateInstance(this);if("string"==typeof p){if(void 0===x[p]||p.startsWith("_")||"constructor"===p)throw new TypeError(`No method named "${p}"`);x[p]()}})}}J.on(document,"click.bs.tab",d,function(D){["A","AREA"].includes(this.tagName)&&D.preventDefault(),m(this)||_.getOrCreateInstance(this).show()}),J.on(window,"load.bs.tab",()=>{for(const D of Nt.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))_.getOrCreateInstance(D)}),H(_);const S="hide",k="show",P="showing",R={animation:"boolean",autohide:"boolean",delay:"number"},Y={animation:!0,autohide:!0,delay:5e3};class K extends re{constructor(p,x){super(p,x),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Y}static get DefaultType(){return R}static get NAME(){return"toast"}show(){J.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(S),this._element.classList.add(k,P),this._queueCallback(()=>{this._element.classList.remove(P),J.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(J.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(P),this._queueCallback(()=>{this._element.classList.add(S),this._element.classList.remove(P,k),J.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(k),super.dispose()}isShown(){return this._element.classList.contains(k)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(p,x){switch(p.type){case"mouseover":case"mouseout":this._hasMouseInteraction=x;break;case"focusin":case"focusout":this._hasKeyboardInteraction=x}if(x)return void this._clearTimeout();const A=p.relatedTarget;this._element===A||this._element.contains(A)||this._maybeScheduleHide()}_setListeners(){J.on(this._element,"mouseover.bs.toast",p=>this._onInteraction(p,!0)),J.on(this._element,"mouseout.bs.toast",p=>this._onInteraction(p,!1)),J.on(this._element,"focusin.bs.toast",p=>this._onInteraction(p,!0)),J.on(this._element,"focusout.bs.toast",p=>this._onInteraction(p,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(p){return this.each(function(){const x=K.getOrCreateInstance(this,p);if("string"==typeof p){if(void 0===x[p])throw new TypeError(`No method named "${p}"`);x[p](this)}})}}return se(K),H(K),{Alert:Dt,Button:It,Carousel:fe,Collapse:I,Dropdown:De,Modal:Bi,Offcanvas:wi,Popover:Ki,ScrollSpy:ui,Tab:_,Toast:K,Tooltip:zi}}),function(h,n){"object"==typeof exports&&typeof module<"u"?module.exports=n():"function"==typeof define&&define.amd?define(n):(h=typeof globalThis<"u"?globalThis:h||self).bootstrap=n()}(this,function(){"use strict";const h="transitionend",n=T=>{let u=T.getAttribute("data-bs-target");if(!u||"#"===u){let b=T.getAttribute("href");if(!b||!b.includes("#")&&!b.startsWith("."))return null;b.includes("#")&&!b.startsWith("#")&&(b=`#${b.split("#")[1]}`),u=b&&"#"!==b?b.trim():null}return u},a=T=>{const u=n(T);return u&&document.querySelector(u)?u:null},l=T=>{const u=n(T);return u?document.querySelector(u):null},t=T=>{T.dispatchEvent(new Event(h))},e=T=>!(!T||"object"!=typeof T)&&(void 0!==T.jquery&&(T=T[0]),void 0!==T.nodeType),i=T=>e(T)?T.jquery?T[0]:T:"string"==typeof T&&T.length>0?document.querySelector(T):null,s=T=>{if(!e(T)||0===T.getClientRects().length)return!1;const u="visible"===getComputedStyle(T).getPropertyValue("visibility"),b=T.closest("details:not([open])");if(!b)return u;if(b!==T){const j=T.closest("summary");if(j&&j.parentNode!==b||null===j)return!1}return u},r=T=>!T||T.nodeType!==Node.ELEMENT_NODE||!!T.classList.contains("disabled")||(void 0!==T.disabled?T.disabled:T.hasAttribute("disabled")&&"false"!==T.getAttribute("disabled")),o=T=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof T.getRootNode){const u=T.getRootNode();return u instanceof ShadowRoot?u:null}return T instanceof ShadowRoot?T:T.parentNode?o(T.parentNode):null},f=()=>{},y=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,C=[],w=()=>"rtl"===document.documentElement.dir,E=T=>{var u;u=()=>{const b=y();if(b){const j=T.NAME,V=b.fn[j];b.fn[j]=T.jQueryInterface,b.fn[j].Constructor=T,b.fn[j].noConflict=()=>(b.fn[j]=V,T.jQueryInterface)}},"loading"===document.readyState?(C.length||document.addEventListener("DOMContentLoaded",()=>{for(const b of C)b()}),C.push(u)):u()},M=T=>{"function"==typeof T&&T()},N=(T,u,b=!0)=>{if(!b)return void M(T);const j=(at=>{if(!at)return 0;let{transitionDuration:dt,transitionDelay:wt}=window.getComputedStyle(at);const jt=Number.parseFloat(dt),Ft=Number.parseFloat(wt);return jt||Ft?(dt=dt.split(",")[0],wt=wt.split(",")[0],1e3*(Number.parseFloat(dt)+Number.parseFloat(wt))):0})(u)+5;let V=!1;const $=({target:at})=>{at===u&&(V=!0,u.removeEventListener(h,$),M(T))};u.addEventListener(h,$),setTimeout(()=>{V||t(u)},j)},H=(T,u,b,j)=>{const V=T.length;let $=T.indexOf(u);return-1===$?!b&&j?T[V-1]:T[0]:($+=b?1:-1,j&&($=($+V)%V),T[Math.max(0,Math.min($,V-1))])},nt=/[^.]*(?=\..*)\.|.*/,rt=/\..*/,g=/::\d+$/,F={};let U=1;const et={mouseenter:"mouseover",mouseleave:"mouseout"},st=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ct(T,u){return u&&`${u}::${U++}`||T.uidEvent||U++}function W(T){const u=ct(T);return T.uidEvent=u,F[u]=F[u]||{},F[u]}function z(T,u,b=null){return Object.values(T).find(j=>j.callable===u&&j.delegationSelector===b)}function tt(T,u,b){const j="string"==typeof u,V=j?b:u||b;let $=_t(T);return st.has($)||($=T),[j,V,$]}function ft(T,u,b,j,V){if("string"!=typeof u||!T)return;let[$,at,dt]=tt(u,b,j);var ee;u in et&&(ee=at,at=function(te){if(!te.relatedTarget||te.relatedTarget!==te.delegateTarget&&!te.delegateTarget.contains(te.relatedTarget))return ee.call(this,te)});const wt=W(T),jt=wt[dt]||(wt[dt]={}),Ft=z(jt,at,$?b:null);if(Ft)return void(Ft.oneOff=Ft.oneOff&&V);const kt=ct(at,u.replace(nt,"")),ne=$?function($t,ee,te){return function ie(Se){const Le=$t.querySelectorAll(ee);for(let{target:he}=Se;he&&he!==this;he=he.parentNode)for(const ve of Le)if(ve===he)return bt(Se,{delegateTarget:he}),ie.oneOff&&G.off($t,Se.type,ee,te),te.apply(he,[Se])}}(T,b,at):function($t,ee){return function te(ie){return bt(ie,{delegateTarget:$t}),te.oneOff&&G.off($t,ie.type,ee),ee.apply($t,[ie])}}(T,at);ne.delegationSelector=$?b:null,ne.callable=at,ne.oneOff=V,ne.uidEvent=kt,jt[kt]=ne,T.addEventListener(dt,ne,$)}function ot(T,u,b,j,V){const $=z(u[b],j,V);$&&(T.removeEventListener(b,$,Boolean(V)),delete u[b][$.uidEvent])}function vt(T,u,b,j){const V=u[b]||{};for(const $ of Object.keys(V))if($.includes(j)){const at=V[$];ot(T,u,b,at.callable,at.delegationSelector)}}function _t(T){return T=T.replace(rt,""),et[T]||T}const G={on(T,u,b,j){ft(T,u,b,j,!1)},one(T,u,b,j){ft(T,u,b,j,!0)},off(T,u,b,j){if("string"!=typeof u||!T)return;const[V,$,at]=tt(u,b,j),dt=at!==u,wt=W(T),jt=wt[at]||{},Ft=u.startsWith(".");if(void 0===$){if(Ft)for(const kt of Object.keys(wt))vt(T,wt,kt,u.slice(1));for(const kt of Object.keys(jt)){const ne=kt.replace(g,"");if(!dt||u.includes(ne)){const $t=jt[kt];ot(T,wt,at,$t.callable,$t.delegationSelector)}}}else{if(!Object.keys(jt).length)return;ot(T,wt,at,$,V?b:null)}},trigger(T,u,b){if("string"!=typeof u||!T)return null;const j=y();let V=null,$=!0,at=!0,dt=!1;u!==_t(u)&&j&&(V=j.Event(u,b),j(T).trigger(V),$=!V.isPropagationStopped(),at=!V.isImmediatePropagationStopped(),dt=V.isDefaultPrevented());let wt=new Event(u,{bubbles:$,cancelable:!0});return wt=bt(wt,b),dt&&wt.preventDefault(),at&&T.dispatchEvent(wt),wt.defaultPrevented&&V&&V.preventDefault(),wt}};function bt(T,u){for(const[b,j]of Object.entries(u||{}))try{T[b]=j}catch{Object.defineProperty(T,b,{configurable:!0,get:()=>j})}return T}const Ct=new Map,J={set(T,u,b){Ct.has(T)||Ct.set(T,new Map);const j=Ct.get(T);j.has(u)||0===j.size?j.set(u,b):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(j.keys())[0]}.`)},get:(T,u)=>Ct.has(T)&&Ct.get(T).get(u)||null,remove(T,u){if(!Ct.has(T))return;const b=Ct.get(T);b.delete(u),0===b.size&&Ct.delete(T)}};function Ot(T){if("true"===T)return!0;if("false"===T)return!1;if(T===Number(T).toString())return Number(T);if(""===T||"null"===T)return null;if("string"!=typeof T)return T;try{return JSON.parse(decodeURIComponent(T))}catch{return T}}function Tt(T){return T.replace(/[A-Z]/g,u=>`-${u.toLowerCase()}`)}const Lt={setDataAttribute(T,u,b){T.setAttribute(`data-bs-${Tt(u)}`,b)},removeDataAttribute(T,u){T.removeAttribute(`data-bs-${Tt(u)}`)},getDataAttributes(T){if(!T)return{};const u={},b=Object.keys(T.dataset).filter(j=>j.startsWith("bs")&&!j.startsWith("bsConfig"));for(const j of b){let V=j.replace(/^bs/,"");V=V.charAt(0).toLowerCase()+V.slice(1,V.length),u[V]=Ot(T.dataset[j])}return u},getDataAttribute:(T,u)=>Ot(T.getAttribute(`data-bs-${Tt(u)}`))};class zt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(u){return u=this._mergeConfigObj(u),u=this._configAfterMerge(u),this._typeCheckConfig(u),u}_configAfterMerge(u){return u}_mergeConfigObj(u,b){const j=e(b)?Lt.getDataAttribute(b,"config"):{};return{...this.constructor.Default,..."object"==typeof j?j:{},...e(b)?Lt.getDataAttributes(b):{},..."object"==typeof u?u:{}}}_typeCheckConfig(u,b=this.constructor.DefaultType){for(const V of Object.keys(b)){const $=b[V],at=u[V],dt=e(at)?"element":null==(j=at)?`${j}`:Object.prototype.toString.call(j).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp($).test(dt))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${V}" provided type "${dt}" but expected type "${$}".`)}var j}}class Xt extends zt{constructor(u,b){super(),(u=i(u))&&(this._element=u,this._config=this._getConfig(b),J.set(this._element,this.constructor.DATA_KEY,this))}dispose(){J.remove(this._element,this.constructor.DATA_KEY),G.off(this._element,this.constructor.EVENT_KEY);for(const u of Object.getOwnPropertyNames(this))this[u]=null}_queueCallback(u,b,j=!0){N(u,b,j)}_getConfig(u){return u=this._mergeConfigObj(u,this._element),u=this._configAfterMerge(u),this._typeCheckConfig(u),u}static getInstance(u){return J.get(i(u),this.DATA_KEY)}static getOrCreateInstance(u,b={}){return this.getInstance(u)||new this(u,"object"==typeof b?b:null)}static get VERSION(){return"5.2.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(u){return`${u}${this.EVENT_KEY}`}}const xe=(T,u="hide")=>{const j=T.NAME;G.on(document,`click.dismiss${T.EVENT_KEY}`,`[data-bs-dismiss="${j}"]`,function(V){if(["A","AREA"].includes(this.tagName)&&V.preventDefault(),r(this))return;const $=l(this)||this.closest(`.${j}`);T.getOrCreateInstance($)[u]()})};class _e extends Xt{static get NAME(){return"alert"}close(){if(G.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const u=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,u)}_destroyElement(){this._element.remove(),G.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(u){return this.each(function(){const b=_e.getOrCreateInstance(this);if("string"==typeof u){if(void 0===b[u]||u.startsWith("_")||"constructor"===u)throw new TypeError(`No method named "${u}"`);b[u](this)}})}}xe(_e,"close"),E(_e);const re='[data-bs-toggle="button"]';class se extends Xt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(u){return this.each(function(){const b=se.getOrCreateInstance(this);"toggle"===u&&b[u]()})}}G.on(document,"click.bs.button.data-api",re,T=>{T.preventDefault();const u=T.target.closest(re);se.getOrCreateInstance(u).toggle()}),E(se);const Dt={find:(T,u=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(u,T)),findOne:(T,u=document.documentElement)=>Element.prototype.querySelector.call(u,T),children:(T,u)=>[].concat(...T.children).filter(b=>b.matches(u)),parents(T,u){const b=[];let j=T.parentNode.closest(u);for(;j;)b.push(j),j=j.parentNode.closest(u);return b},prev(T,u){let b=T.previousElementSibling;for(;b;){if(b.matches(u))return[b];b=b.previousElementSibling}return[]},next(T,u){let b=T.nextElementSibling;for(;b;){if(b.matches(u))return[b];b=b.nextElementSibling}return[]},focusableChildren(T){const u=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(b=>`${b}:not([tabindex^="-"])`).join(",");return this.find(u,T).filter(b=>!r(b)&&s(b))}},Ne={endCallback:null,leftCallback:null,rightCallback:null},It={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Nt extends zt{constructor(u,b){super(),this._element=u,u&&Nt.isSupported()&&(this._config=this._getConfig(b),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Ne}static get DefaultType(){return It}static get NAME(){return"swipe"}dispose(){G.off(this._element,".bs.swipe")}_start(u){this._supportPointerEvents?this._eventIsPointerPenTouch(u)&&(this._deltaX=u.clientX):this._deltaX=u.touches[0].clientX}_end(u){this._eventIsPointerPenTouch(u)&&(this._deltaX=u.clientX-this._deltaX),this._handleSwipe(),M(this._config.endCallback)}_move(u){this._deltaX=u.touches&&u.touches.length>1?0:u.touches[0].clientX-this._deltaX}_handleSwipe(){const u=Math.abs(this._deltaX);if(u<=40)return;const b=u/this._deltaX;this._deltaX=0,b&&M(b>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(G.on(this._element,"pointerdown.bs.swipe",u=>this._start(u)),G.on(this._element,"pointerup.bs.swipe",u=>this._end(u)),this._element.classList.add("pointer-event")):(G.on(this._element,"touchstart.bs.swipe",u=>this._start(u)),G.on(this._element,"touchmove.bs.swipe",u=>this._move(u)),G.on(this._element,"touchend.bs.swipe",u=>this._end(u)))}_eventIsPointerPenTouch(u){return this._supportPointerEvents&&("pen"===u.pointerType||"touch"===u.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const qe="next",Je="prev",Re="left",me="right",ye="slid.bs.carousel",we="carousel",Ee="active",ni={ArrowLeft:me,ArrowRight:Re},Mi={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ze={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class li extends Xt{constructor(u,b){super(u,b),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Dt.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===we&&this.cycle()}static get Default(){return Mi}static get DefaultType(){return ze}static get NAME(){return"carousel"}next(){this._slide(qe)}nextWhenVisible(){!document.hidden&&s(this._element)&&this.next()}prev(){this._slide(Je)}pause(){this._isSliding&&t(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?G.one(this._element,ye,()=>this.cycle()):this.cycle())}to(u){const b=this._getItems();if(u>b.length-1||u<0)return;if(this._isSliding)return void G.one(this._element,ye,()=>this.to(u));const j=this._getItemIndex(this._getActive());j!==u&&this._slide(u>j?qe:Je,b[u])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(u){return u.defaultInterval=u.interval,u}_addEventListeners(){this._config.keyboard&&G.on(this._element,"keydown.bs.carousel",u=>this._keydown(u)),"hover"===this._config.pause&&(G.on(this._element,"mouseenter.bs.carousel",()=>this.pause()),G.on(this._element,"mouseleave.bs.carousel",()=>this._maybeEnableCycle())),this._config.touch&&Nt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const b of Dt.find(".carousel-item img",this._element))G.on(b,"dragstart.bs.carousel",j=>j.preventDefault());this._swipeHelper=new Nt(this._element,{leftCallback:()=>this._slide(this._directionToOrder(Re)),rightCallback:()=>this._slide(this._directionToOrder(me)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(u){if(/input|textarea/i.test(u.target.tagName))return;const b=ni[u.key];b&&(u.preventDefault(),this._slide(this._directionToOrder(b)))}_getItemIndex(u){return this._getItems().indexOf(u)}_setActiveIndicatorElement(u){if(!this._indicatorsElement)return;const b=Dt.findOne(".active",this._indicatorsElement);b.classList.remove(Ee),b.removeAttribute("aria-current");const j=Dt.findOne(`[data-bs-slide-to="${u}"]`,this._indicatorsElement);j&&(j.classList.add(Ee),j.setAttribute("aria-current","true"))}_updateInterval(){const u=this._activeElement||this._getActive();if(!u)return;const b=Number.parseInt(u.getAttribute("data-bs-interval"),10);this._config.interval=b||this._config.defaultInterval}_slide(u,b=null){if(this._isSliding)return;const j=this._getActive(),V=u===qe,$=b||H(this._getItems(),j,V,this._config.wrap);if($===j)return;const at=this._getItemIndex($),dt=kt=>G.trigger(this._element,kt,{relatedTarget:$,direction:this._orderToDirection(u),from:this._getItemIndex(j),to:at});if(dt("slide.bs.carousel").defaultPrevented||!j||!$)return;const wt=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(at),this._activeElement=$;const jt=V?"carousel-item-start":"carousel-item-end",Ft=V?"carousel-item-next":"carousel-item-prev";$.classList.add(Ft),j.classList.add(jt),$.classList.add(jt),this._queueCallback(()=>{$.classList.remove(jt,Ft),$.classList.add(Ee),j.classList.remove(Ee,Ft,jt),this._isSliding=!1,dt(ye)},j,this._isAnimated()),wt&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Dt.findOne(".active.carousel-item",this._element)}_getItems(){return Dt.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(u){return w()?u===Re?Je:qe:u===Re?qe:Je}_orderToDirection(u){return w()?u===Je?Re:me:u===Je?me:Re}static jQueryInterface(u){return this.each(function(){const b=li.getOrCreateInstance(this,u);if("number"!=typeof u){if("string"==typeof u){if(void 0===b[u]||u.startsWith("_")||"constructor"===u)throw new TypeError(`No method named "${u}"`);b[u]()}}else b.to(u)})}}G.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(T){const u=l(this);if(!u||!u.classList.contains(we))return;T.preventDefault();const b=li.getOrCreateInstance(u),j=this.getAttribute("data-bs-slide-to");return j?(b.to(j),void b._maybeEnableCycle()):"next"===Lt.getDataAttribute(this,"slide")?(b.next(),void b._maybeEnableCycle()):(b.prev(),void b._maybeEnableCycle())}),G.on(window,"load.bs.carousel.data-api",()=>{const T=Dt.find('[data-bs-ride="carousel"]');for(const u of T)li.getOrCreateInstance(u)}),E(li);const Si="show",Me="collapse",fe="collapsing",Xe='[data-bs-toggle="collapse"]',Be={parent:null,toggle:!0},ci={parent:"(null|element)",toggle:"boolean"};class Ye extends Xt{constructor(u,b){super(u,b),this._isTransitioning=!1,this._triggerArray=[];const j=Dt.find(Xe);for(const V of j){const $=a(V),at=Dt.find($).filter(dt=>dt===this._element);null!==$&&at.length&&this._triggerArray.push(V)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Be}static get DefaultType(){return ci}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let u=[];if(this._config.parent&&(u=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(V=>V!==this._element).map(V=>Ye.getOrCreateInstance(V,{toggle:!1}))),u.length&&u[0]._isTransitioning||G.trigger(this._element,"show.bs.collapse").defaultPrevented)return;for(const V of u)V.hide();const b=this._getDimension();this._element.classList.remove(Me),this._element.classList.add(fe),this._element.style[b]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const j=`scroll${b[0].toUpperCase()+b.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(fe),this._element.classList.add(Me,Si),this._element.style[b]="",G.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[b]=`${this._element[j]}px`}hide(){if(this._isTransitioning||!this._isShown()||G.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const u=this._getDimension();this._element.style[u]=`${this._element.getBoundingClientRect()[u]}px`,this._element.classList.add(fe),this._element.classList.remove(Me,Si);for(const b of this._triggerArray){const j=l(b);j&&!this._isShown(j)&&this._addAriaAndCollapsedClass([b],!1)}this._isTransitioning=!0,this._element.style[u]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(fe),this._element.classList.add(Me),G.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(u=this._element){return u.classList.contains(Si)}_configAfterMerge(u){return u.toggle=Boolean(u.toggle),u.parent=i(u.parent),u}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const u=this._getFirstLevelChildren(Xe);for(const b of u){const j=l(b);j&&this._addAriaAndCollapsedClass([b],this._isShown(j))}}_getFirstLevelChildren(u){const b=Dt.find(":scope .collapse .collapse",this._config.parent);return Dt.find(u,this._config.parent).filter(j=>!b.includes(j))}_addAriaAndCollapsedClass(u,b){if(u.length)for(const j of u)j.classList.toggle("collapsed",!b),j.setAttribute("aria-expanded",b)}static jQueryInterface(u){const b={};return"string"==typeof u&&/show|hide/.test(u)&&(b.toggle=!1),this.each(function(){const j=Ye.getOrCreateInstance(this,b);if("string"==typeof u){if(void 0===j[u])throw new TypeError(`No method named "${u}"`);j[u]()}})}}G.on(document,"click.bs.collapse.data-api",Xe,function(T){("A"===T.target.tagName||T.delegateTarget&&"A"===T.delegateTarget.tagName)&&T.preventDefault();const u=a(this),b=Dt.find(u);for(const j of b)Ye.getOrCreateInstance(j,{toggle:!1}).toggle()}),E(Ye);var ce="top",O="bottom",I="right",X="left",Z="auto",gt=[ce,O,I,X],pt="start",ht="end",Et="clippingParents",At="viewport",Rt="popper",Yt="reference",Mt=gt.reduce(function(T,u){return T.concat([u+"-"+pt,u+"-"+ht])},[]),Ht=[].concat(gt,[Z]).reduce(function(T,u){return T.concat([u,u+"-"+pt,u+"-"+ht])},[]),Kt="beforeRead",Ve="afterRead",hi="beforeMain",Ue="afterMain",De="beforeWrite",Gi="afterWrite",cn=[Kt,"read",Ve,hi,"main",Ue,De,"write",Gi];function $e(T){return T?(T.nodeName||"").toLowerCase():null}function Ke(T){if(null==T)return window;if("[object Window]"!==T.toString()){var u=T.ownerDocument;return u&&u.defaultView||window}return T}function Oi(T){return T instanceof Ke(T).Element||T instanceof Element}function ti(T){return T instanceof Ke(T).HTMLElement||T instanceof HTMLElement}function On(T){return typeof ShadowRoot<"u"&&(T instanceof Ke(T).ShadowRoot||T instanceof ShadowRoot)}const hn={name:"applyStyles",enabled:!0,phase:"write",fn:function(T){var u=T.state;Object.keys(u.elements).forEach(function(b){var j=u.styles[b]||{},V=u.attributes[b]||{},$=u.elements[b];ti($)&&$e($)&&(Object.assign($.style,j),Object.keys(V).forEach(function(at){var dt=V[at];!1===dt?$.removeAttribute(at):$.setAttribute(at,!0===dt?"":dt)}))})},effect:function(T){var u=T.state,b={popper:{position:u.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(u.elements.popper.style,b.popper),u.styles=b,u.elements.arrow&&Object.assign(u.elements.arrow.style,b.arrow),function(){Object.keys(u.elements).forEach(function(j){var V=u.elements[j],$=u.attributes[j]||{},at=Object.keys(u.styles.hasOwnProperty(j)?u.styles[j]:b[j]).reduce(function(dt,wt){return dt[wt]="",dt},{});ti(V)&&$e(V)&&(Object.assign(V.style,at),Object.keys($).forEach(function(dt){V.removeAttribute(dt)}))})}},requires:["computeStyles"]};function mi(T){return T.split("-")[0]}var Ei=Math.max,un=Math.min,qi=Math.round;function En(){var T=navigator.userAgentData;return null!=T&&T.brands?T.brands.map(function(u){return u.brand+"/"+u.version}).join(" "):navigator.userAgent}function fn(){return!/^((?!chrome|android).)*safari/i.test(En())}function Fi(T,u,b){void 0===u&&(u=!1),void 0===b&&(b=!1);var j=T.getBoundingClientRect(),V=1,$=1;u&&ti(T)&&(V=T.offsetWidth>0&&qi(j.width)/T.offsetWidth||1,$=T.offsetHeight>0&&qi(j.height)/T.offsetHeight||1);var at=(Oi(T)?Ke(T):window).visualViewport,dt=!fn()&&b,wt=(j.left+(dt&&at?at.offsetLeft:0))/V,jt=(j.top+(dt&&at?at.offsetTop:0))/$,Ft=j.width/V,kt=j.height/$;return{width:Ft,height:kt,top:jt,right:wt+Ft,bottom:jt+kt,left:wt,x:wt,y:jt}}function ei(T){var u=Fi(T),b=T.offsetWidth,j=T.offsetHeight;return Math.abs(u.width-b)<=1&&(b=u.width),Math.abs(u.height-j)<=1&&(j=u.height),{x:T.offsetLeft,y:T.offsetTop,width:b,height:j}}function Ni(T,u){var b=u.getRootNode&&u.getRootNode();if(T.contains(u))return!0;if(b&&On(b)){var j=u;do{if(j&&T.isSameNode(j))return!0;j=j.parentNode||j.host}while(j)}return!1}function ri(T){return Ke(T).getComputedStyle(T)}function Ri(T){return["table","td","th"].indexOf($e(T))>=0}function Ai(T){return((Oi(T)?T.ownerDocument:T.document)||window.document).documentElement}function An(T){return"html"===$e(T)?T:T.assignedSlot||T.parentNode||(On(T)?T.host:null)||Ai(T)}function Bi(T){return ti(T)&&"fixed"!==ri(T).position?T.offsetParent:null}function Hi(T){for(var u=Ke(T),b=Bi(T);b&&Ri(b)&&"static"===ri(b).position;)b=Bi(b);return b&&("html"===$e(b)||"body"===$e(b)&&"static"===ri(b).position)?u:b||function(j){var V=/firefox/i.test(En());if(/Trident/i.test(En())&&ti(j)&&"fixed"===ri(j).position)return null;var $=An(j);for(On($)&&($=$.host);ti($)&&["html","body"].indexOf($e($))<0;){var at=ri($);if("none"!==at.transform||"none"!==at.perspective||"paint"===at.contain||-1!==["transform","perspective"].indexOf(at.willChange)||V&&"filter"===at.willChange||V&&at.filter&&"none"!==at.filter)return $;$=$.parentNode}return null}(T)||u}function dn(T){return["top","bottom"].indexOf(T)>=0?"x":"y"}function ki(T,u,b){return Ei(T,un(u,b))}function kn(T){return Object.assign({},{top:0,right:0,bottom:0,left:0},T)}function si(T,u){return u.reduce(function(b,j){return b[j]=T,b},{})}const Dn={name:"arrow",enabled:!0,phase:"main",fn:function(T){var u,Oe,Te,b=T.state,j=T.name,V=T.options,$=b.elements.arrow,at=b.modifiersData.popperOffsets,dt=mi(b.placement),wt=dn(dt),jt=[X,I].indexOf(dt)>=0?"height":"width";if($&&at){var Ft=(Te=b,kn("number"!=typeof(Oe="function"==typeof(Oe=V.padding)?Oe(Object.assign({},Te.rects,{placement:Te.placement})):Oe)?Oe:si(Oe,gt))),kt=ei($),ne="y"===wt?ce:X,$t="y"===wt?O:I,ee=b.rects.reference[jt]+b.rects.reference[wt]-at[wt]-b.rects.popper[jt],te=at[wt]-b.rects.reference[wt],ie=Hi($),Se=ie?"y"===wt?ie.clientHeight||0:ie.clientWidth||0:0,ae=Se/2-kt[jt]/2+(ee/2-te/2),de=ki(Ft[ne],ae,Se-kt[jt]-Ft[$t]);b.modifiersData[j]=((u={})[wt]=de,u.centerOffset=de-ae,u)}},effect:function(T){var u=T.state,b=T.options.element,j=void 0===b?"[data-popper-arrow]":b;null!=j&&("string"!=typeof j||(j=u.elements.popper.querySelector(j)))&&Ni(u.elements.popper,j)&&(u.elements.arrow=j)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function xi(T){return T.split("-")[1]}var sr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function wi(T){var u,b=T.popper,j=T.popperRect,V=T.placement,$=T.variation,at=T.offsets,dt=T.position,wt=T.gpuAcceleration,jt=T.adaptive,Ft=T.roundOffsets,kt=T.isFixed,ne=at.x,$t=void 0===ne?0:ne,ee=at.y,te=void 0===ee?0:ee,ie="function"==typeof Ft?Ft({x:$t,y:te}):{x:$t,y:te};$t=ie.x,te=ie.y;var Se=at.hasOwnProperty("x"),Le=at.hasOwnProperty("y"),he=X,ve=ce,ae=window;if(jt){var de=Hi(b),Ce="clientHeight",Oe="clientWidth";de===Ke(b)&&"static"!==ri(de=Ai(b)).position&&"absolute"===dt&&(Ce="scrollHeight",Oe="scrollWidth"),(V===ce||(V===X||V===I)&&$===ht)&&(ve=O,te-=(kt&&de===ae&&ae.visualViewport?ae.visualViewport.height:de[Ce])-j.height,te*=wt?1:-1),V!==X&&(V!==ce&&V!==O||$!==ht)||(he=I,$t-=(kt&&de===ae&&ae.visualViewport?ae.visualViewport.width:de[Oe])-j.width,$t*=wt?1:-1)}var Te,en,Vi,yi,We=Object.assign({position:dt},jt&&sr),Li=!0===Ft?(Vi=(en={x:$t,y:te}).y,yi=window.devicePixelRatio||1,{x:qi(en.x*yi)/yi||0,y:qi(Vi*yi)/yi||0}):{x:$t,y:te};return $t=Li.x,te=Li.y,Object.assign({},We,wt?((Te={})[ve]=Le?"0":"",Te[he]=Se?"0":"",Te.transform=(ae.devicePixelRatio||1)<=1?"translate("+$t+"px, "+te+"px)":"translate3d("+$t+"px, "+te+"px, 0)",Te):((u={})[ve]=Le?te+"px":"",u[he]=Se?$t+"px":"",u.transform="",u))}const Di={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(T){var u=T.state,b=T.options,j=b.gpuAcceleration,V=void 0===j||j,$=b.adaptive,at=void 0===$||$,dt=b.roundOffsets,wt=void 0===dt||dt,jt={placement:mi(u.placement),variation:xi(u.placement),popper:u.elements.popper,popperRect:u.rects.popper,gpuAcceleration:V,isFixed:"fixed"===u.options.strategy};null!=u.modifiersData.popperOffsets&&(u.styles.popper=Object.assign({},u.styles.popper,wi(Object.assign({},jt,{offsets:u.modifiersData.popperOffsets,position:u.options.strategy,adaptive:at,roundOffsets:wt})))),null!=u.modifiersData.arrow&&(u.styles.arrow=Object.assign({},u.styles.arrow,wi(Object.assign({},jt,{offsets:u.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:wt})))),u.attributes.popper=Object.assign({},u.attributes.popper,{"data-popper-placement":u.placement})},data:{}};var Ci={passive:!0};const pn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(T){var u=T.state,b=T.instance,j=T.options,V=j.scroll,$=void 0===V||V,at=j.resize,dt=void 0===at||at,wt=Ke(u.elements.popper),jt=[].concat(u.scrollParents.reference,u.scrollParents.popper);return $&&jt.forEach(function(Ft){Ft.addEventListener("scroll",b.update,Ci)}),dt&&wt.addEventListener("resize",b.update,Ci),function(){$&&jt.forEach(function(Ft){Ft.removeEventListener("scroll",b.update,Ci)}),dt&&wt.removeEventListener("resize",b.update,Ci)}},data:{}};var or={left:"right",right:"left",bottom:"top",top:"bottom"};function nn(T){return T.replace(/left|right|bottom|top/g,function(u){return or[u]})}var Gn={start:"end",end:"start"};function rn(T){return T.replace(/start|end/g,function(u){return Gn[u]})}function Pn(T){var u=Ke(T);return{scrollLeft:u.pageXOffset,scrollTop:u.pageYOffset}}function gn(T){return Fi(Ai(T)).left+Pn(T).scrollLeft}function Rn(T){var u=ri(T);return/auto|scroll|overlay|hidden/.test(u.overflow+u.overflowY+u.overflowX)}function mn(T){return["html","body","#document"].indexOf($e(T))>=0?T.ownerDocument.body:ti(T)&&Rn(T)?T:mn(An(T))}function Wi(T,u){var b;void 0===u&&(u=[]);var j=mn(T),V=j===(null==(b=T.ownerDocument)?void 0:b.body),$=Ke(j),at=V?[$].concat($.visualViewport||[],Rn(j)?j:[]):j,dt=u.concat(at);return V?dt:dt.concat(Wi(An(at)))}function jn(T){return Object.assign({},T,{left:T.x,top:T.y,right:T.x+T.width,bottom:T.y+T.height})}function vn(T,u,b){return u===At?jn(function(j,V){var $=Ke(j),at=Ai(j),dt=$.visualViewport,wt=at.clientWidth,jt=at.clientHeight,Ft=0,kt=0;if(dt){wt=dt.width,jt=dt.height;var ne=fn();(ne||!ne&&"fixed"===V)&&(Ft=dt.offsetLeft,kt=dt.offsetTop)}return{width:wt,height:jt,x:Ft+gn(j),y:kt}}(T,b)):Oi(u)?(($=Fi(j=u,!1,"fixed"===b)).top=$.top+j.clientTop,$.left=$.left+j.clientLeft,$.bottom=$.top+j.clientHeight,$.right=$.left+j.clientWidth,$.width=j.clientWidth,$.height=j.clientHeight,$.x=$.left,$.y=$.top,$):jn(function(j){var V,$=Ai(j),at=Pn(j),dt=null==(V=j.ownerDocument)?void 0:V.body,wt=Ei($.scrollWidth,$.clientWidth,dt?dt.scrollWidth:0,dt?dt.clientWidth:0),jt=Ei($.scrollHeight,$.clientHeight,dt?dt.scrollHeight:0,dt?dt.clientHeight:0),Ft=-at.scrollLeft+gn(j),kt=-at.scrollTop;return"rtl"===ri(dt||$).direction&&(Ft+=Ei($.clientWidth,dt?dt.clientWidth:0)-wt),{width:wt,height:jt,x:Ft,y:kt}}(Ai(T)));var j,$}function _n(T){var u,b=T.reference,j=T.element,V=T.placement,$=V?mi(V):null,at=V?xi(V):null,dt=b.x+b.width/2-j.width/2,wt=b.y+b.height/2-j.height/2;switch($){case ce:u={x:dt,y:b.y-j.height};break;case O:u={x:dt,y:b.y+b.height};break;case I:u={x:b.x+b.width,y:wt};break;case X:u={x:b.x-j.width,y:wt};break;default:u={x:b.x,y:b.y}}var jt=$?dn($):null;if(null!=jt){var Ft="y"===jt?"height":"width";switch(at){case pt:u[jt]=u[jt]-(b[Ft]/2-j[Ft]/2);break;case ht:u[jt]=u[jt]+(b[Ft]/2-j[Ft]/2)}}return u}function $i(T,u){void 0===u&&(u={});var _i,Vi,yi,ai,ke,bi,Ui,an,ln,ii,j=u.placement,V=void 0===j?T.placement:j,$=u.strategy,at=void 0===$?T.strategy:$,dt=u.boundary,wt=void 0===dt?Et:dt,jt=u.rootBoundary,Ft=void 0===jt?At:jt,kt=u.elementContext,ne=void 0===kt?Rt:kt,$t=u.altBoundary,ee=void 0!==$t&&$t,te=u.padding,ie=void 0===te?0:te,Se=kn("number"!=typeof ie?ie:si(ie,gt)),he=T.rects.popper,ve=T.elements[ee?ne===Rt?Yt:Rt:ne],ae=(_i=Oi(ve)?ve:ve.contextElement||Ai(T.elements.popper),yi=Ft,ai=at,an="clippingParents"===(Vi=wt)?(bi=Wi(An(ke=_i)),Oi(Ui=["absolute","fixed"].indexOf(ri(ke).position)>=0&&ti(ke)?Hi(ke):ke)?bi.filter(function(Nn){return Oi(Nn)&&Ni(Nn,Ui)&&"body"!==$e(Nn)}):[]):[].concat(Vi),ii=(ln=[].concat(an,[yi])).reduce(function(ke,bi){var Ui=vn(_i,bi,ai);return ke.top=Ei(Ui.top,ke.top),ke.right=un(Ui.right,ke.right),ke.bottom=un(Ui.bottom,ke.bottom),ke.left=Ei(Ui.left,ke.left),ke},vn(_i,ln[0],ai)),ii.width=ii.right-ii.left,ii.height=ii.bottom-ii.top,ii.x=ii.left,ii.y=ii.top,ii),de=Fi(T.elements.reference),Ce=_n({reference:de,element:he,strategy:"absolute",placement:V}),Oe=jn(Object.assign({},he,Ce)),Te=ne===Rt?Oe:de,We={top:ae.top-Te.top+Se.top,bottom:Te.bottom-ae.bottom+Se.bottom,left:ae.left-Te.left+Se.left,right:Te.right-ae.right+Se.right},Li=T.modifiersData.offset;if(ne===Rt&&Li){var en=Li[V];Object.keys(We).forEach(function(_i){var Vi=[I,O].indexOf(_i)>=0?1:-1,yi=[ce,O].indexOf(_i)>=0?"y":"x";We[_i]+=en[yi]*Vi})}return We}const qn={name:"flip",enabled:!0,phase:"main",fn:function(T){var u=T.state,b=T.options,j=T.name;if(!u.modifiersData[j]._skip){for(var V=b.mainAxis,$=void 0===V||V,at=b.altAxis,dt=void 0===at||at,wt=b.fallbackPlacements,jt=b.padding,Ft=b.boundary,kt=b.rootBoundary,ne=b.altBoundary,$t=b.flipVariations,ee=void 0===$t||$t,te=b.allowedAutoPlacements,ie=u.options.placement,Se=mi(ie),Le=wt||(Se!==ie&&ee?function(ke){if(mi(ke)===Z)return[];var bi=nn(ke);return[rn(ke),bi,rn(bi)]}(ie):[nn(ie)]),he=[ie].concat(Le).reduce(function(ke,bi){return ke.concat(mi(bi)===Z?function ar(T,u){void 0===u&&(u={});var V=u.boundary,$=u.rootBoundary,at=u.padding,dt=u.flipVariations,wt=u.allowedAutoPlacements,jt=void 0===wt?Ht:wt,Ft=xi(u.placement),kt=Ft?dt?Mt:Mt.filter(function(ee){return xi(ee)===Ft}):gt,ne=kt.filter(function(ee){return jt.indexOf(ee)>=0});0===ne.length&&(ne=kt);var $t=ne.reduce(function(ee,te){return ee[te]=$i(T,{placement:te,boundary:V,rootBoundary:$,padding:at})[mi(te)],ee},{});return Object.keys($t).sort(function(ee,te){return $t[ee]-$t[te]})}(u,{placement:bi,boundary:Ft,rootBoundary:kt,padding:jt,flipVariations:ee,allowedAutoPlacements:te}):bi)},[]),ve=u.rects.reference,ae=u.rects.popper,de=new Map,Ce=!0,Oe=he[0],Te=0;Te<he.length;Te++){var We=he[Te],Li=mi(We),en=xi(We)===pt,_i=[ce,O].indexOf(Li)>=0,Vi=_i?"width":"height",yi=$i(u,{placement:We,boundary:Ft,rootBoundary:kt,altBoundary:ne,padding:jt}),ai=_i?en?I:X:en?O:ce;ve[Vi]>ae[Vi]&&(ai=nn(ai));var an=nn(ai),ln=[];if($&&ln.push(yi[Li]<=0),dt&&ln.push(yi[ai]<=0,yi[an]<=0),ln.every(function(ke){return ke})){Oe=We,Ce=!1;break}de.set(We,ln)}if(Ce)for(var rr=function(ke){var bi=he.find(function(Ui){var Nn=de.get(Ui);if(Nn)return Nn.slice(0,ke).every(function(mr){return mr})});if(bi)return Oe=bi,"break"},ii=ee?3:1;ii>0&&"break"!==rr(ii);ii--);u.placement!==Oe&&(u.modifiersData[j]._skip=!0,u.placement=Oe,u.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function $n(T,u,b){return void 0===b&&(b={x:0,y:0}),{top:T.top-u.height-b.y,right:T.right-u.width+b.x,bottom:T.bottom-u.height+b.y,left:T.left-u.width-b.x}}function zi(T){return[ce,I,O,X].some(function(u){return T[u]>=0})}const Bn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(T){var u=T.state,b=T.name,j=u.rects.reference,V=u.rects.popper,$=u.modifiersData.preventOverflow,at=$i(u,{elementContext:"reference"}),dt=$i(u,{altBoundary:!0}),wt=$n(at,j),jt=$n(dt,V,$),Ft=zi(wt),kt=zi(jt);u.modifiersData[b]={referenceClippingOffsets:wt,popperEscapeOffsets:jt,isReferenceHidden:Ft,hasPopperEscaped:kt},u.attributes.popper=Object.assign({},u.attributes.popper,{"data-popper-reference-hidden":Ft,"data-popper-escaped":kt})}},Ln={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(T){var u=T.state,j=T.name,V=T.options.offset,$=void 0===V?[0,0]:V,at=Ht.reduce(function(Ft,kt){return Ft[kt]=($t=u.rects,ee=$,te=mi(ne=kt),ie=[X,ce].indexOf(te)>=0?-1:1,Le=(Le=(Se="function"==typeof ee?ee(Object.assign({},$t,{placement:ne})):ee)[0])||0,he=((he=Se[1])||0)*ie,[X,I].indexOf(te)>=0?{x:he,y:Le}:{x:Le,y:he}),Ft;var ne,$t,ee,te,ie,Se,Le,he},{}),dt=at[u.placement],jt=dt.y;null!=u.modifiersData.popperOffsets&&(u.modifiersData.popperOffsets.x+=dt.x,u.modifiersData.popperOffsets.y+=jt),u.modifiersData[j]=at}},Ki={name:"popperOffsets",enabled:!0,phase:"read",fn:function(T){var u=T.state;u.modifiersData[T.name]=_n({reference:u.rects.reference,element:u.rects.popper,strategy:"absolute",placement:u.placement})},data:{}},yn={name:"preventOverflow",enabled:!0,phase:"main",fn:function(T){var Ar,Hr,u=T.state,b=T.options,j=T.name,V=b.mainAxis,$=void 0===V||V,at=b.altAxis,dt=void 0!==at&&at,ne=b.tether,$t=void 0===ne||ne,ee=b.tetherOffset,te=void 0===ee?0:ee,ie=$i(u,{boundary:b.boundary,rootBoundary:b.rootBoundary,padding:b.padding,altBoundary:b.altBoundary}),Se=mi(u.placement),Le=xi(u.placement),he=!Le,ve=dn(Se),ae="x"===ve?"y":"x",de=u.modifiersData.popperOffsets,Ce=u.rects.reference,Oe=u.rects.popper,Te="function"==typeof te?te(Object.assign({},u.rects,{placement:u.placement})):te,We="number"==typeof Te?{mainAxis:Te,altAxis:Te}:Object.assign({mainAxis:0,altAxis:0},Te),Li=u.modifiersData.offset?u.modifiersData.offset[u.placement]:null,en={x:0,y:0};if(de){if($){var _i,Vi="y"===ve?ce:X,yi="y"===ve?O:I,ai="y"===ve?"height":"width",an=de[ve],ln=an+ie[Vi],rr=an-ie[yi],ii=$t?-Oe[ai]/2:0,ke=Le===pt?Ce[ai]:Oe[ai],bi=Le===pt?-Oe[ai]:-Ce[ai],Ui=u.elements.arrow,Nn=$t&&Ui?ei(Ui):{width:0,height:0},mr=u.modifiersData["arrow#persistent"]?u.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},kr=mr[Vi],Dr=mr[yi],vr=ki(0,Ce[ai],Nn[ai]),Wr=he?Ce[ai]/2-ii-vr-kr-We.mainAxis:ke-vr-kr-We.mainAxis,zr=he?-Ce[ai]/2+ii+vr+Dr+We.mainAxis:bi+vr+Dr+We.mainAxis,Or=u.elements.arrow&&Hi(u.elements.arrow),Pr=null!=(_i=Li?.[ve])?_i:0,Yr=an+zr-Pr,jr=ki($t?un(ln,an+Wr-Pr-(Or?"y"===ve?Or.clientTop||0:Or.clientLeft||0:0)):ln,an,$t?Ei(rr,Yr):rr);de[ve]=jr,en[ve]=jr-an}if(dt){var Lr,Un=de[ae],_r="y"===ae?"height":"width",Mr=Un+ie["x"===ve?ce:X],Ir=Un-ie["x"===ve?O:I],Er=-1!==[ce,X].indexOf(Se),Fr=null!=(Lr=Li?.[ae])?Lr:0,Nr=Er?Mr:Un-Ce[_r]-Oe[_r]-Fr+We.altAxis,Rr=Er?Un+Ce[_r]+Oe[_r]-Fr-We.altAxis:Ir,Br=$t&&Er?(Hr=ki(Nr,Un,Ar=Rr))>Ar?Ar:Hr:ki($t?Nr:Mr,Un,$t?Rr:Ir);de[ae]=Br,en[ae]=Br-Un}u.modifiersData[j]=en}},requiresIfExists:["offset"]};function sn(T,u,b){void 0===b&&(b=!1);var j,V,kt,ne,$t,ee,$=ti(u),at=ti(u)&&(ne=(kt=u).getBoundingClientRect(),$t=qi(ne.width)/kt.offsetWidth||1,ee=qi(ne.height)/kt.offsetHeight||1,1!==$t||1!==ee),dt=Ai(u),wt=Fi(T,at,b),jt={scrollLeft:0,scrollTop:0},Ft={x:0,y:0};return($||!$&&!b)&&(("body"!==$e(u)||Rn(dt))&&(jt=(j=u)!==Ke(j)&&ti(j)?{scrollLeft:(V=j).scrollLeft,scrollTop:V.scrollTop}:Pn(j)),ti(u)?((Ft=Fi(u,!0)).x+=u.clientLeft,Ft.y+=u.clientTop):dt&&(Ft.x=gn(dt))),{x:wt.left+jt.scrollLeft-Ft.x,y:wt.top+jt.scrollTop-Ft.y,width:wt.width,height:wt.height}}function Hn(T){var u=new Map,b=new Set,j=[];function V($){b.add($.name),[].concat($.requires||[],$.requiresIfExists||[]).forEach(function(at){if(!b.has(at)){var dt=u.get(at);dt&&V(dt)}}),j.push($)}return T.forEach(function($){u.set($.name,$)}),T.forEach(function($){b.has($.name)||V($)}),j}var Mn={placement:"bottom",modifiers:[],strategy:"absolute"};function Kn(){for(var T=arguments.length,u=new Array(T),b=0;b<T;b++)u[b]=arguments[b];return!u.some(function(j){return!(j&&"function"==typeof j.getBoundingClientRect)})}function ui(T){void 0===T&&(T={});var b=T.defaultModifiers,j=void 0===b?[]:b,V=T.defaultOptions,$=void 0===V?Mn:V;return function(at,dt,wt){void 0===wt&&(wt=$);var jt,Ft,kt={placement:"bottom",orderedModifiers:[],options:Object.assign({},Mn,$),modifiersData:{},elements:{reference:at,popper:dt},attributes:{},styles:{}},ne=[],$t=!1,ee={state:kt,setOptions:function(ie){var Se="function"==typeof ie?ie(kt.options):ie;te(),kt.options=Object.assign({},$,kt.options,Se),kt.scrollParents={reference:Oi(at)?Wi(at):at.contextElement?Wi(at.contextElement):[],popper:Wi(dt)};var Le,he,ae,de,ve=(Le=[].concat(j,kt.options.modifiers),he=Le.reduce(function(ae,de){var Ce=ae[de.name];return ae[de.name]=Ce?Object.assign({},Ce,de,{options:Object.assign({},Ce.options,de.options),data:Object.assign({},Ce.data,de.data)}):de,ae},{}),ae=Object.keys(he).map(function(ae){return he[ae]}),de=Hn(ae),cn.reduce(function(Ce,Oe){return Ce.concat(de.filter(function(Te){return Te.phase===Oe}))},[]));return kt.orderedModifiers=ve.filter(function(ae){return ae.enabled}),kt.orderedModifiers.forEach(function(ae){var Ce=ae.options,Te=ae.effect;if("function"==typeof Te){var We=Te({state:kt,name:ae.name,instance:ee,options:void 0===Ce?{}:Ce});ne.push(We||function(){})}}),ee.update()},forceUpdate:function(){if(!$t){var ie=kt.elements,Se=ie.reference,Le=ie.popper;if(Kn(Se,Le)){kt.rects={reference:sn(Se,Hi(Le),"fixed"===kt.options.strategy),popper:ei(Le)},kt.reset=!1,kt.placement=kt.options.placement,kt.orderedModifiers.forEach(function(Te){return kt.modifiersData[Te.name]=Object.assign({},Te.data)});for(var he=0;he<kt.orderedModifiers.length;he++)if(!0!==kt.reset){var ve=kt.orderedModifiers[he],ae=ve.fn,de=ve.options;"function"==typeof ae&&(kt=ae({state:kt,options:void 0===de?{}:de,name:ve.name,instance:ee})||kt)}else kt.reset=!1,he=-1}}},update:(jt=function(){return new Promise(function(ie){ee.forceUpdate(),ie(kt)})},function(){return Ft||(Ft=new Promise(function(ie){Promise.resolve().then(function(){Ft=void 0,ie(jt())})})),Ft}),destroy:function(){te(),$t=!0}};if(!Kn(at,dt))return ee;function te(){ne.forEach(function(ie){return ie()}),ne=[]}return ee.setOptions(wt).then(function(ie){!$t&&wt.onFirstUpdate&&wt.onFirstUpdate(ie)}),ee}}var Qn=ui(),Wn=ui({defaultModifiers:[pn,Ki,Di,hn]}),bn=ui({defaultModifiers:[pn,Ki,Di,hn,Ln,qn,yn,Dn,Bn]});const zn=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:ui,detectOverflow:$i,createPopperBase:Qn,createPopper:bn,createPopperLite:Wn,top:ce,bottom:O,right:I,left:X,auto:Z,basePlacements:gt,start:pt,end:ht,clippingParents:Et,viewport:At,popper:Rt,reference:Yt,variationPlacements:Mt,placements:Ht,beforeRead:Kt,read:"read",afterRead:Ve,beforeMain:hi,main:"main",afterMain:Ue,beforeWrite:De,write:"write",afterWrite:Gi,modifierPhases:cn,applyStyles:hn,arrow:Dn,computeStyles:Di,eventListeners:pn,flip:qn,hide:Bn,offset:Ln,popperOffsets:Ki,preventOverflow:yn},Symbol.toStringTag,{value:"Module"})),xn="dropdown",Jn="ArrowUp",c="ArrowDown",d="click.bs.dropdown.data-api",v="keydown.bs.dropdown.data-api",_="show",S='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',k=`${S}.show`,P=".dropdown-menu",R=w()?"top-end":"top-start",Y=w()?"top-start":"top-end",K=w()?"bottom-end":"bottom-start",D=w()?"bottom-start":"bottom-end",p=w()?"left-start":"right-start",x=w()?"right-start":"left-start",A={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Q={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class lt extends Xt{constructor(u,b){super(u,b),this._popper=null,this._parent=this._element.parentNode,this._menu=Dt.next(this._element,P)[0]||Dt.prev(this._element,P)[0]||Dt.findOne(P,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return A}static get DefaultType(){return Q}static get NAME(){return xn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(r(this._element)||this._isShown())return;const u={relatedTarget:this._element};if(!G.trigger(this._element,"show.bs.dropdown",u).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const b of[].concat(...document.body.children))G.on(b,"mouseover",f);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(_),this._element.classList.add(_),G.trigger(this._element,"shown.bs.dropdown",u)}}hide(){!r(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(u){if(!G.trigger(this._element,"hide.bs.dropdown",u).defaultPrevented){if("ontouchstart"in document.documentElement)for(const b of[].concat(...document.body.children))G.off(b,"mouseover",f);this._popper&&this._popper.destroy(),this._menu.classList.remove(_),this._element.classList.remove(_),this._element.setAttribute("aria-expanded","false"),Lt.removeDataAttribute(this._menu,"popper"),G.trigger(this._element,"hidden.bs.dropdown",u)}}_getConfig(u){if("object"==typeof(u=super._getConfig(u)).reference&&!e(u.reference)&&"function"!=typeof u.reference.getBoundingClientRect)throw new TypeError(`${xn.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return u}_createPopper(){if(void 0===zn)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let u=this._element;"parent"===this._config.reference?u=this._parent:e(this._config.reference)?u=i(this._config.reference):"object"==typeof this._config.reference&&(u=this._config.reference);const b=this._getPopperConfig();this._popper=bn(u,this._menu,b)}_isShown(){return this._menu.classList.contains(_)}_getPlacement(){const u=this._parent;if(u.classList.contains("dropend"))return p;if(u.classList.contains("dropstart"))return x;if(u.classList.contains("dropup-center"))return"top";if(u.classList.contains("dropdown-center"))return"bottom";const b="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return u.classList.contains("dropup")?b?Y:R:b?D:K}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:u}=this._config;return"string"==typeof u?u.split(",").map(b=>Number.parseInt(b,10)):"function"==typeof u?b=>u(b,this._element):u}_getPopperConfig(){const u={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(Lt.setDataAttribute(this._menu,"popper","static"),u.modifiers=[{name:"applyStyles",enabled:!1}]),{...u,..."function"==typeof this._config.popperConfig?this._config.popperConfig(u):this._config.popperConfig}}_selectMenuItem({key:u,target:b}){const j=Dt.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(V=>s(V));j.length&&H(j,b,u===c,!j.includes(b)).focus()}static jQueryInterface(u){return this.each(function(){const b=lt.getOrCreateInstance(this,u);if("string"==typeof u){if(void 0===b[u])throw new TypeError(`No method named "${u}"`);b[u]()}})}static clearMenus(u){if(2===u.button||"keyup"===u.type&&"Tab"!==u.key)return;const b=Dt.find(k);for(const j of b){const V=lt.getInstance(j);if(!V||!1===V._config.autoClose)continue;const $=u.composedPath(),at=$.includes(V._menu);if($.includes(V._element)||"inside"===V._config.autoClose&&!at||"outside"===V._config.autoClose&&at||V._menu.contains(u.target)&&("keyup"===u.type&&"Tab"===u.key||/input|select|option|textarea|form/i.test(u.target.tagName)))continue;const dt={relatedTarget:V._element};"click"===u.type&&(dt.clickEvent=u),V._completeHide(dt)}}static dataApiKeydownHandler(u){const b=/input|textarea/i.test(u.target.tagName),j="Escape"===u.key,V=[Jn,c].includes(u.key);if(!V&&!j||b&&!j)return;u.preventDefault();const $=this.matches(S)?this:Dt.prev(this,S)[0]||Dt.next(this,S)[0]||Dt.findOne(S,u.delegateTarget.parentNode),at=lt.getOrCreateInstance($);if(V)return u.stopPropagation(),at.show(),void at._selectMenuItem(u);at._isShown()&&(u.stopPropagation(),at.hide(),$.focus())}}G.on(document,v,S,lt.dataApiKeydownHandler),G.on(document,v,P,lt.dataApiKeydownHandler),G.on(document,d,lt.clearMenus),G.on(document,"keyup.bs.dropdown.data-api",lt.clearMenus),G.on(document,d,S,function(T){T.preventDefault(),lt.getOrCreateInstance(this).toggle()}),E(lt);const ut=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Bt=".sticky-top",Gt="padding-right",ge="margin-right";class Qt{constructor(){this._element=document.body}getWidth(){const u=document.documentElement.clientWidth;return Math.abs(window.innerWidth-u)}hide(){const u=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Gt,b=>b+u),this._setElementAttributes(ut,Gt,b=>b+u),this._setElementAttributes(Bt,ge,b=>b-u)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Gt),this._resetElementAttributes(ut,Gt),this._resetElementAttributes(Bt,ge)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(u,b,j){const V=this.getWidth();this._applyManipulationCallback(u,$=>{if($!==this._element&&window.innerWidth>$.clientWidth+V)return;this._saveInitialAttribute($,b);const at=window.getComputedStyle($).getPropertyValue(b);$.style.setProperty(b,`${j(Number.parseFloat(at))}px`)})}_saveInitialAttribute(u,b){const j=u.style.getPropertyValue(b);j&&Lt.setDataAttribute(u,b,j)}_resetElementAttributes(u,b){this._applyManipulationCallback(u,j=>{const V=Lt.getDataAttribute(j,b);null!==V?(Lt.removeDataAttribute(j,b),j.style.setProperty(b,V)):j.style.removeProperty(b)})}_applyManipulationCallback(u,b){if(e(u))b(u);else for(const j of Dt.find(u,this._element))b(j)}}const Pe="mousedown.bs.backdrop",Jt={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},pe={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Ge extends zt{constructor(u){super(),this._config=this._getConfig(u),this._isAppended=!1,this._element=null}static get Default(){return Jt}static get DefaultType(){return pe}static get NAME(){return"backdrop"}show(u){if(!this._config.isVisible)return void M(u);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{M(u)})}hide(u){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),M(u)})):M(u)}dispose(){this._isAppended&&(G.off(this._element,Pe),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const u=document.createElement("div");u.className=this._config.className,this._config.isAnimated&&u.classList.add("fade"),this._element=u}return this._element}_configAfterMerge(u){return u.rootElement=i(u.rootElement),u}_append(){if(this._isAppended)return;const u=this._getElement();this._config.rootElement.append(u),G.on(u,Pe,()=>{M(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(u){N(u,this._getElement(),this._config.isAnimated)}}const Pi=".bs.focustrap",He="backward",Qi={autofocus:!0,trapElement:null},fi={autofocus:"boolean",trapElement:"element"};class Qe extends zt{constructor(u){super(),this._config=this._getConfig(u),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Qi}static get DefaultType(){return fi}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),G.off(document,Pi),G.on(document,"focusin.bs.focustrap",u=>this._handleFocusin(u)),G.on(document,"keydown.tab.bs.focustrap",u=>this._handleKeydown(u)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,G.off(document,Pi))}_handleFocusin(u){const{trapElement:b}=this._config;if(u.target===document||u.target===b||b.contains(u.target))return;const j=Dt.focusableChildren(b);0===j.length?b.focus():this._lastTabNavDirection===He?j[j.length-1].focus():j[0].focus()}_handleKeydown(u){"Tab"===u.key&&(this._lastTabNavDirection=u.shiftKey?He:"forward")}}const wn="hidden.bs.modal",vi="show.bs.modal",je="modal-open",oi="modal-static",Xi={backdrop:!0,focus:!0,keyboard:!0},Zt={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class le extends Xt{constructor(u,b){super(u,b),this._dialog=Dt.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Qt,this._addEventListeners()}static get Default(){return Xi}static get DefaultType(){return Zt}static get NAME(){return"modal"}toggle(u){return this._isShown?this.hide():this.show(u)}show(u){this._isShown||this._isTransitioning||G.trigger(this._element,vi,{relatedTarget:u}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(je),this._adjustDialog(),this._backdrop.show(()=>this._showElement(u)))}hide(){this._isShown&&!this._isTransitioning&&(G.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){for(const u of[window,this._dialog])G.off(u,".bs.modal");this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ge({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Qe({trapElement:this._element})}_showElement(u){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const b=Dt.findOne(".modal-body",this._dialog);b&&(b.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,G.trigger(this._element,"shown.bs.modal",{relatedTarget:u})},this._dialog,this._isAnimated())}_addEventListeners(){G.on(this._element,"keydown.dismiss.bs.modal",u=>{if("Escape"===u.key)return this._config.keyboard?(u.preventDefault(),void this.hide()):void this._triggerBackdropTransition()}),G.on(window,"resize.bs.modal",()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),G.on(this._element,"mousedown.dismiss.bs.modal",u=>{G.one(this._element,"click.dismiss.bs.modal",b=>{this._element===u.target&&this._element===b.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(je),this._resetAdjustments(),this._scrollBar.reset(),G.trigger(this._element,wn)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(G.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const u=this._element.scrollHeight>document.documentElement.clientHeight,b=this._element.style.overflowY;"hidden"===b||this._element.classList.contains(oi)||(u||(this._element.style.overflowY="hidden"),this._element.classList.add(oi),this._queueCallback(()=>{this._element.classList.remove(oi),this._queueCallback(()=>{this._element.style.overflowY=b},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const u=this._element.scrollHeight>document.documentElement.clientHeight,b=this._scrollBar.getWidth(),j=b>0;if(j&&!u){const V=w()?"paddingLeft":"paddingRight";this._element.style[V]=`${b}px`}if(!j&&u){const V=w()?"paddingRight":"paddingLeft";this._element.style[V]=`${b}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(u,b){return this.each(function(){const j=le.getOrCreateInstance(this,u);if("string"==typeof u){if(void 0===j[u])throw new TypeError(`No method named "${u}"`);j[u](b)}})}}G.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(T){const u=l(this);["A","AREA"].includes(this.tagName)&&T.preventDefault(),G.one(u,vi,j=>{j.defaultPrevented||G.one(u,wn,()=>{s(this)&&this.focus()})});const b=Dt.findOne(".modal.show");b&&le.getInstance(b).hide(),le.getOrCreateInstance(u).toggle(this)}),xe(le),E(le);const pi="showing",gi=".offcanvas.show",Cn="hidePrevented.bs.offcanvas",Xn="hidden.bs.offcanvas",yr={backdrop:!0,keyboard:!0,scroll:!1},br={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ji extends Xt{constructor(u,b){super(u,b),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return yr}static get DefaultType(){return br}static get NAME(){return"offcanvas"}toggle(u){return this._isShown?this.hide():this.show(u)}show(u){this._isShown||G.trigger(this._element,"show.bs.offcanvas",{relatedTarget:u}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Qt).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(pi),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(pi),G.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:u})},this._element,!0))}hide(){this._isShown&&(G.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Qt).reset(),G.trigger(this._element,Xn)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const u=Boolean(this._config.backdrop);return new Ge({className:"offcanvas-backdrop",isVisible:u,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:u?()=>{"static"!==this._config.backdrop?this.hide():G.trigger(this._element,Cn)}:null})}_initializeFocusTrap(){return new Qe({trapElement:this._element})}_addEventListeners(){G.on(this._element,"keydown.dismiss.bs.offcanvas",u=>{"Escape"===u.key&&(this._config.keyboard?this.hide():G.trigger(this._element,Cn))})}static jQueryInterface(u){return this.each(function(){const b=Ji.getOrCreateInstance(this,u);if("string"==typeof u){if(void 0===b[u]||u.startsWith("_")||"constructor"===u)throw new TypeError(`No method named "${u}"`);b[u](this)}})}}G.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(T){const u=l(this);if(["A","AREA"].includes(this.tagName)&&T.preventDefault(),r(this))return;G.one(u,Xn,()=>{s(this)&&this.focus()});const b=Dt.findOne(gi);b&&b!==u&&Ji.getInstance(b).hide(),Ji.getOrCreateInstance(u).toggle(this)}),G.on(window,"load.bs.offcanvas.data-api",()=>{for(const T of Dt.find(gi))Ji.getOrCreateInstance(T).show()}),G.on(window,"resize.bs.offcanvas",()=>{for(const T of Dt.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(T).position&&Ji.getOrCreateInstance(T).hide()}),xe(Ji),E(Ji);const Zn=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),xr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,wr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Cr=(T,u)=>{const b=T.nodeName.toLowerCase();return u.includes(b)?!Zn.has(b)||Boolean(xr.test(T.nodeValue)||wr.test(T.nodeValue)):u.filter(j=>j instanceof RegExp).some(j=>j.test(b))},In={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Tr={allowList:In,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},lr={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Zi={entry:"(string|element|function|null)",selector:"(string|element)"};class tn extends zt{constructor(u){super(),this._config=this._getConfig(u)}static get Default(){return Tr}static get DefaultType(){return lr}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(u=>this._resolvePossibleFunction(u)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(u){return this._checkContent(u),this._config.content={...this._config.content,...u},this}toHtml(){const u=document.createElement("div");u.innerHTML=this._maybeSanitize(this._config.template);for(const[V,$]of Object.entries(this._config.content))this._setContent(u,$,V);const b=u.children[0],j=this._resolvePossibleFunction(this._config.extraClass);return j&&b.classList.add(...j.split(" ")),b}_typeCheckConfig(u){super._typeCheckConfig(u),this._checkContent(u.content)}_checkContent(u){for(const[b,j]of Object.entries(u))super._typeCheckConfig({selector:b,entry:j},Zi)}_setContent(u,b,j){const V=Dt.findOne(j,u);V&&((b=this._resolvePossibleFunction(b))?e(b)?this._putElementInTemplate(i(b),V):this._config.html?V.innerHTML=this._maybeSanitize(b):V.textContent=b:V.remove())}_maybeSanitize(u){return this._config.sanitize?function(b,j,V){if(!b.length)return b;if(V&&"function"==typeof V)return V(b);const $=(new window.DOMParser).parseFromString(b,"text/html"),at=[].concat(...$.body.querySelectorAll("*"));for(const dt of at){const wt=dt.nodeName.toLowerCase();if(!Object.keys(j).includes(wt)){dt.remove();continue}const jt=[].concat(...dt.attributes),Ft=[].concat(j["*"]||[],j[wt]||[]);for(const kt of jt)Cr(kt,Ft)||dt.removeAttribute(kt.nodeName)}return $.body.innerHTML}(u,this._config.allowList,this._config.sanitizeFn):u}_resolvePossibleFunction(u){return"function"==typeof u?u(this):u}_putElementInTemplate(u,b){if(this._config.html)return b.innerHTML="",void b.append(u);b.textContent=u.textContent}}const fr=new Set(["sanitize","allowList","sanitizeFn"]),tr="fade",Yn="show",be="hide.bs.modal",Tn="hover",ji={AUTO:"auto",TOP:"top",RIGHT:w()?"left":"right",BOTTOM:"bottom",LEFT:w()?"right":"left"},cr={allowList:In,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},pr={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Sn extends Xt{constructor(u,b){if(void 0===zn)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(u,b),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return cr}static get DefaultType(){return pr}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),G.off(this._element.closest(".modal"),be,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const u=G.trigger(this._element,this.constructor.eventName("show")),b=(o(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(u.defaultPrevented||!b)return;this._disposePopper();const j=this._getTipElement();this._element.setAttribute("aria-describedby",j.getAttribute("id"));const{container:V}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(V.append(j),G.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(j),j.classList.add(Yn),"ontouchstart"in document.documentElement)for(const $ of[].concat(...document.body.children))G.on($,"mouseover",f);this._queueCallback(()=>{G.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!G.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Yn),"ontouchstart"in document.documentElement)for(const u of[].concat(...document.body.children))G.off(u,"mouseover",f);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),G.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(u){const b=this._getTemplateFactory(u).toHtml();if(!b)return null;b.classList.remove(tr,Yn),b.classList.add(`bs-${this.constructor.NAME}-auto`);const j=(V=>{do{V+=Math.floor(1e6*Math.random())}while(document.getElementById(V));return V})(this.constructor.NAME).toString();return b.setAttribute("id",j),this._isAnimated()&&b.classList.add(tr),b}setContent(u){this._newContent=u,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(u){return this._templateFactory?this._templateFactory.changeContent(u):this._templateFactory=new tn({...this._config,content:u,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(u){return this.constructor.getOrCreateInstance(u.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(tr)}_isShown(){return this.tip&&this.tip.classList.contains(Yn)}_createPopper(u){const b="function"==typeof this._config.placement?this._config.placement.call(this,u,this._element):this._config.placement,j=ji[b.toUpperCase()];return bn(this._element,u,this._getPopperConfig(j))}_getOffset(){const{offset:u}=this._config;return"string"==typeof u?u.split(",").map(b=>Number.parseInt(b,10)):"function"==typeof u?b=>u(b,this._element):u}_resolvePossibleFunction(u){return"function"==typeof u?u.call(this._element):u}_getPopperConfig(u){const b={placement:u,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:j=>{this._getTipElement().setAttribute("data-popper-placement",j.state.placement)}}]};return{...b,..."function"==typeof this._config.popperConfig?this._config.popperConfig(b):this._config.popperConfig}}_setListeners(){const u=this._config.trigger.split(" ");for(const b of u)if("click"===b)G.on(this._element,this.constructor.eventName("click"),this._config.selector,j=>{this._initializeOnDelegatedTarget(j).toggle()});else if("manual"!==b){const j=this.constructor.eventName(b===Tn?"mouseenter":"focusin"),V=this.constructor.eventName(b===Tn?"mouseleave":"focusout");G.on(this._element,j,this._config.selector,$=>{const at=this._initializeOnDelegatedTarget($);at._activeTrigger["focusin"===$.type?"focus":Tn]=!0,at._enter()}),G.on(this._element,V,this._config.selector,$=>{const at=this._initializeOnDelegatedTarget($);at._activeTrigger["focusout"===$.type?"focus":Tn]=at._element.contains($.relatedTarget),at._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},G.on(this._element.closest(".modal"),be,this._hideModalHandler)}_fixTitle(){const u=this._element.getAttribute("title");u&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",u),this._element.setAttribute("data-bs-original-title",u),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(u,b){clearTimeout(this._timeout),this._timeout=setTimeout(u,b)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(u){const b=Lt.getDataAttributes(this._element);for(const j of Object.keys(b))fr.has(j)&&delete b[j];return u={...b,..."object"==typeof u&&u?u:{}},u=this._mergeConfigObj(u),u=this._configAfterMerge(u),this._typeCheckConfig(u),u}_configAfterMerge(u){return u.container=!1===u.container?document.body:i(u.container),"number"==typeof u.delay&&(u.delay={show:u.delay,hide:u.delay}),"number"==typeof u.title&&(u.title=u.title.toString()),"number"==typeof u.content&&(u.content=u.content.toString()),u}_getDelegateConfig(){const u={};for(const b in this._config)this.constructor.Default[b]!==this._config[b]&&(u[b]=this._config[b]);return u.selector=!1,u.trigger="manual",u}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(u){return this.each(function(){const b=Sn.getOrCreateInstance(this,u);if("string"==typeof u){if(void 0===b[u])throw new TypeError(`No method named "${u}"`);b[u]()}})}}E(Sn);const Sr={...Sn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},gr={...Sn.DefaultType,content:"(null|string|element|function)"};class Yi extends Sn{static get Default(){return Sr}static get DefaultType(){return gr}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(u){return this.each(function(){const b=Yi.getOrCreateInstance(this,u);if("string"==typeof u){if(void 0===b[u])throw new TypeError(`No method named "${u}"`);b[u]()}})}}E(Yi);const er="click.bs.scrollspy",Fn="active",ir={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},hr={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class on extends Xt{constructor(u,b){super(u,b),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return ir}static get DefaultType(){return hr}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const u of this._observableSections.values())this._observer.observe(u)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(u){return u.target=i(u.target)||document.body,u.rootMargin=u.offset?`${u.offset}px 0px -30%`:u.rootMargin,"string"==typeof u.threshold&&(u.threshold=u.threshold.split(",").map(b=>Number.parseFloat(b))),u}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(G.off(this._config.target,er),G.on(this._config.target,er,"[href]",u=>{const b=this._observableSections.get(u.target.hash);if(b){u.preventDefault();const j=this._rootElement||window,V=b.offsetTop-this._element.offsetTop;if(j.scrollTo)return void j.scrollTo({top:V,behavior:"smooth"});j.scrollTop=V}}))}_getNewObserver(){return new IntersectionObserver(b=>this._observerCallback(b),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(u){const b=at=>this._targetLinks.get(`#${at.target.id}`),j=at=>{this._previousScrollData.visibleEntryTop=at.target.offsetTop,this._process(b(at))},V=(this._rootElement||document.documentElement).scrollTop,$=V>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=V;for(const at of u){if(!at.isIntersecting){this._activeTarget=null,this._clearActiveClass(b(at));continue}const dt=at.target.offsetTop>=this._previousScrollData.visibleEntryTop;if($&&dt){if(j(at),!V)return}else $||dt||j(at)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const u=Dt.find("[href]",this._config.target);for(const b of u){if(!b.hash||r(b))continue;const j=Dt.findOne(b.hash,this._element);s(j)&&(this._targetLinks.set(b.hash,b),this._observableSections.set(b.hash,j))}}_process(u){this._activeTarget!==u&&(this._clearActiveClass(this._config.target),this._activeTarget=u,u.classList.add(Fn),this._activateParents(u),G.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:u}))}_activateParents(u){if(u.classList.contains("dropdown-item"))Dt.findOne(".dropdown-toggle",u.closest(".dropdown")).classList.add(Fn);else for(const b of Dt.parents(u,".nav, .list-group"))for(const j of Dt.prev(b,".nav-link, .nav-item > .nav-link, .list-group-item"))j.classList.add(Fn)}_clearActiveClass(u){u.classList.remove(Fn);const b=Dt.find("[href].active",u);for(const j of b)j.classList.remove(Fn)}static jQueryInterface(u){return this.each(function(){const b=on.getOrCreateInstance(this,u);if("string"==typeof u){if(void 0===b[u]||u.startsWith("_")||"constructor"===u)throw new TypeError(`No method named "${u}"`);b[u]()}})}}G.on(window,"load.bs.scrollspy.data-api",()=>{for(const T of Dt.find('[data-bs-spy="scroll"]'))on.getOrCreateInstance(T)}),E(on);const ur="ArrowLeft",nr="ArrowRight",L="ArrowUp",B="ArrowDown",q="active",it="show",yt='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',xt=`.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${yt}`;class St extends Xt{constructor(u){super(u),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),G.on(this._element,"keydown.bs.tab",b=>this._keydown(b)))}static get NAME(){return"tab"}show(){const u=this._element;if(this._elemIsActive(u))return;const b=this._getActiveElem(),j=b?G.trigger(b,"hide.bs.tab",{relatedTarget:u}):null;G.trigger(u,"show.bs.tab",{relatedTarget:b}).defaultPrevented||j&&j.defaultPrevented||(this._deactivate(b,u),this._activate(u,b))}_activate(u,b){u&&(u.classList.add(q),this._activate(l(u)),this._queueCallback(()=>{"tab"===u.getAttribute("role")?(u.removeAttribute("tabindex"),u.setAttribute("aria-selected",!0),this._toggleDropDown(u,!0),G.trigger(u,"shown.bs.tab",{relatedTarget:b})):u.classList.add(it)},u,u.classList.contains("fade")))}_deactivate(u,b){u&&(u.classList.remove(q),u.blur(),this._deactivate(l(u)),this._queueCallback(()=>{"tab"===u.getAttribute("role")?(u.setAttribute("aria-selected",!1),u.setAttribute("tabindex","-1"),this._toggleDropDown(u,!1),G.trigger(u,"hidden.bs.tab",{relatedTarget:b})):u.classList.remove(it)},u,u.classList.contains("fade")))}_keydown(u){if(![ur,nr,L,B].includes(u.key))return;u.stopPropagation(),u.preventDefault();const b=[nr,B].includes(u.key),j=H(this._getChildren().filter(V=>!r(V)),u.target,b,!0);j&&(j.focus({preventScroll:!0}),St.getOrCreateInstance(j).show())}_getChildren(){return Dt.find(xt,this._parent)}_getActiveElem(){return this._getChildren().find(u=>this._elemIsActive(u))||null}_setInitialAttributes(u,b){this._setAttributeIfNotExists(u,"role","tablist");for(const j of b)this._setInitialAttributesOnChild(j)}_setInitialAttributesOnChild(u){u=this._getInnerElement(u);const b=this._elemIsActive(u),j=this._getOuterElement(u);u.setAttribute("aria-selected",b),j!==u&&this._setAttributeIfNotExists(j,"role","presentation"),b||u.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(u,"role","tab"),this._setInitialAttributesOnTargetPanel(u)}_setInitialAttributesOnTargetPanel(u){const b=l(u);b&&(this._setAttributeIfNotExists(b,"role","tabpanel"),u.id&&this._setAttributeIfNotExists(b,"aria-labelledby",`#${u.id}`))}_toggleDropDown(u,b){const j=this._getOuterElement(u);if(!j.classList.contains("dropdown"))return;const V=($,at)=>{const dt=Dt.findOne($,j);dt&&dt.classList.toggle(at,b)};V(".dropdown-toggle",q),V(".dropdown-menu",it),j.setAttribute("aria-expanded",b)}_setAttributeIfNotExists(u,b,j){u.hasAttribute(b)||u.setAttribute(b,j)}_elemIsActive(u){return u.classList.contains(q)}_getInnerElement(u){return u.matches(xt)?u:Dt.findOne(xt,u)}_getOuterElement(u){return u.closest(".nav-item, .list-group-item")||u}static jQueryInterface(u){return this.each(function(){const b=St.getOrCreateInstance(this);if("string"==typeof u){if(void 0===b[u]||u.startsWith("_")||"constructor"===u)throw new TypeError(`No method named "${u}"`);b[u]()}})}}G.on(document,"click.bs.tab",yt,function(T){["A","AREA"].includes(this.tagName)&&T.preventDefault(),r(this)||St.getOrCreateInstance(this).show()}),G.on(window,"load.bs.tab",()=>{for(const T of Dt.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))St.getOrCreateInstance(T)}),E(St);const Ut="show",Vt="showing",qt={animation:"boolean",autohide:"boolean",delay:"number"},ue={animation:!0,autohide:!0,delay:5e3};class Ae extends Xt{constructor(u,b){super(u,b),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return ue}static get DefaultType(){return qt}static get NAME(){return"toast"}show(){G.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(Ut,Vt),this._queueCallback(()=>{this._element.classList.remove(Vt),G.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(G.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(Vt),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(Vt,Ut),G.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ut),super.dispose()}isShown(){return this._element.classList.contains(Ut)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(u,b){switch(u.type){case"mouseover":case"mouseout":this._hasMouseInteraction=b;break;case"focusin":case"focusout":this._hasKeyboardInteraction=b}if(b)return void this._clearTimeout();const j=u.relatedTarget;this._element===j||this._element.contains(j)||this._maybeScheduleHide()}_setListeners(){G.on(this._element,"mouseover.bs.toast",u=>this._onInteraction(u,!0)),G.on(this._element,"mouseout.bs.toast",u=>this._onInteraction(u,!1)),G.on(this._element,"focusin.bs.toast",u=>this._onInteraction(u,!0)),G.on(this._element,"focusout.bs.toast",u=>this._onInteraction(u,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(u){return this.each(function(){const b=Ae.getOrCreateInstance(this,u);if("string"==typeof u){if(void 0===b[u])throw new TypeError(`No method named "${u}"`);b[u](this)}})}}return xe(Ae),E(Ae),{Alert:_e,Button:se,Carousel:li,Collapse:Ye,Dropdown:lt,Modal:le,Offcanvas:Ji,Popover:Yi,ScrollSpy:on,Tab:St,Toast:Ae,Tooltip:Sn}});