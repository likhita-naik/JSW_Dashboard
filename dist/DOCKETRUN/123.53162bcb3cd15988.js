"use strict";(self.webpackChunkDOCKETRUN=self.webpackChunkDOCKETRUN||[]).push([[123],{123:(Se,w,c)=>{c.r(w),c.d(w,{LogHistoryModule:()=>Ce});var x=c(9569),u=c(2953),M=c(3056),v=c(9449),C=c(1305),I=c(7185),O=c(4612),k=c(9174),L=c(7445),V=c(529),d=c(433),r=c(9646),P=c(8675),H=c(3900),S=c(4327),N=c(1764),h=c.n(N),e=c(4650),_=c(6895),A=c(9463),F=c(3625),j=c(3868),D=c(3907);const z=["dangerAlert"];function B(o,s){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Submit"),e.\u0275\u0275elementEnd())}function Y(o,s){1&o&&e.\u0275\u0275element(0,"span",62)}function $(o,s){1&o&&e.\u0275\u0275element(0,"fa-icon",63)}function W(o,s){1&o&&e.\u0275\u0275element(0,"span",64)}function Q(o,s){1&o&&e.\u0275\u0275element(0,"fa-icon",67)}function K(o,s){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"\xa0 Live \xa0"),e.\u0275\u0275elementEnd())}function G(o,s){1&o&&e.\u0275\u0275element(0,"span",62)}function J(o,s){if(1&o){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",65),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(i);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.BackToToday())}),e.\u0275\u0275template(1,Q,1,0,"fa-icon",66),e.\u0275\u0275template(2,K,2,0,"span",18),e.\u0275\u0275template(3,G,1,0,"span",19),e.\u0275\u0275elementEnd()}if(2&o){const i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.loader2),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.loader2),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.loader2)}}function U(o,s){1&o&&e.\u0275\u0275element(0,"fa-icon",68)}function Z(o,s){1&o&&e.\u0275\u0275element(0,"fa-icon",69)}function X(o,s){1&o&&e.\u0275\u0275element(0,"fa-icon",70)}function q(o,s){1&o&&e.\u0275\u0275element(0,"fa-icon",71)}function R(o,s){1&o&&(e.\u0275\u0275elementStart(0,"span",24),e.\u0275\u0275element(1,"span",72),e.\u0275\u0275text(2,"Live"),e.\u0275\u0275elementEnd())}function ee(o,s){1&o&&e.\u0275\u0275element(0,"span",76)}function te(o,s){1&o&&e.\u0275\u0275element(0,"fa-icon",77)}function ie(o,s){if(1&o){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",73),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(i);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.getLatestData())}),e.\u0275\u0275template(1,ee,1,0,"span",74),e.\u0275\u0275template(2,te,1,0,"fa-icon",75),e.\u0275\u0275text(3,"Latest "),e.\u0275\u0275elementEnd()}if(2&o){const i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.loaderLatest),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.loaderLatest)}}function oe(o,s){1&o&&(e.\u0275\u0275elementStart(0,"span",78)(1,"b"),e.\u0275\u0275text(2,"Show:"),e.\u0275\u0275elementEnd()())}function ne(o,s){if(1&o){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"select",79),e.\u0275\u0275listener("ngModelChange",function(n){e.\u0275\u0275restoreView(i);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.pageSize=n)})("ngModelChange",function(){e.\u0275\u0275restoreView(i);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.sliceVD())}),e.\u0275\u0275elementStart(1,"option",80),e.\u0275\u0275text(2,"30 items per page"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"option",81),e.\u0275\u0275text(4,"40 items per page"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"option",82),e.\u0275\u0275text(6,"50 items per page"),e.\u0275\u0275elementEnd()()}if(2&o){const i=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngModel",i.pageSize)}}function ae(o,s){1&o&&(e.\u0275\u0275elementStart(0,"th",47),e.\u0275\u0275text(1," Is Valid? "),e.\u0275\u0275elementEnd())}function se(o,s){if(1&o&&(e.\u0275\u0275elementStart(0,"div",95),e.\u0275\u0275element(1,"input",96),e.\u0275\u0275elementStart(2,"label",97),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&o){const i=e.\u0275\u0275nextContext().$implicit,t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("checked","Vest"===i?"vest"==t[i].toLowerCase():t[i]),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate("Vest"===i?"Vest":i)}}function le(o,s){if(1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,se,4,2,"div",94),e.\u0275\u0275elementEnd()),2&o){const i=s.$implicit,t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Helmet"===i?"none"!==t[i]&&!1===t[i]:"vest"===i.toLowerCase()&&"vest"!==t[i])}}function re(o,s){if(1&o&&(e.\u0275\u0275elementStart(0,"div",90)(1,"div")(2,"div",91),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"ul",92)(5,"li"),e.\u0275\u0275template(6,le,2,1,"div",93),e.\u0275\u0275elementEnd()()()()),2&o){const i=s.$implicit,t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",i.violation_count,""),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.objectKeys(i))}}function ce(o,s){if(1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,re,7,2,"div",89),e.\u0275\u0275elementEnd()),2&o){const i=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.object_data)}}function de(o,s){if(1&o){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",101)(2,"input",102),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(i);const a=e.\u0275\u0275nextContext(2).$implicit,l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.VerifyTrueViol(n,a))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"label",103),e.\u0275\u0275text(4,"Yes "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",104)(6,"input",105),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(i);const a=e.\u0275\u0275nextContext(2).$implicit,l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.VerifyFalseViol(n,a))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"label",106),e.\u0275\u0275text(8,"No "),e.\u0275\u0275elementEnd()()()}2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("value",0)("defaultValue",!0),e.\u0275\u0275advance(4),e.\u0275\u0275property("value",!1)("defaultValue",!1))}function me(o,s){1&o&&(e.\u0275\u0275elementStart(0,"div",107),e.\u0275\u0275text(1,"Verified"),e.\u0275\u0275elementEnd())}function he(o,s){if(1&o&&(e.\u0275\u0275elementStart(0,"td",98),e.\u0275\u0275template(1,de,9,4,"div",99),e.\u0275\u0275template(2,me,2,0,"ng-template",null,100,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const i=e.\u0275\u0275reference(3),t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.violation_verificaton_status)("ngIfElse",i)}}function ge(o,s){if(1&o){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",46)(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td")(4,"img",83),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(i).$implicit,l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.imageCarousal(a))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"br"),e.\u0275\u0275elementStart(6,"button",84),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(i).$implicit,l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.imageCarousal(a))}),e.\u0275\u0275text(7,"\xa0\xa0 "),e.\u0275\u0275element(8,"fa-icon",85),e.\u0275\u0275text(9," More Images \xa0\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(10," \xa0"),e.\u0275\u0275elementStart(11,"button",86),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(i).$implicit,l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.downloadImage(l.API+"/image/"+a.imagename))}),e.\u0275\u0275text(12," Download Image "),e.\u0275\u0275element(13,"fa-icon",63),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"td")(15,"h4"),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(17,ce,2,1,"div",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"td"),e.\u0275\u0275element(19,"ngb-highlight",87),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"td"),e.\u0275\u0275element(21,"ngb-highlight",87),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,he,4,2,"td",88),e.\u0275\u0275elementEnd()}if(2&o){const i=s.$implicit,t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i.SNo),e.\u0275\u0275advance(2),e.\u0275\u0275property("src",t.API+"/image/"+i.imagename[0],e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(12),e.\u0275\u0275textInterpolate(i.analyticstype),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","PPE"===i.analyticstype||"RA"===i.analyticstype),e.\u0275\u0275advance(2),e.\u0275\u0275property("result",i.camera_name?i.camera_name:"null")("term",t.filterOut.value),e.\u0275\u0275advance(2),e.\u0275\u0275property("result",i.timestamp)("term",t.filterOut.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isEditTable)}}function pe(o,s){if(1&o&&(e.\u0275\u0275elementStart(0,"div",108)(1,"div",13)(2,"div",26),e.\u0275\u0275element(3,"img",109),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",110)(5,"h5")(6,"span",111),e.\u0275\u0275text(7," Camera Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"b")(9,"span",112),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(11,"h5")(12,"span",111),e.\u0275\u0275text(13," Detected Time : "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"b")(15,"span",112),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd()()()()()()),2&o){const i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("src",i.API+"/image/"+i.currentViol.imagename,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(i.currentViol.camera_name?i.currentViol.camera_name:"null"),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(i.currentViol.timestamp?i.currentViol.timestamp:"--")}}function fe(o,s){if(1&o&&(e.\u0275\u0275elementStart(0,"div",124),e.\u0275\u0275element(1,"input",125),e.\u0275\u0275elementStart(2,"label",126),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&o){const i=e.\u0275\u0275nextContext().$implicit,t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("checked","Vest"===i?"no_vest"==t[i]:t[i]),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate("Vest"===i?"Vest":i)}}function ue(o,s){if(1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,fe,4,2,"div",123),e.\u0275\u0275elementEnd()),2&o){const i=s.$implicit,t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Helmet"===i?"none"!==t[i]&&!1===t[i]:"Vest"===i&&"no_vest"===t[i])}}function ve(o,s){if(1&o&&(e.\u0275\u0275elementStart(0,"div",90)(1,"div")(2,"div",38),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"br"),e.\u0275\u0275elementStart(5,"ul",122)(6,"li"),e.\u0275\u0275template(7,ue,2,1,"div",93),e.\u0275\u0275elementEnd()()()()),2&o){const i=s.$implicit,t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",i.violation_count,""),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.objectKeys(i))}}function _e(o,s){if(1&o&&(e.\u0275\u0275elementStart(0,"div",121),e.\u0275\u0275template(1,ve,8,2,"div",89),e.\u0275\u0275elementEnd()),2&o){const i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.editViol.object_data)}}function be(o,s){if(1&o&&(e.\u0275\u0275elementStart(0,"div",113)(1,"div",13)(2,"div",114)(3,"div",115),e.\u0275\u0275element(4,"img",116),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",117)(6,"div",118)(7,"div",119)(8,"h5",38),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"br"),e.\u0275\u0275template(11,_e,2,1,"div",120),e.\u0275\u0275elementEnd()()()()()),2&o){const i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("src",i.API+"/image/"+i.editViol.imagename[0],e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(i.editViol.analyticstype),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","PPE"===i.editViol.analyticstype||"RA"===i.editViol.analyticstype)}}const T=function(){return{standalone:!0}},xe=[{path:"",component:(()=>{class o{constructor(i,t,n,a,l,m,p,g,E,y){this.http=i,this.webServer=t,this.datepipe=n,this.toasterService=a,this._lightbox=l,this._lightBoxConfig=m,this.router=p,this.snackbar=g,this.modalService=E,this.sso=y,this.data=[],this.zoom=100,this.panelData=(0,r.of)([{item_text:1,item_id:0},{item_text:2,item_id:1},{item_text:3,item_id:2}]),this.plantData=(0,r.of)([{item_text:"hsm",item_id:0},{item_text:"crm",item_id:1},{item_text:"scm",item_id:2}]),this.areaData=(0,r.of)([]),this.isAlert=!1,this.download="",this.isalert=!1,this.imgWidth=400,this.imgheight=300,this.tempdata=[],this.page=1,this.pageSize=30,this.cameraDetails=[],this.audioOff=!1,this.alertmessage="",this.total=(0,r.of)(0),this.violData=(0,r.of)([]),this.loading=!1,this.filterOut=new d.NI,this.dataForExcel=[],this.images=[],this.pdfLoader=!1,this.excelLoader=!1,this.violLength=0,this.updatedLen=0,this.violdata=[],this.show1=30,this.show2=40,this.show3=50,this.fromDate=new Date,this.toDate=new Date,this.isdatewise=!1,this.loader2=!1,this.Excel=!1,this.Edata=[],this.isExcel=!1,this.excelLoad=!1,this.alert=!0,this.imageData=[],this.imageBase64=[],this.objectKeys=Object.keys,this.isdate=!1,this.form=new d.cw({control:new d.NI}),this.selectedViolType=null,this.imageObject=[{}],this.selectedCameraId=null,this.dropdownList=(0,r.of)([]),this.fromDateControl=new d.NI((new Date).getTime(),d.kI.required),this.toDateControl=new d.NI(new Date,d.kI.required),this.excelFromDate=new d.NI(new Date,d.kI.required),this.excelToDate=new d.NI(new Date,d.kI.required),this.Images=[],this.loc2=new d.NI("",d.kI.required),this.violationTypeList=(0,r.of)([{key:"0",label:"All Violations",icon:"pi",data:"all_violations"}]),this.loaderLatest=!1,this.isLatest=!1,this.latest=!1,this.relayFlag=!1,this.isEditTable=!0,this.violationsList=[],this.ranges={Today:[h()().hour(0).minute(0).second(0),h()()],Yesterday:[h()().subtract(1,"days").hour(0).minute(0).second(0),h()().subtract(1,"days")],"Last 7 Days":[h()().subtract(6,"days").hour(0).minute(0).second(0),h()()],"Last 30 Days":[h()().subtract(29,"days").hour(0).minute(0).second(0),h()()],"This Month":[h()().startOf("month").hour(0).minute(0).second(0),h()().endOf("month")],"Last Month":[h()().subtract(1,"month").startOf("month").hour(0).minute(0).second(0),h()().subtract(1,"month").endOf("month")]},this.audioOff="true"==localStorage.getItem("audioOff"),this.alert="true"==localStorage.getItem("alert"),console.log(localStorage.getItem("audioOff"),localStorage.getItem("alert")),this.scrollStrategy=this.sso.reposition(),this.delay=this.webServer.logInterval,console.log(this.relayDelay),this.hooterDelay=this.webServer.delay,this.getCameraList(),this.getViolationTypes(),this.ExcelRange=0,this._lightBoxConfig.showDownloadButton=!1,this._lightBoxConfig.showZoom=!0,this._lightBoxConfig.showImageNumberLabel=!0,this._lightBoxConfig.fitImageInViewPort=!0,this._lightBoxConfig.disableScrolling=!1,this._lightBoxConfig.centerVertically=!1,this.API=t.IP,console.log(this.API),this.filterOut.valueChanges.pipe(((0,P.O)(""),(0,H.w)(f=>this.matches(f.strip())))).subscribe(f=>{this.tempdata=f,this.violData=(0,r.of)(f),this.sliceVD()}),this.excelFromDate.valueChanges.subscribe(f=>{this.isalert=!1}),this.excelToDate.valueChanges.subscribe(f=>{this.isalert=!1})}openDatePicker(i){document.getElementById("dateInput").click()}ngOnInit(){var i=this.webServer.dateTransform(new Date)+" 00:00:00",t=this.webServer.dateTransform(new Date)+" 23:59:59";this.fromDateControl.setValue(i),this.toDateControl.setValue(t),this.dropdownSettings={singleSelection:!0,idField:"item_id",textField:"item_text",itemsShowLimit:1,allowSearchFilter:!0},this.dropdownSettings2={singleSelection:!0,idField:"item_id",textField:"item_text",itemsShowLimit:1,allowSearchFilter:!0,closeDropDownOnSelection:!0,noDataAvailablePlaceholderText:"No violation types detected",maxHeight:197},console.log(v.n1),this.violLength=Number(localStorage.getItem("updatedLen")),this.webServer.GetCameraNames().subscribe(a=>{console.log(a),!0===a.success&&(a.message.forEach((l,m)=>{this.cameraDetails[m]={camera_id:l.camera_id,camera_name:l.camera_name}}),console.log(this.cameraDetails))});var n=document.getElementById("dataTable");n?.classList.add("loading"),(!this.latest||this.isLatest)&&this.webServer.LiveViolationData().subscribe(a=>{a.success?(n?.classList.remove("loading"),this.imageData=a.message,this.tempdata=a.message,console.log(this.tempdata),Number(localStorage.setItem("updatedLen",a.message.length?a.message.length:0)),this.tempdata=a.message,this.total=(0,r.of)(this.tempdata.length),this.violData=(0,r.of)(a.message),this.sliceVD()):(n?.classList.remove("loading"),this.notification(a.message))},a=>{n?.classList.remove("loading"),this.notification("Error While fetching the data")})}ngAfterViewInit(){console.log(this.selectedViolation),this.dataread()}onPlantSelect(i){}onAreaSelect(i){}dataread(){this.interval=setInterval(()=>{this.isdate||(console.log("interval1"),Number(localStorage.getItem("updatedLen"))&&(this.violLength=Number(localStorage.getItem("updatedLen"))),this.Subsciption=this.webServer.LiveViolationData(this.selectedCameraId,this.selectedViolType).subscribe(i=>{if(i.success){var t={...i},n=[...i.message];console.log(this.isLatest),localStorage.setItem("updatedLen",JSON.stringify(n.length));var a=Number(localStorage.getItem("updatedLen"));if(console.log(a),console.log(this.violLength),t.now_live_count-t.previous_live_count>0){var l=t.now_live_count-t.previous_live_count;if(console.log("minutes less than 10"),this.alert){console.log("alert",this.alert);for(let g=l-1;g>=0;g--)new Date(n[g].timestamp),console.log("minutes less than 10"),this.alert&&(console.log(),console.log(this.isLatest),this.currentViol=n[g],setTimeout(()=>{console.log("violation is happening"),console.log(this.currentViol),this.showViol()},300),this.audioOff||this.alertSound())}}}}),this.latest||this.webServer.LiveViolationData().subscribe(i=>{this.latest||!0!==i.success||(console.log(i),console.log(this.selectedCameraId),console.log(i.message),this.imageData=i.message,this.tempdata=i.message,console.log(this.tempdata),this.total=(0,r.of)(this.violdata.length),this.loader2=!1,this.isdatewise=!1,this.violData=(0,r.of)(i.message),this.sliceVD(),this.violdata=i.message,this.tempdata.length>0&&(this.Excel=!0),this.sliceVD())},i=>{console.log(i)}))},this.delay)}showViol(){console.log(this.currentViol),this.toasterService.error(this.Violation.nativeElement.innerHTML," ",{enableHtml:!0,positionClass:"toast-top-right"})}notification(i,t){console.log("snackbar"),this.snackbar.open(i,t||"",{duration:4e3,panelClass:["error"],horizontalPosition:"end",verticalPosition:"bottom"})}getDismissReason(i){return i===u.If.ESC?(this.zoom=100,this.imgWidth=400,this.imgheight=300,"by pressing ESC"):i===u.If.BACKDROP_CLICK?(this.zoom=100,this.imgWidth=400,this.imgheight=300,"by clicking on a backdrop"):(this.imgWidth=400,this.imgheight=300,this.zoom=100,`with: ${i}`)}matches(i){var t=this.tempdata.filter(a=>a.cameraid.includes(i)||a.roi_violation_name.includes(i)||a.deviceid.includes(i)||a.camera_name.includes(i));return this.tempdata=t,this.sliceVD(),(0,r.of)(t)}sliceVD(){if(console.log(this.page,this.pageSize),this.isdate||(this.total=(0,r.of)(this.tempdata.slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize).length),this.total=(0,r.of)(this.tempdata.length),this.violData=(0,r.of)(this.tempdata.map((t,n)=>({SNo:n+1,...t})).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize))),console.log(this.tempdata),this.isdate){console.log(this.tempdata);var i=document.getElementById("dataTable");i?.classList.add("loading"),this.webServer.DatewiseViolations(this.fromDate,this.toDate,this.page,this.pageSize,this.selectedCameraId?this.selectedCameraId:null,this.selectedViolType?this.selectedViolType:null).subscribe(t=>{console.log(t),t.success&&(i?.classList.remove("loading"),console.log(t.message),0===t.message.length&&this.notification("No violations found"),this.tempdata=t.message,this.violData=(0,r.of)(this.tempdata))})}}Submit(){this.isLatest=!1,console.log(this.selectedCameraId),this.selectedViolType=this.selectedViolation?this.selectedViolation.data:null,this.selectedCameraId=this.selectedItems?this.selectedItems.data:null,console.log(this.selectedMoments),console.log(this.fromDateControl.value),this.Images=[],this.fromDate=this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"),this.toDate=this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"),this.Subsciption&&this.Subsciption.unsubscribe();var i=document.getElementById("dataTable");i?.classList.add("loading"),this.pageSize=30,this.page=1,this.isdate=!0,this.loading=!0,console.log(clearInterval(this.interval)),console.log(this.selectedCameraId),this.webServer.DatewiseViolations(this.fromDate,this.toDate,null,null,this.selectedCameraId?this.selectedCameraId:null,this.selectedViolType?this.selectedViolType:null).subscribe(t=>{console.log(t),t.success?(console.log(t),0==t.message.length&&(this.tempdata=[],this.violData=(0,r.of)([]),this.loading=!1,this.isdatewise=!0,this.total=(0,r.of)(0),i?.classList.remove("loading"),this.notification("No violations found for entered date and time")),t.message.length>0&&(this.imageData=t.message,this.total=(0,r.of)(t.message.length),this.webServer.DatewiseViolations(this.fromDate,this.toDate,this.page,this.pageSize,this.selectedCameraId?this.selectedCameraId:null,this.selectedViolType?this.selectedViolType:null).subscribe(n=>{console.log(n),n.success&&(this.loading=!1,i?.classList.remove("loading"),console.log(n.message.length),0===n.message.length?(this.notification("No violations found"),this.violData=(0,r.of)([]),this.isdatewise=!0,this.loading=!1):(this.tempdata=n.message,this.isdatewise=!0,this.violData=(0,r.of)(this.tempdata),this.sliceVD(),this.loading=!1)),this.loading=!1},n=>{this.loading=!1,this.notification("Error while fetching the data")}))):(this.tempdata=[],this.violData=(0,r.of)([]),this.loading=!1,this.isdatewise=!0,this.total=(0,r.of)(0),i?.classList.remove("loading"),i?.classList.remove("loading"),this.notification("No violations found"),this.loading=!1)},t=>{this.loading=!1}),this.interval2=setInterval(()=>{this.isdate&&(Number(localStorage.getItem("updatedLen"))&&(this.violLength=Number(localStorage.getItem("updatedLen"))),console.log("interval 2"),this.webServer.LiveViolationData().subscribe(t=>{if(console.log(t),t.success){var a={...t};if(a.now_live_count-a.previous_live_count>0&&(this.violdata=t.message,this.alert))for(let m=a.now_live_count-a.previous_live_count-1;m>=0;m--)this.alert&&(console.log("date wise violation"),this.currentViol=this.violdata[m],setTimeout(()=>{this.showViol(),this.audioOff||this.alertSound()},300))}}))},3e3),console.log(this.API)}BackToToday(){var i;this.page=1,this.Images=[],this.latest=!1,(i=document.getElementById("dataTable"))?.classList.add("loading"),this.loader2=!0,console.log(this.isLatest),this.interval2&&clearInterval(this.interval2),this.isdate=!1,this.tempdata=[],this.total=(0,r.of)(0),this.Images=[],(i=document.getElementById("dataTable"))?.classList.add("loading"),this.loader2=!0,console.log(this.isLatest),this.interval2&&clearInterval(this.interval2),this.isdate=!1,this.tempdata=[],this.total=(0,r.of)(0),this.webServer.LiveViolationData().subscribe(t=>{if(t){this.isLatest=!1,i?.classList.remove("loading"),this.imageData=t.message,console.log(this.imageData),this.total=(0,r.of)(t.message.length),t.success||this.notification(t.message);var n=t.message;console.log("backto live"),this.tempdata=t.success?t.message:[],this.sliceVD(),this.loader2=!0,this.isdatewise=!1,localStorage.setItem("updatedLen",JSON.stringify(n.length)),Number(localStorage.getItem("updatedLen"))}}),this.dataread()}dateTransform(i){const t=new Date(i.year,i.month-1,i.day);return console.log(t),this.datepipe.transform(t,"dd/MM/yyyy")}onCameraIdSelect(i){console.log(i),console.log(i.item_id),this.isdatewise||(this.page=1),this.selectedCameraId=this.selectedItems.data,console.log(this.selectedItems),console.log(i)}onViolationTypeSelect(i){console.log(this.selectedViolation),console.log(i),console.log(i.item_id),this.isdatewise||(this.page=1),this.selectedViolType=this.selectedViolation.data,console.log(this.selectedViolType),console.log(i)}imageCarousal(i){this.Images=[],i.imagename.forEach((t,n)=>{console.log(t),this.Images[n]={src:this.API+"/image/"+t,thumb:this.API+"/image/"+t,caption:t}}),this.open(0),console.log(this.Images)}open(i){console.log("opening lightbox"),this._lightbox.open(this.Images,i)}close(){this._lightbox.close()}submitForm(){this.isalert=!1,this.excelLoad=!0,this.isExcel=!1,this.selectedViolType=this.selectedViolation?this.selectedViolation.data:null,this.selectedCameraId=this.selectedItems?this.selectedItems.data:null,console.log(this.excelFromDate.value),console.log(this.excelToDate.value);var i={from_date:this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"),to_date:this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"),cameraname:this.selectedCameraId?this.selectedCameraId:"none",violation_type:this.selectedViolType?this.selectedViolType:"none"},t=new Date(this.excelFromDate.value);const l=(new Date(this.excelToDate.value).getTime()-t.getTime())/864e5;console.log(l),l<=this.ExcelRange?this.webServer.CreateViolationExcel(i).subscribe(p=>{console.log(p),p.success?(this.excelLoad=!1,this.isExcel=!0,console.log("APi data for excel"),console.log(p),this.Edata=p.message,this.Edata=p.message,this.webServer.DownloadViolationExcel().subscribe(g=>{this.excelLoader=!1,this.excelLoad=!1,console.log(g.headers.get("content-Type")),console.log(g);const y=new Blob([g.body],{type:".xlsx"});var f="violation report "+this.datepipe.transform(new Date,"YYYY_MM_dd_h_mm_ss")+".xlsx";new File([y],f,{type:".xlsx"}),(0,S.saveAs)(y,f)},g=>{this.excelLoader=!1,console.log(g)})):(this.notification(p.message,"Retry"),this.excelLoad=!1,this.isExcel=!1,this.alertmessage=p.message,this.isalert=!0)},p=>{this.excelLoad=!1,this.isExcel=!1,this.alertmessage="Error while creating excel",this.notification(this.alertmessage,"Retry"),this.isalert=!0}):(this.excelLoad=!1,this.isalert=!0,this.excelLoader=!1,this.alertmessage="Data range should be "+this.ExcelRange+" days",this.webServer.notification(this.alertmessage)),(new FormData).append("location",this.loc2.value)}onCameraIdDeSelect(i){console.log(i),console.log(i.item_id),console.log(this.selectedItems),this.selectedItems=[],this.isdatewise||(this.page=1),0===this.selectedItems.length&&(console.log("undefined"),this.selectedCameraId=null)}onViolationTypeDeSelect(i){console.log(this.selectedViolation)}OnDownload(){this.excelLoader=!0,this.webServer.SampleExcelDownload().subscribe(i=>{this.excelLoader=!1,console.log(i),console.log(i);const n=new Blob([i.body],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});var a="violation report "+this.datepipe.transform(new Date,"YYYY_MM_dd_h_mm_ss");const l=new File([n],a,{type:".xlsx"});(0,S.saveAs)(l)},i=>{this.excelLoader=!1,console.log(i)})}ExcelD(i){this.modalService.open(i).result.then(t=>{this.closeResult=`Closed with: ${t}`,this.download="",this.isalert=!1},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`,this.download="",this.isalert=!1})}settings(){this.router.navigate(["app/Settings"])}alertSound(){console.log("alert sound");let i=new Audio;i.src="../../../assets/audio/alert.mp3",i.load(),i.play()}Reset(){clearTimeout(this.relayInterval)}volumeToggle(){this.alert?(this.audioOff=!this.audioOff,localStorage.setItem("audioOff",this.audioOff?"true":"false")):(this.audioOff=!0,localStorage.setItem("audioOff","true"))}alertToggle(){this.alert=!this.alert,localStorage.setItem("alert",this.alert?"true":"false"),this.alert||(this.audioOff=!0,localStorage.setItem("alert","false"),localStorage.setItem("audioOff","true"),this.toasterService.clear())}getLatestData(){this.loader2=!1,this.loaderLatest=!0,this.latest=!0;var i=document.getElementById("dataTable");i?.classList.add("loading"),console.log(this.selectedViolType),this.webServer.LatestData(this.selectedViolType,this.selectedCameraId).subscribe(t=>{t.success?(this.isLatest=!0,i?.classList.remove("loading"),this.loaderLatest=!1,0===t.message.length&&this.notification("No violations found"),this.imageData=t.message,this.tempdata=t.message,console.log(this.tempdata),this.tempdata=t.message,this.total=(0,r.of)(t.message.length),this.violData=(0,r.of)(t.message),this.sliceVD()):(this.loaderLatest=!1,i?.classList.remove("loading"),this.notification("Error while fetching the data","Retry"))},t=>{this.loaderLatest=!1,i?.classList.remove("loading"),this.notification("Error While fetching the data","Retry")})}downloadImage(i){const t=i;new V.WM({responseType:"blob"}),console.log(t);const a=t.substr(t.lastIndexOf("/")+1);this.http.get(t,{responseType:"blob"}).subscribe(l=>{console.log("image url data",l),(0,S.saveAs)(l,a)},l=>{console.log("error",l)})}ngOnDestroy(){this.modalService.dismissAll(),clearInterval(this.interval),clearInterval(this.interval2),this.isalert=!1,this.toasterService.clear()}getCameraList(){var i=[],t=[];i[0]={key:"0",label:"All Cameras",data:"all_cameras"},this.webServer.GetCameraDetails().subscribe(n=>{console.log(n),!0===n.success&&(n.message.forEach((a,l)=>{t.push({cameraid:l,cameraname:a})}),console.log(t),t=t.filter((a,l,m)=>l===m.indexOf(a)),console.log(t),t.forEach((a,l)=>{var m;console.log(a),m={key:(l+1).toString(),label:a.cameraname,data:a.cameraname},i.push(m)}),console.log(i),this.dropdownList=(0,r.of)(i)),console.log(this.dropdownList)})}getViolationTypes(){var t=[];this.violationsList[0]={key:"0",label:"All Violations",data:"all_violations"},this.webServer.GetViolationList().subscribe(n=>{console.log(n),n.success&&(n.message.forEach(a=>{t.push(a)}),console.log(t),t.forEach((a,l)=>{var m;console.log(a),m={key:(l+1).toString(),icon:"pi",label:a,data:a},this.violationsList.push(m)}),console.log(this.violationsList),this.violationTypeList=(0,r.of)(this.violationsList))})}ToggleEdit(){this.isEditTable=!this.isEditTable}SelectViol(i,t){this.editViol=i,this.modalService.open(t,{size:"xl",centered:!0})}VerifyTrueViol(i,t){this.editViol=t,this.webServer.VerifyViolation(this.editViol._id.$oid,!0).subscribe(n=>{console.log(n),this.webServer.notification(n.message),n.success&&(this.modalService.dismissAll(),this.isdatewise&&this.Submit()),this.isdatewise||this.GetViolationData()},n=>{this.webServer.notification("Error while the  Process","Retry")})}VerifyFalseViol(i,t){this.editViol=t,this.webServer.VerifyViolation(this.editViol._id.$oid,!1).subscribe(n=>{console.log(n),this.webServer.notification(n.message),n.success&&(this.modalService.dismissAll(),this.isdatewise&&this.Submit()),this.isdatewise||this.GetViolationData()},n=>{this.webServer.notification("Error while the  Process","Retry")})}GetViolationData(){var i=document.getElementById("content");i?.classList.add("loading"),(!this.latest||this.isLatest)&&this.webServer.LiveViolationData().subscribe(t=>{t.success?(i?.classList.remove("loading"),this.imageData=t.message,this.tempdata=t.message,console.log(this.tempdata),Number(localStorage.setItem("updatedLen",t.message.length?t.message.length:0)),this.tempdata=t.message,this.total=(0,r.of)(this.tempdata.length),this.violData=(0,r.of)(t.message),this.sliceVD()):(i?.classList.remove("loading"),this.notification(t.message))},t=>{i?.classList.remove("loading"),this.notification("Error While fetching the data")})}}return o.\u0275fac=function(i){return new(i||o)(e.\u0275\u0275directiveInject(V.eN),e.\u0275\u0275directiveInject(L.N),e.\u0275\u0275directiveInject(_.DatePipe),e.\u0275\u0275directiveInject(I._W),e.\u0275\u0275directiveInject(C.ey),e.\u0275\u0275directiveInject(C.xm),e.\u0275\u0275directiveInject(x.F0),e.\u0275\u0275directiveInject(A.ux),e.\u0275\u0275directiveInject(u.FF),e.\u0275\u0275directiveInject(F.uw))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-log-history"]],viewQuery:function(i,t){if(1&i&&(e.\u0275\u0275viewQuery(z,5),e.\u0275\u0275viewQuery(v.SP,5)),2&i){let n;e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(t.Violation=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(t.pickerDirective=n)}},decls:97,vars:43,consts:[["id","content",1,"container-fluid","dashboard-content"],["datatable",""],[1,"page-header"],["id","content",1,"row","mx-auto","mt-3","mb-3"],[1,"col-xl-2","col-sm-12","col-lg-6","col-xs-12","col-md-6","mb-3"],[1,"dl-date-time-picker"],[1,"datePickerContainer",3,"click"],["type","text","ngxDaterangepickerMd","","placeholder","Select Date","required","","id","dateInput",1,"form-control",3,"showCustomRangeLabel","ranges","timePicker","ngModel","ngModelChange"],["datepicker",""],[1,"input-group-append"],["type","button",1,"ngx-daterangepicker-action","btn","default"],["icon","calendar",1,"ngx-daterangepicker-action",3,"click"],[1,"col-xl-2","col-xs-12","col-sm-12","col-md-6","col-lg-6","mb-3"],[1,"row"],["containerStyleClass","w-full","placeholder","Select Violation",3,"ngModel","ngModelOptions","options","ngModelChange","onNodeSelect"],["containerStyleClass","w-full","containerStyleClass","w-full","placeholder","Select Camera",3,"ngModelOptions","ngModel","options","ngModelChange","onNodeSelect"],[1,"col-xl-3","col-sm-12","col-lg-12","col-xs-12","col-md-12","mb-3"],[1,"btn","default","text-white","me-3","ms-1",2,"width","80px",3,"disabled","click"],[4,"ngIf"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["type","submit",1,"btn","default","text-white","me-3",3,"disabled","click"],["icon","download","class","ms-1 me-1","style","cursor: pointer;",4,"ngIf"],["class","spinner-border spinner-border-sm me-1","role","status","aria-hidden","true",4,"ngIf"],[1,"col-xl-3","col-sm-12","col-lg-6","col-xs-12","col-md-6","mb-3"],[1,"float-end"],["class","btn default text-white","style","width:100px",3,"click",4,"ngIf"],[1,"col-12"],["id","data-card",1,"card"],[1,"card-header"],["placement","bottom",1,"btn","default-outline","me-2","float-start",2,"width","7%",3,"ngbTooltip","click"],["icon","bell","class","me-1",4,"ngIf"],["icon","bell-slash","class","me-1",4,"ngIf"],["placement","bottom",1,"btn","default-outline","float-start","me-2",2,"width","7%",3,"ngbTooltip","click"],["icon","volume-up","class","me-1",4,"ngIf"],["icon","volume-off","class","me-1",4,"ngIf"],["class","float-end",4,"ngIf"],[1,"mt-3","mb-2"],[1,"form-group"],[1,""],["class","btn default ms-3 me-2 text-white float-start",3,"click",4,"ngIf"],[1,"float-start","ms-2","mt-2","me-2"],[1,"d-flex","justify-content-end","p-1"],["class","mr-2 mt-2",4,"ngIf"],["class","custom-select col-2","style","width: auto",3,"ngModel","ngModelChange",4,"ngIf"],["id","dataTable",1,"",2,"width","100%","overflow","auto"],[1,"table","table-bordered",2,"width","100%","overflow","auto"],[2,"text-align","center"],["scope","col"],["icon","image",1,"font-custome","me-1"],["icon","camera-retro",1,"font-custome","me-1"],["icon","clock",1,"font-custome","me-1"],["scope","col",4,"ngIf"],["style","text-align: center;",4,"ngFor","ngForOf"],[1,"d-flex","mx-auto","justify-content-center","p-1"],[2,"width","95vw","overflow-x","auto",3,"collectionSize","page","pageSize","pageChange"],[2,"display","none"],["dangerAlert",""],[1,"mb-0",2,"border","2px solid rgba(121, 20, 20, 0.699)","background-color","rgba(214, 148, 148, 0.459)"],[1,"modal-header",2,"text-align","center","color","rgba(121, 20, 20, 0.699)"],[1,"",2,"color","rgb(196, 54, 54) !important"],["class","modal-body",4,"ngIf"],["editViolation",""],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["icon","download",1,"ms-1","me-1",2,"cursor","pointer"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"],[1,"btn","default","text-white",2,"width","100px",3,"click"],["icon","chart-area","class","text-white me-2",4,"ngIf"],["icon","chart-area",1,"text-white","me-2"],["icon","bell",1,"me-1"],["icon","bell-slash",1,"me-1"],["icon","volume-up",1,"me-1"],["icon","volume-off",1,"me-1"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm","me-2","text-danger"],[1,"btn","default","ms-3","me-2","text-white","float-start",3,"click"],["class","spinner-border spinner-border-sm me-2 ms-1","role","status","aria-hidden","true",4,"ngIf"],["icon","filter","class","ms-1 me-2 text-white","style","cursor: pointer;",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2","ms-1"],["icon","filter",1,"ms-1","me-2","text-white",2,"cursor","pointer"],[1,"mr-2","mt-2"],[1,"custom-select","col-2",2,"width","auto",3,"ngModel","ngModelChange"],["ngValue","30"],["ngValue","40"],["ngValue","50"],[1,"image",3,"src","click"],[1,"btn","btn-sm","mt-2",3,"click"],["icon","images",1,"mr-1"],[1,"btn","btn-sm","default","text-white","mt-2",3,"click"],[3,"result","term"],["id","verify","style","width:3rem",4,"ngIf"],["class","border-bottom",4,"ngFor","ngForOf"],[1,"border-bottom"],[1,"mb-3"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],["class","items",4,"ngIf"],[1,"items"],["id","item1","type","checkbox",3,"checked"],["for","item1"],["id","verify",2,"width","3rem"],[4,"ngIf","ngIfElse"],["verified",""],["id","right",1,"form-check","form-check-inline"],["type","radio","id","yes",1,"form-check-input",3,"value","defaultValue","change"],["for","yes",1,"form-check-label","text-muted"],["id","wrong",1,"form-check","form-check-inline"],["type","radio","id","no",1,"form-check-input",3,"value","defaultValue","change"],["for","no",1,"form-check-label","text-muted"],[1,"success-badge"],[1,"modal-body"],["alt","","width","100%",1,"violImage",2,"width","30%","height","30%","object-fit","fill","border-radius","5px 5px 5px 5px",3,"src"],[1,"col-xl-12","col-md-12","col-lg-12","col-xs-12","text-white","mt-2"],[1,"text-muted"],[1,"text-white"],[1,"card","p-2"],[1,"col-6","d-flex","align-items-center"],[1,"card-img-top"],["alt","",2,"width","100%","height","auto","object-fit","contain",3,"src"],[1,"col-6"],[2,"height","90%","overflow","scroll"],[1,"",2,"width","100%"],["style","width:100%;",4,"ngIf"],[2,"width","100%"],[1,"list-unstyled","p-4"],["style","width:5rem","class","d-inline","id","editViol",4,"ngIf"],["id","editViol",1,"d-inline",2,"width","5rem"],["id","item1","type","checkbox",1,"me-4",3,"checked"],["for","item1",1,"ms-4"]],template:function(i,t){1&i&&(e.\u0275\u0275elementStart(0,"div",0,1)(2,"div",2)(3,"h2"),e.\u0275\u0275text(4,"Violations "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6),e.\u0275\u0275listener("click",function(a){return t.openDatePicker(a)}),e.\u0275\u0275elementStart(9,"span")(10,"input",7,8),e.\u0275\u0275listener("ngModelChange",function(a){return t.selectedMoments=a}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"span",9)(13,"button",10)(14,"fa-icon",11),e.\u0275\u0275listener("click",function(a){return t.openDatePicker(a)}),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(15,"div",12)(16,"div",13)(17,"p-treeSelect",14),e.\u0275\u0275listener("ngModelChange",function(a){return t.selectedViolation=a})("onNodeSelect",function(a){return t.onViolationTypeSelect(a)}),e.\u0275\u0275pipe(18,"async"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(19,"div",12)(20,"div",13)(21,"p-treeSelect",15),e.\u0275\u0275listener("ngModelChange",function(a){return t.selectedItems=a})("onNodeSelect",function(a){return t.onCameraIdSelect(a)}),e.\u0275\u0275pipe(22,"async"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(23,"div",16)(24,"button",17),e.\u0275\u0275listener("click",function(){return t.Submit()}),e.\u0275\u0275template(25,B,2,0,"span",18),e.\u0275\u0275template(26,Y,1,0,"span",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(27,"\xa0 "),e.\u0275\u0275elementStart(28,"button",20),e.\u0275\u0275listener("click",function(){return t.submitForm()}),e.\u0275\u0275template(29,$,1,0,"fa-icon",21),e.\u0275\u0275template(30,W,1,0,"span",22),e.\u0275\u0275text(31," Excel "),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(32,"\xa0 "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",23)(34,"div",24),e.\u0275\u0275template(35,J,4,3,"button",25),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(36,"div",13)(37,"div",26)(38,"div",27)(39,"div",28)(40,"button",29),e.\u0275\u0275listener("click",function(){return t.alertToggle()}),e.\u0275\u0275template(41,U,1,0,"fa-icon",30),e.\u0275\u0275template(42,Z,1,0,"fa-icon",31),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(43,"\xa0 "),e.\u0275\u0275elementStart(44,"button",32),e.\u0275\u0275listener("click",function(){return t.volumeToggle()}),e.\u0275\u0275template(45,X,1,0,"fa-icon",33),e.\u0275\u0275template(46,q,1,0,"fa-icon",34),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(47,"\xa0 "),e.\u0275\u0275template(48,R,3,0,"span",35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"div",36)(50,"div",37)(51,"div",38),e.\u0275\u0275template(52,ie,4,2,"button",39),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(53,"span",40),e.\u0275\u0275elementStart(54,"span",41),e.\u0275\u0275template(55,oe,3,0,"span",42),e.\u0275\u0275template(56,ne,7,1,"select",43),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(57,"div",44)(58,"table",45)(59,"thead",46)(60,"tr")(61,"th",47)(62,"b"),e.\u0275\u0275text(63,"S No"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(64,"th",47)(65,"b"),e.\u0275\u0275element(66,"fa-icon",48),e.\u0275\u0275text(67,"Image "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(68,"th",47)(69,"b"),e.\u0275\u0275text(70," Violation Details "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(71,"th",47)(72,"b"),e.\u0275\u0275element(73,"fa-icon",49),e.\u0275\u0275text(74,"Camera Name "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(75,"th",47)(76,"b"),e.\u0275\u0275element(77,"fa-icon",50),e.\u0275\u0275text(78,"Detected Time "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(79,ae,2,0,"th",51),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(80,"tbody"),e.\u0275\u0275template(81,ge,23,9,"tr",52),e.\u0275\u0275pipe(82,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(83,"div",53)(84,"ngb-pagination",54),e.\u0275\u0275listener("pageChange",function(a){return t.page=a})("pageChange",function(){return t.sliceVD()}),e.\u0275\u0275pipe(85,"async"),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(86,"div",55)(87,"div",26)(88,"div",null,56)(90,"div",57)(91,"div",58)(92,"h3",59),e.\u0275\u0275text(93,"Violation"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(94,pe,17,3,"div",60),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(95,be,12,3,"ng-template",null,61,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()),2&i&&(e.\u0275\u0275advance(10),e.\u0275\u0275property("showCustomRangeLabel",!0)("ranges",t.ranges)("timePicker",!0)("ngModel",t.selectedMoments),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngModel",t.selectedViolation)("ngModelOptions",e.\u0275\u0275pureFunction0(41,T))("options",e.\u0275\u0275pipeBind1(18,33,t.violationTypeList)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModelOptions",e.\u0275\u0275pureFunction0(42,T))("ngModel",t.selectedItems)("options",e.\u0275\u0275pipeBind1(22,35,t.dropdownList)),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",null===t.selectedMoments.startDate||null===t.selectedMoments.endDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.loading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.loading),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",null===t.selectedMoments.startDate||null===t.selectedMoments.endDate||t.excelLoad),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.excelLoad),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.excelLoad),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.isdatewise||t.isLatest),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngbTooltip",t.alert?"notification on":"notification off"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.alert),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.alert),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngbTooltip",t.audioOff?"mute":"unmute"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.audioOff),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.audioOff),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!(t.isdatewise||t.isLatest)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!t.isdatewise),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.isdatewise),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isdatewise),e.\u0275\u0275advance(23),e.\u0275\u0275property("ngIf",t.isEditTable),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(82,37,t.violData)),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",e.\u0275\u0275pipeBind1(85,39,t.total))("page",t.page)("pageSize",t.pageSize),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",t.currentViol))},dependencies:[d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.Q7,j.BN,_.NgForOf,_.NgIf,d.On,u.N9,u._L,u._h,D.mP,v.SP,_.AsyncPipe],styles:['.image[_ngcontent-%COMP%]{margin-left:0;margin-right:0;height:174px;width:330px;object-fit:cover;border-radius:5px!important}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{background-color:#f8f8f8!important;border-radius:5px!important;box-shadow:none}ngb-pagination[_ngcontent-%COMP%]     ul>li.active>a{background-color:#2d5686!important;border-radius:5px!important;box-shadow:none}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{background-color:#f8f8f8!important;border-radius:5px!important;color:var(--label-color)!important;box-shadow:none}ngb-pagination[_ngcontent-%COMP%]     ul>li.active>a{background-color:var(--label-color)!important;border-radius:5px!important;border:1px solid var(--label-color)!important;box-shadow:none}.task-input[_ngcontent-%COMP%]{padding:0 25px;position:relative}.task-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:5px 35px 5px 5px;height:40px}.datePickerContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.datePickerContainer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important}input[_ngcontent-%COMP%]{width:100%}.img[_ngcontent-%COMP%]{height:20px;width:20px}.task-input[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:50%;position:absolute;transform:translate(170px,-50%)}input[type=checkbox][_ngcontent-%COMP%]{display:block;height:30px;margin:0 0 -53px -9999px;order:4;top:5px;outline:none;counter-increment:undone-items}input[_ngcontent-%COMP%]:checked{pointer-events:none;order:2;counter-increment:done-items}label[_ngcontent-%COMP%]{pointer-events:none;display:block;position:relative;padding:15px 10px 15px 0;border-top:1px dashed #fff;order:4;cursor:pointer;animation:undone .5s}label[_ngcontent-%COMP%]:before{content:"\\f10c";display:block;position:absolute;margin-right:10px;margin-left:10px}input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{order:2;animation:done .5s}input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{margin-left:3px;margin-right:2rem!important;color:#cc1d1d;content:"\\2713"}input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{margin-left:3px;margin-right:2rem!important;color:#cc1d1d;content:"\\2716"}#editViol[_ngcontent-%COMP%]{text-align:center;align-content:center}td[_ngcontent-%COMP%]{text-align:center!important;align-content:center!important}input[type=radio][_ngcontent-%COMP%]{display:block;height:30px;margin:0 0 -53px -9999px;order:4;outline:none;position:relative;counter-increment:undone-items}#verify[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{pointer-events:all;display:block;position:relative;border-top:1px dashed #fff;order:4;cursor:pointer;animation:undone .5s;margin-left:10px!important}#verify[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:before{content:"\\25ef";display:block;position:absolute;margin-right:10px!important;right:2rem;font-weight:500;color:#c9c9c9}#verify[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{order:2;animation:done .5s}#verify[_ngcontent-%COMP%]   #wrong[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{font-size:larger;font-family:500;color:#cc1d1d;content:"\\2713"}#verify[_ngcontent-%COMP%]   #right[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{font-size:larger;font-family:700;color:#1dc41d;content:"\\2713"}.w-full[_ngcontent-%COMP%]{width:inherit!important;color:#000!important}']}),o})()}];let Ce=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({providers:[L.N],imports:[k.A,x.Bz.forChild(xe),C.QM,D.o6,M.ZQ.forRoot(),I.Rh.forRoot({timeOut:5e3,toastComponent:O.n,progressBar:!0,newestOnTop:!0}),v.n1.forRoot({}),u.IJ,x.Bz]}),o})()}}]);