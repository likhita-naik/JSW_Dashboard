"use strict";(self.webpackChunkDOCKETRUN=self.webpackChunkDOCKETRUN||[]).push([[27],{7027:(ht,y,f)=>{f.r(y),f.d(y,{CameraRoiModule:()=>mt});var C=f(646),E=f(9174),O=(f(8621),f(9646)),I=f(2953),s=f(433),e=f(4650),M=f(7445),A=f(3868),x=f(6895);const L=["roiInfo"],V=["crowdCount"],N=["CCNameChangeModal"],F=["ROINameChangeModal"],P=["canvasContainer"],j=["ROINameModal"],H=["TCNameModal"],B=["ccForFrame"],$=["CCType"];function q(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",63)(1,"div",64)(2,"div",65)(3,"div",66)(4,"h5",45),e.\u0275\u0275text(5,"Camera Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"h3"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(8,"div",64)(9,"div",65)(10,"div",66)(11,"h5",45),e.\u0275\u0275text(12,"Camera IP"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"h3"),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(15,"div",64)(16,"div",65)(17,"div",66)(18,"h5",45),e.\u0275\u0275text(19,"Area"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"h3"),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(22,"div",64)(23,"div",65)(24,"div",66)(25,"h5",45),e.\u0275\u0275text(26,"Plant"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"h3"),e.\u0275\u0275text(28),e.\u0275\u0275elementEnd()()()()()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(t.cameraData[0].cameraname),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(t.cameraData[0].camera_ip),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(t.cameraData[0].area?t.cameraData[0].area:"None"),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(t.cameraData[0].plant?t.cameraData[0].plant:"None")}}function z(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",67),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.RoiName())}),e.\u0275\u0275text(1,"Confirm ROI"),e.\u0275\u0275elementEnd()}}function Z(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=r.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t," ")}}function Q(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",72)(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td",78),e.\u0275\u0275listener("dblclick",function(){const o=e.\u0275\u0275restoreView(t).index,l=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(l.AlterROIName(o))}),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275template(6,Z,2,1,"div",79),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td")(8,"button",80),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).index,l=e.\u0275\u0275nextContext(3),c=e.\u0275\u0275reference(94);return e.\u0275\u0275resetView(l.isDelete(o,c))}),e.\u0275\u0275text(9,"Delete"),e.\u0275\u0275elementEnd()()()}if(2&a){const t=r.$implicit,i=r.index;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.roi_name),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.roi_data.label_name)}}function Y(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=r.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t," ")}}function U(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275template(6,Y,2,1,"div",77),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td")(8,"button",81),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(n.OnDeleteTCROI())}),e.\u0275\u0275element(9,"fa-icon",82),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(10,"hr"),e.\u0275\u0275elementEnd()}if(2&a){const t=r.$implicit,i=r.index;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.area_name),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.class_name)}}function W(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",5)(1,"div",40)(2,"div",70)(3,"b"),e.\u0275\u0275text(4," ROI list"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",6)(6,"table",71)(7,"thead")(8,"tr",72)(9,"th",73),e.\u0275\u0275text(10,"SI no"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"th",73),e.\u0275\u0275text(12,"ROI name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"th",73),e.\u0275\u0275text(14,"Object"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"th",73),e.\u0275\u0275element(16,"fa-icon",74),e.\u0275\u0275text(17,"Settings "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"tbody"),e.\u0275\u0275template(19,Q,10,3,"tr",75),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(20,"div",76),e.\u0275\u0275text(21,"Traffic Count Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"table")(23,"thead")(24,"tr")(25,"th",73),e.\u0275\u0275text(26,"Index"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"th",73),e.\u0275\u0275text(28,"Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"th",73),e.\u0275\u0275text(30,"Objects"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(31,"th"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"tbody"),e.\u0275\u0275template(33,U,11,3,"tr",77),e.\u0275\u0275elementEnd()()()()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngForOf",t.allCameraData),e.\u0275\u0275advance(14),e.\u0275\u0275property("ngForOf",t.cameraData[0].tc_data)}}function X(a,r){1&a&&(e.\u0275\u0275elementStart(0,"div",5)(1,"div",23)(2,"div",83)(3,"h5"),e.\u0275\u0275text(4," No roi is added,click add button to add ROI and right click to confirm the ROI"),e.\u0275\u0275elementEnd()()()())}function G(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",4),e.\u0275\u0275template(1,W,34,2,"div",68),e.\u0275\u0275template(2,X,5,0,"ng-template",null,69,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275reference(3),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.allCameraData.length>0)("ngIfElse",t)}}function K(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=r.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t," ")}}function J(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",72)(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td",78),e.\u0275\u0275listener("dblclick",function(){const o=e.\u0275\u0275restoreView(t).index,l=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(l.AlterROIName(o))}),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275template(6,K,2,1,"div",79),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td")(8,"button",80),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).index,l=e.\u0275\u0275nextContext(3),c=e.\u0275\u0275reference(94);return e.\u0275\u0275resetView(l.isDelete(o,c))}),e.\u0275\u0275text(9,"Delete"),e.\u0275\u0275elementEnd()()()}if(2&a){const t=r.$implicit,i=r.index;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.roi_name),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.roi_data.label_name)}}function ee(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"table",71)(1,"thead")(2,"tr",72)(3,"th",73),e.\u0275\u0275text(4,"SI no"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"th",73),e.\u0275\u0275text(6,"ROI name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"th",73),e.\u0275\u0275text(8,"Objects"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"th",73),e.\u0275\u0275element(10,"fa-icon",74),e.\u0275\u0275text(11,"Settings "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(12,"tbody"),e.\u0275\u0275template(13,J,10,3,"tr",75),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(13),e.\u0275\u0275property("ngForOf",t.allCameraData)}}function te(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"li",28)(1,"h5",32),e.\u0275\u0275text(2,"Danger Zone Details:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,ee,14,1,"table",84),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.cameraData[0].roi_data.length>0)}}function ie(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"li",85)(1,"span",86),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span",13),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.cameraData[0].alarm_type.charAt(0).toUpperCase()+t.cameraData[0].alarm_type.slice(1),"'s IP : "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.cameraData[0].alarm_ip_address?t.cameraData[0].alarm_ip_address:"---")}}function ne(a,r){1&a&&(e.\u0275\u0275elementStart(0,"div",87),e.\u0275\u0275text(1,"No AI analytics are added to this camera."),e.\u0275\u0275elementEnd())}const v=function(a){return{"is-invalid":a}};function ae(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",40)(1,"div",70)(2,"h4"),e.\u0275\u0275text(3," Change ROI name"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",88)(5,"form",89),e.\u0275\u0275element(6,"input",90),e.\u0275\u0275elementStart(7,"div",91),e.\u0275\u0275text(8," Please enter roi name. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"button",92),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.ChangeROIName())}),e.\u0275\u0275text(10,"Change"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"button",93),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.close("Cross click"))}),e.\u0275\u0275text(12,"cancel"),e.\u0275\u0275elementEnd()()()()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("formControl",t.tempROIID)("ngClass",e.\u0275\u0275pureFunction1(3,v,t.tempROIID.invalid&&t.tempROIID.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",t.tempROIID.invalid&&t.tempROIID.touched?"invalid-feedback":"visually-hidden")}}function oe(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",40)(1,"div",70)(2,"h4"),e.\u0275\u0275text(3," Change Crowd Count name"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",88)(5,"form",89),e.\u0275\u0275element(6,"input",90),e.\u0275\u0275elementStart(7,"div",91),e.\u0275\u0275text(8," Please enter roi name. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"button",92),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.ChangeROIName())}),e.\u0275\u0275text(10,"Change"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"button",93),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.close("Cross click"))}),e.\u0275\u0275text(12,"cancel"),e.\u0275\u0275elementEnd()()()()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("formControl",t.tempROIID)("ngClass",e.\u0275\u0275pureFunction1(3,v,t.tempROIID.invalid&&t.tempROIID.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",t.tempROIID.invalid&&t.tempROIID.touched?"invalid-feedback":"visually-hidden")}}function se(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",108),e.\u0275\u0275element(1,"input",109),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,v,t.get("min").invalid||t.get("min").value==t.get("max").value&&t.get("min").touched&&t.get("max").touched&&t.get("min").value>=t.get("max").value))}}function re(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",108),e.\u0275\u0275element(1,"input",110),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,v,t.get("max").invalid))}}function le(a,r){1&a&&(e.\u0275\u0275elementStart(0,"span",111)(1,"small"),e.\u0275\u0275text(2,"Invalid Values for Minimum and Maximum "),e.\u0275\u0275elementEnd()())}function ce(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",97)(1,"div",102)(2,"div",99)(3,"div",103)(4,"input",104),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(o.ClassId(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"label",105),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,se,2,3,"div",106),e.\u0275\u0275template(8,re,2,3,"div",106),e.\u0275\u0275template(9,le,3,0,"span",107),e.\u0275\u0275elementEnd()()()}if(2&a){const t=r.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("formControlName",t.get("object").value)("defaultValue","person")("value","person")("id",t.get("object").value),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",t.get("object").value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.get("object").value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.get(t.get("object").value).value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.get(t.get("object").value).value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.get("min").touched&&t.get("max").touched&&t.get("min").value>=t.get("max").value)}}function me(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",94)(1,"h3"),e.\u0275\u0275text(2,"Crowd Count For Full Frame"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div",95)(4,"div",96)(5,"div",97)(6,"div",98)(7,"div")(8,"div",99),e.\u0275\u0275template(9,ce,10,10,"div",100),e.\u0275\u0275elementStart(10,"div",6)(11,"button",101),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.onSaveCCFrame())}),e.\u0275\u0275text(12,"Save"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275text(13," - "),e.\u0275\u0275elementEnd()()()()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(8),e.\u0275\u0275property("formGroup",t.CrowdForm),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.ccObjectsMinMax),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",t.CCValid<=0)}}function de(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",40)(1,"div",70)(2,"h4"),e.\u0275\u0275text(3," ROI Name"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",88)(5,"form",89),e.\u0275\u0275element(6,"input",112),e.\u0275\u0275elementStart(7,"div",91),e.\u0275\u0275text(8," Please enter roi name. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",113)(10,"div",34)(11,"input",114),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.ClassId(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"label",115),e.\u0275\u0275text(13,"Person"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(14,"button",116),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.nameSubmit())}),e.\u0275\u0275text(15,"Submit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"button",117),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.close("Cross click"))}),e.\u0275\u0275text(17,"cancel"),e.\u0275\u0275elementEnd()()()()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(7,v,t.roiNameControl.invalid&&t.roiNameControl.touched&&t.roiNameControl.dirty))("formControl",t.roiNameControl),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",t.roiNameControl.invalid&&t.roiNameControl.touched?"invalid-feedback":"visually-hidden"),e.\u0275\u0275advance(4),e.\u0275\u0275property("formControl",t.classIDPerson)("defaultValue","person")("value","person"),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",t.roiNameControl.invalid||0==t.classIds.length)}}function ue(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",95)(1,"div",118)(2,"div",96)(3,"div",119)(4,"div",120)(5,"i",121),e.\u0275\u0275text(6,"\ue5cd"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"h4",122),e.\u0275\u0275text(8,"Are you sure?"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",95)(10,"p"),e.\u0275\u0275text(11,"Do you really want to delete these ROI? This process cannot be undone."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",123)(13,"button",124),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.close("Cross click"))}),e.\u0275\u0275text(14,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"button",125),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.DeleteROI())}),e.\u0275\u0275text(16,"Delete"),e.\u0275\u0275elementEnd()()()()()}}function he(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",95)(1,"div",118)(2,"div",96)(3,"div",119)(4,"div",120)(5,"i",121),e.\u0275\u0275text(6,"\ue5cd"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"h4",122),e.\u0275\u0275text(8,"Are you sure?"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",95)(10,"p"),e.\u0275\u0275text(11,"Do you really want to delete these ROI? This process cannot be undone."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",123)(13,"button",124),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.close("Cross click"))}),e.\u0275\u0275text(14,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"button",125),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.DeleteCCROI())}),e.\u0275\u0275text(16,"Delete"),e.\u0275\u0275elementEnd()()()()()}}function pe(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",95)(1,"div",118)(2,"div",96)(3,"div",119)(4,"div",120)(5,"i",121),e.\u0275\u0275text(6,"\ue5cd"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"h4",122),e.\u0275\u0275text(8,"Are you sure?"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",95)(10,"p"),e.\u0275\u0275text(11,"Do you really want to delete these ROI? This process cannot be undone."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",123)(13,"button",124),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.close("Cross click"))}),e.\u0275\u0275text(14,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"button",125),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.OnDeleteTCROI())}),e.\u0275\u0275text(16,"Delete"),e.\u0275\u0275elementEnd()()()()()}}function ge(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",108),e.\u0275\u0275element(1,"input",109),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,v,t.get("min").invalid||t.get("min").value==t.get("max").value&&t.get("min").touched&&t.get("max").touched&&t.get("min").value>=t.get("max").value))}}function fe(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",108),e.\u0275\u0275element(1,"input",110),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,v,t.get("max").invalid))}}function _e(a,r){1&a&&(e.\u0275\u0275elementStart(0,"span",111)(1,"small"),e.\u0275\u0275text(2,"Invalid Values for Minimum and Maximum "),e.\u0275\u0275elementEnd()())}function ve(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",97)(1,"div",102)(2,"div",99)(3,"div",103)(4,"input",104),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(o.ClassId(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"label",105),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,ge,2,3,"div",106),e.\u0275\u0275template(8,fe,2,3,"div",106),e.\u0275\u0275template(9,_e,3,0,"span",107),e.\u0275\u0275elementEnd()()()}if(2&a){const t=r.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("formControlName",t.get("object").value)("defaultValue","person")("value","person")("id",t.get("object").value),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",t.get("object").value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.get("object").value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.get(t.get("object").value).value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.get(t.get("object").value).value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.get("min").touched&&t.get("max").touched&&t.get("min").value>=t.get("max").value)}}function Ce(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",40)(1,"div",70)(2,"h4"),e.\u0275\u0275text(3," Crowd Count ROI"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",88)(5,"form",126),e.\u0275\u0275element(6,"input",112),e.\u0275\u0275elementStart(7,"div",91),e.\u0275\u0275text(8," Please enter roi name. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,ve,10,10,"div",100),e.\u0275\u0275elementStart(10,"button",116),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.OnAddingNewCCRoi())}),e.\u0275\u0275text(11,"Submit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"button",117),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.close("Cross click"))}),e.\u0275\u0275text(13,"cancel"),e.\u0275\u0275elementEnd()()()()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(5,v,t.crowdCountRoiName.invalid&&t.crowdCountRoiName.touched&&t.crowdCountRoiName.dirty))("formControl",t.crowdCountRoiName),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",t.crowdCountRoiName.invalid&&t.crowdCountRoiName.touched?"invalid-feedback":"visually-hidden"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.ccObjectsMinMax),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",t.CCValid<=0||t.crowdCountRoiName.invalid)}}function be(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",94)(1,"h3"),e.\u0275\u0275text(2,"Select Traffic Count"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div",95)(4,"div",96)(5,"div",127)(6,"div",6)(7,"div",128)(8,"div",34)(9,"input",129),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.TrafficCountConfig(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"label",115),e.\u0275\u0275text(11,"Entry"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",34)(13,"input",130),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.TrafficCountConfig(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"label",131),e.\u0275\u0275text(15,"Exit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",34)(17,"input",132),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.TrafficCountConfig(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"label",133),e.\u0275\u0275text(19,"Entry and Exit"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(20,"div",134)(21,"p",6),e.\u0275\u0275text(22," Now you will draw directions"),e.\u0275\u0275elementEnd()()()()()()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(9),e.\u0275\u0275property("formControl",t.classIDPerson)("defaultValue","Entry")("value","Entry"),e.\u0275\u0275advance(4),e.\u0275\u0275property("formControl",t.classIDTruck)("value","Exit")("defaultValue","Exit"),e.\u0275\u0275advance(4),e.\u0275\u0275property("formControl",t.classIDTruck)("value","Entry_Exit")("defaultValue","Entry_Exit")}}function xe(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",40)(1,"div",70)(2,"h4"),e.\u0275\u0275text(3," Traffic Count Name"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",88)(5,"form",89),e.\u0275\u0275element(6,"input",135),e.\u0275\u0275elementStart(7,"div",91),e.\u0275\u0275text(8," Please enter roi name. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",113)(10,"div",34)(11,"input",114),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.ClassId(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"label",115),e.\u0275\u0275text(13,"Person"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",34)(15,"input",136),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.ClassId(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"label",131),e.\u0275\u0275text(17,"Car"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"div",34)(19,"input",137),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.ClassId(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"label",133),e.\u0275\u0275text(21,"Bike"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div",34)(23,"input",138),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.ClassId(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"label",139),e.\u0275\u0275text(25,"Truck"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(26,"button",140),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.AddTrafficCountData())}),e.\u0275\u0275text(27,"Submit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"button",117),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.close("Cross click"))}),e.\u0275\u0275text(29,"cancel"),e.\u0275\u0275elementEnd()()()()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(16,v,t.tcName.invalid&&t.tcName.touched&&t.tcName.dirty))("formControl",t.tcName),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",t.tcName.invalid&&t.tcName.touched?"invalid-feedback":"visually-hidden"),e.\u0275\u0275advance(4),e.\u0275\u0275property("formControl",t.classIDPerson)("defaultValue","person")("value","person"),e.\u0275\u0275advance(4),e.\u0275\u0275property("formControl",t.classIDCar)("value","car")("defaultValue","car"),e.\u0275\u0275advance(4),e.\u0275\u0275property("formControl",t.classIDBike)("value","bike")("defaultValue","bike"),e.\u0275\u0275advance(4),e.\u0275\u0275property("formControl",t.classIDTruck)("value","truck")("defaultValue","truck"),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",t.tcName.invalid||0==t.classIds.length)}}function Ie(a,r){1&a&&(e.\u0275\u0275elementStart(0,"div",95)(1,"div",118)(2,"div",96)(3,"div",119)(4,"h4",122),e.\u0275\u0275text(5,"Please Select the Crowd Count Type"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",95)(7,"div",141),e.\u0275\u0275element(8,"h1"),e.\u0275\u0275elementStart(9,"form",142)(10,"section",143),e.\u0275\u0275element(11,"input",144),e.\u0275\u0275elementStart(12,"label",145),e.\u0275\u0275text(13,"ROI"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(14,"input",146),e.\u0275\u0275elementStart(15,"label",147),e.\u0275\u0275text(16,"Full Frame"),e.\u0275\u0275elementEnd()()()()()()()())}let we=(()=>{class a{constructor(t,i,n,o){this.ActiveRoute=t,this.server=i,this.router=n,this.modalService=o,this.cameraData={},this.CameraDataObservable=(0,O.of)({}),this.isCameraData=!1,this.ROIsRoiPoints=[],this.newROIPoints=[],this.isAddROI=!1,this.CcRois=[],this.isPolygonDrawn=!1,this.isEdit=!1,this.isLock1=!1,this.isTag=!1,this.isLock2=!1,this.isRackWindow=!1,this.AllROIs=[],this.TCData=[],this.tempData=[],this.allCameraData=[],this.isEditText=!1,this.ppeConfig={helmet:!1,vest:!1},this.isLoading=!1,this.isChanges=!1,this.trafficCountLineROIS=[],this.trafficCountData=[],this.tempTCData=[],this.tempTCLineROIS=[],this.TCCanvasData=[],this.TCLineList=[],this.isAddCC=!1,this.tempTCCanvas=[],this.ppeObjects=[],this.raObjects=[],this.ccObjects=[],this.ppeAlarmObjects=[],this.raAlarmObjects=[],this.CCValid=0,this.CCpoints=[],this.CCClasses=[],this.AISolutions=[],this.CCObjectCounts=[],this.CCObjectsCount=[],this.fireAndSmoke={fire:!1,smoke:!1},this.ccObjectsMinMax=[new s.cw({object:new s.NI("person"),person:new s.NI(!0,s.kI.requiredTrue),min:new s.NI(0,s.kI.pattern(/^[^-\D]\d*$/)),max:new s.NI(0,s.kI.pattern(/^[^-\D]\d*$/))}),new s.cw({object:new s.NI("car"),car:new s.NI(!1,s.kI.requiredTrue),min:new s.NI(0,s.kI.pattern(/^[^-\D]\d*$/)),max:new s.NI(0,s.kI.pattern(/^[^-\D]\d*$/))}),new s.cw({object:new s.NI("truck"),truck:new s.NI(!1,s.kI.requiredTrue),min:new s.NI(0,s.kI.pattern(/^[^-\D]\d*$/)),max:new s.NI(0,s.kI.pattern(/^[^-\D]\d*$/))}),new s.cw({object:new s.NI("bike"),bike:new s.NI(!1,s.kI.requiredTrue),min:new s.NI(0,s.kI.pattern(/^[^-\D]\d*$/)),max:new s.NI(0,s.kI.pattern(/^[^-\D]\d*$/))})],this.alarmPPEObjects=new s.cw({helemet:new s.NI(s.kI.requiredTrue),vest:new s.NI(s.kI.requiredTrue)}),this.alarmRAObjects=new s.cw({person:new s.NI(s.kI.requiredTrue),car:new s.NI(s.kI.requiredTrue),truck:new s.NI(s.kI.requiredTrue),bike:new s.NI(s.kI.requiredTrue)}),this.crowdCountRoiName=new s.NI("",s.kI.required),this.crowdConfig=[],this.tcName=new s.NI("",s.kI.required),this.peopleCrowdForm=new s.cw({min:new s.NI(null,s.kI.pattern("^(?!-)d+$")),max:new s.NI(null,s.kI.pattern(/\d+/))}),this.CrowdForm=new s.cw({min:new s.NI(null,[s.kI.pattern(/^[^-a-zA-Z]+$/),s.kI.required]),max:new s.NI(null,[s.kI.pattern(/\d+/),s.kI.required])}),this.vehicleCrowdForm=new s.cw({min:new s.NI(null,s.kI.pattern(/\d+/)),max:new s.NI(null,s.kI.pattern(/\d+/))}),this.tempROIID=new s.NI("",s.kI.required),this.ratio=1,this.polygonOptions={fill:"rgba(0,0, 0,0)",strokeWidth:3,stroke:"rgb(127, 255, 0)",scaleX:1,scaleY:1,objectCaching:!1,selectable:!1,transparentCorners:!1,cornerColor:"blue"},this.classIds=["person"],this.classIDPerson=new s.NI("person",s.kI.required),this.classIDCar=new s.NI(0,s.kI.required),this.classIDBike=new s.NI(0,s.kI.required),this.classIDTruck=new s.NI(0,s.kI.required),this.CrowdData=[],this.ppeForm=new s.cw({helmet:new s.NI("helmet"),vest:new s.NI("person")}),this.fireSmokeForm=new s.cw({fire:new s.NI(!1,s.kI.requiredTrue),smoke:new s.NI(!1,s.kI.requiredTrue),water:new s.NI(!1,s.kI.requiredTrue)}),this.vehicleForm=new s.cw({type:new s.NI,make:new s.NI}),this.roiNameControl=new s.NI("",s.kI.required),this.roiPoints=[],this.isMouseDown=!1,this.roiType=0,this.ccTypeList=[{label:"+ Crowd Count Types",items:[{label:"ROI",command:l=>{console.log(l),this.AddCCRoi()}}]}],this.IP=i.IP,this.ccTypeList[0].items[1]={label:"Full Frame",command:l=>{console.log(l),this.AddCCForFrame()}},this.ActiveRoute.queryParams.subscribe(l=>{console.log(l),this.ID=l.id,this.imageName=l.image,this.currentArea=l.area,this.currentPlant=l.plant,console.log(this.currentArea,this.currentPlant),this.server.GetRACameraData(this.ID).subscribe(c=>{console.log(c.message),this.cameraData=c.message,this.AISolutions=this.cameraData[0].ai_solutions?this.cameraData[0].ai_solution:[],console.log(this.AISolutions),this.currentArea=c.area,this.currentPlant=c.plant,this.CameraDataObservable=(0,O.of)(c.message),this.isCameraData=!0,this.cameraData[0].ppe_data.length>0?(this.ppeForm.get("helmet").valueChanges.subscribe(m=>{console.log(m)}),this.ppeConfig=this.cameraData[0].ppe_data[0],console.log(this.ppeConfig),this.cameraData[0].ppe_data[0].helmet?(this.ppeForm.get("helmet").setValue(!0),this.ppeForm.get("helmet").markAsUntouched()):(console.log("ppe not vest"),this.ppeForm.get("helmet").setValue(!1)),this.cameraData[0].ppe_data[0].vest?this.ppeForm.get("vest").setValue(!0):(console.log("ppe not vest"),this.ppeForm.get("vest").setValue(!1))):(console.log("ppe not vest"),this.ppeForm.get("vest").setValue(!1),this.ppeForm.get("helmet").setValue(!1)),console.log(this.cameraData)})})}ngOnInit(){}ngAfterViewInit(){this.canvasSetup(),console.log(document.getElementById("helmet")),this.makeNewROI(),this.ccObjectsMinMax.forEach(t=>{t.valueChanges.subscribe(()=>{t.get(t.get("object").value).value&&t.get("min").valid&&t.get("min").valid?this.CCValid++:this.CCValid=0,(t.get("min").value>t.get("max").value||t.get("min").value==t.get("max").value)&&(this.CCValid=0),console.log(this.CCValid)})}),console.log(this.allCameraData),this.canvas.on("mouse:up",t=>{console.log("mouse up",t),(1==this.roiType||this.AddCCRoi)&&(1===t.button&&!(null!=t.transform&&"modifyPolygon"!==t.transform.action)&&!this.isEdit&&(console.log("polygon  is 1creating"),this.getClickCoords(t.e)),3===t.button&&(this.isAddROI||this.isAddCC)&&(this.newROIPoints.length<4?(console.log("polygon is  3creating"),this.isPolygonDrawn=!1):(console.log("polygon is  3creating"),this.isPolygonDrawn=!0))),2==this.roiType&&!this.isAddCC&&(this.isMouseDown=!1,console.log("traffic count"),this.SaveTrafficCountROI())}),this.canvas.on("mouse:down",t=>{console.log("mouse down");var i=document.getElementById("canvas-container");i.addEventListener("touchstart",o=>{console.log("touch start",o),console.log(o),1==this.roiType||this.AddCCRoi?(this.isEdit||(console.log("polygon  is 1creating"),this.getClickCoords(o)),(this.isAddROI||this.isAddCC)&&(this.newROIPoints.length<4?(console.log("polygon is  3creating"),this.isPolygonDrawn=!1):(console.log("polygon is  3creating"),this.isPolygonDrawn=!0))):2===this.roiType&&this.addingShapeOnMouseDown(t)},!1),i.addEventListener("touchmove",()=>{console.log("touch move")},!1),i.addEventListener("touchcancel",()=>{console.log("touch cancel")},!1),i.addEventListener("touchend",()=>{console.log("touch end")},!1),1===this.roiType||this.isAddCC?(this.isAddROI||this.isAddCC)&&3===t.button&&(this.newROIPoints.length<3?this.isPolygonDrawn=!1:(this.roiNameControl.markAsUntouched(),this.RoiName(),this.isPolygonDrawn=!0)):2===this.roiType&&(null==t.transform||"drag"!==t.transform.action)&&this.addingShapeOnMouseDown(t),this.canvas.on("mouse:move",o=>{this.creatingShapeOnMouseMove(o)}),this.canvas.on("touch:orientation",o=>{console.log(o,"touch events")}),this.canvas.on("touch:drag",o=>{console.log("Touch drag event:",o)});const n=this.canvas.getContext("2d");console.log(n,"context")}),this.canvas.on("object:moving",t=>{console.log(t)})}canvasSetup(){var t=document.getElementById("canvas-container");console.log(t,"canvas"),this.canvas=new fabric.Canvas("canvasROI",{fireRightClick:!0}),console.log(this.canvas),this.canvas.selection=!1,this.canvas.viewportTransform=[1,0,0,1,0,0],this.canvas.setWidth(t.clientWidth),fabric.Image.fromURL(this.IP+"/get_roi_image/"+this.imageName,i=>{console.log(i.width),console.log(i.height),this.canvas.setWidth(i.width),this.canvas.setHeight(i.height),this.canvas.setBackgroundImage(i,this.canvas.requestRenderAll.bind(this.canvas),{scaleX:this.canvas.width/i.width,scaleY:this.canvas.height/i.height})}),this.cameraData.length>0&&null!==this.cameraData[0].roi_data&&this.GetPanelPoints()}RoiName(){this.isPolygonDrawn=!0,this.isAddROI=!1,this.classIds=["person"],this.isAddCC?this.modalService.open(this.CCNameModal).result.then(t=>{console.log("cancel"),this.roiNameControl.setValue(null),this.roiNameControl.reset(),this.CrowdForm.get("min").reset(),this.newROIPoints.splice(0,this.newROIPoints.length),this.CrowdForm.get("min").setValidators(s.kI.required),this.CrowdForm.get("min").setValidators(s.kI.pattern(/^[^-a-zA-Z]+$/)),this.CrowdForm.get("max").reset(),this.CrowdForm.get("max").setValidators(s.kI.required),this.CrowdForm.get("max").setValidators(s.kI.pattern(/^[^-a-zA-Z]+$/)),this.roiNameControl.addValidators(s.kI.required),console.log(this.roiNameControl.value),this.classIds=["person"],this.DeleteNewRoi()},t=>{console.log("submit"),this.CrowdForm.get("min").reset(),this.CrowdForm.get("min").setValidators(s.kI.required),this.CrowdForm.get("min").setValidators(s.kI.pattern(/\d+/)),this.CrowdForm.get("max").reset(),this.CrowdForm.get("max").setValidators(s.kI.required),this.CrowdForm.get("max").setValidators(s.kI.pattern(/\d+/))}):this.modalService.open(this.RoiNameModal,{size:"small",centered:!0,backdrop:"static"}).result.then(t=>{console.log("cancel"),this.roiNameControl.setValue(null),this.roiNameControl.reset(),this.roiNameControl.addValidators(s.kI.required),console.log(this.roiNameControl.value),this.classIds=["person"],this.DeleteNewRoi()},t=>{console.log("submit")})}ModalOpen(t){console.log("full frame"),this.modalService.open(t,{backdrop:"static",keyboard:!0})}onCCTypeSelect(t){console.log(t),console.log("crowd count select")}getDismissReason(t){return t===I.If.ESC?"by pressing ESC":t===I.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}nameSubmit(){this.modalService.dismissAll(),console.log("name submit"),this.OnAddingNewROI()}getClickCoords(t){this.isAddROI&&(this.newPt={x:Math.round(t.layerX),y:Math.round(t.layerY)},this.newROIPoints.push(this.newPt),console.log(this.newPt),this.canvas.add(this.newROI))}Back(){window.close()}makeNewROI(){this.newROI=new fabric.Polygon(this.newROIPoints,this.polygonOptions)}AddNewROI(){this.classIds=["person"],this.polygonOptions.stroke="rgb(127, 255, 0)",this.newROI.stroke="rgb(127, 255, 0)",this.isAddROI=!0,this.isEdit=!1,this.roiType=1,this.newROIPoints.splice(0,this.newROIPoints.length),this.canvas.requestRenderAll(),this.isAddCC=!1}AddNewLine(){this.classIds=["person"],this.roiType=2,this.btnIndex=1,this.isEdit=!1,this.isAddROI=!1,this.isAddCC=!1,this.newROIPoints.splice(0,this.newROIPoints.length)}AddNewArrow(){this.classIds=["person"],this.roiType=2,this.btnIndex=2,this.isEdit=!1}AddCCRoi(){console.log("addcc"),this.newROIPoints.splice(0,this.newROIPoints.length),this.isAddCC=!0,this.isAddROI=!0,this.isEdit=!1,this.roiType=1,this.CrowdForm.get("min").reset(),this.CrowdForm.get("min").setValidators(s.kI.required),this.CrowdForm.get("min").setValidators(s.kI.pattern(/\d+/)),this.CrowdForm.get("max").reset(),this.CrowdForm.get("max").setValidators(s.kI.required),this.CrowdForm.get("max").setValidators(s.kI.pattern(/\d+/)),this.newROI.stroke="rgb(0, 255, 255)"}AddCCForFrame(){console.log("add cc for frame"),this.modalService.open(this.CCForFrame).result.then(t=>{console.log("cancel"),this.roiNameControl.setValue(null),this.roiNameControl.reset(),this.roiNameControl.addValidators(s.kI.required),console.log(this.roiNameControl.value),this.classIds=["person"],this.DeleteNewRoi()},t=>{console.log("submit")})}onSaveCCFrame(){this.isAddROI=!1,this.CCClasses=[],this.CCObjectCounts=[],this.ccObjectsMinMax.forEach(i=>{if(i.get(i.get("object").value).value){var n={class_name:i.get("object").value,min_count:i.get("min").value,max_count:i.get("max").value};this.CCObjectCounts.push(n)}i.get(i.get("object").value).reset(),i.get("min").markAsUntouched(),i.get("min").setValue(0),i.get("max").reset(),i.get("max").reset()}),this.CcRois.push({roi_name_canvas:null,roi_canvas:null,roi_id:null,roi_name:null,cr_data:{bb_box:"",full_frame:!0,roi_id:null,area_name:"",data_object:this.CCObjectCounts}}),this.CrowdForm.get("min").reset(),this.CrowdForm.get("max").reset(),this.newROIPoints.splice(0,this.newROIPoints.length),this.classIDPerson.reset(),this.classIDBike.reset(),this.classIDCar.reset(),this.classIDPerson.setValue("person"),this.classIds=["person"],this.CrowdForm.get("min").reset(),this.CrowdForm.get("min").setValidators(s.kI.required),this.CrowdForm.get("min").setValidators(s.kI.pattern(/\d+/)),this.CrowdForm.get("max").reset(),this.CrowdForm.get("max").setValidators(s.kI.required),this.CrowdForm.get("max").setValidators(s.kI.pattern(/\d+/)),this.modalService.dismissAll(),this.AddCCData()}OnAddingNewROI(){if(this.isAddROI=!1,null!==this.roiNameControl.value){fabric.util.resetObjectTransform(this.newROI);var t=[];const p=[...this.newROIPoints];console.log(p),this.polygonOptions.stroke="rgb(127, 255, 0)";var i=this.newROI._calcDimensions();const h=new fabric.Polygon(p,this.polygonOptions);console.log(h);var n=this.roiNameControl.value;if(null!==n){console.log(n),this.isChanges=!0,this.canvas.add(h),this.canvas.renderAll(),console.log(this.newROI);for(let d=0;d<this.newROIPoints.length;d++)t.push(`${this.newROIPoints[d].x};${this.newROIPoints[d].y};`);var l=t.toString().replace(/,/g,"");console.log(l);var c=new fabric.Text(n,{fontSize:20,backgroundColor:"black",selectable:!1,left:i.left,top:i.top-20,stroke:"rgb(127, 255, 0)",fill:"rgb(127, 255, 0)"});console.log(c),this.canvas.add(c),this.canvas.renderAll();var m={roi_name_canvas:c,roi_canvas:h,roi_name:n,roi_id:this.allCameraData.length-1,roi_data:{bb_box:l,roi_name:n,roi_id:this.allCameraData.length-1,label_name:this.classIds}}}console.log(l),this.allCameraData.push(m),console.log(this.allCameraData),this.newROIPoints.splice(0,this.newROIPoints.length),this.roiNameControl.setValue(null),this.roiNameControl.reset(),this.roiNameControl.setValidators(s.kI.required),this.classIDPerson.reset(),this.classIDBike.reset(),this.classIDCar.reset(),this.classIDPerson.setValue("person"),this.classIds=["person"],this.SaveChanges()}else console.log("elsepart"),this.classIds=["person"],this.DeleteNewRoi()}OnAddingNewCCRoi(){if(this.CCClasses=[],this.CCObjectCounts=[],this.isAddROI=!1,null!==this.crowdCountRoiName.value){fabric.util.resetObjectTransform(this.newROI);var t=[];const p=[...this.newROIPoints];console.log(p);var i=this.newROI._calcDimensions();this.polygonOptions.stroke="rgb(0, 255, 255)";const h=new fabric.Polygon(p,this.polygonOptions);console.log(h);var n=this.crowdCountRoiName.value;if(null!==n){console.log(n),this.isChanges=!0,this.canvas.add(h),this.canvas.renderAll(),console.log(this.newROI);for(let d=0;d<this.newROIPoints.length;d++){let _=Math.round(this.newROIPoints[d].x),u=Math.round(this.newROIPoints[d].y);t.push(`${_};${u};`)}var l=t.toString().replace(/,/g,"");console.log(l);var c=new fabric.Text(n,{fontSize:20,backgroundColor:"black",selectable:!1,left:i.left,top:i.top-20,stroke:"rgb(0, 255, 255)",fill:"rgb(0, 255, 255)"});console.log(c),this.canvas.add(c),this.canvas.renderAll(),this.ccObjectsMinMax.forEach(d=>{if(d.get(d.get("object").value).value){var _={class_name:d.get("object").value,min_count:d.get("min").value,max_count:d.get("max").value};this.CCObjectCounts.push(_)}d.get(d.get("object").value).reset(),d.get("min").markAsUntouched(),d.get("min").setValue(0),d.get("max").reset(),d.get("max").reset()}),console.log(this.CCClasses,this.CCObjectCounts);var m={roi_name_canvas:c,roi_canvas:h,roi_id:n,roi_name:n,cr_data:{bb_box:l,full_frame:!1,roi_id:this.CcRois.length,area_name:n,data_object:this.CCObjectCounts}}}console.log(m),this.CcRois.push(m),this.modalService.dismissAll(),this.AddCCData(),console.log(this.allCameraData),this.newROIPoints.splice(0,this.newROIPoints.length),this.crowdCountRoiName.setValue(null),this.CrowdForm.get("min").reset(),this.CrowdForm.get("min").setValidators(s.kI.required),this.CrowdForm.get("min").setValidators(s.kI.pattern(/\d+/)),this.CrowdForm.get("max").reset(),this.CrowdForm.get("max").setValidators(s.kI.required),this.CrowdForm.get("max").setValidators(s.kI.pattern(/\d+/)),this.classIds=["person"],console.log("cc rois",this.CcRois)}else console.log("elsepart"),this.classIds=["person"],this.DeleteNewRoi(),this.CrowdForm.get("min").reset(),this.CrowdForm.get("max").reset()}OnAddingNewRw(){if(this.isAddROI=!1,null!==this.roiNameControl.value){fabric.util.resetObjectTransform(this.newROI);var t=[];const p=[...this.newROIPoints];console.log(p);var i=this.newROI._calcDimensions();const h=new fabric.Polygon(p,this.polygonOptions);console.log(h);var n=this.roiNameControl.value;if(null!==n){console.log(n),this.isChanges=!0,this.canvas.add(h),this.canvas.renderAll(),console.log(this.newROI);for(let d=0;d<this.newROIPoints.length;d++)t.push(`${this.newROIPoints[d].x};${this.newROIPoints[d].y};`);var l=t.toString().replace(/,/g,"");console.log(l);var c=new fabric.Text(n,{fontSize:20,backgroundColor:"black",selectable:!1,left:i.left,top:i.top-20,stroke:"rgb(127, 255, 0)",fill:"rgb(127, 255, 0)"});console.log(c),this.canvas.add(c),this.canvas.renderAll();var m={roi_name_canvas:c,roi_canvas:h,roi_id:n,roi_name:n,roi_data:{bb_box:l,roi_name:n,class_id:this.classIds}}}console.log(l),this.allCameraData.push(m),console.log(this.allCameraData),this.newROIPoints.splice(0,this.newROIPoints.length),this.roiNameControl.setValue(null),this.classIds=["person"]}else console.log("elsepart"),this.classIds=["person"],this.DeleteNewRoi()}CreateRectangle(t){console.log(t.e);var i=this.canvas.getPointer(t.e),n=t.pointer.x,o=t.pointer.y;this.rectangle=new fabric.Rect({left:n,top:o,width:i.x-n,height:i.y-o,stroke:"red",type:"rect",strokeWidth:2}),this.canvas.add(this.rectangle),n>i.x&&this.rectangle.set({left:Math.abs(i.x)}),o>i.y&&this.rectangle.set({top:Math.abs(i.y)}),this.rectangle.set({width:Math.abs(n-i.x)}),this.rectangle.set({height:Math.abs(o-i.y)}),this.canvas.renderAll()}createRect2(t){var i=this.canvas.getPointer(t.e),n=t.pointer.x,o=t.pointer.y;1===t.button&&(n>i.x&&this.rectangle.set({left:Math.abs(i.x)}),o>i.y&&this.rectangle.set({top:Math.abs(i.y)}),this.rectangle.set({width:Math.abs(n-i.x)}),this.rectangle.set({height:Math.abs(o-i.y)}),this.canvas.renderAll())}Edit(t){this.selectedEditId=t;var i=this.allCameraData[t].roi_canvas;if(this.isEdit=!0,this.isEdit){var n=(c,m)=>(p,h,d,_)=>{var u=h.target,g=fabric.util.transformPoint(new fabric.Point(u.points[c].x-u.pathOffset.x,u.points[c].y-u.pathOffset.y),u.calcTransformMatrix()),b=m(p,h,d,_),T=(u._setPositionDimensions({}),u._getNonTransformedDimensions());return u.setPositionByOrigin(g,(u.points[c].x-u.pathOffset.x)/T.x+.5,(u.points[c].y-u.pathOffset.y)/T.y+.5),b},o=(c,m,p,h)=>{console.log(c);var d=m.target,_=d.controls[d.__corner],u=d.toLocalPoint(new fabric.Point(p,h),"center","center"),g=d._getNonTransformedDimensions(),b=d._getTransformedDimensions(0,0);return d.points[_.pointIndex]={x:u.x*g.x/b.x+d.pathOffset.x,y:u.y*g.y/b.y+d.pathOffset.y},console.log(d.points),!0};let l=i;console.log(l),this.canvas.setActiveObject(this.allCameraData[t].roi_canvas),l=this.canvas.getActiveObject();{console.log("poly first");let c=l.points.length-1;l.cornerStyle="circle",l.cornerColor="rgba(0,0,255,0.5)",l.controls=l.points.reduce((m,p,h)=>(m["p"+h]=new fabric.Control({pointIndex:h,positionHandler:(d,_,u)=>(console.log(u),fabric.util.transformPoint(new fabric.Point(u.points[h].x-u.pathOffset.x,u.points[h].y-u.pathOffset.y),fabric.util.multiplyTransformMatrices(u.canvas.viewportTransform,u.calcTransformMatrix()))),actionHandler:n(h>0?h-1:c,o),actionName:"modifyPolygon"}),console.log(m),m),{})}console.log(new fabric.Control),this.canvas.renderAll()}}EditROI(t){console.log(t),this.isChanges=!0;var i=this.allCameraData.filter(o=>o.roi_id===t?o.roi_canvas:"");console.log(i[0].roi_canvas),console.log(this.allCameraData)}isDelete(t,i){this.deleteID=t,this.modalService.open(i,{centered:!0,backdrop:"static"})}DeleteROI(){var t=this.deleteID,n=this.allCameraData[t].roi_name_canvas;this.canvas.remove(this.allCameraData[t].roi_canvas),this.canvas.remove(n);var l=this.allCameraData[t].roi_data.roi_id;console.log(l),this.allCameraData.splice(t,1),this.cameraData[0].roi_data.splice(t,1);var c={id:this.ID,roi_id:String(l),ai_solutions:["RA"]};this.server.DeleteRoi(c).subscribe(m=>{this.server.notification(m.message),console.log(m),this.modalService.dismissAll()},m=>{this.modalService.dismissAll(),this.server.notification("Something went wrong","Retry")}),this.canvas.renderAll()}DeleteCCROI(){var t=this.deleteID,n=this.CcRois[t].roi_name_canvas;this.canvas.remove(this.CcRois[t].roi_canvas),this.canvas.remove(n);var l=this.CcRois[t].cr_data.roi_id;console.log(l),this.CcRois.splice(t,1),this.cameraData[0].cr_data.splice(t,1);var c={id:this.ID,roi_id:String(l),ai_solutions:this.AISolutions};this.modalService.dismissAll(),this.server.deleteCCData(c).subscribe(m=>{this.server.notification(m.message),console.log(m),this.modalService.dismissAll()},m=>{this.modalService.dismissAll(),this.server.notification("Something went wrong","Retry")}),this.canvas.renderAll()}AlterROIName(t){this.isEditText=!this.isEditText,this.selectedId=t,this.selectedEditId=t,this.tempROIID.setValue(this.allCameraData[t].roi_name),this.modalService.open(this.ROIChangeModal,{size:"small",animation:!0,centered:!0,backdrop:"static"})}ChangeROIName(){this.allCameraData[this.selectedId].roi_name=this.tempROIID.value,this.allCameraData[this.selectedId].roi_name_canvas.text=this.tempROIID.value,this.allCameraData[this.selectedId].roi_data.roi_name=this.tempROIID.value,this.canvas.renderAll(),this.modalService.dismissAll(),this.SaveEditedRoi()}ChangeCCName(){var t;this.CcRois[this.selectedId].roi_name=this.tempROIID.value,this.CcRois[this.selectedId].roi_name_canvas.text=this.tempROIID.value,this.CcRois[this.selectedId].roi_data.roi_name=this.tempROIID.value,this.canvas.renderAll(),this.modalService.dismissAll(),this.CcRois.length>0&&(t=this.CcRois[this.CcRois.length-1].cr_data,console.log("crowd data",t)),this.CcRois.length>0&&this.AISolutions.indexOf("CR")<0&&this.AISolutions.push("CR");var i={id:this.ID,ai_solutions:this.AISolutions,cr_data:[t]};console.log(i),this.server.AddCrowdCount(i).subscribe(n=>{console.log(n)}),this.SaveEditedRoi()}SaveChanges(){console.log(this.isLoading=!0),console.log(this.peopleCrowdForm.get("min").value),console.log(this.peopleCrowdForm.get("max").value);var i=[];if(this.CcRois.length>0&&(this.CcRois.forEach(c=>{i.push(c.cr_data)}),console.log("crowd data",i)),this.peopleCrowdForm.get("min").value||this.peopleCrowdForm.get("max").value){var n={label_name:"people",min_count:this.peopleCrowdForm.get("min").value?this.peopleCrowdForm.get("min").value:0,max_count:this.peopleCrowdForm.get("max").value?this.peopleCrowdForm.get("max").value:0};this.crowdConfig.push(n)}(this.vehicleCrowdForm.get("min").value||this.vehicleCrowdForm.get("max").value)&&(n={label_name:"vehicle",min_count:this.vehicleCrowdForm.get("min").value?this.vehicleCrowdForm.get("min").value:0,max_count:this.vehicleCrowdForm.get("max").value?this.vehicleCrowdForm.get("max").value:0},this.crowdConfig.push(n)),console.log(),console.log(this.allCameraData);var o=[];this.allCameraData.forEach((c,m)=>{o.push({...c.roi_data,roi_id:m+1})}),console.log(o);var l={id:this.ID,ai_solutions:["RA"],imagename:this.imageName,roi_data:o,tc_data:this.trafficCountData,ppe_data:[this.ppeConfig],cr_data:i,fire_smoke_data:[{fire:this.fireSmokeForm.get("fire").value,smoke:this.fireSmokeForm.get("smoke").value,water:this.fireSmokeForm.get("water").value}]};console.log(l),this.server.AddROI(l).subscribe(c=>{console.log(c),this.isLoading=!1,c.success?(this.server.notification(c.message),window.location.reload()):this.server.notification(c.message,"Retry")},c=>{this.isLoading=!1,this.server.notification("Something went wrong","Retry")})}AddCCData(){var t;this.crowdCountRoiName.reset(),this.CcRois.length>0&&(t=this.CcRois[this.CcRois.length-1].cr_data,console.log("crowd data",t)),this.CcRois.length>0&&this.AISolutions.indexOf("CR")<0&&this.AISolutions.push("CR");var i={id:this.ID,ai_solutions:this.AISolutions,cr_data:[t]};console.log(i),this.server.AddCrowdCount(i).subscribe(n=>{console.log(n),n.success?(this.server.notification(n.message),this.RefreshCameraData()):(this.server.notification(n.message,"Retry"),this.canvas.remove(this.CcRois[this.CcRois.length-1].roi_canvas),this.canvas.remove(this.CcRois[this.CcRois.length-1].roi_name_canvas),this.canvas.renderAll())},n=>{this.canvas.remove(this.CcRois[this.CcRois.length-1].roi_canvas),this.canvas.remove(this.CcRois[this.CcRois.length-1].roi_name_canvas),this.canvas.renderAll(),this.server.notification("Something went wrong","Retry")})}AddTCData(){this.trafficCountData.length>0&&this.AISolutions.indexOf("TC")<0&&this.AISolutions.push("TC"),this.server.AddTCData({id:this.ID,ai_solutions:this.AISolutions,tc_data:[this.trafficCountData[this.trafficCountData.length-1]]}).subscribe(n=>{console.log(n),n.success?(this.RefreshCameraData(),this.server.notification(n.message)):this.server.notification(n.message)},n=>{this.server.notification("Something went wrong","Retry")})}savePpeConfig(){var t=[];this.allCameraData.forEach((n,o)=>{t.push({...n.roi_data,roi_id:o+1})}),console.log(t);var i={id:this.ID,ai_solutions:["RA","PPE"],imagename:this.imageName,roi_data:t,tc_data:[],ppe_data:[this.ppeConfig],cr_data:this.crowdConfig,fire_smoke_data:[{fire:this.fireSmokeForm.get("fire").value,smoke:this.fireSmokeForm.get("smoke").value}]};console.log(i),this.server.AddROI(i).subscribe(n=>{console.log(n),this.isLoading=!1,n.success?this.server.notification(n.message):this.server.notification(n.message,"Retry")},n=>{this.isLoading=!1,this.server.notification("Something went wrong","Retry")})}DeleteNewRoi(){this.newROIPoints.splice(0,this.newROIPoints.length),this.canvas.renderAll(),(2==this.roiType||1==this.btnIndex)&&this.DeleteNewTCRoi()}GetPanelPoints(){this.cameraData[0].roi_data.forEach((t,i)=>{console.log(t);var n=t.bb_box.split(";");this.raObjects.push(...t.label_name),console.log(n);var o=[];for(let m=0;m<n.length-1;m+=2){var l={x:Number(n[m])*this.ratio,y:Number(n[m+1])*this.ratio};o.push(l)}var c={roi:o,roi_name:t.roi_name};this.roiPoints.push(c),console.log(c)}),this.raObjects=this.RemoveDuplicates(this.raObjects),console.log(this.raObjects),this.GetCCRoiPoints(),this.DrawExistPanels()}GetCCRoiPoints(){this.cameraData[0].cr_data.forEach((t,i)=>{console.log(t);var n=t.bb_box.split(";");console.log(n);var o=[];for(let m=0;m<n.length-1;m+=2){var l={x:Number(n[m])*this.ratio,y:Number(n[m+1])*this.ratio};o.push(l)}var c={min_count:t.min_count,max_count:t.max_count,class_name:t.class_name,bbox_points:o,area_name:t.area_name};this.CCpoints.push(c),console.log(c)}),this.DrawExistCCRois()}DrawExistCCRois(){this.CCpoints.forEach((t,i)=>{console.log(t),console.log(t.roi),this.polygonOptions.stroke="rgb(0, 255, 255)";var n=new fabric.Polygon(t.bbox_points,this.polygonOptions);console.log(n);var o=new fabric.Text(t.area_name,{fontSize:20,backgroundColor:"black",selectable:!1,left:n.left,top:0==n.top||n.top-20<0||n.top-20==0?20:n.top-20,stroke:"rgb(0, 255, 255)",fill:"rgb(0, 255, 255)"});console.log(n),this.CcRois.push({roi_name_canvas:o,roi_canvas:n,roi_id:i,roi_name:this.cameraData[0].cr_data[i].area_name,cr_data:this.cameraData[0].cr_data[i]}),this.canvas.add(n,o),this.canvas.renderAll()}),this.GetTCPoints()}GetTCPoints(){var t={};this.trafficCountData=this.cameraData[0].tc_data,this.cameraData[0].tc_data.forEach((i,n)=>{console.log(i);var o=i.line_bbox.line.split(";"),l=i.line_bbox.arrow.split(";");console.log(Number(o[n])),t=[{points:{x1:Number(l[0]),y1:Number(l[1]),x2:Number(l[2]),y2:Number(l[3])},type:"arrow",area_name:i.area_name,roi_id:n},{points:{x1:Number(o[0]),y1:Number(o[1]),x2:Number(o[2]),y2:Number(o[3])},type:"line",area_name:i.area_name,roi_id:n}],this.tempTCData.push(t)}),console.log(this.tempTCData),this.drawExistTCRois(this.tempTCData)}DrawExistPanels(){this.roiPoints.forEach((t,i)=>{console.log(t.roi),this.polygonOptions.stroke="rgb(127, 255, 0)";var n=new fabric.Polygon(t.roi,this.polygonOptions);console.log(n);var o=new fabric.Text(t.roi_name,{fontSize:20,backgroundColor:"black",selectable:!1,left:n.left+10,top:n.top+30,stroke:"rgb(127, 255, 0)",fill:"rgb(127, 255, 0)"});console.log(n),this.allCameraData.push({roi_name_canvas:o,roi_canvas:n,roi_name:this.cameraData[0].roi_data[i].roi_name,roi_data:this.cameraData[0].roi_data[i]}),this.canvas.add(n,o),this.canvas.renderAll()}),console.log(this.allCameraData)}drawExistTCRois(t){this.isMouseDown=!0,this.tempTCCanvas=[];var n,o,i=[];t.forEach((l,c)=>{i=[];for(let u=0;u<l.length;u++){const g=l[u];if(console.log(g),"line"==g.type){var m=[g.points.x1,g.points.y1,g.points.x2,g.points.y2];console.log(m),n=new fabric.Line(m,{stroke:"rgb(255, 81, 148)",strokeWidth:3,fill:"rgb(255, 81, 148)",originX:"center",originY:"center",hasControls:!1,hasBorders:!1,selectable:!1,objectCaching:!1,type:"line"}),console.log(n),i.push(n),n.set({x1:Math.round(g.points.x1),y1:Math.fround(g.points.y1)}),this.canvas.add(n)}if("arrow"==g.type){var d=((n=new fabric.Line([g.points.x1,g.points.y1,g.points.x2,g.points.y2],{strokeWidth:3,fill:"rgb(255, 81, 148)",stroke:"rgb(255, 81, 148)",originX:"center",originY:"center",id:"arrow_line",selectable:!1,lockScalingFlip:!0,objectCaching:!1,type:"arrow"})).y1+n.y2)/2;this.deltaX=n.left-(n.x1+n.x2)/2,this.deltaY=n.top-d,console.log(n),o=new fabric.Triangle({left:n.get("x2")+this.deltaX,top:n.get("y2")+this.deltaY,originX:"center",originY:"center",selectable:!1,pointType:"arrow_start",angle:this._FabricCalcArrowAngle(n.x1,n.y1,n.x2,n.y2),width:20,height:20,fill:"rgb(255, 81, 148)",id:"arrow_triangle",uuid:n.uuid}),i.push(n,o),this.canvas.add(n,o);var _=new fabric.Text(g.area_name,{fontSize:16,backgroundColor:"black",selectable:!1,left:n.left-60,top:0==n.top||n.top-20<0||n.top-20==0?20:n.top-20,stroke:"rgb(255, 81, 148)",fill:"rgb(255, 81, 148)"});i.push(_),this.canvas.add(_),this.canvas.renderAll()}}this.canvas.requestRenderAll(),this.tempTCCanvas[c]=i}),console.log(this.tempTCCanvas),this.canvas.requestRenderAll()}SaveEditedRoi(){if(this.peopleCrowdForm.get("min").value||this.peopleCrowdForm.get("max").value){var t={label_name:["people"],min_count:this.peopleCrowdForm.get("min").value?this.peopleCrowdForm.get("min").value:0,max_count:this.peopleCrowdForm.get("max").value?this.peopleCrowdForm.get("max").value:0,roi_id:null};this.crowdConfig.push(t)}(this.vehicleCrowdForm.get("min").value||this.vehicleCrowdForm.get("max").value)&&(t={label_name:["vehicle"],min_count:this.vehicleCrowdForm.get("min").value?this.vehicleCrowdForm.get("min").value:0,max_count:this.vehicleCrowdForm.get("max").value?this.vehicleCrowdForm.get("max").value:0,roi_id:null},this.crowdConfig.push(t));var i=[];console.log(this.selectedEditId);var n=[];if(null!=this.selectedEditId){for(let p=0;p<this.allCameraData[this.selectedEditId].roi_canvas.points.length;p++){console.log(this.allCameraData[this.selectedEditId].roi_canvas.points);var o=this.allCameraData[this.selectedEditId].roi_canvas.points;let h=Math.round(o[p].x),d=Math.round(o[p].y);n.push(`${h};${d};`)}var c=n.toString().replace(/,/g,"");console.log(c),console.log(this.allCameraData[this.selectedEditId].roi_data),this.allCameraData[this.selectedEditId].roi_data.bb_box=c,console.log(this.allCameraData[this.selectedEditId].roi_data),i.push({...this.allCameraData[this.selectedEditId].roi_data})}var m={id:this.ID,ai_solutions:["RA"],imagename:this.imageName,roi_data:i,ppe_data:[this.ppeConfig]};console.log(m),this.server.EditROI(m).subscribe(p=>{console.log(p),p.success?this.server.notification(p.message):this.server.notification(p.message,"Retry")},p=>{this.server.notification("Something went wrong","Retry")})}CalculateAspectRatio(t,i,n){return this.ratio=i/t,this.ratio*n}ClassId(t){if(console.log(t.target.defaultValue),console.log(t.target.checked),t.target.checked)this.classIds.push(t.target.value);else{var i=this.classIds.indexOf(t.target.defaultValue);this.classIds.splice(i,1)}console.log(this.classIds)}OnRAAlarmObjects(t){if(console.log(t.target.defaultValue),console.log(t.target.checked),t.target.checked)this.raAlarmObjects.push(t.target.value);else{var i=this.raAlarmObjects.indexOf(t.target.defaultValue);this.raAlarmObjects.splice(i,1)}console.log(this.raAlarmObjects)}OnPPEAlarmObjects(t){if(console.log(t.target.defaultValue),console.log(t.target.checked),t.target.checked)this.ppeAlarmObjects.push(t.target.value);else{var i=this.ppeAlarmObjects.indexOf(t.target.defaultValue);this.ppeAlarmObjects.splice(i,1)}console.log(this.ppeAlarmObjects)}TrafficCountConfig(t){console.log(t),t.target.checked&&(this.TrafficConfig=t.target.value),this.modalService.dismissAll()}PPE_Config(t){console.log(this.ppeForm),console.log(t.target.value),t.target.checked?("helmet"===t.target.value&&(this.isEdit=!0,this.ppeConfig.helmet=!0,console.log(this.ppeConfig)),"vest"===t.target.value&&(this.isEdit=!0,this.ppeConfig.vest=!0)):(this.isEdit=!0,"helmet"===t.target.value&&(this.ppeConfig.helmet=!1),"vest"===t.target.value&&(this.ppeConfig.vest=!1)),this.savePpeConfig(),console.log("fire",this.fireSmokeForm.get("fire").value,"smoke",this.fireSmokeForm.get("smoke").value),console.log(this.ppeConfig)}VehicleConfig(t){console.log(t.target.value)}DeleteNewTCRoi(){this.trafficCountLineROIS.forEach(t=>{this.canvas.remove(t)}),this.btnIndex=1,this.trafficCountLineROIS=[]}SaveTrafficCountROI(){this.TCCanvasData.push(this.line),this.TCCanvasData.push(this.triangle),console.log(this.line),1==this.btnIndex?this.trafficCountLineROIS.push(this.line):this.trafficCountLineROIS.push(this.line,this.triangle),1==this.trafficCountLineROIS.length&&(this.btnIndex=2),3==this.trafficCountLineROIS.length&&(this.modalService.open(this.TCNameModal,{backdrop:"static"}).result.then(t=>{console.log("cancel"),this.tcName.setValue(null),this.tcName.reset(),this.tcName.addValidators(s.kI.required),console.log(this.tcName.value),this.classIds=["person"],this.DeleteNewTCRoi()},t=>{console.log("submit")}),console.log(this.TCCanvasData)),console.log(this.trafficCountLineROIS)}AddTrafficCountData(){var i,t={};t.line=Math.round(this.trafficCountLineROIS[0].x1).toString()+";"+Math.round(this.trafficCountLineROIS[0].y1).toString()+";"+Math.round(this.trafficCountLineROIS[0].x2).toString()+";"+Math.round(this.trafficCountLineROIS[0].y2).toString()+";",t.arrow=Math.round(this.trafficCountLineROIS[1].x1).toString()+";"+Math.round(this.trafficCountLineROIS[1].y1).toString()+";"+Math.round(this.trafficCountLineROIS[1].x2).toString()+";"+Math.round(this.trafficCountLineROIS[1].y2).toString()+";";var n={class_name:this.classIds,line_bbox:t,area_name:this.tcName.value,roi_id:this.trafficCountData.length};fabric.util.resetObjectTransform(this.newROI);var o=this.line._getLeftToOriginX(),l=this.line._getTopToOriginY(),c=new fabric.Text(this.tcName.value,{fontSize:15,backgroundColor:"black",selectable:!1,left:o-20,top:l-30,stroke:"rgb(255, 81, 148)",fill:"rgb(255, 81, 148)"});i=[...this.trafficCountLineROIS,c],console.log(c),this.canvas.add(c),this.canvas.renderAll(),this.trafficCountData[this.trafficCountData.length]=n,console.log(),console.log("traffic count",this.trafficCountData),this.tempTCLineROIS.push(...this.trafficCountLineROIS),console.log(this.trafficCountLineROIS),this.trafficCountLineROIS=[],this.btnIndex=1,this.tempTCCanvas.push(i),this.AddTCData(),this.modalService.dismissAll()}addingShapeOnMouseDown(t){this.isMouseDown=!0;var i=this.canvas.getPointer(t.e);if(console.log(this.line),1==this.btnIndex){var n=[i.x,i.y,i.x,i.y];console.log(n),this.line=new fabric.Line(n,{stroke:"rgb(255, 81, 148)",strokeWidth:3,fill:"rgb(255, 81, 148)",originX:"center",originY:"center",hasControls:!1,hasBorders:!1,selectable:!1,objectCaching:!1,type:"line"}),console.log(this.line),this.line.set({x1:Math.round(i.x),y1:Math.fround(i.y)}),this.canvas.add(this.line),this.activeObj=this.line}if(2===this.btnIndex){this.line=new fabric.Line([i.x,i.y,i.x,i.y],{strokeWidth:3,fill:"rgb(255, 81, 148)",stroke:"rgb(255, 81, 148)",originX:"center",originY:"center",id:"arrow_line",selectable:!1,lockScalingFlip:!0,objectCaching:!1,type:"arrow"});var c=(this.line.y1+this.line.y2)/2;this.deltaX=this.line.left-(this.line.x1+this.line.x2)/2,this.deltaY=this.line.top-c,this.triangle=new fabric.Triangle({left:this.line.get("x2")+this.deltaX,top:this.line.get("y2")+this.deltaY,originX:"center",originY:"center",selectable:!1,pointType:"arrow_start",angle:-45,width:20,height:20,fill:"rgb(255, 81, 148)",id:"arrow_triangle",uuid:this.line.uuid}),this.canvas.add(this.line,this.triangle),this.activeObj=this.line}this.canvas.requestRenderAll()}IsDeleteTC(t,i){this.deleteID=i,this.modalService.open(t,{backdrop:"static",size:"xs"})}OnDeleteTCROI(){var t=this.deleteID;console.log(this.deleteID),console.log(this.tempTCCanvas),console.log(this.TCCanvasData[t]),console.log(this.trafficCountData[t]),this.tempTCCanvas[t].forEach(n=>{this.canvas.remove(n),this.canvas.renderAll()}),this.trafficCountLineROIS=[],this.btnIndex=1,this.server.deleteTCData({id:this.ID,roi_id:this.trafficCountData[t].roi_id,ai_solutions:this.AISolutions}).subscribe(n=>{this.server.notification(n.message),n.success&&(this.trafficCountData.splice(t,1),this.modalService.dismissAll())})}SaveCCPeople(){var t={label:["people"]};t.min_count=this.peopleCrowdForm.get("min").value,t.max_count=this.peopleCrowdForm.get("max").value,t.roi_id=null,console.log(t)}SaveCCVehicle(){var t={label:["vehicle"]};t.min_count=this.peopleCrowdForm.get("min").value,t.max_count=this.peopleCrowdForm.get("max").value,t.roi_id=null,console.log(t)}creatingShapeOnMouseMove(t){if(!0===this.isMouseDown){console.log("mouse move");var i=this.canvas.getPointer(t.e);1===this.btnIndex&&this.line.set({x2:i.x,y2:i.y}),2===this.btnIndex&&(console.log(this.line.x1),console.log(this.line.y1),this.line.set({x2:i.x,y2:i.y}),console.log(this.line),2==this.btnIndex&&this.triangle.set({left:i.x+this.deltaX,top:i.y+this.deltaY,angle:this._FabricCalcArrowAngle(this.line.x1,this.line.y1,this.line.x2,this.line.y2)}))}this.canvas.requestRenderAll()}ngOnDestroy(){this.modalService.dismissAll()}RefreshCameraData(){this.server.GetRACameraData(this.ID).subscribe(t=>{t.success&&(this.cameraData=t.message,this.trafficCountData=this.cameraData[0].tc_data)})}_FabricCalcArrowAngle(t,i,n,o){var c,m;return m=o-i,180*(0==(c=n-t)?0===m?0:m>0?Math.PI/2:3*Math.PI/2:0===m?c>0?0:Math.PI:c<0?Math.atan(m/c)+Math.PI:m<0?Math.atan(m/c)+2*Math.PI:Math.atan(m/c))/Math.PI+90}RemoveDuplicates(t){return t.filter((i,n)=>t.indexOf(i)===n)}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(C.gz),e.\u0275\u0275directiveInject(M.N),e.\u0275\u0275directiveInject(C.F0),e.\u0275\u0275directiveInject(I.FF))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-camera-roi"]],viewQuery:function(t,i){if(1&t&&(e.\u0275\u0275viewQuery(L,5),e.\u0275\u0275viewQuery(V,5),e.\u0275\u0275viewQuery(N,5),e.\u0275\u0275viewQuery(F,5),e.\u0275\u0275viewQuery(P,7),e.\u0275\u0275viewQuery(j,5),e.\u0275\u0275viewQuery(H,5),e.\u0275\u0275viewQuery(B,5),e.\u0275\u0275viewQuery($,5)),2&t){let n;e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(i.infoModal=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(i.CCNameModal=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(i.CCNameChangeModal=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(i.ROIChangeModal=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(i.canvasContainer=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(i.RoiNameModal=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(i.TCNameModal=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(i.CCForFrame=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(i.CCTYpe=n.first)}},decls:107,vars:9,consts:[[1,"container-fluid","dashboard-content"],[1,"page-header","mb-3"],["class","row mt-3 mb-3","id","analytic",4,"ngIf"],[1,"card","card-body","mb-3"],[1,"row","mb-3"],[1,"col-12"],[1,""],[1,"row"],[1,"col-9","p-2","border-bottom"],[1,"col-4"],[1,"me-2","btn","success",3,"click"],["icon","plus",1,"me-1"],[1,"col-3","p-2","border-bottom"],[1,"float-end"],["class","btn default me-2",3,"click",4,"ngIf"],[1,"me-2","btn","danger",3,"click"],["icon","trash",1,"me-1"],[1,"float-end","btn","primary",3,"click"],["icon","angle-left",1,"me-1"],["id","canvas-container",1,"d-flex","justify-content-center"],["canvasContainer",""],["id","canvasROI","height","auto","width","auto",1,"canvas-class"],["class","row mb-3",4,"ngIf"],[1,"card","card-body"],[1,"mb-2"],[1,"border",2,"border-radius","8.5px"],[1,"list-group"],["class","list-group-item",4,"ngIf"],[1,"list-group-item"],[1,"col-10"],[1,"input-group"],[1,"row","col-2"],[1,"",2,"color","#178489"],[1,"",2,"pointer-events","all",3,"formGroup"],["id","custome",1,"form-check","form-check-inline"],["type","checkbox","id","helmet","value","helmet","defaultValue","","formControlName","helmet",1,"form-check-input",3,"checked","change"],["for","helmet",1,"form-check-label","text-muted"],["type","checkbox","formControlName","vest","name","","value","vest","defaultValue","vest","id","vest",1,"form-check-input",3,"checked","change"],["for","vest",1,"form-check-label","text-muted"],[1,"row","mt-3"],[1,"card"],[1,"d-flex","justify-centent-center","align-items-center"],[1,"col-xl-12","col-lg-6","col-md-12","col-sm-6","col-xs-6"],[1,"col-12","mb-3"],[1,"d-flex","justify-content-center","align-items-center",2,"flex-direction","column"],[1,"text-muted"],[1,"ms-2"],["class","list-group-item mt-2",4,"ngIf"],["noAIsol",""],[1,"alert","alert-dark"],[1,"col-2"],[1,"mx-auto","my-auto"],["ROINameChangeModal",""],["CCNameChangeModal",""],["ccForFrame",""],["ROINameModal",""],["deleteModal",""],["deleteCCModal",""],["deleteTCModal",""],["crowdCount",""],["roiInfo",""],["TCNameModal",""],["CCType",""],["id","analytic",1,"row","mt-3","mb-3"],[1,"col-3"],[1,"card","analytics"],[1,"card-body"],[1,"btn","default","me-2",3,"click"],["class","col-12",4,"ngIf","ngIfElse"],["noRoi",""],[1,"card-header"],[1,"table"],[2,"text-align","center"],["scope","col"],["icon","cog",1,"me-2"],["style","text-align:center;",4,"ngFor","ngForOf"],[1,"class-header"],[4,"ngFor","ngForOf"],[3,"dblclick"],["class","",4,"ngFor","ngForOf"],[1,"btn","btn-sm","danger","me-2",3,"click"],[1,"btn","btn-default",3,"click"],["icon","trash"],[1,"alert","alert-info"],["class","table",4,"ngIf"],[1,"list-group-item","mt-2"],[1,"text-muted","me-2"],[1,"alert","alert-warning"],[1,"card-body","p-4"],["action",""],["type","text","id","ROI",1,"form-control","mb-3",3,"formControl","ngClass"],["id","validationServerUsernameFeedback",3,"ngClass"],["type","submit",1,"btn","success","ms-2","float-end",3,"click"],[1,"btn","danger","me-2","float-end",3,"click"],[1,"modal-header"],[1,"modal-body"],[1,"modal-content"],[1,"d-flex","justify-content-center","align-items-center"],[1,"p-2"],["id","custome",1,"form-inline","row",3,"formGroup"],["class","d-flex justify-content-center align-items-center",4,"ngFor","ngForOf"],[1,"btn","default","float-end",3,"disabled","click"],[1,"d-flex","justify-content-center","align-items-center","mb-3","mt-3"],["id","custome",1,"mb-2"],["type","checkbox","checked","","name","","min","0",1,"form-check-input",3,"formControlName","defaultValue","value","id","change"],[1,"form-check-label","ms-2",3,"for"],["class","col-sm-3",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"col-sm-3"],["type","number","formControlName","min","min","0","id","min","placeholder","min",1,"form-control",3,"ngClass"],["type","number","formControlName","max","pattern","\\d+","name","","min","0","id","min","placeholder","max",1,"form-control",3,"ngClass"],[1,"text-danger"],["type","text","id","ROI","placeholder","Enter ROI name",1,"form-control","mb-3",3,"ngClass","formControl"],[1,"mb-3","mt-3","d-flex","justify-content-center"],["type","checkbox","checked","","name","","id","0",1,"form-check-input",3,"formControl","defaultValue","value","change"],["for","0",1,"form-check-label"],["type","submit",1,"btn","success","ms-1","float-end",3,"disabled","click"],[1,"btn","danger","me-1","float-end",3,"click"],[1,"modal-confirm"],[1,"modal-header","flex-column"],[1,"icon-box"],[1,"material-icons"],[1,"modal-title","w-100"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","danger",3,"click"],["action","",1,""],[1,"alert","alert-info","mb-0"],[1,"d-flex","align-items-center","justify-content-center","mt-3","mb-3"],["type","radio","checked","","name","tcConfig","id","0",1,"form-check-input",3,"formControl","defaultValue","value","change"],["type","radio","name","tcConfig","id","1",1,"form-check-input",3,"formControl","value","defaultValue","change"],["for","1",1,"form-check-label"],["type","radio","name","tcConfig","id","2",1,"form-check-input",3,"formControl","value","defaultValue","change"],["for","2",1,"form-check-label"],[1,"d-flex","align-items-center","justify-content-center"],["type","text","id","ROI","placeholder","Enter Traffic count name",1,"form-control","mb-3",3,"ngClass","formControl"],["type","checkbox","name","","id","1",1,"form-check-input",3,"formControl","value","defaultValue","change"],["type","checkbox","name","","id","2",1,"form-check-input",3,"formControl","value","defaultValue","change"],["type","checkbox","name","","id","3",1,"form-check-input",3,"formControl","value","defaultValue","change"],["for","3",1,"form-check-label"],["type","submit","type","submit",1,"btn","success","ms-1","float-end",3,"disabled","click"],[1,"container"],[1,"form","cf"],[1,"plan","cf"],["type","radio","name","radio1","id","free","value","free"],["for","free",1,"free-label","four","col"],["type","radio","name","radio1","id","basic","value","basic","checked",""],["for","basic",1,"basic-label","four","col"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h3"),e.\u0275\u0275text(3,"Camera Settings"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(4,q,29,4,"div",2),e.\u0275\u0275elementStart(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",7)(12,"div",9)(13,"button",10),e.\u0275\u0275listener("click",function(){return i.AddNewROI()}),e.\u0275\u0275element(14,"fa-icon",11),e.\u0275\u0275text(15,"Danger Zone ROI "),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(16,"div",12)(17,"div",13),e.\u0275\u0275template(18,z,2,0,"button",14),e.\u0275\u0275elementStart(19,"button",15),e.\u0275\u0275listener("click",function(){return i.DeleteNewRoi()}),e.\u0275\u0275element(20,"fa-icon",16),e.\u0275\u0275text(21,"Delete "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"button",17),e.\u0275\u0275listener("click",function(){return i.Back()}),e.\u0275\u0275element(23,"fa-icon",18),e.\u0275\u0275text(24," Back "),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(25,"div",4)(26,"div",5)(27,"div",6)(28,"div",19,20),e.\u0275\u0275element(30,"canvas",21),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275template(31,G,4,2,"div",22),e.\u0275\u0275elementStart(32,"div",7)(33,"div",5)(34,"div",23)(35,"div",24)(36,"b"),e.\u0275\u0275text(37,"AI Solutions:"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"div",25)(39,"ul",26),e.\u0275\u0275template(40,te,4,1,"li",27),e.\u0275\u0275elementStart(41,"li",28)(42,"div",7)(43,"div",29)(44,"div",30)(45,"span",31)(46,"h5",32),e.\u0275\u0275text(47,"PPE :"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(48,"div",33)(49,"div",34)(50,"input",35),e.\u0275\u0275listener("change",function(o){return i.PPE_Config(o)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"label",36),e.\u0275\u0275text(52,"Helmet"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(53,"div",34)(54,"input",37),e.\u0275\u0275listener("change",function(o){return i.PPE_Config(o)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(55,"label",38),e.\u0275\u0275text(56,"Vest"),e.\u0275\u0275elementEnd()()()()()()()()()()()(),e.\u0275\u0275elementStart(57,"div",39)(58,"div",5)(59,"div",40)(60,"div",28)(61,"div",7)(62,"span",41)(63,"h5",32),e.\u0275\u0275text(64,"Alert Details"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(65,"div",7)(66,"div",42)(67,"div",7)(68,"div",43)(69,"div",44)(70,"div")(71,"span",45),e.\u0275\u0275text(72,"Enabled Alert Type: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(73,"span",46)(74,"b"),e.\u0275\u0275text(75),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(76,ie,5,2,"li",47),e.\u0275\u0275elementEnd()()()()()()()()(),e.\u0275\u0275template(77,ne,2,0,"ng-template",null,48,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(79,"div",39)(80,"div",5)(81,"div",49),e.\u0275\u0275text(82,"Above configaration will be applied to this camera"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(83,"div",50),e.\u0275\u0275element(84,"div",51),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(85,ae,13,5,"ng-template",null,52,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(87,oe,13,5,"ng-template",null,53,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(89,me,14,3,"ng-template",null,54,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(91,de,18,9,"ng-template",null,55,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(93,ue,17,0,"ng-template",null,56,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(95,he,17,0,"ng-template",null,57,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(97,pe,17,0,"ng-template",null,58,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(99,Ce,14,7,"ng-template",null,59,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(101,be,23,9,"ng-template",null,60,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(103,xe,30,18,"ng-template",null,61,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(105,Ie,17,0,"ng-template",null,62,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",i.isCameraData),e.\u0275\u0275advance(14),e.\u0275\u0275property("ngIf",!(i.isEdit&&i.isChanges)&&i.isAddROI&&i.newROIPoints.length>2),e.\u0275\u0275advance(13),e.\u0275\u0275property("ngIf",!1),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",i.cameraData[0].roi_data.length>0),e.\u0275\u0275advance(8),e.\u0275\u0275property("formGroup",i.ppeForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("checked",i.ppeConfig.helemt),e.\u0275\u0275advance(4),e.\u0275\u0275property("checked",i.ppeConfig.vest),e.\u0275\u0275advance(21),e.\u0275\u0275textInterpolate1("",i.cameraData[0].alarm_type?i.cameraData[0].alarm_type.charAt(0).toUpperCase()+i.cameraData[0].alarm_type.slice(1):"---"," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=i.cameraData[0].alarm_type))},dependencies:[s._Y,s.Fj,s.wV,s.Wl,s._,s.JJ,s.JL,s.c5,s.qQ,s.oH,s.sg,s.u,A.BN,x.NgClass,x.NgForOf,x.NgIf,s.F],styles:[".card.analytics[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{max-width:inherit!important;overflow-x:hidden!important;text-overflow:clip!important;overflow-y:hidden!important}#analytic[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{max-height:10em;min-height:10em}.canvas-class[_ngcontent-%COMP%]{width:inherit;height:inherit;border-radius:4px;box-shadow:0 8px 15px #0003}body[_ngcontent-%COMP%]{font-family:sans-serif;padding:50px 100px;text-align:center}h2[_ngcontent-%COMP%]{font-size:16px;margin-bottom:1.5em;color:#333}"]}),a})();var ye=f(6003),R=f(805),Oe=f(1795);let S=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[x.CommonModule]}),a})();var w=f(7832);let Re=(()=>{class a extends w.s{}return a.\u0275fac=function(){let r;return function(i){return(r||(r=e.\u0275\u0275getInheritedFactory(a)))(i||a)}}(),a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["BarsIcon"]],standalone:!0,features:[e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275StandaloneFeature],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M13.3226 3.6129H0.677419C0.497757 3.6129 0.325452 3.54152 0.198411 3.41448C0.0713707 3.28744 0 3.11514 0 2.93548C0 2.75581 0.0713707 2.58351 0.198411 2.45647C0.325452 2.32943 0.497757 2.25806 0.677419 2.25806H13.3226C13.5022 2.25806 13.6745 2.32943 13.8016 2.45647C13.9286 2.58351 14 2.75581 14 2.93548C14 3.11514 13.9286 3.28744 13.8016 3.41448C13.6745 3.54152 13.5022 3.6129 13.3226 3.6129ZM13.3226 7.67741H0.677419C0.497757 7.67741 0.325452 7.60604 0.198411 7.479C0.0713707 7.35196 0 7.17965 0 6.99999C0 6.82033 0.0713707 6.64802 0.198411 6.52098C0.325452 6.39394 0.497757 6.32257 0.677419 6.32257H13.3226C13.5022 6.32257 13.6745 6.39394 13.8016 6.52098C13.9286 6.64802 14 6.82033 14 6.99999C14 7.17965 13.9286 7.35196 13.8016 7.479C13.6745 7.60604 13.5022 7.67741 13.3226 7.67741ZM0.677419 11.7419H13.3226C13.5022 11.7419 13.6745 11.6706 13.8016 11.5435C13.9286 11.4165 14 11.2442 14 11.0645C14 10.8848 13.9286 10.7125 13.8016 10.5855C13.6745 10.4585 13.5022 10.3871 13.3226 10.3871H0.677419C0.497757 10.3871 0.325452 10.4585 0.198411 10.5855C0.0713707 10.7125 0 10.8848 0 11.0645C0 11.2442 0.0713707 11.4165 0.198411 11.5435C0.325452 11.6706 0.497757 11.7419 0.677419 11.7419Z","fill","currentColor"]],template:function(t,i){1&t&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg",0),e.\u0275\u0275element(1,"path",1),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275classMap(i.getClassNames()),e.\u0275\u0275attribute("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2}),a})(),Se=(()=>{class a extends w.s{}return a.\u0275fac=function(){let r;return function(i){return(r||(r=e.\u0275\u0275getInheritedFactory(a)))(i||a)}}(),a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["AngleDownIcon"]],standalone:!0,features:[e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275StandaloneFeature],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M3.58659 4.5007C3.68513 4.50023 3.78277 4.51945 3.87379 4.55723C3.9648 4.59501 4.04735 4.65058 4.11659 4.7207L7.11659 7.7207L10.1166 4.7207C10.2619 4.65055 10.4259 4.62911 10.5843 4.65956C10.7427 4.69002 10.8871 4.77074 10.996 4.88976C11.1049 5.00877 11.1726 5.15973 11.1889 5.32022C11.2052 5.48072 11.1693 5.6422 11.0866 5.7807L7.58659 9.2807C7.44597 9.42115 7.25534 9.50004 7.05659 9.50004C6.85784 9.50004 6.66722 9.42115 6.52659 9.2807L3.02659 5.7807C2.88614 5.64007 2.80725 5.44945 2.80725 5.2507C2.80725 5.05195 2.88614 4.86132 3.02659 4.7207C3.09932 4.64685 3.18675 4.58911 3.28322 4.55121C3.37969 4.51331 3.48305 4.4961 3.58659 4.5007Z","fill","currentColor"]],template:function(t,i){1&t&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg",0),e.\u0275\u0275element(1,"path",1),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275classMap(i.getClassNames()),e.\u0275\u0275attribute("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2}),a})(),De=(()=>{class a extends w.s{}return a.\u0275fac=function(){let r;return function(i){return(r||(r=e.\u0275\u0275getInheritedFactory(a)))(i||a)}}(),a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["AngleRightIcon"]],standalone:!0,features:[e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275StandaloneFeature],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M5.25 11.1728C5.14929 11.1694 5.05033 11.1455 4.9592 11.1025C4.86806 11.0595 4.78666 10.9984 4.72 10.9228C4.57955 10.7822 4.50066 10.5916 4.50066 10.3928C4.50066 10.1941 4.57955 10.0035 4.72 9.86283L7.72 6.86283L4.72 3.86283C4.66067 3.71882 4.64765 3.55991 4.68275 3.40816C4.71785 3.25642 4.79932 3.11936 4.91585 3.01602C5.03238 2.91268 5.17819 2.84819 5.33305 2.83149C5.4879 2.81479 5.64411 2.84671 5.78 2.92283L9.28 6.42283C9.42045 6.56346 9.49934 6.75408 9.49934 6.95283C9.49934 7.15158 9.42045 7.34221 9.28 7.48283L5.78 10.9228C5.71333 10.9984 5.63193 11.0595 5.5408 11.1025C5.44966 11.1455 5.35071 11.1694 5.25 11.1728Z","fill","currentColor"]],template:function(t,i){1&t&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg",0),e.\u0275\u0275element(1,"path",1),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275classMap(i.getClassNames()),e.\u0275\u0275attribute("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2}),a})(),lt=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[x.CommonModule,C.Bz,Oe.T,S,R.m8,Re,Se,De,C.Bz,S,R.m8]}),a})();const ct=[{path:"",component:we}];let mt=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[E.A,C.Bz.forChild(ct),ye.o6,lt,C.Bz]}),a})()}}]);