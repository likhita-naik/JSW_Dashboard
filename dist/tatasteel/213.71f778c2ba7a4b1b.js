"use strict";(self.webpackChunktatasteel=self.webpackChunktatasteel||[]).push([[213],{5213:(ae,I,f)=>{f.r(I),f.d(I,{CameraRoiModule:()=>te});var w=f(646),O=f(9174),R=(f(8621),f(9646)),x=f(9755),o=f(433),e=f(4650),S=f(7445),E=f(3868),b=f(6895);const D=["roiInfo"],P=["crowdCount"],F=["ROINameChangeModal"],T=["canvasContainer"],N=["ROINameModal"],V=["TCNameModal"],A=["ccForFrame"];function M(l,h){if(1&l&&(e.\u0275\u0275elementStart(0,"div",46)(1,"div",47)(2,"div",48)(3,"div",49)(4,"h5",50),e.\u0275\u0275text(5,"Camera Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"h3"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(8,"div",47)(9,"div",48)(10,"div",49)(11,"h5",50),e.\u0275\u0275text(12,"Plant"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"h3"),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(15,"div",47)(16,"div",48)(17,"div",49)(18,"h5",50),e.\u0275\u0275text(19,"Area"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"h3"),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd()()()()()),2&l){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(t.cameraData[0].cameraname),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(t.cameraData[0].plant?t.cameraData[0].plant:"None"),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(t.cameraData[0].area?t.cameraData[0].area:"None")}}function L(l,h){if(1&l){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",51),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.RoiName())}),e.\u0275\u0275text(1,"Confirm ROI"),e.\u0275\u0275elementEnd()}}function q(l,h){if(1&l&&(e.\u0275\u0275elementStart(0,"div",5),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&l){const t=h.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t," ")}}function j(l,h){if(1&l){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",57)(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td",61),e.\u0275\u0275listener("dblclick",function(){const a=e.\u0275\u0275restoreView(t).index,r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.AlterROIName(a))}),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275template(6,q,2,1,"div",62),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td")(8,"button",63),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).index,r=e.\u0275\u0275nextContext(3),s=e.\u0275\u0275reference(67);return e.\u0275\u0275resetView(r.isDelete(a,s))}),e.\u0275\u0275text(9,"Delete"),e.\u0275\u0275elementEnd()()()}if(2&l){const t=h.$implicit,i=h.index;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.roi_name),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.roi_data.label_name)}}function B(l,h){if(1&l&&(e.\u0275\u0275elementStart(0,"div",4)(1,"div",54)(2,"div",55)(3,"b"),e.\u0275\u0275text(4," ROI list"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",5)(6,"table",56)(7,"thead")(8,"tr",57)(9,"th",58),e.\u0275\u0275text(10,"SI no"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"th",58),e.\u0275\u0275text(12,"ROI name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"th",58),e.\u0275\u0275text(14,"Object"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"th",58),e.\u0275\u0275element(16,"fa-icon",59),e.\u0275\u0275text(17,"Settings "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"tbody"),e.\u0275\u0275template(19,j,10,3,"tr",60),e.\u0275\u0275elementEnd()()()()()),2&l){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngForOf",t.allCameraData)}}function Y(l,h){1&l&&(e.\u0275\u0275elementStart(0,"div",4)(1,"div",16)(2,"div",64)(3,"h5"),e.\u0275\u0275text(4," No roi is added,click add button to add ROI and right click to confirm the ROI"),e.\u0275\u0275elementEnd()()()())}function X(l,h){if(1&l&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275template(1,B,20,1,"div",52),e.\u0275\u0275template(2,Y,5,0,"ng-template",null,53,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&l){const t=e.\u0275\u0275reference(3),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.allCameraData.length>0)("ngIfElse",t)}}function $(l,h){if(1&l&&(e.\u0275\u0275elementStart(0,"div",5),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&l){const t=h.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t," ")}}function Q(l,h){if(1&l){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",57)(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td",61),e.\u0275\u0275listener("dblclick",function(){const a=e.\u0275\u0275restoreView(t).index,r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.AlterROIName(a))}),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275template(6,$,2,1,"div",62),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td")(8,"button",63),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).index,r=e.\u0275\u0275nextContext(2),s=e.\u0275\u0275reference(67);return e.\u0275\u0275resetView(r.isDelete(a,s))}),e.\u0275\u0275text(9,"Delete"),e.\u0275\u0275elementEnd()()()}if(2&l){const t=h.$implicit,i=h.index;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.roi_name),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.roi_data.label_name)}}function z(l,h){if(1&l&&(e.\u0275\u0275elementStart(0,"table",56)(1,"thead")(2,"tr",57)(3,"th",58),e.\u0275\u0275text(4,"SI no"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"th",58),e.\u0275\u0275text(6,"ROI name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"th",58),e.\u0275\u0275text(8,"Class id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"th",58),e.\u0275\u0275element(10,"fa-icon",59),e.\u0275\u0275text(11,"Settings "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(12,"tbody"),e.\u0275\u0275template(13,Q,10,3,"tr",60),e.\u0275\u0275elementEnd()()),2&l){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(13),e.\u0275\u0275property("ngForOf",t.allCameraData)}}const v=function(l){return{"is-invalid":l}};function G(l,h){if(1&l){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",54)(1,"div",55)(2,"h4"),e.\u0275\u0275text(3," Change ROI name"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",65)(5,"form",66),e.\u0275\u0275element(6,"input",67),e.\u0275\u0275elementStart(7,"div",68),e.\u0275\u0275text(8," Please enter roi name. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"button",69),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.ChangeROIName())}),e.\u0275\u0275text(10,"Change"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"button",70),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(a.close("Cross click"))}),e.\u0275\u0275text(12,"cancel"),e.\u0275\u0275elementEnd()()()()}if(2&l){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("formControl",t.tempROIID)("ngClass",e.\u0275\u0275pureFunction1(3,v,t.tempROIID.invalid&&t.tempROIID.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",t.tempROIID.invalid&&t.tempROIID.touched?"invalid-feedback":"visually-hidden")}}function W(l,h){if(1&l){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",71)(1,"h3"),e.\u0275\u0275text(2,"Crowd Count For Full Frame"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div",72)(4,"div",73)(5,"div",74)(6,"div",75)(7,"div")(8,"div",76)(9,"div",77),e.\u0275\u0275element(10,"input",78),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",77),e.\u0275\u0275element(12,"input",79),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",6)(14,"div",80)(15,"div",30)(16,"input",81),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.ClassId(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"label",82),e.\u0275\u0275text(18,"Person"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(19,"div",5)(20,"button",83),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.onSaveCCFrame())}),e.\u0275\u0275text(21,"Save"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275text(22," - "),e.\u0275\u0275elementEnd()()()()}if(2&l){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(8),e.\u0275\u0275property("formGroup",t.CrowdForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(7,v,t.CrowdForm.get("min").invalid&&t.CrowdForm.get("min").touched)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(9,v,t.CrowdForm.get("max").invalid&&t.CrowdForm.get("max").touched)),e.\u0275\u0275advance(4),e.\u0275\u0275property("formControl",t.classIDPerson)("defaultValue","person")("value","person"),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",t.CrowdForm.get("min").invalid||t.CrowdForm.get("max").invalid||0==t.classIds.length)}}function H(l,h){if(1&l){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",54)(1,"div",55)(2,"h4"),e.\u0275\u0275text(3," ROI Name"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",65)(5,"form",66),e.\u0275\u0275element(6,"input",84),e.\u0275\u0275elementStart(7,"div",68),e.\u0275\u0275text(8," Please enter roi name. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",85)(10,"div",30)(11,"input",81),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.ClassId(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"label",82),e.\u0275\u0275text(13,"Person"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(14,"button",86),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.nameSubmit())}),e.\u0275\u0275text(15,"Submit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"button",87),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(a.close("Cross click"))}),e.\u0275\u0275text(17,"cancel"),e.\u0275\u0275elementEnd()()()()}if(2&l){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(7,v,t.roiNameControl.invalid&&t.roiNameControl.touched&&t.roiNameControl.dirty))("formControl",t.roiNameControl),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",t.roiNameControl.invalid&&t.roiNameControl.touched?"invalid-feedback":"visually-hidden"),e.\u0275\u0275advance(4),e.\u0275\u0275property("formControl",t.classIDPerson)("defaultValue","person")("value","person"),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",t.roiNameControl.invalid||0==t.classIds.length)}}function U(l,h){if(1&l){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",72)(1,"div",88)(2,"div",73)(3,"div",89)(4,"div",90)(5,"i",91),e.\u0275\u0275text(6,"\ue5cd"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"h4",92),e.\u0275\u0275text(8,"Are you sure?"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",72)(10,"p"),e.\u0275\u0275text(11,"Do you really want to delete these ROI? This process cannot be undone."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",93)(13,"button",94),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(a.close("Cross click"))}),e.\u0275\u0275text(14,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"button",95),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.DeleteROI())}),e.\u0275\u0275text(16,"Delete"),e.\u0275\u0275elementEnd()()()()()}}function J(l,h){if(1&l){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",54)(1,"div",55)(2,"h4"),e.\u0275\u0275text(3," Crowd Count ROI"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",65)(5,"form",66),e.\u0275\u0275element(6,"input",84),e.\u0275\u0275elementStart(7,"div",68),e.\u0275\u0275text(8," Please enter roi name. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",76)(10,"div",96),e.\u0275\u0275element(11,"input",78),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",96),e.\u0275\u0275element(13,"input",79),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",85)(15,"div",30)(16,"input",81),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.ClassId(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"label",82),e.\u0275\u0275text(18,"Person"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(19,"button",86),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.OnAddingNewCCRoi())}),e.\u0275\u0275text(20,"Submit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"button",87),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(a.close("Cross click"))}),e.\u0275\u0275text(22,"cancel"),e.\u0275\u0275elementEnd()()()()}if(2&l){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(10,v,t.crowdCountRoiName.invalid&&t.crowdCountRoiName.touched&&t.crowdCountRoiName.dirty))("formControl",t.crowdCountRoiName),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",t.crowdCountRoiName.invalid&&t.crowdCountRoiName.touched?"invalid-feedback":"visually-hidden"),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",t.CrowdForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(12,v,t.CrowdForm.get("min").invalid)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(14,v,t.CrowdForm.get("max").invalid)),e.\u0275\u0275advance(3),e.\u0275\u0275property("formControl",t.classIDPerson)("defaultValue","person")("value","person"),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",t.crowdCountRoiName.invalid||0==t.classIds.length||t.CrowdForm.get("min").invalid||t.CrowdForm.get("max").invalid)}}function K(l,h){if(1&l){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",71)(1,"h3"),e.\u0275\u0275text(2,"Select Traffic Count"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div",72)(4,"div",73)(5,"div",97)(6,"div",5)(7,"div",98)(8,"div",30)(9,"input",99),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.TrafficCountConfig(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"label",82),e.\u0275\u0275text(11,"Entry"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",30)(13,"input",100),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.TrafficCountConfig(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"label",101),e.\u0275\u0275text(15,"Exit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",30)(17,"input",102),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.TrafficCountConfig(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"label",103),e.\u0275\u0275text(19,"Entry and Exit"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(20,"div",104)(21,"p",5),e.\u0275\u0275text(22," Now you will draw directions"),e.\u0275\u0275elementEnd()()()()()()}if(2&l){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(9),e.\u0275\u0275property("formControl",t.classIDPerson)("defaultValue","Entry")("value","Entry"),e.\u0275\u0275advance(4),e.\u0275\u0275property("formControl",t.classIDTruck)("value","Exit")("defaultValue","Exit"),e.\u0275\u0275advance(4),e.\u0275\u0275property("formControl",t.classIDTruck)("value","Entry_Exit")("defaultValue","Entry_Exit")}}function Z(l,h){if(1&l){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",54)(1,"div",55)(2,"h4"),e.\u0275\u0275text(3," Traffic Count Name"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",65)(5,"form",66),e.\u0275\u0275element(6,"input",105),e.\u0275\u0275elementStart(7,"div",68),e.\u0275\u0275text(8," Please enter roi name. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",85)(10,"div",30)(11,"input",81),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.ClassId(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"label",82),e.\u0275\u0275text(13,"Person"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",30)(15,"input",106),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.ClassId(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"label",107),e.\u0275\u0275text(17,"Truck"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"button",108),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.AddTrafficCountData())}),e.\u0275\u0275text(19,"Submit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"button",87),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(a.close("Cross click"))}),e.\u0275\u0275text(21,"cancel"),e.\u0275\u0275elementEnd()()()()}if(2&l){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(10,v,t.tcName.invalid&&t.tcName.touched&&t.tcName.dirty))("formControl",t.tcName),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",t.tcName.invalid&&t.tcName.touched?"invalid-feedback":"visually-hidden"),e.\u0275\u0275advance(4),e.\u0275\u0275property("formControl",t.classIDPerson)("defaultValue","person")("value","person"),e.\u0275\u0275advance(4),e.\u0275\u0275property("formControl",t.classIDTruck)("value","truck")("defaultValue","truck"),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",t.tcName.invalid||0==t.classIds.length)}}const ee=[{path:"",component:(()=>{class l{constructor(t,i,n,a){this.ActiveRoute=t,this.server=i,this.router=n,this.modalService=a,this.cameraData={},this.CameraDataObservable=(0,R.of)({}),this.isCameraData=!1,this.ROIsRoiPoints=[],this.newROIPoints=[],this.isAddROI=!1,this.CcRois=[],this.isPolygonDrawn=!1,this.isEdit=!1,this.isLock1=!1,this.isTag=!1,this.isLock2=!1,this.isRackWindow=!1,this.AllROIs=[],this.TCData=[],this.tempData=[],this.allCameraData=[],this.isEditText=!1,this.ppeConfig={helmet:!1,vest:!1},this.isLoading=!1,this.isChanges=!1,this.trafficCountLineROIS=[],this.trafficCountData=[],this.tempTCData=[],this.tempTCLineROIS=[],this.TCCanvasData=[],this.TCLineList=[],this.isAddCC=!1,this.tempTCCanvas=[],this.CCpoints=[],this.crowdCountRoiName=new o.NI("",o.kI.required),this.crowdConfig=[],this.tcName=new o.NI("",o.kI.required),this.peopleCrowdForm=new o.cw({min:new o.NI(null,o.kI.pattern(/\d+/)),max:new o.NI(null,o.kI.pattern(/\d+/))}),this.CrowdForm=new o.cw({min:new o.NI(null,[o.kI.pattern(/\d+/),o.kI.required]),max:new o.NI(null,[o.kI.pattern(/\d+/),o.kI.required])}),this.vehicleCrowdForm=new o.cw({min:new o.NI(null,o.kI.pattern(/\d+/)),max:new o.NI(null,o.kI.pattern(/\d+/))}),this.tempROIID=new o.NI("",o.kI.required),this.ratio=1,this.polygonOptions={fill:"rgba(0,0, 0,0)",strokeWidth:3,stroke:"rgb(127, 255, 0)",scaleX:1,scaleY:1,objectCaching:!1,selectable:!1,transparentCorners:!1,cornerColor:"blue"},this.classIds=["person"],this.classIDPerson=new o.NI("person",o.kI.required),this.classIDCar=new o.NI(0,o.kI.required),this.classIDBike=new o.NI(0,o.kI.required),this.classIDTruck=new o.NI(0,o.kI.required),this.CrowdData=[],this.ppeForm=new o.cw({helmet:new o.NI("helmet"),vest:new o.NI("person")}),this.vehicleForm=new o.cw({type:new o.NI,make:new o.NI}),this.roiNameControl=new o.NI("",o.kI.required),this.roiPoints=[],this.isMouseDown=!1,this.roiType=0,this.IP=i.IP,this.ActiveRoute.queryParams.subscribe(r=>{console.log(r),this.ID=r.id,this.imageName=r.image,this.currentArea=r.area,this.currentPlant=r.plant,console.log(this.currentArea,this.currentPlant),this.server.GetRACameraData(this.ID).subscribe(s=>{console.log(s.message),this.cameraData=s.message,console.log(this.imageName),this.currentArea=s.area,this.currentPlant=s.plant,this.CameraDataObservable=(0,R.of)(s.message),this.isCameraData=!0,this.cameraData[0].ppe_data.length>0?(this.ppeConfig.helmet=this.cameraData[0].ppe_data[0].helmet,this.ppeConfig.vest=this.cameraData[0].ppe_data[0].vest,this.ppeConfig.helmet?(this.ppeForm.get("helmet").markAsUntouched(),document.getElementById("helmet").checked=!0):document.getElementById("helmet").checked=!1,this.ppeConfig.vest?(this.ppeForm.get("helmet").markAsUntouched(),document.getElementById("vest").checked=!0):document.getElementById("vest").checked=!1):(document.getElementById("vest").checked=!1,document.getElementById("helmet").checked=!1),console.log(this.cameraData)})})}ngOnInit(){}ngAfterViewInit(){this.canvasSetup(),console.log(document.getElementById("helmet")),this.makeNewROI(),console.log(this.allCameraData),this.canvas.on("mouse:up",t=>{console.log("mouse up"),(1==this.roiType||this.AddCCRoi)&&(1===t.button&&!(null!=t.transform&&"modifyPolygon"!==t.transform.action)&&!this.isEdit&&(console.log("polygon  is 1creating"),this.getClickCoords(t.e)),3===t.button&&(this.isAddROI||this.isAddCC)&&(this.newROIPoints.length<4?(console.log("polygon is  3creating"),this.isPolygonDrawn=!1):(console.log("polygon is  3creating"),this.isPolygonDrawn=!0))),2==this.roiType&&!this.isAddCC&&(this.isMouseDown=!1,console.log("traffic count"),this.SaveTrafficCountROI())}),this.canvas.on("mouse:down",t=>{console.log("mouse down"),1===this.roiType||this.isAddCC?(this.isAddROI||this.isAddCC)&&3===t.button&&(this.newROIPoints.length<3?this.isPolygonDrawn=!1:(this.roiNameControl.markAsUntouched(),this.RoiName(),this.isPolygonDrawn=!0)):2===this.roiType&&(null==t.transform||"drag"!==t.transform.action)&&this.addingShapeOnMouseDown(t),this.canvas.on("mouse:move",i=>{this.creatingShapeOnMouseMove(i)})}),this.canvas.on("object:moving",t=>{console.log(t)})}canvasSetup(){var t=document.getElementById("canvas-container");console.log(t.clientWidth),this.canvas=new fabric.Canvas("canvasROI",{fireRightClick:!0}),console.log(this.canvas),this.canvas.selection=!1,this.canvas.viewportTransform=[1,0,0,1,0,0],this.canvas.setWidth(t.clientWidth),fabric.Image.fromURL(this.IP+"/get_roi_image/"+this.imageName,i=>{console.log(i.width),console.log(i.height),this.canvas.setWidth(i.width),this.canvas.setHeight(i.height),this.canvas.setBackgroundImage(i,this.canvas.requestRenderAll.bind(this.canvas),{scaleX:this.canvas.width/i.width,scaleY:this.canvas.height/i.height})}),null!==this.cameraData[0].roi_data&&this.GetPanelPoints()}RoiName(){this.isPolygonDrawn=!0,this.isAddROI=!1,this.isAddCC?this.modalService.open(this.CCNameModal).result.then(t=>{console.log("cancel"),this.roiNameControl.setValue(null),this.roiNameControl.reset(),this.CrowdForm.get("min").reset(),this.newROIPoints.splice(0,this.newROIPoints.length),this.CrowdForm.get("min").setValidators(o.kI.required),this.CrowdForm.get("min").setValidators(o.kI.pattern(/\d+/)),this.CrowdForm.get("max").reset(),this.CrowdForm.get("max").setValidators(o.kI.required),this.CrowdForm.get("max").setValidators(o.kI.pattern(/\d+/)),this.roiNameControl.addValidators(o.kI.required),console.log(this.roiNameControl.value),this.classIds=["person"],this.DeleteNewRoi()},t=>{console.log("submit"),this.CrowdForm.get("min").reset(),this.CrowdForm.get("min").setValidators(o.kI.required),this.CrowdForm.get("min").setValidators(o.kI.pattern(/\d+/)),this.CrowdForm.get("max").reset(),this.CrowdForm.get("max").setValidators(o.kI.required),this.CrowdForm.get("max").setValidators(o.kI.pattern(/\d+/))}):this.modalService.open(this.RoiNameModal,{size:"small",centered:!0,backdrop:"static"}).result.then(t=>{console.log("cancel"),this.roiNameControl.setValue(null),this.roiNameControl.reset(),this.roiNameControl.addValidators(o.kI.required),console.log(this.roiNameControl.value),this.classIds=["person"],this.DeleteNewRoi()},t=>{console.log("submit")})}getDismissReason(t){return t===x.If.ESC?"by pressing ESC":t===x.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}nameSubmit(){this.modalService.dismissAll(),console.log("name submit"),this.OnAddingNewROI()}getClickCoords(t){this.isAddROI&&(this.newPt={x:Math.round(t.layerX),y:Math.round(t.layerY)},this.newROIPoints.push(this.newPt),console.log(this.newPt),this.canvas.add(this.newROI))}Back(){window.close()}makeNewROI(){this.newROI=new fabric.Polygon(this.newROIPoints,this.polygonOptions)}AddNewROI(){this.polygonOptions.stroke="rgb(127, 255, 0)",this.newROI.stroke="rgb(127, 255, 0)",this.isAddROI=!0,this.isEdit=!1,this.roiType=1,this.newROIPoints.splice(0,this.newROIPoints.length),this.canvas.requestRenderAll(),this.isAddCC=!1}AddNewLine(){this.roiType=2,this.btnIndex=1,this.isEdit=!1,this.isAddROI=!1,this.isAddCC=!1,this.newROIPoints.splice(0,this.newROIPoints.length)}AddNewArrow(){this.roiType=2,this.btnIndex=2,this.isEdit=!1}AddCCRoi(){this.newROIPoints.splice(0,this.newROIPoints.length),this.isAddCC=!0,this.isAddROI=!0,this.isEdit=!1,this.roiType=1,this.CrowdForm.get("min").reset(),this.CrowdForm.get("min").setValidators(o.kI.required),this.CrowdForm.get("min").setValidators(o.kI.pattern(/\d+/)),this.CrowdForm.get("max").reset(),this.CrowdForm.get("max").setValidators(o.kI.required),this.CrowdForm.get("max").setValidators(o.kI.pattern(/\d+/)),this.newROI.stroke="rgb(0, 255, 255)"}AddCCForFrame(){this.modalService.open(this.CCForFrame).result.then(t=>{console.log("cancel"),this.roiNameControl.setValue(null),this.roiNameControl.reset(),this.roiNameControl.addValidators(o.kI.required),console.log(this.roiNameControl.value),this.classIds=["person"],this.DeleteNewRoi()},t=>{console.log("submit")})}onSaveCCFrame(){this.isAddROI=!1;var t={roi_name_canvas:null,roi_canvas:null,roi_id:null,roi_name:null,cr_data:{bb_box:"",roi_id:this.CcRois.length,label_name:"",class_id:this.classIds,min_count:this.CrowdForm.get("min").value,max_count:this.CrowdForm.get("max").value}};this.CcRois.push(t),this.CrowdForm.get("min").reset(),this.CrowdForm.get("max").reset(),this.newROIPoints.splice(0,this.newROIPoints.length),this.classIDPerson.reset(),this.classIDBike.reset(),this.classIDCar.reset(),this.classIDPerson.setValue("person"),this.classIds=["person"],this.CrowdForm.get("min").reset(),this.CrowdForm.get("min").setValidators(o.kI.required),this.CrowdForm.get("min").setValidators(o.kI.pattern(/\d+/)),this.CrowdForm.get("max").reset(),this.CrowdForm.get("max").setValidators(o.kI.required),this.CrowdForm.get("max").setValidators(o.kI.pattern(/\d+/)),this.modalService.dismissAll(),this.SaveChanges()}OnAddingNewROI(){if(this.isAddROI=!1,null!==this.roiNameControl.value){fabric.util.resetObjectTransform(this.newROI);var t=[];const p=[...this.newROIPoints];console.log(p),this.polygonOptions.stroke="rgb(127, 255, 0)";var i=this.newROI._calcDimensions();const u=new fabric.Polygon(p,this.polygonOptions);console.log(u);var n=this.roiNameControl.value;if(null!==n){console.log(n),this.isChanges=!0,this.canvas.add(u),this.canvas.renderAll(),console.log(this.newROI);for(let m=0;m<this.newROIPoints.length;m++)t.push(`${this.newROIPoints[m].x};${this.newROIPoints[m].y};`);var r=t.toString().replace(/,/g,"");console.log(r);var s=new fabric.Text(n,{fontSize:20,backgroundColor:"black",selectable:!1,left:i.left,top:i.top-20,stroke:"rgb(127, 255, 0)",fill:"rgb(127, 255, 0)"});console.log(s),this.canvas.add(s),this.canvas.renderAll();var c={roi_name_canvas:s,roi_canvas:u,roi_id:n,roi_name:n,roi_data:{bb_box:r,roi_name:n,label_name:this.classIds}}}console.log(r),this.allCameraData.push(c),console.log(this.allCameraData),this.newROIPoints.splice(0,this.newROIPoints.length),this.roiNameControl.setValue(null),this.roiNameControl.reset(),this.roiNameControl.setValidators(o.kI.required),this.classIDPerson.reset(),this.classIDBike.reset(),this.classIDCar.reset(),this.classIDPerson.setValue("person"),this.classIds=["person"],this.SaveChanges()}else console.log("elsepart"),this.classIds=[],this.DeleteNewRoi()}OnAddingNewCCRoi(){if(this.isAddROI=!1,null!==this.crowdCountRoiName.value){fabric.util.resetObjectTransform(this.newROI);var t=[];const p=[...this.newROIPoints];console.log(p);var i=this.newROI._calcDimensions();this.polygonOptions.stroke="rgb(0, 255, 255)";const u=new fabric.Polygon(p,this.polygonOptions);console.log(u);var n=this.crowdCountRoiName.value;if(null!==n){console.log(n),this.isChanges=!0,this.canvas.add(u),this.canvas.renderAll(),console.log(this.newROI);for(let m=0;m<this.newROIPoints.length;m++)t.push(`${this.newROIPoints[m].x};${this.newROIPoints[m].y};`);var r=t.toString().replace(/,/g,"");console.log(r);var s=new fabric.Text(n,{fontSize:20,backgroundColor:"black",selectable:!1,left:i.left,top:i.top-20,stroke:"rgb(0, 255, 255)",fill:"rgb(0, 255, 255)"});console.log(s),this.canvas.add(s),this.canvas.renderAll();var c={roi_name_canvas:s,roi_canvas:u,roi_id:n,roi_name:n,cr_data:{bb_box:r,roi_id:this.CcRois.length,label_name:n,class_id:this.classIds,min_count:this.CrowdForm.get("min").value,max_count:this.CrowdForm.get("max").value}}}console.log(r),this.CcRois.push(c),this.modalService.dismissAll(),this.SaveChanges(),console.log(this.allCameraData),this.newROIPoints.splice(0,this.newROIPoints.length),this.crowdCountRoiName.setValue(null),this.CrowdForm.get("min").reset(),this.CrowdForm.get("min").setValidators(o.kI.required),this.CrowdForm.get("min").setValidators(o.kI.pattern(/\d+/)),this.CrowdForm.get("max").reset(),this.CrowdForm.get("max").setValidators(o.kI.required),this.CrowdForm.get("max").setValidators(o.kI.pattern(/\d+/)),this.classIds=[],console.log("cc rois",this.CcRois)}else console.log("elsepart"),this.classIds=[],this.DeleteNewRoi(),this.CrowdForm.get("min").reset(),this.CrowdForm.get("max").reset()}OnAddingNewRw(){if(this.isAddROI=!1,null!==this.roiNameControl.value){fabric.util.resetObjectTransform(this.newROI);var t=[];const p=[...this.newROIPoints];console.log(p);var i=this.newROI._calcDimensions();const u=new fabric.Polygon(p,this.polygonOptions);console.log(u);var n=this.roiNameControl.value;if(null!==n){console.log(n),this.isChanges=!0,this.canvas.add(u),this.canvas.renderAll(),console.log(this.newROI);for(let m=0;m<this.newROIPoints.length;m++)t.push(`${this.newROIPoints[m].x};${this.newROIPoints[m].y};`);var r=t.toString().replace(/,/g,"");console.log(r);var s=new fabric.Text(n,{fontSize:20,backgroundColor:"black",selectable:!1,left:i.left,top:i.top-20,stroke:"rgb(127, 255, 0)",fill:"rgb(127, 255, 0)"});console.log(s),this.canvas.add(s),this.canvas.renderAll();var c={roi_name_canvas:s,roi_canvas:u,roi_id:n,roi_name:n,roi_data:{bb_box:r,roi_name:n,class_id:this.classIds}}}console.log(r),this.allCameraData.push(c),console.log(this.allCameraData),this.newROIPoints.splice(0,this.newROIPoints.length),this.roiNameControl.setValue(null),this.classIds=[]}else console.log("elsepart"),this.classIds=[],this.DeleteNewRoi()}CreateRectangle(t){console.log(t.e);var i=this.canvas.getPointer(t.e),n=t.pointer.x,a=t.pointer.y;this.rectangle=new fabric.Rect({left:n,top:a,width:i.x-n,height:i.y-a,stroke:"red",type:"rect",strokeWidth:2}),this.canvas.add(this.rectangle),n>i.x&&this.rectangle.set({left:Math.abs(i.x)}),a>i.y&&this.rectangle.set({top:Math.abs(i.y)}),this.rectangle.set({width:Math.abs(n-i.x)}),this.rectangle.set({height:Math.abs(a-i.y)}),this.canvas.renderAll()}createRect2(t){var i=this.canvas.getPointer(t.e),n=t.pointer.x,a=t.pointer.y;1===t.button&&(n>i.x&&this.rectangle.set({left:Math.abs(i.x)}),a>i.y&&this.rectangle.set({top:Math.abs(i.y)}),this.rectangle.set({width:Math.abs(n-i.x)}),this.rectangle.set({height:Math.abs(a-i.y)}),this.canvas.renderAll())}Edit(t){this.selectedEditId=t;var i=this.allCameraData[t].roi_canvas;if(this.isEdit=!0,this.isEdit){var n=(s,c)=>(p,u,m,C)=>{var d=u.target,g=fabric.util.transformPoint(new fabric.Point(d.points[s].x-d.pathOffset.x,d.points[s].y-d.pathOffset.y),d.calcTransformMatrix()),_=c(p,u,m,C),k=(d._setPositionDimensions({}),d._getNonTransformedDimensions());return d.setPositionByOrigin(g,(d.points[s].x-d.pathOffset.x)/k.x+.5,(d.points[s].y-d.pathOffset.y)/k.y+.5),_},a=(s,c,p,u)=>{console.log(s);var m=c.target,C=m.controls[m.__corner],d=m.toLocalPoint(new fabric.Point(p,u),"center","center"),g=m._getNonTransformedDimensions(),_=m._getTransformedDimensions(0,0);return m.points[C.pointIndex]={x:d.x*g.x/_.x+m.pathOffset.x,y:d.y*g.y/_.y+m.pathOffset.y},console.log(m.points),!0};let r=i;console.log(r),this.canvas.setActiveObject(this.allCameraData[t].roi_canvas),r=this.canvas.getActiveObject();{console.log("poly first");let s=r.points.length-1;r.cornerStyle="circle",r.cornerColor="rgba(0,0,255,0.5)",r.controls=r.points.reduce((c,p,u)=>(c["p"+u]=new fabric.Control({pointIndex:u,positionHandler:(m,C,d)=>(console.log(d),fabric.util.transformPoint(new fabric.Point(d.points[u].x-d.pathOffset.x,d.points[u].y-d.pathOffset.y),fabric.util.multiplyTransformMatrices(d.canvas.viewportTransform,d.calcTransformMatrix()))),actionHandler:n(u>0?u-1:s,a),actionName:"modifyPolygon"}),console.log(c),c),{})}console.log(new fabric.Control),this.canvas.renderAll()}}EditROI(t){console.log(t),this.isChanges=!0;var i=this.allCameraData.filter(a=>a.roi_id===t?a.roi_canvas:"");console.log(i[0].roi_canvas),console.log(this.allCameraData)}isDelete(t,i){this.deleteID=t,this.modalService.open(i,{centered:!0,backdrop:"static"})}DeleteROI(){var t=this.deleteID,n=this.allCameraData[t].roi_name_canvas;this.canvas.remove(this.allCameraData[t].roi_canvas),this.canvas.remove(n);var r=this.allCameraData[t].roi_data.roi_id;console.log(r),this.allCameraData.splice(t,1),this.cameraData[0].roi_data.splice(t,1);var s={id:this.ID,roi_id:String(r),ai_solutions:["RA"]};this.server.DeleteRoi(s).subscribe(c=>{this.server.notification(c.message),console.log(c),this.modalService.dismissAll()},c=>{this.modalService.dismissAll(),this.server.notification("Something went wrong","Retry")}),this.canvas.renderAll()}AlterROIName(t){this.isEditText=!this.isEditText,this.selectedId=t,this.selectedEditId=t,this.tempROIID.setValue(this.allCameraData[t].roi_name),this.modalService.open(this.ROIChangeModal,{size:"small",animation:!0,centered:!0,backdrop:"static"})}ChangeROIName(){this.allCameraData[this.selectedId].roi_name=this.tempROIID.value,this.allCameraData[this.selectedId].roi_name_canvas.text=this.tempROIID.value,this.allCameraData[this.selectedId].roi_data.roi_name=this.tempROIID.value,this.canvas.renderAll(),this.modalService.dismissAll(),this.SaveEditedRoi()}SaveChanges(){console.log(this.isLoading=!0),console.log(this.peopleCrowdForm.get("min").value),console.log(this.peopleCrowdForm.get("max").value);var i=[];if(this.CcRois.length>0&&(this.CcRois.forEach(s=>{i.push(s.cr_data)}),console.log("crowd data",i)),this.peopleCrowdForm.get("min").value||this.peopleCrowdForm.get("max").value){var n={label_name:"people",min_count:this.peopleCrowdForm.get("min").value?this.peopleCrowdForm.get("min").value:0,max_count:this.peopleCrowdForm.get("max").value?this.peopleCrowdForm.get("max").value:0};this.crowdConfig.push(n)}(this.vehicleCrowdForm.get("min").value||this.vehicleCrowdForm.get("max").value)&&(n={label_name:"vehicle",min_count:this.vehicleCrowdForm.get("min").value?this.vehicleCrowdForm.get("min").value:0,max_count:this.vehicleCrowdForm.get("max").value?this.vehicleCrowdForm.get("max").value:0},this.crowdConfig.push(n)),console.log(),console.log(this.allCameraData);var a=[];this.allCameraData.forEach((s,c)=>{a.push({...s.roi_data,roi_id:c+1})}),console.log(a);var r={id:this.ID,ai_solutions:["RA"],imagename:this.imageName,roi_data:a,tc_data:this.trafficCountData,ppe_data:[this.ppeConfig],cr_data:i};console.log(r),this.server.AddROI(r).subscribe(s=>{console.log(s),this.isLoading=!1,s.success?(this.server.notification(s.message),window.location.reload()):this.server.notification(s.message,"Retry")},s=>{this.isLoading=!1,this.server.notification("Something went wrong","Retry")})}savePpeConfig(){var t=[];this.allCameraData.forEach((n,a)=>{t.push({...n.roi_data,roi_id:a+1})}),console.log(t);var i={id:this.ID,ai_solutions:["RA","PPE"],imagename:this.imageName,roi_data:t,tc_data:[],ppe_data:[this.ppeConfig],cr_data:this.crowdConfig};console.log(i),this.server.AddROI(i).subscribe(n=>{console.log(n),this.isLoading=!1,n.success?this.server.notification(n.message):this.server.notification(n.message,"Retry")},n=>{this.isLoading=!1,this.server.notification("Something went wrong","Retry")})}DeleteNewRoi(){this.newROIPoints.splice(0,this.newROIPoints.length),this.canvas.renderAll(),(2==this.roiType||1==this.btnIndex)&&this.DeleteNewTCRoi()}GetPanelPoints(){this.cameraData[0].roi_data.forEach((t,i)=>{console.log(t);var n=t.bb_box.split(";");console.log(n);var a=[];for(let c=0;c<n.length-1;c+=2){var r={x:Number(n[c])*this.ratio,y:Number(n[c+1])*this.ratio};a.push(r)}var s={roi:a,roi_name:t.roi_name};this.roiPoints.push(s),console.log(s)}),this.DrawExistPanels()}GetCCRoiPoints(){this.cameraData[0].cr_data.forEach((t,i)=>{console.log(t);var n=t.bb_box.split(";");console.log(n);var a=[];for(let c=0;c<n.length-1;c+=2){var r={x:Number(n[c])*this.ratio,y:Number(n[c+1])*this.ratio};a.push(r)}var s={min_count:t.min_count,max_count:t.max_count,class_id:t.class_id,bbox_points:a,cc_name:t.label_name};this.CCpoints.push(s),console.log(s)})}DrawExistCCRois(){this.CCpoints.forEach((t,i)=>{console.log(t.roi),this.polygonOptions.stroke="rgb(0, 255, 255)";var n=new fabric.Polygon(t.bbox_points,this.polygonOptions);console.log(n);var a=new fabric.Text(t.cc_name,{fontSize:20,backgroundColor:"black",selectable:!1,left:n.left,top:0==n.top||n.top-20<0||n.top-20==0?20:n.top-20,stroke:"rgb(0, 255, 255)",fill:"rgb(0, 255, 255)"});console.log(n),this.CcRois.push({roi_name_canvas:a,roi_canvas:n,roi_id:i,roi_name:this.cameraData[0].cr_data[i].label_name,cr_data:this.cameraData[0].cr_data[i]}),this.canvas.add(n,a),this.canvas.renderAll(),this.GetTCPoints()})}GetTCPoints(){var t={};this.trafficCountData=this.cameraData[0].tc_data,this.cameraData[0].tc_data.forEach((i,n)=>{var a=i.line_bbox.line.split(";"),r=i.line_bbox.arrow.split(";");console.log(Number(a[n])),t=[{points:{x1:Number(r[0]),y1:Number(r[1]),x2:Number(r[2]),y2:Number(r[3])},type:"arrow",label:i.label},{points:{x1:Number(a[0]),y1:Number(a[1]),x2:Number(a[2]),y2:Number(a[3])},type:"line",label:i.label}],this.tempTCData.push(t)}),console.log(this.tempTCData)}DrawExistPanels(){this.roiPoints.forEach((t,i)=>{console.log(t.roi),this.polygonOptions.stroke="rgb(127, 255, 0)";var n=new fabric.Polygon(t.roi,this.polygonOptions);console.log(n);var a=new fabric.Text(t.roi_name,{fontSize:20,backgroundColor:"black",selectable:!1,left:n.left+10,top:n.top+30,stroke:"rgb(127, 255, 0)",fill:"rgb(127, 255, 0)"});console.log(n),this.allCameraData.push({roi_name_canvas:a,roi_canvas:n,roi_name:this.cameraData[0].roi_data[i].roi_name,roi_data:this.cameraData[0].roi_data[i]}),this.canvas.add(n,a),this.canvas.renderAll()}),console.log(this.allCameraData)}drawExistTCRois(t){this.isMouseDown=!0,this.tempTCCanvas=[];var n,a,i=[];t.forEach((r,s)=>{i=[];for(let d=0;d<r.length;d++){const g=r[d];if(console.log(g),"line"==g.type){var c=[g.points.x1,g.points.y1,g.points.x2,g.points.y2];console.log(c),n=new fabric.Line(c,{stroke:"rgb(255, 81, 148)",strokeWidth:3,fill:"rgb(255, 81, 148)",originX:"center",originY:"center",hasControls:!1,hasBorders:!1,selectable:!1,objectCaching:!1,type:"line"}),console.log(n),i.push(n),n.set({x1:Math.round(g.points.x1),y1:Math.fround(g.points.y1)}),this.canvas.add(n)}if("arrow"==g.type){n=new fabric.Line([g.points.x1,g.points.y1,g.points.x2,g.points.y2],{strokeWidth:3,fill:"rgb(144, 164, 237)",stroke:"rgb(144, 164, 237)",originX:"center",originY:"center",id:"arrow_line",selectable:!1,lockScalingFlip:!0,objectCaching:!1,type:"arrow"}),i.push(n,a);var m=(n.y1+n.y2)/2;this.deltaX=n.left-(n.x1+n.x2)/2,this.deltaY=n.top-m,console.log(n),a=new fabric.Triangle({left:n.get("x2")+this.deltaX,top:n.get("y2")+this.deltaY,originX:"center",originY:"center",selectable:!1,pointType:"arrow_start",angle:this._FabricCalcArrowAngle(n.x1,n.y1,n.x2,n.y2),width:20,height:20,fill:"rgb(144, 164, 237)",id:"arrow_triangle",uuid:n.uuid}),this.canvas.add(n,a);var C=new fabric.Text(g.label,{fontSize:16,backgroundColor:"black",selectable:!1,left:n.left-60,top:0==n.top||n.top-20<0||n.top-20==0?20:n.top-20,stroke:"rgb(255, 81, 148)",fill:"rgb(255, 81, 148)"});this.canvas.add(C),this.canvas.renderAll()}}this.canvas.requestRenderAll(),this.tempTCCanvas[s]=i}),console.log(this.tempTCCanvas),this.canvas.requestRenderAll()}SaveEditedRoi(){if(this.peopleCrowdForm.get("min").value||this.peopleCrowdForm.get("max").value){var t={label_name:["people"],min_count:this.peopleCrowdForm.get("min").value?this.peopleCrowdForm.get("min").value:0,max_count:this.peopleCrowdForm.get("max").value?this.peopleCrowdForm.get("max").value:0,roi_id:null};this.crowdConfig.push(t)}(this.vehicleCrowdForm.get("min").value||this.vehicleCrowdForm.get("max").value)&&(t={label_name:["vehicle"],min_count:this.vehicleCrowdForm.get("min").value?this.vehicleCrowdForm.get("min").value:0,max_count:this.vehicleCrowdForm.get("max").value?this.vehicleCrowdForm.get("max").value:0,roi_id:null},this.crowdConfig.push(t));var i=[];console.log(this.selectedEditId);var n=[];if(null!=this.selectedEditId){for(let p=0;p<this.allCameraData[this.selectedEditId].roi_canvas.points.length;p++){console.log(this.allCameraData[this.selectedEditId].roi_canvas.points);var a=this.allCameraData[this.selectedEditId].roi_canvas.points;let u=Math.round(a[p].x),m=Math.round(a[p].y);n.push(`${u};${m};`)}var s=n.toString().replace(/,/g,"");console.log(s),console.log(this.allCameraData[this.selectedEditId].roi_data),this.allCameraData[this.selectedEditId].roi_data.bb_box=s,console.log(this.allCameraData[this.selectedEditId].roi_data),i.push(this.allCameraData[this.selectedEditId].roi_data)}var c={id:this.ID,ai_solutions:["RA"],imagename:this.imageName,roi_data:i,ppe_data:[this.ppeConfig],cr_data:this.crowdConfig,tc_data:[]};console.log(c),this.server.EditROI(c).subscribe(p=>{console.log(p),p.success?this.server.notification(p.message):this.server.notification(p.message,"Retry")},p=>{this.server.notification("Something went wrong","Retry")})}CalculateAspectRatio(t,i,n){return this.ratio=i/t,this.ratio*n}ClassId(t){if(console.log(t.target.defaultValue),console.log(t.target.checked),t.target.checked)this.classIds.push(t.target.value);else{var i=this.classIds.indexOf(t.target.defaultValue);this.classIds.splice(i,1)}console.log(this.classIds)}TrafficCountConfig(t){console.log(t),t.target.checked&&(this.TrafficConfig=t.target.value),this.modalService.dismissAll()}PPE_Config(t){console.log(this.ppeForm),console.log(t.target.value),t.target.checked?("helmet"===t.target.value&&(this.isEdit=!0,this.ppeConfig.helmet=!0,console.log(this.ppeConfig)),"vest"===t.target.value&&(this.isEdit=!0,this.ppeConfig.vest=!0)):(this.isEdit=!0,"helmet"===t.target.value&&(this.ppeConfig.helmet=!1),"vest"===t.target.value&&(this.ppeConfig.vest=!1)),this.savePpeConfig(),console.log(this.ppeConfig)}VehicleConfig(t){console.log(t.target.value)}DeleteNewTCRoi(){this.trafficCountLineROIS.forEach(t=>{this.canvas.remove(t)}),this.btnIndex=1,this.trafficCountLineROIS=[]}SaveTrafficCountROI(){this.TCCanvasData.push(this.line),this.TCCanvasData.push(this.triangle),console.log(this.line),1==this.btnIndex?this.trafficCountLineROIS.push(this.line):this.trafficCountLineROIS.push(this.line,this.triangle),1==this.trafficCountLineROIS.length&&(this.btnIndex=2),3==this.trafficCountLineROIS.length&&(this.modalService.open(this.TCNameModal,{backdrop:"static"}).result.then(t=>{console.log("cancel"),this.tcName.setValue(null),this.tcName.reset(),this.tcName.addValidators(o.kI.required),console.log(this.tcName.value),this.classIds=["person"],this.DeleteNewTCRoi()},t=>{console.log("submit")}),console.log(this.TCCanvasData)),console.log(this.trafficCountLineROIS)}AddTrafficCountData(){var t={};t.line=Math.fround(this.trafficCountLineROIS[0].x1).toString()+";"+Math.fround(this.trafficCountLineROIS[0].y1).toString()+";"+Math.fround(this.trafficCountLineROIS[0].x2).toString()+";"+Math.fround(this.trafficCountLineROIS[0].y2).toString()+";",t.arrow=this.trafficCountLineROIS[1].x1.toString()+";"+this.trafficCountLineROIS[1].y1.toString()+";"+this.trafficCountLineROIS[1].x2.toString()+";"+this.trafficCountLineROIS[1].y2.toString()+";";var i={classes:this.classIds,line_bbox:t,label:this.tcName.value};fabric.util.resetObjectTransform(this.newROI);var n=this.line._getLeftToOriginX(),a=this.line._getTopToOriginY(),r=new fabric.Text(this.tcName.value,{fontSize:15,backgroundColor:"black",selectable:!1,left:n-20,top:a-30,stroke:"rgb(255, 81, 148)",fill:"rgb(255, 81, 148)"});console.log(r),this.canvas.add(r),this.canvas.renderAll(),this.trafficCountData[this.trafficCountData.length]=i,console.log(),console.log("traffic count",this.trafficCountData),this.tempTCLineROIS.push(...this.trafficCountLineROIS),console.log(this.trafficCountLineROIS),this.trafficCountLineROIS=[],this.btnIndex=1,this.SaveChanges(),this.modalService.dismissAll()}addingShapeOnMouseDown(t){this.isMouseDown=!0;var i=this.canvas.getPointer(t.e);if(console.log(this.line),1==this.btnIndex){var n=[i.x,i.y,i.x,i.y];console.log(n),this.line=new fabric.Line(n,{stroke:"rgb(255, 81, 148)",strokeWidth:3,fill:"rgb(255, 81, 148)",originX:"center",originY:"center",hasControls:!1,hasBorders:!1,selectable:!1,objectCaching:!1,type:"line"}),console.log(this.line),this.line.set({x1:Math.round(i.x),y1:Math.fround(i.y)}),this.canvas.add(this.line),this.activeObj=this.line}if(2===this.btnIndex){this.line=new fabric.Line([i.x,i.y,i.x,i.y],{strokeWidth:3,fill:"rgb(144, 164, 237)",stroke:"rgb(144, 164, 237)",originX:"center",originY:"center",id:"arrow_line",selectable:!1,lockScalingFlip:!0,objectCaching:!1,type:"arrow"});var s=(this.line.y1+this.line.y2)/2;this.deltaX=this.line.left-(this.line.x1+this.line.x2)/2,this.deltaY=this.line.top-s,this.triangle=new fabric.Triangle({left:this.line.get("x2")+this.deltaX,top:this.line.get("y2")+this.deltaY,originX:"center",originY:"center",selectable:!1,pointType:"arrow_start",angle:-45,width:20,height:20,fill:"rgb(144, 164, 237)",id:"arrow_triangle",uuid:this.line.uuid}),this.canvas.add(this.line,this.triangle),this.activeObj=this.line}this.canvas.requestRenderAll()}OnDeleteTCROI(t){this.tempTCCanvas[t].forEach(i=>{this.canvas.remove(i),this.canvas.renderAll()}),this.trafficCountLineROIS=[],this.btnIndex=1}SaveCCPeople(){var t={label:["people"]};t.min_count=this.peopleCrowdForm.get("min").value,t.max_count=this.peopleCrowdForm.get("max").value,t.roi_id=null,console.log(t)}SaveCCVehicle(){var t={label:["vehicle"]};t.min_count=this.peopleCrowdForm.get("min").value,t.max_count=this.peopleCrowdForm.get("max").value,t.roi_id=null,console.log(t)}creatingShapeOnMouseMove(t){if(!0===this.isMouseDown){console.log("mouse move");var i=this.canvas.getPointer(t.e);1===this.btnIndex&&this.line.set({x2:i.x,y2:i.y}),2===this.btnIndex&&(console.log(this.line.x1),console.log(this.line.y1),this.line.set({x2:i.x,y2:i.y}),console.log(this.line),2==this.btnIndex&&this.triangle.set({left:i.x+this.deltaX,top:i.y+this.deltaY,angle:this._FabricCalcArrowAngle(this.line.x1,this.line.y1,this.line.x2,this.line.y2)}))}this.canvas.requestRenderAll()}ngOnDestroy(){this.modalService.dismissAll()}_FabricCalcArrowAngle(t,i,n,a){var s,c;return c=a-i,180*(0==(s=n-t)?0===c?0:c>0?Math.PI/2:3*Math.PI/2:0===c?s>0?0:Math.PI:s<0?Math.atan(c/s)+Math.PI:c<0?Math.atan(c/s)+2*Math.PI:Math.atan(c/s))/Math.PI+90}}return l.\u0275fac=function(t){return new(t||l)(e.\u0275\u0275directiveInject(w.gz),e.\u0275\u0275directiveInject(S.N),e.\u0275\u0275directiveInject(w.F0),e.\u0275\u0275directiveInject(x.FF))},l.\u0275cmp=e.\u0275\u0275defineComponent({type:l,selectors:[["app-camera-roi"]],viewQuery:function(t,i){if(1&t&&(e.\u0275\u0275viewQuery(D,5),e.\u0275\u0275viewQuery(P,5),e.\u0275\u0275viewQuery(F,5),e.\u0275\u0275viewQuery(T,7),e.\u0275\u0275viewQuery(N,5),e.\u0275\u0275viewQuery(V,5),e.\u0275\u0275viewQuery(A,5)),2&t){let n;e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(i.infoModal=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(i.CCNameModal=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(i.ROIChangeModal=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(i.canvasContainer=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(i.RoiNameModal=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(i.TCNameModal=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(i.CCForFrame=n.first)}},decls:74,vars:5,consts:[[1,"container-fluid","dashboard-content"],[1,"page-header","mb-3"],["class","row mt-3 mb-3","id","analytic",4,"ngIf"],[1,"row","mb-3"],[1,"col-12"],[1,""],[1,"row"],[1,"col-6","p-2","border-bottom"],[1,"me-2","btn","success",3,"click"],["icon","plus",1,"me-1"],[1,"float-end"],["class","btn default me-2",3,"click",4,"ngIf"],[1,"me-2","btn","danger",3,"click"],["icon","trash",1,"me-1"],[1,"float-end","btn","primary",3,"click"],["icon","angle-left",1,"me-1"],[1,"card","card-body"],["id","canvas-container",1,"d-flex","justify-content-center"],["canvasContainer",""],["id","canvasROI","height","auto","width","auto",1,"canvas-class"],["class","row mb-3",4,"ngIf"],[1,"border"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"",2,"color","#178489"],["class","table",4,"ngIf"],[1,"col-10"],[1,"input-group"],[1,"row","col-2"],[1,"",2,"pointer-events","all",3,"formGroup"],["id","custome",1,"form-check","form-check-inline"],["type","checkbox","id","helmet","value","helmet","defaultValue","","formControlName","helmet",1,"form-check-input",3,"change"],["for","helmet",1,"form-check-label","text-muted"],["type","checkbox","formControlName","vest","name","","value","vest","defaultValue","vest","id","vest",1,"form-check-input",3,"change"],["for","vest",1,"form-check-label","text-muted"],[1,"row","mt-3"],[1,"alert","alert-dark"],[1,"col-2"],[1,"mx-auto","my-auto"],["ROINameChangeModal",""],["ccForFrame",""],["ROINameModal",""],["deleteModal",""],["crowdCount",""],["roiInfo",""],["TCNameModal",""],["id","analytic",1,"row","mt-3","mb-3"],[1,"col-4"],[1,"card","analytics"],[1,"card-body"],[1,"text-muted"],[1,"btn","default","me-2",3,"click"],["class","col-12",4,"ngIf","ngIfElse"],["noRoi",""],[1,"card"],[1,"card-header"],[1,"table"],[2,"text-align","center"],["scope","col"],["icon","cog",1,"me-2"],["style","text-align:center;",4,"ngFor","ngForOf"],[3,"dblclick"],["class","",4,"ngFor","ngForOf"],[1,"btn","btn-sm","danger","me-2",3,"click"],[1,"alert","alert-info"],[1,"card-body","p-4"],["action",""],["type","text","id","ROI",1,"form-control","mb-3",3,"formControl","ngClass"],["id","validationServerUsernameFeedback",3,"ngClass"],["type","submit",1,"btn","success","ms-2","float-end",3,"click"],[1,"btn","danger","me-2","float-end",3,"click"],[1,"modal-header"],[1,"modal-body"],[1,"modal-content"],[1,"d-flex","justify-content-center","align-items-center"],[1,"border","rounded","p-2"],["id","custome",1,"form-inline","row",3,"formGroup"],[1,"col-sm-6"],["type","number","formControlName","min","pattern","\\d+","name","","min","0","id","min","placeholder","min",1,"form-control",3,"ngClass"],["type","number","formControlName","max","pattern","\\d+","name","","min","0","id","min","placeholder","max",1,"form-control",3,"ngClass"],[1,"offset-4","mb-3","mt-3"],["type","checkbox","checked","","name","","id","0",1,"form-check-input",3,"formControl","defaultValue","value","change"],["for","0",1,"form-check-label"],[1,"btn","default","float-end",3,"disabled","click"],["type","text","id","ROI","placeholder","Enter ROI name",1,"form-control","mb-3",3,"ngClass","formControl"],[1,"mb-3","mt-3","d-flex","justify-content-center"],["type","submit",1,"btn","success","ms-1","float-end",3,"disabled","click"],[1,"btn","danger","me-1","float-end",3,"click"],[1,"modal-confirm"],[1,"modal-header","flex-column"],[1,"icon-box"],[1,"material-icons"],[1,"modal-title","w-100"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","danger",3,"click"],[1,"col-sm-3"],[1,"alert","alert-info","mb-0"],[1,"d-flex","align-items-center","justify-content-center","mt-3","mb-3"],["type","radio","checked","","name","tcConfig","id","0",1,"form-check-input",3,"formControl","defaultValue","value","change"],["type","radio","name","tcConfig","id","1",1,"form-check-input",3,"formControl","value","defaultValue","change"],["for","1",1,"form-check-label"],["type","radio","name","tcConfig","id","2",1,"form-check-input",3,"formControl","value","defaultValue","change"],["for","2",1,"form-check-label"],[1,"d-flex","align-items-center","justify-content-center"],["type","text","id","ROI","placeholder","Enter Traffic count name",1,"form-control","mb-3",3,"ngClass","formControl"],["type","checkbox","name","","id","3",1,"form-check-input",3,"formControl","value","defaultValue","change"],["for","3",1,"form-check-label"],["type","submit","type","submit",1,"btn","success","ms-1","float-end",3,"disabled","click"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h3"),e.\u0275\u0275text(3,"Camera Settings"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(4,M,22,3,"div",2),e.\u0275\u0275elementStart(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"button",8),e.\u0275\u0275listener("click",function(){return i.AddNewROI()}),e.\u0275\u0275element(11,"fa-icon",9),e.\u0275\u0275text(12,"RA ROI "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",7)(14,"div",10),e.\u0275\u0275template(15,L,2,0,"button",11),e.\u0275\u0275elementStart(16,"button",12),e.\u0275\u0275listener("click",function(){return i.DeleteNewRoi()}),e.\u0275\u0275element(17,"fa-icon",13),e.\u0275\u0275text(18,"Delete "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"button",14),e.\u0275\u0275listener("click",function(){return i.Back()}),e.\u0275\u0275element(20,"fa-icon",15),e.\u0275\u0275text(21," Back "),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(22,"div",3)(23,"div",4)(24,"div",16)(25,"div",17,18),e.\u0275\u0275element(27,"canvas",19),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(28,X,4,2,"div",20),e.\u0275\u0275elementStart(29,"div",6)(30,"div",4)(31,"div",16)(32,"div",21)(33,"ul",22)(34,"li",23)(35,"h5",24),e.\u0275\u0275text(36,"RA Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(37,z,14,1,"table",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"li",23)(39,"div",6)(40,"div",26)(41,"div",27)(42,"span",28)(43,"h5",24),e.\u0275\u0275text(44,"PPE:"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(45,"div",29)(46,"div",30)(47,"input",31),e.\u0275\u0275listener("change",function(a){return i.PPE_Config(a)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"label",32),e.\u0275\u0275text(49,"Helmet"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(50,"div",30)(51,"input",33),e.\u0275\u0275listener("change",function(a){return i.PPE_Config(a)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"label",34),e.\u0275\u0275text(53,"Vest"),e.\u0275\u0275elementEnd()()()()()()()()()()()(),e.\u0275\u0275elementStart(54,"div",35)(55,"div",4)(56,"div",36),e.\u0275\u0275text(57,"Above configaration will be applied to this camera"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(58,"div",37),e.\u0275\u0275element(59,"div",38),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(60,G,13,5,"ng-template",null,39,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(62,W,23,11,"ng-template",null,40,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(64,H,18,9,"ng-template",null,41,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(66,U,17,0,"ng-template",null,42,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(68,J,23,16,"ng-template",null,43,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(70,K,23,9,"ng-template",null,44,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(72,Z,22,12,"ng-template",null,45,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",i.isCameraData),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",!(i.isEdit&&i.isChanges)&&i.isAddROI&&i.newROIPoints.length>2),e.\u0275\u0275advance(13),e.\u0275\u0275property("ngIf",!1),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",i.cameraData[0].roi_data.length>0),e.\u0275\u0275advance(8),e.\u0275\u0275property("formGroup",i.ppeForm))},dependencies:[o._Y,o.Fj,o.wV,o.Wl,o._,o.JJ,o.JL,o.c5,o.qQ,o.oH,o.sg,o.u,E.BN,b.NgClass,b.NgForOf,b.NgIf,o.F],styles:[".card.analytics[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{max-width:inherit!important;overflow-x:hidden!important;text-overflow:clip!important;overflow-y:hidden!important}#analytic[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{max-height:10em;min-height:10em}.canvas-class[_ngcontent-%COMP%]{width:inherit;height:inherit;border-radius:4px;box-shadow:0 8px 15px #0003}body[_ngcontent-%COMP%]{font-family:sans-serif;padding:50px 100px;text-align:center}h2[_ngcontent-%COMP%]{font-size:16px;margin-bottom:1.5em;color:#333}"]}),l})()}];let te=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=e.\u0275\u0275defineInjector({imports:[O.A,w.Bz.forChild(ee),w.Bz]}),l})()}}]);