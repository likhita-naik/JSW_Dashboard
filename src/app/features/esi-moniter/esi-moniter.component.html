<div class="">
  <div class="page-header mb-5">
    <h3>Jobsheet </h3>
  </div>

  <div class="row mb-3">
    <div class="col-12">
      <div class="float-end">
        <!-- <button class="btn default mr-2 float-end">Download All job sheet data</button> -->
        <button class="btn default me-2 float-end" (click)="modalOpen(resetJobSheet)">Reset Job sheet</button>
      </div>
      <div class="float-end">
        <!-- <button class="btn default mr-2 float-end">Download All job sheet data</button> -->
        <button *ngIf="!isActive" class="btn primary me-2 float-end" (click)="StartAppModal(startAppModal)">Start
          Application</button>
        <button *ngIf="isActive" class="float-end me-2 btn danger" (click)="StopAppModal(stopAppModal)">
          <!-- <fa-icon icon="plus" class="me-2"></fa-icon> -->
          Stop Application
        </button>
      </div>
    </div>
  </div>
  <div class="row row-offset-2 mb-3">
    <div class="col-xl-4 col-lg-4 col-md-12 col-xs-12 col-sm-12 mb-3">
      <div class="card analytics">
        <div class="card-body">
          <h4 class="text-muted">Total Jobs</h4>
          <h2>{{jobsStatus.total_panel_count?jobsStatus.total_panel_count:0}}</h2>
        </div>
      </div>
    </div>

    <div class="col-xl-4 col-lg-4 col-md-12 col-xs-12 col-sm-12 mb-3">
      <div class="card analytics">
        <div class="card-body">
          <h4 class="text-muted"> Processed Jobs</h4>
          <h2>{{jobsStatus.processed_count?jobsStatus.processed_count:0}}</h2>
        </div>
      </div>
    </div>

    <!-- <div class="col-2">
            <div class="card analytics">
                <div class="card-header">
                    <p class="text-muted">Completed</p>
                    <h2>35</h2>
                </div>
            </div>
        </div> -->

    <!-- <div class="col-2">
            <div class="card analytics">
                <div class="card-header">
                    <p class="text-muted">Awaiting</p>
                    <h2>35</h2>
                </div>
            </div>
        </div> -->

    <div class="col-xl-4 col-lg-4 col-md-12 col-xs-12 col-sm-12 mb-3">
      <div class="card analytics">
        <div class="card-body">
          <h4 class="text-muted">Not Processed Jobs</h4>
          <h2>{{jobsStatus.not_processed?jobsStatus.not_processed:0}}</h2>
        </div>
      </div>
    </div>

  </div>

  <div class="row mb-5">
    <!-- <div class="col-2">
            <ng-multiselect-dropdown 
             [placeholder]="'select the jobsheet'" 
             [settings]="dropdownSettings"
             [data]="dataJobsheets|async"
             [(ngModel)]="selectedJobsheet" 
             >
            </ng-multiselect-dropdown>
        </div> -->
        <!-- filter options need to uncomment this -->
    <!-- <div class="col-xl-2  col-lg-2 col-md-6  col-sm-12 col-xs-12 mb-3">
      <ng-multiselect-dropdown [placeholder]="'Plant'" [settings]="dropdownSettings" [data]="plants|async"
        [(ngModel)]="selectedPlant" (onSelect)="OnPlantSelect($event)" (onDeSelect)="onDeselectPlant($event)">
      </ng-multiselect-dropdown>
    </div>
    <div class="col-xl-2  col-lg-2 col-md-6  col-sm-12 col-xs-12 mb-3">
      <ng-multiselect-dropdown [placeholder]="'Area'" [settings]="dropdownSettings" [data]="areas|async"
        [(ngModel)]="selectedArea" (onDeSelect)="OnDeselectArea($event)" (onSelect)="OnAreaSelect($event)">
      </ng-multiselect-dropdown>
    </div>
    <div class="col-xl-2  col-lg-2 col-md-6  col-sm-12 col-xs-12 mb-3">
      <ng-multiselect-dropdown [placeholder]="'Panel'" [settings]="dropdownSettings" [data]="panelNumbers|async"
        [(ngModel)]="selectedPanel" (onDeSelect)="OnDeselectPanel($event)" (onSelect)="OnPanelSelect($event)">
      </ng-multiselect-dropdown>
    </div> -->
    <!-- <div class="col-2">
            <ng-multiselect-dropdown [placeholder]="'select the camera'" [settings]="dropdownSettings"
                [data]="cameras|async" [(ngModel)]="selectedCamera" (onSelect)="onCameraSelect($event)">
            </ng-multiselect-dropdown>
        </div> -->

        <div class="col-6"></div>


    <div class="col-xl-6 col-md-12 col-xs-12 col-sm-12 col-lg-6 mb-3">
      <!-- need to uncomment this -->
    <div class="float-end">

         <!--  <button class="btn default me-4" (click)="ShowData()">
          Show Data
        </button>
        <button class="btn default ms-2 me-4" (click)="JobsheetDownload()">
          <span class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true" *ngIf="excelLoad"></span>

          <fa-icon icon="download" *ngIf="!excelLoad" class="me-2"></fa-icon>
          Jobsheet
        </button> -->
        <button class="btn default ms-2" (click)="RefreshData()">
          <fa-icon icon="rotate"></fa-icon>
        </button>

      </div>
    </div>
  </div>

  <!-- table starts -->

  <div class="">
    <div class="col-12 card p-0" id="dataTable" #dataTable>
      <div class="card-header">
        <h4 class="float-start text-muted">Jobsheet Details</h4>
        <div>
          <div class="row">

            <div class="float-end">
              <div class="col-xl-3 col-xs-12 col-md-12 col-lg-2 col-sm-12 float-end">
                <ng-multiselect-dropdown [placeholder]="&nbsp;'Hide Column' &nbsp;" [settings]="dropdownSettings"
                  [data]="dataHeaders" [(ngModel)]="selectedColumn" (onSelect)="onHideColumn($event)"
                  (onDeSelect)="onShowColumn($event)">
                </ng-multiselect-dropdown>
              </div>
              <!-- </div>
          <div class="col-xl-2 col-xs-12 col-md-12 col-lg-2 col-sm-12 float-end"> -->
              <div class="me-2 float-end">
                <button (click)=modalOpen(cameraAddModal) class="btn default float-start">
                  <fa-icon icon="plus" class="me-2"></fa-icon>Job
                </button>
              </div>
              <div class="float-end me-3 my-2">
                <!-- <div class="col-xl-2 co mel-sm-4 col-lg-4 col-xs-4 col-md-4 mb-3"> -->
                <span class="float-end" *ngIf="isActive"> <span class="spinner-grow spinner-grow-sm me-2"
                    style="background-color: #3FCA56;" role="status" aria-hidden="true"></span>Live</span>
              </div>
              <!-- <button class="btn default float-end ms-2" (click)="RefreshData()">
                <fa-icon icon="rotate"></fa-icon>
              </button>
       -->
            </div>
          </div>
        </div>
        <div class="row">
          <div class="d-flex justify-content-space-between">
            <span class="d-flex align-items-center p-2 m-2">
              <span class="job-notDetected-span m-1"></span>Not
              Detected</span>
            <!-- 
            <span class="d-flex align-items-center p-2 m-2"> <span
                class="job-allocated-span m-1"></span>Allocated</span>-->
            <span class="d-flex align-items-center p-2 m-2"> <span
                class="job-unallocated-span m-1"></span>Unallocated</span>
            <span class="d-flex align-items-center p-2 m-2"> <span class="job-edited-span m-1"></span>Edited</span>
            <span class="d-flex align-items-center p-2 m-2"> <span class="job-inprogress-span m-1"></span>Working</span>
            <!-- 
            <span class="d-flex align-items-center p-2 m-2"> 
              <span
                class="job-incompleted-span m-1"></span>Incompleted</span> -->
            <!-- <span class="d-flex align-items-center p-2 m-2"> <span
                class="job-completed-span m-1"></span>Completed</span> -->
          </div>
        </div>
      </div>
      <div class="table-responsive">
        <table class="table" style="width:100%;overflow: auto;scrollbar-color: blue black !important;">
          <thead class="headers">
            <tr>
              <!-- <th scope="col" *ngFor="let header of headers"   (click)="header.showColumn=!header.showColumn">{{header.columnName}}</th> -->
              <th scope="col" *ngIf="showSI">Job No. <span [ngClass]="['pointer',isDesc?'desc':'asc']"></span> </th>

              <th scope="col" *ngIf="showType">Type</th>
              <th scope="col" *ngIf="showPlant" (click)="isDesc=!isDesc">
                Plant
              </th>
              <th *ngIf="showDepartment">Department</th>
              <th scope="col" *ngIf="showArea" (click)="isDesc=!isDesc">Area</th>
              <th scope="col" width="2em" *ngIf="showJD" (click)="isDesc=!isDesc">Job Description
              </th>
              <th scope="col" *ngIf="showNIP" (click)="isDesc=!isDesc">No of Isolating Points
              </th>
              <th scope="col" *ngIf="showIA" (click)="isDesc=!isDesc">Isolating Locations</th>
              <th *ngIf="showBoard">Board Name</th>
              <th scope="col" *ngIf="showIP" (click)="isDesc=!isDesc">IP Address</th>
              <th scope="col" *ngIf="showPanel" (click)="isDesc=!isDesc">Panel No/<br/>Conveyor No/<br/>Valve No</th>

              <th scope="col" *ngIf="showPS" (click)="isDesc=!isDesc">Job Status</th>
              <th scope="col" *ngIf="showTagName" s>Tag Name</th>
              <th scope="col" *ngIf="showPowerStatus">Power Status</th>
              <th scope="col" *ngIf="showSplasher">Magentic Flasher</th>
              <th scope="col" *ngIf="showRackOTime">RO Time</th>
              <th scope="col" *ngIf="showRackOMethod">RO Method</th>

              <th scope="col" *ngIf="showTag">Tagging</th>
              <th scope="col" *ngIf="showLock">Locking</th>
              <th scope="col" *ngIf="show5Meter">5 Meter Violation</th>
              <th scope="col" *ngIf="showRemark"> Remark </th>

              <th scope="col" *ngIf="showRackITime">RI Time</th>

              <th scope="col" *ngIf="showRackIMethod">RI Method</th>

              <th scope="col" *ngIf="showUntag">UnTagging</th>
              <th scope="col" *ngIf="showUnlock">UnLocking</th>
              <th scope="col" *ngIf="show5Meter">5 Meter Violation</th>
              <th scope="col" *ngIf="showRemark"> Remark </th>


              <!-- <th scope="col" *ngIf="showTime">
                <div class="">Time</div>
              </th> -->
              <!-- <th scope="" *ngIf="showRackProcess">Rack Method</th>
              <th scope="col" *ngIf="showTag">Tag</th>
              <th scope="col" *ngIf="showLock">Lock</th> -->
              <th scope="col" *ngIf="showMTime">Maintenance Time</th>
              <!-- <th scope="col" *ngIf="showSplasher">Magnetic Flasher</th> -->
              <!-- <th scope="col" *ngIf="showRemark">5 Meter Violation</th> -->

              <th scope="col" *ngIf="showPpeViol">PPE Violations</th>
              <th scope="col">Rack history</th>

              <th scope="col" *ngIf="showEdit" (click)="isDesc=!isDesc">Edit</th>
              <!-- <th scope="col"></th> -->
              <th scope="col"></th>

            </tr>
          </thead>
          <tbody>
  <!-- 'unallocated':data.data.panel_data!={}?data.data.panel_data.roi_data.unallocated_job_status && !data.live_status:false, -->
            <!-- table for  multi isolation data representation -->
            <!-- <tr><td><tr><td rowspan=jobsheetData></td></tr></td></tr>  -->
            <!-- <tr *ngFor="let data of jobsheetData|async;let i=index"
              [ngClass]="{'unallocated':data.data.panel_data.roi_data.unallocated_job_status && !data.live_status,'highlight':data.data.panel_data.panel_id=='NA','inprogress':data.live_status,'edited':data.riro_edit_status,'break':data.subCount==data.no_of_isolating_points}"> -->
              <tr *ngFor="let data of jobsheetData|async;let i=index"

              [ngClass]="{'inprogress':data.live_status,'edited':data.riro_edit_status, 'break':data.isbreak}">
              <td *ngIf="showSI">{{data.sl_no}}</td>
              <td *ngIf="showType">{{data.type}}</td>
              <td *ngIf="showPlant">{{data.plant}}</td>
              <td *ngIf="showDepartment">{{data.department}}</td>
              <td *ngIf="showArea">{{data.area}}</td>
              <td *ngIf="showJD">
                {{data.job_description}}</td>


              <td *ngIf="showNIP" [attr.colspan]="data.no_of_isoloating_points">
                {{data.no_of_isolating_points}} </td>
              <td *ngIf="showIA">
                {{data.isolating_locations}}</td>
              <td *ngIf="showBoard">
                <div *ngIf="data.type=='HT';else noHT">
                {{data.board}}</div></td>
              <td *ngIf="showIP">
                {{data.data.ip_address?data.data.ip_address:"--"}}&nbsp;&nbsp;

              </td>
              <td *ngIf="showPanel">
                
                <div class="div" *ngIf="data.type=='HT';else common_no">{{data.data.panel_data.panel_id}}<br /></div>
                <ng-template #common_no>{{data.common_no}}</ng-template>
              </td>
              <td *ngIf="showPS">

                <div [ngClass]="data.data.panel_data.panel_status?'success-badge':'info-badge'">
                  {{data.data.panel_data.panel_status?'Completed':'Pending'}}

                </div>&nbsp;&nbsp;
              </td>
              <td *ngIf="showTagName">
                <div *ngIf="data.type=='HT';else noHT">{{data.tagname}}</div>
              </td>
              <td *ngIf="showPowerStatus">
                <div style="width:5rem"
                  [ngClass]="{'success-badge':data.isolation_status=='isolated','danger-badge':data.isolation_status=='live','info-badge':data.isolation_status=='unknown'}">
                  {{data.isolation_status?data.isolation_status:'--'}}
                </div>
              </td>

              <!-- <td scope="col" id="success" *ngIf="showRack"> -->
              <!-- <button *ngIf="panel" class="btn default btn default-tertiary">
                                                    <a [routerLink]="['/app/jobsheetViolation']"
                                                        [queryParams]="{ id:data['_id'].$oid,type:data['plant'],image_name:data.image_name}"
                                                        target="_blank">
                                                        Rack in</a>
                                                </button> -->
              <!-- <tr>
              <div (click)="RackEditModal(editRack,data,'rack_process')" style="cursor:pointer;" class=""
                *ngIf="data.rack_process!=null;else elsep">
                <td>

                  <div style="pointer-events:none" class="" *ngIf="data.rack_process==='rack_in'">
                    <input type="checkbox" [checked]="data.rack_process==='rack_in'" class="form-check-input"
                      name="RackIn" [id]="'rackIn'+i">&nbsp;<label class="form-check-label" [for]="'rackIn'+i">Rack
                      In</label>
                    <div class="mt-2">

                    </div>
                  </div>
                </td>
                <td style="pointer-events:none" id="success">
                  <div class="" *ngIf="data.rack_process==='rack_out'">
                    <input type="checkbox" [checked]="data.rack_process==='rack_out'" class="form-check-input"
                      name="RackIn" [id]="'rackOut'+i">&nbsp; <label class="form-check-label" [for]="'rackOut'+i">Rack
                      Out</label>


                  </div>
                </td>

                <td style="pointer-events:none" id="success">
                  <div class="" *ngIf="data.rack_process==='maintenance'">
                    <input type="checkbox" [checked]="data.rack_process==='maintenance'" class="form-check-input"
                      name="RackIn" [id]="'maintenance'+i">&nbsp; <label class="form-check-label"
                      [for]="'maintenance'+i">Maintenance
                    </label>


                  </div>
                </td>
              </div>
              <ng-template #elsep>---</ng-template>
            </tr>
            </td> -->
              <td *ngIf="showSplasher">
                <div *ngIf="data.type=='HT';else noHT">
                <div *ngIf="data.riro_data[0]!=null;else elsep">
                  <div *ngIf="data.riro_data[0].magnetic_flasher!=null;else elsep">
                    <div style="width: 5rem;cursor: pointer;" (click)="FlasherImage(data.riro_data[0])"
                      *ngIf="data.riro_data[0].magnetic_flasher.status!=null;else elsep"
                      [ngClass]="{'success-badge':data.riro_data[0].magnetic_flasher.status=='yes','danger-badge':data.riro_data[0].magnetic_flasher.status=='no'}">
                      <fa-icon class="me-2" icon="images" *ngIf="data.riro_data[0].magnetic_flasher.flasher_image">
                      </fa-icon>
                      {{data.riro_data[0].magnetic_flasher.status=='yes'?'Yes':'No'}}
                    </div>
                    <ng-template #elsep>---</ng-template>
                  </div>
                </div>
                </div>
              </td>
              <td *ngIf="showRackOTime">
                <div *ngIf="data.type=='HT';else elseHT">

                <div *ngIf="data.riro_data[0]!=null;else elsep">
                  <div *ngIf="data.riro_data[0].rack_method!=null;else elsep">
                    <div *ngIf="data.riro_data[0].rack_process=='rack_out'">
                      <div class="mt-2" *ngIf="data.riro_data[0].rack_process!=null;else elsep">
                        <span>{{data.riro_data[0].irrd_in_time}}</span> <br>-
                        <br><span>{{data.riro_data[0].irrd_out_time}}</span>
                      </div>
                    </div>
                  </div>
                </div>
                </div>
                <ng-template #elseHT>
                  <div *ngIf="data.type=='conveyor'">
                    <button  class="btn default" (click)="ConveyorImage(conveyorImg,data,'Conveyor')" *ngIf="data.type=='conveyor'">conveyor Image</button> 
                  </div>
                </ng-template>
                <div *ngIf="data.type=='hydraulic'||data.type=='pneumatic'">
                 NA
            
                </div>
              </td>
              <td *ngIf="showRackOMethod">
                <div *ngIf="data.type=='HT';else noHT">

                  <div *ngIf="data.riro_data[0]!=null;else elsep">
                    <div *ngIf="data.riro_data[0].rack_method!=null;else elsep">

                      <div class="" *ngIf="data.riro_data[0].rack_method!=null;else elsep"
                        (dblclick)="data.riro_data[0].riro_key_id?selectEditField(EditField,data.riro_data[0],'rack_method'):''">
                        <!-- {{data.rack_method?data.rack_method:'---'}} -->
                        <div [ngClass]="data.riro_data[0].rack_method==='automatic'?'success-badge':'danger-badge'">
                          {{data.riro_data[0].rack_method?data.riro_data[0].rack_method:'---'}}</div>
                        <!-- <div *ngIf="data.riro_data[0].rack_method!=='manual'" class="success-badge">
                          {{data.riro_data[0].rack_method?data.riro_data[0].rack_method:'---'}}</div>
-->
                      </div>
                    </div>
                  </div>
                </div>
              </td>




              <!-- lock in lock out process has to implement -->
              <td scope="col" id="success" *ngIf="showTag">
                <!-- <button *ngIf="panel" class="btn default btn default-tertiary">
                                              <a [routerLink]="['/app/jobsheetViolation']"
                                                  [queryParams]="{ id:data['_id'].$oid,type:data['plant'],image_name:data.image_name}"
                                                  target="_blank">
                                                  Rack in</a>
                                          </button> -->
                <div *ngIf="data.type=='HT';else noHT">

                  <div *ngIf="data.riro_data[0]!=null;else elsep">
                    <div *ngIf="data.riro_data[0].tag!=null;else elsep"
                      (click)="data.riro_data[0].riro_key_id?selectEditField(EditField,data.riro_data[0],'tag'):''">
                      <div
                        [ngClass]="data.riro_data[0].rack_process=='rack_out' && data.riro_data[0].tag=='untag'? 'danger-badge':'success-badge'"
                        class="">
              <td>

                <div class="" *ngIf="data.riro_data[0].tag!=null;else elsep" style="width:5rem;cursor: pointer;">
                  <fa-icon class="me-2" icon="images"></fa-icon> {{data.riro_data[0].tag}}
                </div>
              </td>

      </div>

    </div>
  </div>
  <ng-template #elsep>---</ng-template>
</div>
</td>
<!-- tag in tag out process has to implement -->
<td scope="col" id="success" *ngIf="showLock" style="width:7rem;">
  <div *ngIf="data.type=='HT';else elsePart">

    <!-- <button *ngIf="panel" class="btn default btn default-tertiary">
                                          <a [routerLink]="['/app/jobsheetViolation']"
                                              [queryParams]="{ id:data['_id'].$oid,type:data['plant'],image_name:data.image_name}"
                                              target="_blank">
                                              Rack in</a>
                                      </button> -->
    <div *ngIf="data.riro_data[0]!=null;else elsep">
      <tr (click)="data.riro_data[0].riro_key_id?selectEditField(EditField,data.riro_data[0],'lock'):''">
        <div
          [ngClass]="data.riro_data[0].rack_process=='rack_out' && data.riro_data[0].lock=='unlock'? 'danger-badge':'success-badge'"
          class="" *ngIf="data.riro_data[0].lock!=null;else elsep">
          <td>
            <div style="width:5rem;cursor: pointer;">
              <fa-icon class="me-2" icon="images"></fa-icon>{{data.riro_data[0].lock}}
            </div>
          </td>
          <!-- <td style="pointer-events:none" id="success">
                    <div class="" *ngIf="data.rack_process==='rack_out'">
                      <input type="checkbox" [checked]="data.rack_process==='rack_out'" class="form-check-input"
                        name="RackIn" [id]="'rackOut'+i">&nbsp; <label class="form-check-label"
                        (click)="ToRackEdit(data)" [for]="'rackOut'+i">Rack Out</label>
                      
                    </div>
                  </td> -->
        </div>
        <ng-template #elsep>---</ng-template>
      </tr>
    </div>
  </div>
  <ng-template #elsePart>
    <div *ngIf="data.type=='hydraulic'||data.type=='pneumatic'">
      <button  class="btn default" (click)="ConveyorImage(conveyorImg,data,'Lock/Unlock')" >Image</button> 

    </div>
    <div *ngIf="data.type=='conveyor'">NA</div>
  </ng-template>
</td>
<td style="width:5rem;" *ngIf="show5Meter">
  <div *ngIf="data.riro_data[0];else elsep"
    (dblclick)="data.riro_data[0].riro_key_id?selectEditField(EditField,data.riro_data[0],'five_meter'):''">
    <div *ngIf="data.riro_data[0].five_meter!=null?!data.riro_data[0].five_meter.violation:false"
      [ngClass]="{'success-badge':data.riro_data[0].five_meter!=null?!data.riro_data[0].five_meter.violation:false,'danger-badge':data.riro_data[0].five_meter!=null?data.riro_data[0].five_meter.violation:false}">
      {{data.riro_data[0].five_meter!=null?
      data.riro_data[0].five_meter.violation?'Yes':'No':'--'}}</div>
    <button style="width:5rem;" *ngIf="data.riro_data[0].five_meter!=null?data.riro_data[0].five_meter.violation:false"
      (click)="ViolImages5meter(data.riro_data[0])" class="danger-badge">
      <fa-icon class="me-2" icon="images"></fa-icon>Yes
    </button>
  </div>
</td>
<td *ngIf="showRemark">
  <div *ngIf="data.riro_data[0]!=null">
    <div *ngIf="data.riro_data[0].riro_key_id"><button style="width: 6rem;" class="btn btn-sm default"
        (click)="data.riro_data[0].remarks==null?RemarkModal(addRemark,data.riro_data[0],'remarks'):EditRemark(addRemark,data.riro_data[0],'remarks')">
        <fa-icon *ngIf="!data.riro_data[0].remarks" icon="plus" class="me-2"
          (dblclick)="selectEditField(EditField,data.riro_data[0],'remarks')"></fa-icon> Remark
      </button>

    </div>
  </div>
</td>


<td *ngIf="showRackITime">
  <div *ngIf="data.type=='HT';else noHT">

    <div *ngIf="data.riro_data[1]!=null;else elsep">
      <div class="mt-2" *ngIf="data.riro_data[1].rack_process!=null;else elsep">
        <span>{{data.riro_data[1].irrd_in_time}}</span> <br>-
        <br><span>{{data.riro_data[1].irrd_out_time}}</span>
      </div>
    </div>
  </div>
</td>
<td *ngIf="showRackIMethod">
  <div *ngIf="data.type=='HT';else noHT">
    <div *ngIf="data.riro_data[1]!=null;else elsep">
      <div class="" *ngIf="data.riro_data[1].rack_method!=null;else elsep"
        (dblclick)="data.riro_data[1].riro_key_id?selectEditField(EditField,data.riro_data[1],'rack_method'):''">
        <!-- {{data.rack_method?data.rack_method:'---'}} -->
        <div [ngClass]="data.riro_data[1].rack_method==='automatic'?'success-badge':'danger-badge'">
          {{data.riro_data[1].rack_method?data.riro_data[1].rack_method:'---'}}</div>
        <!-- <div *ngIf="data.riro_data[0].rack_method!=='manual'" class="success-badge">
              {{data.riro_data[0].rack_method?data.riro_data[0].rack_method:'---'}}</div>
-->
        <!-- </div>  -->
      </div>
    </div>
  </div>
</td>




<!-- lock in lock out process has to implement -->
<td scope="col" id="success" *ngIf="showUntag">
  <!-- <button *ngIf="panel" class="btn default btn default-tertiary">
                                              <a [routerLink]="['/app/jobsheetViolation']"
                                                  [queryParams]="{ id:data['_id'].$oid,type:data['plant'],image_name:data.image_name}"
                                                  target="_blank">
                                                  Rack in</a>
                                          </button> -->
  <div *ngIf="data.type=='HT';else noHT">
    <div *ngIf="data.riro_data[1]!=null;else elsep">
      <tr *ngIf="data.riro_data[1].tag!=null;else elsep"
        (click)="data.riro_data[1].riro_key_id?selectEditField(EditField,data.riro_data[1],'tag'):''">
        <div
          [ngClass]="data.riro_data[1].rack_process=='rack_out' && data.riro_data[1].tag=='untag'? 'danger-badge':'success-badge'"
          class="" *ngIf="data.riro_data[1].tag!=null;else elsep">
          <td>

            <div class="" *ngIf="data.riro_data[1].tag!=null;else elsep" style="width:5rem;cursor: pointer;">
              <fa-icon class="me-2" icon="images"></fa-icon> {{data.riro_data[1].tag}}
            </div>
          </td>

        </div>

      </tr>
    </div>
    <ng-template #elsep>---</ng-template>
  </div>
</td>
<!-- tag in tag out process has to implement -->
<td scope="col" id="success" *ngIf="showUnlock" style="width:7rem;">
  <!-- <button *ngIf="panel" class="btn default btn default-tertiary">
                                          <a [routerLink]="['/app/jobsheetViolation']"
                                              [queryParams]="{ id:data['_id'].$oid,type:data['plant'],image_name:data.image_name}"
                                              target="_blank">
                                              Rack in</a>
                                      </button> -->
  <div *ngIf="data.type=='HT';else noHT">
    <div *ngIf="data.riro_data[1]!=null;else elsep">
      <tr (click)="data.riro_data[1].riro_key_id?selectEditField(EditField,data.riro_data[1],'lock'):''">
        <div
          [ngClass]="data.riro_data[1].rack_process=='rack_out' && data.riro_data[1].lock=='unlock'? 'danger-badge':'success-badge'"
          class="" *ngIf="data.riro_data[1].lock!=null;else elsep">
          <td>
            <div style="width:5rem;cursor: pointer;">
              <fa-icon class="me-2" icon="images"></fa-icon>{{data.riro_data[1].lock}}
            </div>
          </td>
          <!-- <td style="pointer-events:none" id="success">
                    <div class="" *ngIf="data.rack_process==='rack_out'">
                      <input type="checkbox" [checked]="data.rack_process==='rack_out'" class="form-check-input"
                        name="RackIn" [id]="'rackOut'+i">&nbsp; <label class="form-check-label"
                        (click)="ToRackEdit(data)" [for]="'rackOut'+i">Rack Out</label>
                      
                    </div>
                  </td> -->
        </div>
        <ng-template #elsep>---</ng-template>
      </tr>
    </div>
  </div>
</td>
<td *ngIf="show5Meter">
  <div *ngIf="data.riro_data[1];else elsep" style="width:5rem;"
    (dblclick)="data.riro_data[1].riro_key_id?selectEditField(EditField,data.riro_data[1],'five_meter'):''">
    <div *ngIf="data.riro_data[1].five_meter!=null?!data.riro_data[1].five_meter.violation:false"
      [ngClass]="{'success-badge':data.riro_data[1].five_meter!=null?!data.riro_data[1].five_meter.violation:false,'danger-badge':data.riro_data[1].five_meter!=null?data.riro_data[1].five_meter.violation:false}">
      {{data.riro_data[1].five_meter!=null?
      data.riro_data[1].five_meter.violation?'Yes':'No':'--'}}</div>
    <button style="width:5rem;" *ngIf="data.riro_data[1].five_meter!=null?data.riro_data[1].five_meter.violation:false"
      (click)="ViolImages5meter(data.riro_data[1])" class="danger-badge">
      <fa-icon class="me-2" icon="images"></fa-icon>Yes
    </button>
  </div>
</td>
<td *ngIf="showRemark">
  <div *ngIf="data.riro_data[1]!=null">
    <div *ngIf="data.riro_data[1].riro_key_id"><button style="width: 6rem;" class="btn btn-sm default"
        (click)="data.riro_data[1].remarks==null?RemarkModal(addRemark,data.riro_data[1],'remarks'):EditRemark(addRemark,data.riro_data[1],'remarks')">
        <fa-icon *ngIf="!data.riro_data[1].remarks" icon="plus" class="me-2"
          (dblclick)="selectEditField(EditField,data.riro_data[1],'remarks')"></fa-icon> Remark
      </button>
</div>
    </div>
</td>

<td *ngIf="showMTime">
  <div *ngIf="data.riro_data[2]!=null;else elsep">
    <div class="mt-2" *ngIf="data.riro_data[2].rack_process!=null;else elsep">
      <span>{{data.riro_data[2].irrd_in_time}}</span> <br>-
      <br><span>{{data.riro_data[2].irrd_out_time}}</span>
    </div>
  </div>
</td>

<!-- <td *ngIf="showSplasher">
      <div style="width:3rem" *ngIf="data.magnetic_flasher!=null;else elsep"
        [ngClass]="{'success-badge':data.magnetic_flasher=='yes','danger-badge':data.magnetic_flasher=='no'}">
        {{data.magnetic_flasher=='yes'?'Yes':'No'}}</div>
      <ng-template #elsep>---</ng-template>

    </td> -->
<!-- <td style="width:5rem;" (dblclick)="data.riro_key_id?selectEditField(EditField,data,'five_meter'):''">
      <div *ngIf="data.five_meter!=null?!data.five_meter.violation:false"
        [ngClass]="{'success-badge':data.five_meter!=null?!data.five_meter.violation:false,'danger-badge':data.five_meter!=null?data.five_meter.violation:false}">
        {{data.five_meter!=null?
        data.five_meter.violation?'Yes':'No':'--'}}</div>
      <button style="width:inherit;" *ngIf="data.five_meter!=null?data.five_meter.violation:false"
        (click)="ViolImages5meter(data)" class="danger-badge">
        <fa-icon class="me-2" icon="images"></fa-icon>Yes
      </button>
    </td> -->
<td *ngIf="showPpeViol">
  <div class="" *ngIf="data.violation" id="danger">
    <button (click)="ToPPE(data._id.$oid,data.data.panel_data.panel_id,data.data.image_name,data.area,data.plant)"
      style="width:6rem" class="btn btn-sm danger">Show Data</button>
    <!-- <input type="checkbox" [checked]="data.violation" style="pointer-events: none;"
                  class="ppe form-check-input is-invalid" name="RackIn" id="ppe"><label class="form-check-label"
                  style="cursor:pointer;"
                  (click)="ToPPE(data._id.$oid,data.data.panel_data.panel_id,data.data.image_name,data.area,data.plant)">&nbsp;
                  PPE</label> -->
  </div>
</td>
<td>
  <div *ngIf="data.type=='HT'">
  <button style="width: 6rem;" (click)="ToRackEdit(data)" class="btn btn-sm default">
    <!-- <fa-icon icon="list" class="me-1"></fa-icon>  -->
    Show Data
  </button>
  </div>

</td>
<!-- <td>
      <div *ngIf="data.riro_key_id"><button style="width: 6rem;" class="btn btn-sm default"
          (click)="data.remarks==null?RemarkModal(addRemark,data,'remarks'):EditRemark(addRemark,data,'remarks')">
          <fa-icon *ngIf="!data.remarks" icon="plus" class="me-2"
            (dblclick)="selectEditField(EditField,data,'remarks')"></fa-icon> Remark
        </button>
        
      </div>
    </td> -->



<td scope="col" *ngIf="showEdit">
  <div *ngIf="data.type=='HT';">

  <a [routerLink]="['/app/panelROISettings']"
    [queryParams]="{ id:data['_id'].$oid,type:data['plant'],image_name:data.data.image_name,area:data.area,plant:data.plant, isNewJob:'false'}"
    target="_blank">

    <button *ngIf="data.data.panel_data.panel_id" class="btn btn-sm default">
      <span class="text-white">Edit </span>
    </button>

  </a>
  </div>
</td>
<!-- <td>
    <button class="btn btn-sm default" style="width: 6rem;" (click)="AddSubJob(addSubjobModal,data)">
      <fa-icon icon="plus" class="text-danger me-1"></fa-icon>Sub job
    </button>
  </td> -->
<td>
  <button class="btn" [disabled]="isActive" (click)="isDeleteJob(deleteField,data)">
    <fa-icon class="text-danger" icon="trash"></fa-icon>
  </button>
</td>
<!-- <td>ROI<br/>
                <button class="btn default">
                    <a [routerLink]="['/app/jobsheetViolation']" 
                    [queryParams]="{ id:data['_id'].$oid,type:data['plant'],image_name:ip.image_name}" target="_blank">
                    Edit</a>
                </button></td> -->

</tr>
</tbody>
</table>
<div class="d-flex mx-auto justify-content-center p-1">
  <ngb-pagination [collectionSize]="total|async" [(page)]="page" [pageSize]="pageSize"
    style="width: 95vw;overflow-x: auto;" (pageChange)="sliceData()">
  </ngb-pagination>

  <div class="d-flex mx-auto justify-content-start">
    <select class="form-select" style="width:auto" [(ngModel)]="pageSize" (ngModelChange)="sliceData()">
      <option [ngValue]="10">10</option>
      <option [ngValue]="15">15</option>
      <option [ngValue]="20">20</option>
    </select>
  </div>
</div>


</div>
</div>
</div>
</div>
<ng-template #noHT>NA</ng-template>



<ng-template #elsep>---</ng-template>
<ng-template let-modal #stopAppModal>
  <div class="modal-body">
    <div class="modal-confirm">
      <div class="modal-content">
        <div class="modal-header flex-column">
          <div class="icon-box">
            <i class="material-icons">&#xE5CD;</i>
          </div>
          <h4 class="modal-title w-100">Are you sure?</h4>
          <!-- <button type="button" class="btn"  aria-hidden="true">&times;</button> -->
        </div>
        <div class="modal-body">
          <p>Do you really want to stop this Application?</p>
        </div>
        <div class="modal-footer justify-content-center">
          <button type="button" class="btn btn-secondary" (click)="modal.close('Cross click')"
            data-dismiss="modal">Cancel</button>
          <button type="button" class="btn danger" (click)="StopApplication()">Stop</button>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template let-modal #startAppModal>
  <div class="modal-body">
    <div class="modal-confirm">
      <div class="modal-content">
        <!-- <div class="modal-header"> -->
        <!-- <div class="icon-box">
              <i class="material-icons">&#xE5CD;</i>
            </div>
            <h4 class="modal-title w-100">Are you sure?</h4> -->
        <!-- <button type="button" class="btn"  aria-hidden="true">&times;</button> -->
        <!-- </div> -->
        <div class="modal-body flex-column">
          <h5 class="text-dark">Do you want to start the Application ?</h5>
          <!-- <p class="text-muted"><small> If the jobsheet contains panels of named 'NA' it will be deleted.So Please edit those panels,further proceed</small></p> -->
          <p class="text-muted"><small> If the jobsheet contains panels named 'NA', those will be deleted.So please edit
              those panels before proceeding</small></p>
          <form action="">
            <p><small>Config file creation method:</small></p>
            <div class="form-check form-check-inline" id="custome">
              <input type="radio" [formControl]="startAppConfig" [value]=0 (change)="StartAppConfig($event)"
                [defaultValue]=0 id="rackin" class="form-check-input">
              <label for="rackin" class="form-check-label text-muted">RTSP </label>
            </div>
            <div class="form-check form-check-inline" id="custome">
              <input type="radio" [formControl]="startAppConfig" [value]=1 (change)="StartAppConfig($event)"
                [defaultValue]=1 id="rackout" class="form-check-input">
              <label for="rackout" class="form-check-label text-muted">RTSPT </label>
            </div>

          </form>
        </div>
        <div class="modal-footer justify-content-center">
          <button type="button" class="btn btn-secondary" (click)="modal.close('Cross click')"
            data-dismiss="modal">Cancel</button>
          <button type="button" class="btn default" (click)="StartApplication()">Start</button>
        </div>
      </div>
    </div>
  </div>
</ng-template>


<ng-template let-modal #editFields>
  <div class="modal-body">
    <div class="modal-confirm">
      <div class="modal-content">
        <div class="modal-header flex-column">
          <!-- <div class="icon-box">
              <i class="material-icons">&#xE5CD;</i>
            </div> -->
          <h4 class="modal-title w-100">Are you sure?</h4>
          <!-- <button type="button" class="btn"  aria-hidden="true">&times;</button> -->
        </div>
        <div class="modal-body">
          <p>Do you really want to delete these Camera? This process cannot be undone.</p>
        </div>
        <div class="modal-footer justify-content-center">
          <button type="button" class="btn btn-secondary" (click)="modal.close('Cross click')"
            data-dismiss="modal">Cancel</button>
          <button type="button" class="btn danger">Delete</button>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template let-modal #deleteField>
  <div class="modal-body">
    <div class="modal-confirm">
      <div class="modal-content">
        <div class="modal-header flex-column">
          <!-- <div class="icon-box">
              <i class="material-icons">&#xE5CD;</i>
            </div> -->
          <h4 class="modal-title w-100">Are you sure?</h4>
          <!-- <button type="button" class="btn"  aria-hidden="true">&times;</button> -->
        </div>
        <div class="modal-body">
          <p>Do you really want to delete this job? This process cannot be undone.</p>
        </div>
        <div class="modal-footer justify-content-center">
          <button type="button" class="btn btn-secondary" (click)="modal.close('Cross click')"
            data-dismiss="modal">Cancel</button>
          <button type="button" (click)="DeleteJob()" class="btn danger">Delete</button>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template let-modal #resetJobSheet>
  <div class="modal-body">
    <div class="modal-confirm">
      <div class="modal-content">
        <div class="modal-header flex-column">
          <!-- <div class="icon-box">
              <i class="material-icons">&#xE5CD;</i>
            </div> -->
          <h4 class="modal-title w-100">Are you sure?</h4>
          <!-- <button type="button" class="btn"  aria-hidden="true">&times;</button> -->
        </div>
        <div class="modal-body">
          <h5>Do you really want to reset this jobsheet? This process cannot be undone.</h5>
        </div>
        <div class="modal-footer justify-content-center">
          <button type="button" class="btn btn-secondary" (click)="modal.close('Cross click')"
            data-dismiss="modal">Cancel</button>
          <button type="button" (click)="ResetJobSheet()" class="btn danger">Reset</button>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template let-modal #addRemark>
  <div class="modal-body">
    <div class="modal-confirm">
      <div class="modal-content">
        <div class="modal-header flex-column">
          <!-- <div class="icon-box">
              <i class="material-icons">&#xE5CD;</i>
            </div> -->
          <h4 class="modal-title w-100">Add the remark</h4>
          <!-- <button type="button" class="btn"  aria-hidden="true">&times;</button> -->
        </div>
        <div class="modal-body">
          <form action="">
            <textarea rows="8" [formControl]="remarkControl" class="form-control">

                </textarea>
          </form>
          <!-- <p>Do you really want to delete these Camera? This process cannot be undone.</p> -->
        </div>
        <div class="modal-footer justify-content-center">
          <button type="button" class="btn btn-secondary" (click)="modal.close('Cross click')"
            data-dismiss="modal">Cancel</button>
          <button type="button" class="btn default" (click)="SaveRemark()">Save</button>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template let-modal #EditField>
  <div class="modal-body">
    <div class="modal-confirm">
      <div class="modal-content">
        <div class="modal-header flex-column">
          <!-- <div class="icon-box">
              <i class="material-icons">&#xE5CD;</i>
            </div> -->
          <h4 class="modal-title w-100">Edit the {{editField}}</h4>
          <!-- <button type="button" class="btn"  aria-hidden="true">&times;</button> -->
        </div>
        <div class="modal-body">
          <form action="" *ngIf="editField=='rack_method'" id="custome">
            <div class="form-check form-check-inline">
              <input value="automatic" id="1" type="radio" [formControl]="tempField" class="form-check-input">

              <label for="1" class="form-check-label">Automatic</label>
            </div>
            <div class="form-check form-check-inline">
              <input value="manual" id="2" type="radio" [formControl]="tempField" class="form-check-input">

              <label for="2">Manual</label>

            </div>
          </form>

          <form action="" *ngIf="editField=='tag'" id="custome">
            <div class="card mb-3">
              <div class="card-img-top">
                <lib-ngx-image-zoom class="card-img-top" [enableScrollZoom]=true
                  [thumbImage]="IP+'/taglock_image/'+ selectedRiro.lock_tag_image"
                  [fullImage]="IP+'/taglock_image/'+ selectedRiro.lock_tag_image">
                </lib-ngx-image-zoom>
                
                <p class="text-dark mt-3">Time: {{selectedRiro.tag_time}} </p>
              </div>
            </div>
            <div class="form-check form-check-inline mt-3">
              <input rows="5" value="tag" id="1" type="radio" [formControl]="tempField" class="form-check-input">

              <label for="1" class="form-check-label">tag</label>
            </div>
            <div class="form-check form-check-inline">
              <input rows="5" value="untag" id="2" type="radio" [formControl]="tempField" class="form-check-input">

              <label for="2">untag</label>

            </div>
          </form>

          <form action="" *ngIf="editField=='lock'" id="custome">
            <div class="card">
              <div class="card-img-top">
                <lib-ngx-image-zoom class="card-img-top" [enableScrollZoom]=true
                  [thumbImage]="IP+'/taglock_image/'+ selectedRiro.lock_tag_image"
                  [fullImage]="IP+'/taglock_image/'+ selectedRiro.lock_tag_image">
                </lib-ngx-image-zoom>
                <p class="mt-3 text-dark">Time: {{selectedRiro.lock_time}} </p>

              </div>
            </div>
            <div class="form-check form-check-inline mt-3">
              <input rows="5" value="lock" id="1" type="radio" [formControl]="tempField" class="form-check-input">

              <label for="1" class="form-check-label">lock</label>
            </div>
            <div class="form-check form-check-inline">
              <input rows="5" value="unlock" id="2" type="radio" [formControl]="tempField" class="form-check-input">

              <label for="2">unlock</label>

            </div>
          </form>
          <form action="" *ngIf="editField=='five_meter'" id="custome">
            <div class="form-check form-check-inline">
              <input rows="5" value="Yes" id="1" type="radio" [formControl]="tempField" class="form-check-input">

              <label for="1" class="form-check-label">Yes</label>
            </div>
            <div class="form-check form-check-inline">
              <input rows="5" value="No" id="2" type="radio" [formControl]="tempField" class="form-check-input">

              <label for="2">No</label>

            </div>
          </form>
          <!-- <p>Do you really want to delete these Camera? This process cannot be undone.</p> -->
        </div>
        <div class="modal-footer justify-content-center">
          <button type="button" class="btn btn-secondary" (click)="modal.close('Cross click')"
            data-dismiss="modal">Cancel</button>
          <button type="button" class="btn default" (click)="SaveFieldChanges()">Save</button>
        </div>
      </div>
    </div>
  </div>
</ng-template>


<!-- Panel rack in  rack out history -->

<!-- end of panels rack  in  rack out history -->

<ng-template let-modal #addSubjobModal>
  <div class="border">
    <div class="" id="formContent">
      <div style="font-family: 'Times New Roman',
      Times, serif;">
        <h3>
          <b>Add Job</b>
        </h3>
      </div>
      <button type="button" class="btn btn-default close" aria-label="Close" (click)="modal.close('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form action="" class="" [formGroup]="mainJobForm" id="addCameraForm">
        <div class="wrapper-two">
          <div class="form-floating">
            <input (keyup.enter)="keytab($event)" type="text" formControlName="plant" placeholder="Plant"
              class="form-control"
              [ngClass]="mainJobForm.get('plant').invalid && mainJobForm.get('plant').touched?'is-invalid':''"
              id="plant">
            <label for="plant">Plant</label>
          </div>
          <div (keyup.enter)="keytab($event)" class="form-floating">
            <input (keyup.enter)="keytab($event)" type="text" formControlName="area" placeholder="Area"
              class="form-control"
              [ngClass]="mainJobForm.get('area').invalid && mainJobForm.get('area').touched?'is-invalid':''" id="Area">
            <label for="Area">Area</label>
          </div>
          <div (keyup.enter)="keytab($event)" class="form-floating">
            <input (keyup.enter)="keytab($event)" type="text" formControlName="department" placeholder="Department"
              class="form-control"
              [ngClass]="mainJobForm.get('department').invalid && mainJobForm.get('department').touched?'is-invalid':''"
              id="department">
            <label for="department">department</label>
          </div>
          <div (keyup.enter)="keytab($event)" class="form-floating">
            <input (keyup.enter)="keytab($event)" type="text" formControlName="panel_no" placeholder="Panel Number"
              class="form-control"
              [ngClass]="mainJobForm.get('panel_no').invalid && mainJobForm.get('panel_no').touched?'is-invalid':''"
              id="department">
            <label for="department">Panel Number</label>
          </div>
          <div class="form-floating">
            <input type="text" (keyup.enter)="keytab($event)"
              [ngClass]="mainJobForm.get('cameraname').invalid && mainJobForm.get('cameraname').touched?'is-invalid':''"
              formControlName="cameraname" placeholder="Camera name" class="form-control" id="cameraname">
            <label for="cameraname">Camera Name</label>
          </div>
          <div class="form-floating" id="cameraBrand">
            <!-- <input type="text"
              [ngClass]="AddCameraForm.get('camera_brand').invalid && AddCameraForm.get('camera_brand').touched?'is-invalid':''"
              formControlName="camera_brand" placeholder="Camera brand" class="form-control" id="camerabrand">
            <label for="camerabrand">Camera Brand</label> -->
            <ng-multiselect-dropdown #singleSelect [placeholder]="'Camera Brand'" [settings]="dropdownSettings2"
              [data]="cameraBrandList|async" formControlName="camera_brand">
            </ng-multiselect-dropdown>
            <!-- <label>Camera brand</label> -->
          </div>


          <div (keyup.enter)="keytab($event)" class="form-floating">
            <input (keyup.enter)="keytab($event)" type="text" formControlName="board" placeholder="Department"
              class="form-control"
              [ngClass]="mainJobForm.get('board').invalid && mainJobForm.get('board').touched?'is-invalid':''"
              id="board">
            <label for="board">Board name</label>
          </div>
          <div (keyup.enter)="keytab($event)" id="cameraBrand" class="form-floating">
            <!-- <input (keyup.enter)="keytab($event)" type="text" formControlName="type" placeholder="Type"
              class="form-control"
              [ngClass]="AddCameraForm.get('type').invalid && AddCameraForm.get('type').touched?'is-invalid':''"
              id="type">
            <label for="type">Type</label> -->
            <ng-multiselect-dropdown #singleSelect [placeholder]="'Job Type'" [settings]="dropdownSettings2"
              [data]="jobTypes|async" formControlName="type">
            </ng-multiselect-dropdown>
          </div>
          <div class="form-floating" *ngIf="mainJobForm.get('type').valid && mainJobForm.get('type').touched">
            <input (keyup.enter)="keytab($event)" type="text" formControlName="jobInfo" placeholder="Area"
              class="form-control"
              [ngClass]="mainJobForm.get('jobInfo').invalid && mainJobForm.get('jobInfo').touched?'is-invalid':''"
              id="isolating_locations">
            <label for="isolating_locations"> {{mainJobForm.value['type'][0].text=='conveyor'?'Conveyor
              No':mainJobForm.value['type'][0].text=='hydraulic'||mainJobForm.value['type'][0].text=='pneumatic'?'Valve
              No':'Panel no'}}</label>
          </div>
          <div (keyup.enter)="keytab($event)" class="form-floating">
            <input type="text" formControlName="no_of_isolating_points" placeholder="Area" class="form-control"
              [ngClass]="mainJobForm.get('no_of_isolating_points').invalid && mainJobForm.get('no_of_isolating_points').touched?'is-invalid':''"
              id="no_of_isolating_points">
            <label for="no_of_isolating_points">No of Isolating Points</label>
          </div>
          <div class="form-floating">
            <input (keyup.enter)="keytab($event)" type="text" formControlName="isolating_locations" placeholder="Area"
              class="form-control"
              [ngClass]="mainJobForm.get('isolating_locations').invalid && mainJobForm.get('isolating_locations').touched?'is-invalid':''"
              id="isolating_locations">
            <label for="isolating_locations"> Isolating Locations</label>
          </div>

          <div class="form-floating">
            <textarea type="text" rows="12" formControlName="job_description" placeholder="Area" class="form-control"
              [ngClass]="mainJobForm.get('job_description').invalid && mainJobForm.get('job_description').touched?'is-invalid':''"
              id="job_description"></textarea>
            <label for="job_description">Job Description</label>
          </div>



        </div>

        <!-- <div class="form-floating form-control p-3">
              <div class="form-check form-check-inline" id="custome">
                <input type="radio" formControlName="isHooter" value="hooter" (change)="hooterOrRelayConfig($event)"
                  defaultValue="hooter" id="hooter" class="form-check-input">
                <label for="hooter" class="form-check-label text-muted">Hooter</label>
              </div>
              <div class="form-check form-check-inline" id="custome">
                <input type="radio" formControlName="isHooter" value="relay" (change)="hooterOrRelayConfig($event)"
                  defaultValue="relay" id="relay" class="form-check-input">
                <label for="relay" class="form-check-label text-muted">Relay</label>
              </div>
            </div>
            <div class="form-floating" *ngIf="isHooter">
              <input type="text" formControlName="hooterIp" placeholder="User name" class="form-control"
                [ngClass]="AddCameraForm.get('hooterIp').invalid && AddCameraForm.get('hooterIp').touched?'is-invalid':''"
                id="hooterIp">
              <label for="hooterIp">Hooter IP</label>
            </div>
            <div class="form-floating" *ngIf="isRelay">
  
              <input type="text" formControlName="relayIp" placeholder="User name" class="form-control"
                [ngClass]="AddCameraForm.get('relayIp').invalid && AddCameraForm.get('relayIp').touched?'is-invalid':''"
                id="relayIp">
              <label for="relayIp">Relay IP</label>
            </div> -->
        <!-- <div class="form-control p-3 mb-3" id="hooterConfig" *ngIf="isHooter||isRelay">
            
            <label for="hooterConfig" style="color:#3a5b72;"> Hooter/Relay Enabled Violations : &nbsp; &nbsp;</label>
            <div class="form-check form-check-inline" id="custome">
              <input type="checkbox" formControlName="hooterConfig" value="RA" (change)="HooterSettings($event)"
                defaultValue="hooter" id="hooter" class="form-check-input">
              <label for="hooter" class="form-check-label text-muted">RA</label>
            </div>
             <div class="form-check form-check-inline" id="custome">
              <input type="checkbox" formControlName="hooterConfig" value="ppe" (change)="HooterSettings($event)"
                defaultValue="relay" id="relay" class="form-check-input">
              <label for="relay" class="form-check-label text-muted">PPE</label>
            </div> 
            <div class="form-check form-check-inline" id="custome">
              <input type="checkbox" formControlName="hooterConfig" value="ONB" (change)="HooterSettings($event)"
                defaultValue="relay" id="relay" class="form-check-input">
              <label for="relay" class="form-check-label text-muted">ONB</label>
            </div>
          </div> -->



        <div *ngFor="let subjobform of subJobForms;let i=index">
          <ngb-accordion #acc="ngbAccordion">
            <ngb-panel title="&plus; Sub Job Details">
              <ng-template ngbPanelContent>

                <form action="" class="" [formGroup]="subjobform" id="addCameraForm">
                  <div class="wrapper-two">
                    <div class="form-floating">
                      <input type="text" (keyup.enter)="keytab($event)"
                        [ngClass]="subjobform.get('cameraname').invalid && subjobform.get('cameraname').touched?'is-invalid':''"
                        formControlName="cameraname" placeholder="Camera name" class="form-control" id="cameraname">
                      <label for="cameraname">Camera Name</label>
                    </div>
                    <div class="form-floating" id="cameraBrand">
                      <!-- <input type="text"
                      [ngClass]="AddCameraForm.get('camera_brand').invalid && AddCameraForm.get('camera_brand').touched?'is-invalid':''"
                      formControlName="camera_brand" placeholder="Camera brand" class="form-control" id="camerabrand">
                    <label for="camerabrand">Camera Brand</label> -->
                      <ng-multiselect-dropdown #singleSelect [placeholder]="'Camera Brand'"
                        [settings]="dropdownSettings2" [data]="cameraBrandList|async" formControlName="camera_brand">
                      </ng-multiselect-dropdown>
                      <!-- <label>Camera brand</label> -->
                    </div>

                    <div class="form-floating">
                      <input (keyup.enter)="keytab($event)" type="text" formControlName="plant" placeholder="Plant"
                        class="form-control"
                        [ngClass]="subjobform.get('plant').invalid && subjobform.get('plant').touched?'is-invalid':''"
                        id="plant">
                      <label for="plant">Plant</label>
                    </div>
                    <div (keyup.enter)="keytab($event)" class="form-floating">
                      <input (keyup.enter)="keytab($event)" type="text" formControlName="area" placeholder="Area"
                        class="form-control"
                        [ngClass]="subjobform.get('area').invalid && subjobform.get('area').touched?'is-invalid':''"
                        id="Area">
                      <label for="Area">Area</label>
                    </div>
                    <div (keyup.enter)="keytab($event)" class="form-floating">
                      <input (keyup.enter)="keytab($event)" type="text" formControlName="department"
                        placeholder="Department" class="form-control"
                        [ngClass]="subjobform.get('department').invalid && subjobform.get('department').touched?'is-invalid':''"
                        id="department">
                      <label for="department">department</label>
                    </div>

                    <div (keyup.enter)="keytab($event)" id="cameraBrand" class="form-floating">
                      <!-- <input (keyup.enter)="keytab($event)" type="text" formControlName="type" placeholder="Type"
                        class="form-control"
                        [ngClass]="AddCameraForm.get('type').invalid && AddCameraForm.get('type').touched?'is-invalid':''"
                        id="type">
                      <label for="type">Type</label> -->
                      <ng-multiselect-dropdown #singleSelect [placeholder]="'Job Type'" [settings]="dropdownSettings2"
                        [data]="jobTypes|async" formControlName="type">
                      </ng-multiselect-dropdown>
                    </div>
                    <div (keyup.enter)="keytab($event)" class="form-floating">
                      <input (keyup.enter)="keytab($event)" type="text" formControlName="board" placeholder="Board name"
                        class="form-control"
                        [ngClass]="subjobform.get('board').invalid && subjobform.get('board').touched?'is-invalid':''"
                        id="board">
                      <label for="board">department</label>
                    </div>
                    <div (keyup.enter)="keytab($event)" class="form-floating">
                      <input type="text" formControlName="no_of_isolating_points" placeholder="Area"
                        class="form-control"
                        [ngClass]="subjobform.get('no_of_isolating_points').invalid && subjobform.get('no_of_isolating_points').touched?'is-invalid':''"
                        id="no_of_isolating_points">
                      <label for="no_of_isolating_points">No of Isolating Points</label>
                    </div>
                    <div class="form-floating">
                      <input (keyup.enter)="keytab($event)" type="text" formControlName="isolating_locations"
                        placeholder="Area" class="form-control"
                        [ngClass]="subjobform.get('isolating_locations').invalid && subjobform.get('isolating_locations').touched?'is-invalid':''"
                        id="isolating_locations">
                      <label for="isolating_locations"> Isolating Locations</label>
                    </div>

                    <div class="form-floating" *ngIf="subjobform.get('type').valid && subjobform.get('type').touched">
                      <input (keyup.enter)="keytab($event)" type="text" formControlName="jobInfo" placeholder="Area"
                        class="form-control"
                        [ngClass]="subjobform.get('jobInfo').invalid && subjobform.get('jobInfo').touched?'is-invalid':''"
                        id="isolating_locations">
                      <label for="isolating_locations"> {{subjobform.value['type'].text=='conveyor'?'Conveyor
                        No':subjobform.value['type'].text=='hydraulic'||subjobform.value['type'].text=='pneumatic'?'Valve
                        No':'Panel no'}}</label>
                    </div>
                    <div class="form-floating">
                      <textarea type="text" rows="12" formControlName="job_description" placeholder="Area"
                        class="form-control"
                        [ngClass]="subjobform.get('job_description').invalid && subjobform.get('job_description').touched?'is-invalid':''"
                        id="job_description"></textarea>
                      <label for="job_description">Job Description</label>
                    </div>



                  </div>



                  <div class="camera-display">
                    <div class="form-floating">
                      <input type="text" formControlName="username" placeholder="User name" class="form-control"
                        [ngClass]="subjobform.get('username').invalid && subjobform.get('username').touched?'is-invalid':''"
                        id="username">
                      <label for="username">User name</label>
                    </div>
                    <div class="form-floating">
                    </div>
                    <div></div>


                    <div class="form-floating">
                      <input type="text" type="password" formControlName="password" placeholder="Password"
                        class="form-control"
                        [ngClass]="subjobform.get('password').invalid && subjobform.get('password').touched?'is-invalid':''"
                        id="password">
                      <label for="password">Password</label>
                    </div>
                    <div class="icon-circle-medium  icon-circle-lg bg-info-light">
                      <div class="or">
                        <div class="ms-2 me-2 mt-2 mb-2">
                          or
                        </div>
                      </div>
                    </div>
                    <div class="">
                      <div class="form-floating">
                        <input type="text" formControlName="rtsp_url" placeholder="User name" class="form-control"
                          [ngClass]="subjobform.get('rtsp_url').invalid && subjobform.get('rtsp_url').touched?'is-invalid':''"
                          id="username">
                        <label for="username">RTSP</label>
                      </div>
                    </div>
                    <div class="form-floating">
                      <input type="text" formControlName="cameraip" placeholder="Camera ip" class="form-control"
                        [ngClass]="subjobform.get('cameraip').invalid && subjobform.get('cameraip').touched?'is-invalid':''"
                        id="cameraip">
                      <label for="cameraip">Camera IP</label>
                    </div>

                    <div></div>
                    <div></div>
                    <div class="form-floating">
                      <input type="text" formControlName="port" placeholder="Port" class="form-control"
                        [ngClass]="subjobform.get('port').invalid && subjobform.get('port').touched?'is-invalid':''"
                        id="port">
                      <label for="port">Port</label>
                    </div>

                  </div>
                </form>



              </ng-template>
            </ngb-panel>

          </ngb-accordion>
        </div>

        <!-- </div> -->
        <div class="alert alert-success mb-2 mt-2" *ngIf="isSuccess" role="alert">
          {{responseMessage}}
        </div>
        <div class="alert alert-danger mb-2 mt-3" *ngIf="isFail" role="alert">
          {{responseMessage}}
        </div>
        <button type="submit" class="mt-3" (click)="OnAddCameraDetails()" [disabled]="(!isFormValid)||isLoading"><span
            *ngIf="!isLoading">Submit</span>
          <span class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true" *ngIf="isLoading"></span>

        </button>

      </form>
    </div>
  </div>

</ng-template>
<ng-template let-modal #cameraAddModal>
  <div class="border p-2">
    <div class="" id="formContent">
      <div style="font-family: 'Times New Roman',
      Times, serif;">
        <h3>
          <b>Add Job</b>
        </h3>
      </div>
      <button type="button" class="btn btn-default close" aria-label="Close" (click)="modal.close('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form action="" class="border rounded-2 p-3" [formGroup]="AddCameraForm" id="addCameraForm">
        <div class="wrapper-two">


          <div class="form-floating">
            <input (keyup.enter)="keytab($event)" type="text" formControlName="plant" placeholder="Plant"
              class="form-control"
              [ngClass]="AddCameraForm.get('plant').invalid && AddCameraForm.get('plant').touched?'is-invalid':''"
              id="plant">
            <label for="plant">Plant</label>
          </div>
          <div (keyup.enter)="keytab($event)" class="form-floating">
            <input (keyup.enter)="keytab($event)" type="text" formControlName="area" placeholder="Area"
              class="form-control"
              [ngClass]="AddCameraForm.get('area').invalid && AddCameraForm.get('area').touched?'is-invalid':''"
              id="Area">
            <label for="Area">Area</label>
          </div>
          <div (keyup.enter)="keytab($event)" class="form-floating">
            <input (keyup.enter)="keytab($event)" type="text" formControlName="department" placeholder="Department"
              class="form-control"
              [ngClass]="AddCameraForm.get('department').invalid && AddCameraForm.get('department').touched?'is-invalid':''"
              id="department">
            <label for="department">Department</label>
          </div>

          <div (keyup.enter)="keytab($event)" id="cameraBrand" class="form-floating">

            <label for="type">Type</label>
            <ng-multiselect-dropdown #singleSelect [placeholder]="'Job Type'" [settings]="dropdownSettings2"
              [data]="jobTypes|async" formControlName="type">
            </ng-multiselect-dropdown>
          </div>
          <div class="form-floating"
            *ngIf="AddCameraForm.get('type').valid && AddCameraForm.get('type').touched?AddCameraForm.get('type').value[0].text!='HT'?true:false:false">
            <input (keyup.enter)="keytab($event)" type="text" formControlName="jobInfo" placeholder="Area"
              class="form-control"
              [ngClass]="AddCameraForm.get('jobInfo').invalid && AddCameraForm.get('jobInfo').touched?'is-invalid':''"
              id="isolating_locations">
            <label for="isolating_locations"> {{AddCameraForm.value['type'][0].text=='conveyor'?'Conveyor
              No':AddCameraForm.value['type'][0].text=='hydraulic'||AddCameraForm.value['type'][0].text=='pneumatic'?'Valve
              No':'Panel no'}}</label>
          </div>
      
          <div (keyup.enter)="keytab($event)" class="form-floating"
            *ngIf="this.AddCameraForm.get('type').value?this.AddCameraForm.get('type').value[0].text=='HT'?true:false:false">
            <input (keyup.enter)="keytab($event)" type="text" formControlName="board" placeholder="Department"
              class="form-control"
              [ngClass]="AddCameraForm.get('board').invalid && AddCameraForm.get('board').touched?'is-invalid':''"
              id="board">
            <label for="board">Board name</label>
          </div>
          <div (keyup.enter)="keytab($event)" class="form-floating">
            <input type="text" formControlName="no_of_isolating_points" placeholder="Area" class="form-control"
              [ngClass]="AddCameraForm.get('no_of_isolating_points').invalid && AddCameraForm.get('no_of_isolating_points').touched?'is-invalid':''"
              id="no_of_isolating_points">
            <label for="no_of_isolating_points">No of Isolating Points</label>
          </div>
          <div class="form-floating">
            <input (keyup.enter)="keytab($event)" type="text" formControlName="isolating_locations" placeholder="Area"
              class="form-control"
              [ngClass]="AddCameraForm.get('isolating_locations').invalid && AddCameraForm.get('isolating_locations').touched?'is-invalid':''"
              id="isolating_locations">
            <label for="isolating_locations"> Isolating Locations</label>
          </div>
          <div class="form-floating"
            *ngIf="this.AddCameraForm.get('type').value?this.AddCameraForm.get('type').value[0].text=='HT'?true:false:false">
            <input (keyup.enter)="keytab($event)" type="text" formControlName="tagname" placeholder="tag name"
              class="form-control"
              [ngClass]="AddCameraForm.get('tagname').invalid && AddCameraForm.get('tagname').touched?'is-invalid':''"
              id="tagname">
            <label for="tagname"> Tag Name</label>
          </div>

        </div>
        <div class="form-floating">
          <textarea type="text" style="height:7rem ;" rows="12" formControlName="job_description" placeholder="Area"
            class="form-control"
            [ngClass]="AddCameraForm.get('job_description').invalid && AddCameraForm.get('job_description').touched?'is-invalid':''"
            id="job_description"></textarea>
          <label for="job_description">Job Description</label>
        </div>


        <!-- <div class="form-floating form-control p-3">
              <div class="form-check form-check-inline" id="custome">
                <input type="radio" formControlName="isHooter" value="hooter" (change)="hooterOrRelayConfig($event)"
                  defaultValue="hooter" id="hooter" class="form-check-input">
                <label for="hooter" class="form-check-label text-muted">Hooter</label>
              </div>
              <div class="form-check form-check-inline" id="custome">
                <input type="radio" formControlName="isHooter" value="relay" (change)="hooterOrRelayConfig($event)"
                  defaultValue="relay" id="relay" class="form-check-input">
                <label for="relay" class="form-check-label text-muted">Relay</label>
              </div>
            </div>
            <div class="form-floating" *ngIf="isHooter">
              <input type="text" formControlName="hooterIp" placeholder="User name" class="form-control"
                [ngClass]="AddCameraForm.get('hooterIp').invalid && AddCameraForm.get('hooterIp').touched?'is-invalid':''"
                id="hooterIp">
              <label for="hooterIp">Hooter IP</label>
            </div>
            <div class="form-floating" *ngIf="isRelay">
  
              <input type="text" formControlName="relayIp" placeholder="User name" class="form-control"
                [ngClass]="AddCameraForm.get('relayIp').invalid && AddCameraForm.get('relayIp').touched?'is-invalid':''"
                id="relayIp">
              <label for="relayIp">Relay IP</label>
            </div> -->
        <!-- <div class="form-control p-3 mb-3" id="hooterConfig" *ngIf="isHooter||isRelay">
            
            <label for="hooterConfig" style="color:#3a5b72;"> Hooter/Relay Enabled Violations : &nbsp; &nbsp;</label>
            <div class="form-check form-check-inline" id="custome">
              <input type="checkbox" formControlName="hooterConfig" value="RA" (change)="HooterSettings($event)"
                defaultValue="hooter" id="hooter" class="form-check-input">
              <label for="hooter" class="form-check-label text-muted">RA</label>
            </div>
             <div class="form-check form-check-inline" id="custome">
              <input type="checkbox" formControlName="hooterConfig" value="ppe" (change)="HooterSettings($event)"
                defaultValue="relay" id="relay" class="form-check-input">
              <label for="relay" class="form-check-label text-muted">PPE</label>
            </div> 
            <div class="form-check form-check-inline" id="custome">
              <input type="checkbox" formControlName="hooterConfig" value="ONB" (change)="HooterSettings($event)"
                defaultValue="relay" id="relay" class="form-check-input">
              <label for="relay" class="form-check-label text-muted">ONB</label>
            </div>
          </div> -->
        <div class="d-flex justify-centent-center align-items-center mt-3">
          <h5 class="sub-header me-2 ms-2"> <span class="ms-2"> Camera Details</span></h5>
        </div>
        <div class="wrapper-two">
          <div class="form-floating">
            <input type="text" (keyup.enter)="keytab($event)"
              [ngClass]="AddCameraForm.get('cameraname').invalid && AddCameraForm.get('cameraname').touched?'is-invalid':''"
              formControlName="cameraname" placeholder="Camera name" class="form-control" id="cameraname">
            <label for="cameraname">Camera Name</label>
          </div>
          <div class="form-floating" id="cameraBrand">
            <!-- <input type="text"
              [ngClass]="AddCameraForm.get('camera_brand').invalid && AddCameraForm.get('camera_brand').touched?'is-invalid':''"
              formControlName="camera_brand" placeholder="Camera brand" class="form-control" id="camerabrand">
            <label for="camerabrand">Camera Brand</label> -->
            <ng-multiselect-dropdown #singleSelect [placeholder]="'Camera Brand'" [settings]="dropdownSettings2"
              [data]="cameraBrandList|async" formControlName="camera_brand">
            </ng-multiselect-dropdown>
            <!-- <label>Camera brand</label> -->
          </div>
        </div>
        <div class="camera-display">
          <div class="form-floating">
            <input type="text" formControlName="username" placeholder="User name" class="form-control"
              [ngClass]="AddCameraForm.get('username').invalid && AddCameraForm.get('username').touched?'is-invalid':''"
              id="username">
            <label for="username">User name</label>
          </div>
          <div class="form-floating">
          </div>
          <div></div>


          <div class="form-floating">
            <input type="text" type="password" formControlName="password" placeholder="Password" class="form-control"
              [ngClass]="AddCameraForm.get('password').invalid && AddCameraForm.get('password').touched?'is-invalid':''"
              id="password">
            <label for="password">Password</label>
          </div>
          <div class="icon-circle-medium  icon-circle-lg bg-info-light">
            <div class="or">
              <div class="ms-2 me-2 mt-2 mb-2">
                or
              </div>
            </div>
          </div>
          <div class="">
            <div class="form-floating">
              <input type="text" formControlName="rtsp_url" placeholder="User name" class="form-control"
                [ngClass]="AddCameraForm.get('rtsp_url').invalid && AddCameraForm.get('rtsp_url').touched?'is-invalid':''"
                id="username">
              <label for="username">RTSP Url</label>
            </div>
          </div>
          <div class="form-floating">
            <input type="text" formControlName="cameraip" placeholder="Camera ip" class="form-control"
              [ngClass]="AddCameraForm.get('cameraip').invalid && AddCameraForm.get('cameraip').touched?'is-invalid':''"
              id="cameraip">
            <label for="cameraip">Camera IP</label>
          </div>

          <div></div>
          <div></div>
          <div class="form-floating">
            <input type="text" formControlName="port" placeholder="Port" class="form-control"
              [ngClass]="AddCameraForm.get('port').invalid && AddCameraForm.get('port').touched?'is-invalid':''"
              id="port">
            <label for="port">Port</label>
          </div>
          <div></div>
          <!-- <div><button (click)="OnAddSubJob()" class="btn default float-end">
              <fa-icon icon="plus" class="me-2"></fa-icon>Sub job
            </button></div>-->
        </div> 

        <div *ngFor="let subjobform of subJobForms;let i=index">
          <ngb-accordion #acc="ngbAccordion">
            <ngb-panel title="&plus; Sub Job Details">
              <ng-template ngbPanelContent>
                <div>
                  <form action="" class="" [formGroup]="subjobform" id="addCameraForm">
                    <div class="wrapper-two">
                      <div></div>
                      <div>
                        <div class="float-end mb-3"><button class="btn default"
                            (click)="LoadMainJobDetails(subjobform)">Load Mainjob</button></div>
                      </div>

                      <div class="form-floating">
                        <input (keyup.enter)="keytab($event)" type="text" formControlName="plant" placeholder="Plant"
                          class="form-control"
                          [ngClass]="subjobform.get('plant').invalid && subjobform.get('plant').touched?'is-invalid':''"
                          id="plant">
                        <label for="plant">Plant</label>
                      </div>
                      <div (keyup.enter)="keytab($event)" class="form-floating">
                        <input (keyup.enter)="keytab($event)" type="text" formControlName="area" placeholder="Area"
                          class="form-control"
                          [ngClass]="subjobform.get('area').invalid && subjobform.get('area').touched?'is-invalid':''"
                          id="Area">
                        <label for="Area">Area</label>
                      </div>
                      <div (keyup.enter)="keytab($event)" class="form-floating">
                        <input (keyup.enter)="keytab($event)" type="text" formControlName="department"
                          placeholder="Department" class="form-control"
                          [ngClass]="subjobform.get('department').invalid && subjobform.get('department').touched?'is-invalid':''"
                          id="department">
                        <label for="department">department</label>
                      </div>

                      <div (keyup.enter)="keytab($event)" id="cameraBrand" class="form-floating">
                        <!-- <input (keyup.enter)="keytab($event)" type="text" formControlName="type" placeholder="Type"
                        class="form-control"
                        [ngClass]="AddCameraForm.get('type').invalid && AddCameraForm.get('type').touched?'is-invalid':''"
                        id="type">
                      <label for="type">Type</label> -->
                        <ng-multiselect-dropdown #singleSelect [placeholder]="'Job Type'" [settings]="dropdownSettings2"
                          [data]="jobTypes|async" formControlName="type">
                        </ng-multiselect-dropdown>
                      </div>

                      <div class="form-floating"
                        *ngIf="subjobform.get('type').valid && subjobform.get('type').touched?subjobform.get('type').value[0].text!='HT'?true:false:false">
                        <input (keyup.enter)="keytab($event)" type="text" formControlName="jobInfo" placeholder="Area"
                          class="form-control"
                          [ngClass]="subjobform.get('jobInfo').invalid && subjobform.get('jobInfo').touched?'is-invalid':''"
                          id="isolating_locations">
                        <label for="isolating_locations"> {{subjobform.value['type'][0].text=='conveyor'?'Conveyor
                          No':subjobform.value['type'][0].text=='hydraulic'||subjobform.value['type'][0].text=='pneumatic'?'Valve
                          No':'Panel no'}}</label>
                      </div>

                      <div (keyup.enter)="keytab($event)"
                        *ngIf="subjobform.get('type').value?subjobform.get('type').value[0].text=='HT'?true:false:false"
                        class="form-floating">
                        <input (keyup.enter)="keytab($event)" type="text" formControlName="board"
                          placeholder="Board name" class="form-control"
                          [ngClass]="subjobform.get('board').invalid && subjobform.get('board').touched?'is-invalid':''"
                          id="board">
                        <label for="board">Board Name</label>
                      </div>
                      <div (keyup.enter)="keytab($event)"
                        *ngIf="subjobform.get('type').value?subjobform.get('type').value[0].text=='HT'?true:false:false"
                        class="form-floating">
                        <input (keyup.enter)="keytab($event)" type="text" formControlName="tagname"
                          placeholder="Tag name" class="form-control"
                          [ngClass]="subjobform.get('tagname').invalid && subjobform.get('tagname').touched?'is-invalid':''"
                          id="board">
                        <label for="board">Tag Name</label>
                      </div>
                      <div (keyup.enter)="keytab($event)" class="form-floating">
                        <input type="text" formControlName="no_of_isolating_points" placeholder="Area"
                          class="form-control"
                          [ngClass]="subjobform.get('no_of_isolating_points').invalid && subjobform.get('no_of_isolating_points').touched?'is-invalid':''"
                          id="no_of_isolating_points">
                        <label for="no_of_isolating_points">No of Isolating Points</label>
                      </div>
                      <div class="form-floating">
                        <input (keyup.enter)="keytab($event)" type="text" formControlName="isolating_locations"
                          placeholder="Area" class="form-control"
                          [ngClass]="subjobform.get('isolating_locations').invalid && subjobform.get('isolating_locations').touched?'is-invalid':''"
                          id="isolating_locations">
                        <label for="isolating_locations"> Isolating Locations</label>
                      </div>

                    </div>

                    <div class="form-floating" style="height:3rem">
                      <textarea type="text" style="height:5rem" formControlName="job_description" placeholder="Area"
                        class="form-control" rows="12"
                        [ngClass]="subjobform.get('job_description').invalid && subjobform.get('job_description').touched?'is-invalid':''"
                        id="job_description"></textarea>
                      <label for="job_description">Job Description</label>
                    </div>

                    <div class="d-flex justify-centent-center align-items-center mt-3">
                      <h5 class="sub-header me-2 mt-3 ms-2"> <span class="ms-2"> Camera Details</span></h5>
                    </div>
                    <div class="wrapper-two">
                      <div class="form-floating">
                        <input type="text" (keyup.enter)="keytab($event)"
                          [ngClass]="subjobform.get('cameraname').invalid && subjobform.get('cameraname').touched?'is-invalid':''"
                          formControlName="cameraname" placeholder="Camera name" class="form-control" id="cameraname">
                        <label for="cameraname">Camera Name</label>
                      </div>
                      <div class="form-floating" id="cameraBrand">
                        <!-- <input type="text"
                    [ngClass]="AddCameraForm.get('camera_brand').invalid && AddCameraForm.get('camera_brand').touched?'is-invalid':''"
                    formControlName="camera_brand" placeholder="Camera brand" class="form-control" id="camerabrand">
                  <label for="camerabrand">Camera Brand</label> -->
                        <ng-multiselect-dropdown #singleSelect [placeholder]="'Camera Brand'"
                          [settings]="dropdownSettings2" [data]="cameraBrandList|async" formControlName="camera_brand">
                        </ng-multiselect-dropdown>
                        <!-- <label>Camera brand</label> -->
                      </div>
                    </div>

                    <div class="camera-display">
                      <div class="form-floating">
                        <input type="text" formControlName="username" placeholder="User name" class="form-control"
                          [ngClass]="subjobform.get('username').invalid && subjobform.get('username').touched?'is-invalid':''"
                          id="username">
                        <label for="username">User name</label>
                      </div>
                      <div class="form-floating">
                      </div>
                      <div></div>


                      <div class="form-floating">
                        <input type="text" type="password" formControlName="password" placeholder="Password"
                          class="form-control"
                          [ngClass]="subjobform.get('password').invalid && subjobform.get('password').touched?'is-invalid':''"
                          id="password">
                        <label for="password">Password</label>
                      </div>
                      <div class="icon-circle-medium  icon-circle-lg bg-info-light">
                        <div class="or">
                          <div class="ms-2 me-2 mt-2 mb-2">
                            or
                          </div>
                        </div>
                      </div>
                      <div class="">
                        <div class="form-floating">
                          <input type="text" formControlName="rtsp_url" placeholder="User name" class="form-control"
                            [ngClass]="subjobform.get('rtsp_url').invalid && subjobform.get('rtsp_url').touched?'is-invalid':''"
                            id="username">
                          <label for="username">RTSP</label>
                        </div>
                      </div>
                      <div class="form-floating">
                        <input type="text" formControlName="cameraip" placeholder="Camera ip" class="form-control"
                          [ngClass]="subjobform.get('cameraip').invalid && subjobform.get('cameraip').touched?'is-invalid':''"
                          id="cameraip">
                        <label for="cameraip">Camera IP</label>
                      </div>

                      <div></div>
                      <div></div>
                      <div class="form-floating">
                        <input type="text" formControlName="port" placeholder="Port" class="form-control"
                          [ngClass]="subjobform.get('port').invalid && subjobform.get('port').touched?'is-invalid':''"
                          id="port">
                        <label for="port">Port</label>
                      </div>

                    </div>
                    <!-- <div></div><div><button class="btn default"><fa-icon icon="plus" class="me-2"></fa-icon>Sub job</button></div> -->
                  </form>
                </div>


              </ng-template>
            </ngb-panel>

          </ngb-accordion>
        </div>

        <!-- </div> -->
        <div class="alert alert-success mb-2 mt-2" *ngIf="isSuccess" role="alert">
          {{responseMessage}}
        </div>
        <div class="alert alert-danger mb-2 mt-3" *ngIf="isFail" role="alert">
          {{responseMessage}}
        </div>
        <button type="submit" class="mt-3" (click)="OnAddCameraDetails()" [disabled]="(!isFormValid)||isLoading"><span
            *ngIf="!isLoading">Submit</span>
          <span class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true" *ngIf="isLoading"></span>

        </button>

      </form>
    </div>
  </div>

</ng-template>
<ng-template let-modal #editRack>
  <div class="modal-body">
    <div class="modal-confirm">
      <div class="modal-content">

        <div class="modal-body">
          <div class="row mb-5">
            <h5 class="sub-header mb-3">Rack Process</h5>
            <!-- if two images of rack will come il iwll enable this -->
            <!-- <div class="col-6">
                          <div class="card">
                              <lib-ngx-image-zoom class="card-img-top" [enableScrollZoom]=true
                                  thumbImage="http://192.168.1.72:5000/image/PPE_type1_TSK_2_4045_20221202_122829.jpg"
                                  fullImage="http://192.168.1.72:5000/image/PPE_type1_TSK_2_4045_20221202_122829.jpg">
                              </lib-ngx-image-zoom>
                              <div class="card-body">
                                  <p><span class="text-muted me-2">Rack Process:</span>Rack In</p>
                              </div>
                          </div>
                      </div> -->
            <div class="col-12">
              <div class="card">
                <div class="card-img-top">
                  <lib-ngx-image-zoom class="card-img-top" [enableScrollZoom]=true
                    [thumbImage]="IP+'/riro_image/'+ selectedRiro.riro_merged_image"
                    [fullImage]="IP+'/riro_image/'+ selectedRiro.riro_merged_image">
                  </lib-ngx-image-zoom>
                </div>
                <div class="card-body">
                  <p><span class="text-muted me-2">Rack Process:</span>{{selectedRiro.rack_process=='rack_in'?'Rack
                    In':selectedRiro.rack_process=='rack_out'?'Rack Out':'No Process'}} </p>
                  <p class=""><span class="text-dark me-2">Time :</span><b>{{selectedRiro.irrd_in_time}} -
                      {{selectedRiro.irrd_out_time}}</b></p>
                </div>
              </div>
            </div>
          </div>
          <form action="">
            <div class="form-check form-check-inline" id="custome">
              <input type="radio" [formControl]="rackProcess" value="rack_in" (change)="EditRack($event)"
                defaultValue="rack_in" id="rackin" class="form-check-input">
              <label for="rackin" class="form-check-label text-muted">Rack in</label>
            </div>
            <div class="form-check form-check-inline" id="custome">
              <input type="radio" [formControl]="rackProcess" value="rack_out" (change)="EditRack($event)"
                defaultValue="rack_out" id="rackout" class="form-check-input">
              <label for="rackout" class="form-check-label text-muted">Rack Out </label>
            </div>
            <div class="form-check form-check-inline" id="custome">
              <input type="radio" [formControl]="rackProcess" value="maintenance" (change)="EditRack($event)"
                defaultValue="maintenance" id="maintenance" class="form-check-input">
              <label for="maintenance" class="form-check-label text-muted">Maintenance</label>
            </div>
            <div class="form-check form-check-inline" id="custome">
              <input type="radio" [formControl]="rackProcess" value="noProcess" (change)="EditRack($event)"
                defaultValue="noProcess" id="noProcess" class="form-check-input">
              <label for="noProcess" class="form-check-label text-muted">None</label>
            </div>
          </form>
          <!-- <p>Do you really want to delete these Camera? This process cannot be undone.</p> -->
        </div>
        <div class="modal-footer justify-content-center">
          <button type="button" class="btn btn-secondary" (click)="modal.close('Cross click')"
            data-dismiss="modal">Cancel</button>
          <button type="button" class="btn default" (click)="SaveRackChanges()">Save</button>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #conveyorImg let-modal>
  <div style="width: auto; height:41rem !important">
	<div class="modal-header">
		<h4 class="modal-title"><h4 class="modal-title w-100">{{selectedField}} Image</h4>
  </h4>
		<button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
	</div>
	<div class="modal-body">
		<div  id="jobImg" class="p-2">
      <!-- <img class="convImg"  [src]="IP+'/mech_jobimage/'+ (conveyorImage|async)"> -->
      <div class="d-flex justify-content-center" id="conveyor">
      <lib-ngx-image-zoom  [enableScrollZoom]=true [zoomMode]="'click'"
      [thumbImage]="IP+'/mech_jobimage/'+ (conveyorImage|async)"
      [fullImage]="IP+'/mech_jobimage/'+ (conveyorImage|async)">
    </lib-ngx-image-zoom>
   
   </div>
</div>
	</div>
  <div class="modal-footer justify-content-center">
    <button type="button" class="btn btn-secondary" (click)="modal.close('Cross click')"
      data-dismiss="modal">Close</button>
    <button type="button" class="btn default" (click)="getConveyorImg()">Refresh</button>
  </div>
  </div>
</ng-template>


<ng-template let-modal #c>
  <div class="modal-body">
    <div class="modal-confirm">
      <div class="modal-content">
        <div class="modal-header flex-column">
          <!-- <div class="icon-box">
              <i class="material-icons">&#xE5CD;</i>
            </div> -->
          <h4 class="modal-title w-100">{{selectedField}} Image</h4>
          <!-- <button type="button" class="btn"  aria-hidden="true">&times;</button> -->
        </div>
        <div class="modal-body" >
          <div  id="jobImg">
         <!-- <img class="convImg"  [src]="IP+'/mech_jobimage/'+ (conveyorImage|async)"> -->
         <div style="width:20rem;height:15rem;" id="conveyorImg">
         <lib-ngx-image-zoom  [enableScrollZoom]=true
         [thumbImage]="IP+'/mech_jobimage/'+ (conveyorImage|async)"
         [fullImage]="IP+'/mech_jobimage/'+ (conveyorImage|async)">
       </lib-ngx-image-zoom>
      </div>
  </div>
         

          <!-- <p>Do you really want to delete these Camera? This process cannot be undone.</p> -->
        </div>
        <div class="modal-footer justify-content-center">
          <button type="button" class="btn btn-secondary" (click)="modal.close('Cross click')"
            data-dismiss="modal">Close</button>
          <button type="button" class="btn default" (click)="getConveyorImg()">Refresh</button>
        </div>
      </div>
    </div>
  </div>
</ng-template>